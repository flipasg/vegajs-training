var UW=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var HSe=UW((T_e,Z3)=>{(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function xf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var G5={exports:{}},cy={},V5={exports:{}},Ee={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _p=Symbol.for("react.element"),WW=Symbol.for("react.portal"),qW=Symbol.for("react.fragment"),HW=Symbol.for("react.strict_mode"),GW=Symbol.for("react.profiler"),VW=Symbol.for("react.provider"),YW=Symbol.for("react.context"),XW=Symbol.for("react.forward_ref"),QW=Symbol.for("react.suspense"),KW=Symbol.for("react.memo"),JW=Symbol.for("react.lazy"),aF=Symbol.iterator;function ZW(e){return e===null||typeof e!="object"?null:(e=aF&&e[aF]||e["@@iterator"],typeof e=="function"?e:null)}var Y5={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},X5=Object.assign,Q5={};function bf(e,t,n){this.props=e,this.context=t,this.refs=Q5,this.updater=n||Y5}bf.prototype.isReactComponent={};bf.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};bf.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function K5(){}K5.prototype=bf.prototype;function LS(e,t,n){this.props=e,this.context=t,this.refs=Q5,this.updater=n||Y5}var zS=LS.prototype=new K5;zS.constructor=LS;X5(zS,bf.prototype);zS.isPureReactComponent=!0;var uF=Array.isArray,J5=Object.prototype.hasOwnProperty,IS={current:null},Z5={key:!0,ref:!0,__self:!0,__source:!0};function eR(e,t,n){var r,i={},o=null,s=null;if(t!=null)for(r in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(o=""+t.key),t)J5.call(t,r)&&!Z5.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var u=Array(a),l=0;l<a;l++)u[l]=arguments[l+2];i.children=u}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:_p,type:e,key:o,ref:s,props:i,_owner:IS.current}}function eq(e,t){return{$$typeof:_p,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function BS(e){return typeof e=="object"&&e!==null&&e.$$typeof===_p}function tq(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var lF=/\/+/g;function Fx(e,t){return typeof e=="object"&&e!==null&&e.key!=null?tq(""+e.key):t.toString(36)}function Em(e,t,n,r,i){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case _p:case WW:s=!0}}if(s)return s=e,i=i(s),e=r===""?"."+Fx(s,0):r,uF(i)?(n="",e!=null&&(n=e.replace(lF,"$&/")+"/"),Em(i,t,n,"",function(l){return l})):i!=null&&(BS(i)&&(i=eq(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(lF,"$&/")+"/")+e)),t.push(i)),1;if(s=0,r=r===""?".":r+":",uF(e))for(var a=0;a<e.length;a++){o=e[a];var u=r+Fx(o,a);s+=Em(o,t,n,u,i)}else if(u=ZW(e),typeof u=="function")for(e=u.call(e),a=0;!(o=e.next()).done;)o=o.value,u=r+Fx(o,a++),s+=Em(o,t,n,u,i);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function xg(e,t,n){if(e==null)return e;var r=[],i=0;return Em(e,r,"","",function(o){return t.call(n,o,i++)}),r}function nq(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Rn={current:null},Sm={transition:null},rq={ReactCurrentDispatcher:Rn,ReactCurrentBatchConfig:Sm,ReactCurrentOwner:IS};Ee.Children={map:xg,forEach:function(e,t,n){xg(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return xg(e,function(){t++}),t},toArray:function(e){return xg(e,function(t){return t})||[]},only:function(e){if(!BS(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ee.Component=bf;Ee.Fragment=qW;Ee.Profiler=GW;Ee.PureComponent=LS;Ee.StrictMode=HW;Ee.Suspense=QW;Ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rq;Ee.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=X5({},e.props),i=e.key,o=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,s=IS.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(u in t)J5.call(t,u)&&!Z5.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&a!==void 0?a[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var l=0;l<u;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:_p,type:e.type,key:i,ref:o,props:r,_owner:s}};Ee.createContext=function(e){return e={$$typeof:YW,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:VW,_context:e},e.Consumer=e};Ee.createElement=eR;Ee.createFactory=function(e){var t=eR.bind(null,e);return t.type=e,t};Ee.createRef=function(){return{current:null}};Ee.forwardRef=function(e){return{$$typeof:XW,render:e}};Ee.isValidElement=BS;Ee.lazy=function(e){return{$$typeof:JW,_payload:{_status:-1,_result:e},_init:nq}};Ee.memo=function(e,t){return{$$typeof:KW,type:e,compare:t===void 0?null:t}};Ee.startTransition=function(e){var t=Sm.transition;Sm.transition={};try{e()}finally{Sm.transition=t}};Ee.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Ee.useCallback=function(e,t){return Rn.current.useCallback(e,t)};Ee.useContext=function(e){return Rn.current.useContext(e)};Ee.useDebugValue=function(){};Ee.useDeferredValue=function(e){return Rn.current.useDeferredValue(e)};Ee.useEffect=function(e,t){return Rn.current.useEffect(e,t)};Ee.useId=function(){return Rn.current.useId()};Ee.useImperativeHandle=function(e,t,n){return Rn.current.useImperativeHandle(e,t,n)};Ee.useInsertionEffect=function(e,t){return Rn.current.useInsertionEffect(e,t)};Ee.useLayoutEffect=function(e,t){return Rn.current.useLayoutEffect(e,t)};Ee.useMemo=function(e,t){return Rn.current.useMemo(e,t)};Ee.useReducer=function(e,t,n){return Rn.current.useReducer(e,t,n)};Ee.useRef=function(e){return Rn.current.useRef(e)};Ee.useState=function(e){return Rn.current.useState(e)};Ee.useSyncExternalStore=function(e,t,n){return Rn.current.useSyncExternalStore(e,t,n)};Ee.useTransition=function(){return Rn.current.useTransition()};Ee.version="18.2.0";V5.exports=Ee;var jS=V5.exports;const Xo=xf(jS);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iq=jS,oq=Symbol.for("react.element"),sq=Symbol.for("react.fragment"),aq=Object.prototype.hasOwnProperty,uq=iq.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,lq={key:!0,ref:!0,__self:!0,__source:!0};function tR(e,t,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(s=t.ref);for(r in t)aq.call(t,r)&&!lq.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:oq,type:e,key:o,ref:s,props:i,_owner:uq.current}}cy.Fragment=sq;cy.jsx=tR;cy.jsxs=tR;G5.exports=cy;var vu=G5.exports,Ab={},nR={exports:{}},$r={},rR={exports:{}},iR={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(M,O){var B=M.length;M.push(O);e:for(;0<B;){var X=B-1>>>1,te=M[X];if(0<i(te,O))M[X]=O,M[B]=te,B=X;else break e}}function n(M){return M.length===0?null:M[0]}function r(M){if(M.length===0)return null;var O=M[0],B=M.pop();if(B!==O){M[0]=B;e:for(var X=0,te=M.length,xe=te>>>1;X<xe;){var de=2*(X+1)-1,Oe=M[de],zt=de+1,Kr=M[zt];if(0>i(Oe,B))zt<te&&0>i(Kr,Oe)?(M[X]=Kr,M[zt]=B,X=zt):(M[X]=Oe,M[de]=B,X=de);else if(zt<te&&0>i(Kr,B))M[X]=Kr,M[zt]=B,X=zt;else break e}}return O}function i(M,O){var B=M.sortIndex-O.sortIndex;return B!==0?B:M.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();e.unstable_now=function(){return s.now()-a}}var u=[],l=[],c=1,f=null,d=3,h=!1,p=!1,g=!1,m=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(M){for(var O=n(l);O!==null;){if(O.callback===null)r(l);else if(O.startTime<=M)r(l),O.sortIndex=O.expirationTime,t(u,O);else break;O=n(l)}}function b(M){if(g=!1,x(M),!p)if(n(u)!==null)p=!0,N(w);else{var O=n(l);O!==null&&D(b,O.startTime-M)}}function w(M,O){p=!1,g&&(g=!1,y(_),_=-1),h=!0;var B=d;try{for(x(O),f=n(u);f!==null&&(!(f.expirationTime>O)||M&&!A());){var X=f.callback;if(typeof X=="function"){f.callback=null,d=f.priorityLevel;var te=X(f.expirationTime<=O);O=e.unstable_now(),typeof te=="function"?f.callback=te:f===n(u)&&r(u),x(O)}else r(u);f=n(u)}if(f!==null)var xe=!0;else{var de=n(l);de!==null&&D(b,de.startTime-O),xe=!1}return xe}finally{f=null,d=B,h=!1}}var S=!1,E=null,_=-1,$=5,k=-1;function A(){return!(e.unstable_now()-k<$)}function R(){if(E!==null){var M=e.unstable_now();k=M;var O=!0;try{O=E(!0,M)}finally{O?C():(S=!1,E=null)}}else S=!1}var C;if(typeof v=="function")C=function(){v(R)};else if(typeof MessageChannel<"u"){var T=new MessageChannel,F=T.port2;T.port1.onmessage=R,C=function(){F.postMessage(null)}}else C=function(){m(R,0)};function N(M){E=M,S||(S=!0,C())}function D(M,O){_=m(function(){M(e.unstable_now())},O)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(M){M.callback=null},e.unstable_continueExecution=function(){p||h||(p=!0,N(w))},e.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<M?Math.floor(1e3/M):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(M){switch(d){case 1:case 2:case 3:var O=3;break;default:O=d}var B=d;d=O;try{return M()}finally{d=B}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(M,O){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var B=d;d=M;try{return O()}finally{d=B}},e.unstable_scheduleCallback=function(M,O,B){var X=e.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?X+B:X):B=X,M){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=B+te,M={id:c++,callback:O,priorityLevel:M,startTime:B,expirationTime:te,sortIndex:-1},B>X?(M.sortIndex=B,t(l,M),n(u)===null&&M===n(l)&&(g?(y(_),_=-1):g=!0,D(b,B-X))):(M.sortIndex=te,t(u,M),p||h||(p=!0,N(w))),M},e.unstable_shouldYield=A,e.unstable_wrapCallback=function(M){var O=d;return function(){var B=d;d=O;try{return M.apply(this,arguments)}finally{d=B}}}})(iR);rR.exports=iR;var cq=rR.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oR=jS,br=cq;function H(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var sR=new Set,Ah={};function hl(e,t){Tc(e,t),Tc(e+"Capture",t)}function Tc(e,t){for(Ah[e]=t,e=0;e<t.length;e++)sR.add(t[e])}var os=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Fb=Object.prototype.hasOwnProperty,fq=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,cF={},fF={};function dq(e){return Fb.call(fF,e)?!0:Fb.call(cF,e)?!1:fq.test(e)?fF[e]=!0:(cF[e]=!0,!1)}function hq(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function pq(e,t,n,r){if(t===null||typeof t>"u"||hq(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Pn(e,t,n,r,i,o,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=s}var Vt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Vt[e]=new Pn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Vt[t]=new Pn(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Vt[e]=new Pn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Vt[e]=new Pn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Vt[e]=new Pn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Vt[e]=new Pn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Vt[e]=new Pn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Vt[e]=new Pn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Vt[e]=new Pn(e,5,!1,e.toLowerCase(),null,!1,!1)});var US=/[\-:]([a-z])/g;function WS(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(US,WS);Vt[t]=new Pn(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(US,WS);Vt[t]=new Pn(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(US,WS);Vt[t]=new Pn(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Vt[e]=new Pn(e,1,!1,e.toLowerCase(),null,!1,!1)});Vt.xlinkHref=new Pn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Vt[e]=new Pn(e,1,!1,e.toLowerCase(),null,!0,!0)});function qS(e,t,n,r){var i=Vt.hasOwnProperty(t)?Vt[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(pq(t,n,i,r)&&(n=null),r||i===null?dq(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var hs=oR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,bg=Symbol.for("react.element"),Yl=Symbol.for("react.portal"),Xl=Symbol.for("react.fragment"),HS=Symbol.for("react.strict_mode"),Tb=Symbol.for("react.profiler"),aR=Symbol.for("react.provider"),uR=Symbol.for("react.context"),GS=Symbol.for("react.forward_ref"),Mb=Symbol.for("react.suspense"),Nb=Symbol.for("react.suspense_list"),VS=Symbol.for("react.memo"),Fs=Symbol.for("react.lazy"),lR=Symbol.for("react.offscreen"),dF=Symbol.iterator;function Xf(e){return e===null||typeof e!="object"?null:(e=dF&&e[dF]||e["@@iterator"],typeof e=="function"?e:null)}var it=Object.assign,Tx;function Td(e){if(Tx===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Tx=t&&t[1]||""}return`
`+Tx+e}var Mx=!1;function Nx(e,t){if(!e||Mx)return"";Mx=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(s!==1||a!==1)do if(s--,a--,0>a||i[s]!==o[a]){var u=`
`+i[s].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=s&&0<=a);break}}}finally{Mx=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Td(e):""}function gq(e){switch(e.tag){case 5:return Td(e.type);case 16:return Td("Lazy");case 13:return Td("Suspense");case 19:return Td("SuspenseList");case 0:case 2:case 15:return e=Nx(e.type,!1),e;case 11:return e=Nx(e.type.render,!1),e;case 1:return e=Nx(e.type,!0),e;default:return""}}function Ob(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Xl:return"Fragment";case Yl:return"Portal";case Tb:return"Profiler";case HS:return"StrictMode";case Mb:return"Suspense";case Nb:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case uR:return(e.displayName||"Context")+".Consumer";case aR:return(e._context.displayName||"Context")+".Provider";case GS:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case VS:return t=e.displayName||null,t!==null?t:Ob(e.type)||"Memo";case Fs:t=e._payload,e=e._init;try{return Ob(e(t))}catch{}}return null}function mq(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ob(t);case 8:return t===HS?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function da(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function cR(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function yq(e){var t=cR(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function wg(e){e._valueTracker||(e._valueTracker=yq(e))}function fR(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=cR(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function i0(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Db(e,t){var n=t.checked;return it({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function hF(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=da(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function dR(e,t){t=t.checked,t!=null&&qS(e,"checked",t,!1)}function Rb(e,t){dR(e,t);var n=da(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Pb(e,t.type,n):t.hasOwnProperty("defaultValue")&&Pb(e,t.type,da(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function pF(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Pb(e,t,n){(t!=="number"||i0(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Md=Array.isArray;function hc(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+da(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Lb(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(H(91));return it({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function gF(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(H(92));if(Md(n)){if(1<n.length)throw Error(H(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:da(n)}}function hR(e,t){var n=da(t.value),r=da(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function mF(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function pR(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function zb(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?pR(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Eg,gR=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Eg=Eg||document.createElement("div"),Eg.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Eg.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Fh(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var ih={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},vq=["Webkit","ms","Moz","O"];Object.keys(ih).forEach(function(e){vq.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ih[t]=ih[e]})});function mR(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||ih.hasOwnProperty(e)&&ih[e]?(""+t).trim():t+"px"}function yR(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=mR(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var xq=it({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ib(e,t){if(t){if(xq[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(H(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(H(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(H(61))}if(t.style!=null&&typeof t.style!="object")throw Error(H(62))}}function Bb(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jb=null;function YS(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ub=null,pc=null,gc=null;function yF(e){if(e=Cp(e)){if(typeof Ub!="function")throw Error(H(280));var t=e.stateNode;t&&(t=gy(t),Ub(e.stateNode,e.type,t))}}function vR(e){pc?gc?gc.push(e):gc=[e]:pc=e}function xR(){if(pc){var e=pc,t=gc;if(gc=pc=null,yF(e),t)for(e=0;e<t.length;e++)yF(t[e])}}function bR(e,t){return e(t)}function wR(){}var Ox=!1;function ER(e,t,n){if(Ox)return e(t,n);Ox=!0;try{return bR(e,t,n)}finally{Ox=!1,(pc!==null||gc!==null)&&(wR(),xR())}}function Th(e,t){var n=e.stateNode;if(n===null)return null;var r=gy(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(H(231,t,typeof n));return n}var Wb=!1;if(os)try{var Qf={};Object.defineProperty(Qf,"passive",{get:function(){Wb=!0}}),window.addEventListener("test",Qf,Qf),window.removeEventListener("test",Qf,Qf)}catch{Wb=!1}function bq(e,t,n,r,i,o,s,a,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var oh=!1,o0=null,s0=!1,qb=null,wq={onError:function(e){oh=!0,o0=e}};function Eq(e,t,n,r,i,o,s,a,u){oh=!1,o0=null,bq.apply(wq,arguments)}function Sq(e,t,n,r,i,o,s,a,u){if(Eq.apply(this,arguments),oh){if(oh){var l=o0;oh=!1,o0=null}else throw Error(H(198));s0||(s0=!0,qb=l)}}function pl(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function SR(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function vF(e){if(pl(e)!==e)throw Error(H(188))}function _q(e){var t=e.alternate;if(!t){if(t=pl(e),t===null)throw Error(H(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return vF(i),e;if(o===r)return vF(i),t;o=o.sibling}throw Error(H(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,a=i.child;a;){if(a===n){s=!0,n=i,r=o;break}if(a===r){s=!0,r=i,n=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===n){s=!0,n=o,r=i;break}if(a===r){s=!0,r=o,n=i;break}a=a.sibling}if(!s)throw Error(H(189))}}if(n.alternate!==r)throw Error(H(190))}if(n.tag!==3)throw Error(H(188));return n.stateNode.current===n?e:t}function _R(e){return e=_q(e),e!==null?kR(e):null}function kR(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=kR(e);if(t!==null)return t;e=e.sibling}return null}var $R=br.unstable_scheduleCallback,xF=br.unstable_cancelCallback,kq=br.unstable_shouldYield,$q=br.unstable_requestPaint,ft=br.unstable_now,Cq=br.unstable_getCurrentPriorityLevel,XS=br.unstable_ImmediatePriority,CR=br.unstable_UserBlockingPriority,a0=br.unstable_NormalPriority,Aq=br.unstable_LowPriority,AR=br.unstable_IdlePriority,fy=null,Zi=null;function Fq(e){if(Zi&&typeof Zi.onCommitFiberRoot=="function")try{Zi.onCommitFiberRoot(fy,e,void 0,(e.current.flags&128)===128)}catch{}}var vi=Math.clz32?Math.clz32:Nq,Tq=Math.log,Mq=Math.LN2;function Nq(e){return e>>>=0,e===0?32:31-(Tq(e)/Mq|0)|0}var Sg=64,_g=4194304;function Nd(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function u0(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,s=n&268435455;if(s!==0){var a=s&~i;a!==0?r=Nd(a):(o&=s,o!==0&&(r=Nd(o)))}else s=n&~i,s!==0?r=Nd(s):o!==0&&(r=Nd(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,o=t&-t,i>=o||i===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-vi(t),i=1<<n,r|=e[n],t&=~i;return r}function Oq(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Dq(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var s=31-vi(o),a=1<<s,u=i[s];u===-1?(!(a&n)||a&r)&&(i[s]=Oq(a,t)):u<=t&&(e.expiredLanes|=a),o&=~a}}function Hb(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function FR(){var e=Sg;return Sg<<=1,!(Sg&4194240)&&(Sg=64),e}function Dx(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function kp(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-vi(t),e[t]=n}function Rq(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-vi(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}function QS(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-vi(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Le=0;function TR(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var MR,KS,NR,OR,DR,Gb=!1,kg=[],Ks=null,Js=null,Zs=null,Mh=new Map,Nh=new Map,Ps=[],Pq="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function bF(e,t){switch(e){case"focusin":case"focusout":Ks=null;break;case"dragenter":case"dragleave":Js=null;break;case"mouseover":case"mouseout":Zs=null;break;case"pointerover":case"pointerout":Mh.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Nh.delete(t.pointerId)}}function Kf(e,t,n,r,i,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},t!==null&&(t=Cp(t),t!==null&&KS(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function Lq(e,t,n,r,i){switch(t){case"focusin":return Ks=Kf(Ks,e,t,n,r,i),!0;case"dragenter":return Js=Kf(Js,e,t,n,r,i),!0;case"mouseover":return Zs=Kf(Zs,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return Mh.set(o,Kf(Mh.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Nh.set(o,Kf(Nh.get(o)||null,e,t,n,r,i)),!0}return!1}function RR(e){var t=xu(e.target);if(t!==null){var n=pl(t);if(n!==null){if(t=n.tag,t===13){if(t=SR(n),t!==null){e.blockedOn=t,DR(e.priority,function(){NR(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function _m(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Vb(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);jb=r,n.target.dispatchEvent(r),jb=null}else return t=Cp(n),t!==null&&KS(t),e.blockedOn=n,!1;t.shift()}return!0}function wF(e,t,n){_m(e)&&n.delete(t)}function zq(){Gb=!1,Ks!==null&&_m(Ks)&&(Ks=null),Js!==null&&_m(Js)&&(Js=null),Zs!==null&&_m(Zs)&&(Zs=null),Mh.forEach(wF),Nh.forEach(wF)}function Jf(e,t){e.blockedOn===t&&(e.blockedOn=null,Gb||(Gb=!0,br.unstable_scheduleCallback(br.unstable_NormalPriority,zq)))}function Oh(e){function t(i){return Jf(i,e)}if(0<kg.length){Jf(kg[0],e);for(var n=1;n<kg.length;n++){var r=kg[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Ks!==null&&Jf(Ks,e),Js!==null&&Jf(Js,e),Zs!==null&&Jf(Zs,e),Mh.forEach(t),Nh.forEach(t),n=0;n<Ps.length;n++)r=Ps[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Ps.length&&(n=Ps[0],n.blockedOn===null);)RR(n),n.blockedOn===null&&Ps.shift()}var mc=hs.ReactCurrentBatchConfig,l0=!0;function Iq(e,t,n,r){var i=Le,o=mc.transition;mc.transition=null;try{Le=1,JS(e,t,n,r)}finally{Le=i,mc.transition=o}}function Bq(e,t,n,r){var i=Le,o=mc.transition;mc.transition=null;try{Le=4,JS(e,t,n,r)}finally{Le=i,mc.transition=o}}function JS(e,t,n,r){if(l0){var i=Vb(e,t,n,r);if(i===null)qx(e,t,r,c0,n),bF(e,r);else if(Lq(i,e,t,n,r))r.stopPropagation();else if(bF(e,r),t&4&&-1<Pq.indexOf(e)){for(;i!==null;){var o=Cp(i);if(o!==null&&MR(o),o=Vb(e,t,n,r),o===null&&qx(e,t,r,c0,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else qx(e,t,r,null,n)}}var c0=null;function Vb(e,t,n,r){if(c0=null,e=YS(r),e=xu(e),e!==null)if(t=pl(e),t===null)e=null;else if(n=t.tag,n===13){if(e=SR(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return c0=e,null}function PR(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Cq()){case XS:return 1;case CR:return 4;case a0:case Aq:return 16;case AR:return 536870912;default:return 16}default:return 16}}var Bs=null,ZS=null,km=null;function LR(){if(km)return km;var e,t=ZS,n=t.length,r,i="value"in Bs?Bs.value:Bs.textContent,o=i.length;for(e=0;e<n&&t[e]===i[e];e++);var s=n-e;for(r=1;r<=s&&t[n-r]===i[o-r];r++);return km=i.slice(e,1<r?1-r:void 0)}function $m(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function $g(){return!0}function EF(){return!1}function Cr(e){function t(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?$g:EF,this.isPropagationStopped=EF,this}return it(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=$g)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=$g)},persist:function(){},isPersistent:$g}),t}var wf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},e_=Cr(wf),$p=it({},wf,{view:0,detail:0}),jq=Cr($p),Rx,Px,Zf,dy=it({},$p,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:t_,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Zf&&(Zf&&e.type==="mousemove"?(Rx=e.screenX-Zf.screenX,Px=e.screenY-Zf.screenY):Px=Rx=0,Zf=e),Rx)},movementY:function(e){return"movementY"in e?e.movementY:Px}}),SF=Cr(dy),Uq=it({},dy,{dataTransfer:0}),Wq=Cr(Uq),qq=it({},$p,{relatedTarget:0}),Lx=Cr(qq),Hq=it({},wf,{animationName:0,elapsedTime:0,pseudoElement:0}),Gq=Cr(Hq),Vq=it({},wf,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Yq=Cr(Vq),Xq=it({},wf,{data:0}),_F=Cr(Xq),Qq={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Kq={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Jq={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Zq(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Jq[e])?!!t[e]:!1}function t_(){return Zq}var eH=it({},$p,{key:function(e){if(e.key){var t=Qq[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=$m(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Kq[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:t_,charCode:function(e){return e.type==="keypress"?$m(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?$m(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),tH=Cr(eH),nH=it({},dy,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),kF=Cr(nH),rH=it({},$p,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:t_}),iH=Cr(rH),oH=it({},wf,{propertyName:0,elapsedTime:0,pseudoElement:0}),sH=Cr(oH),aH=it({},dy,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),uH=Cr(aH),lH=[9,13,27,32],n_=os&&"CompositionEvent"in window,sh=null;os&&"documentMode"in document&&(sh=document.documentMode);var cH=os&&"TextEvent"in window&&!sh,zR=os&&(!n_||sh&&8<sh&&11>=sh),$F=String.fromCharCode(32),CF=!1;function IR(e,t){switch(e){case"keyup":return lH.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function BR(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ql=!1;function fH(e,t){switch(e){case"compositionend":return BR(t);case"keypress":return t.which!==32?null:(CF=!0,$F);case"textInput":return e=t.data,e===$F&&CF?null:e;default:return null}}function dH(e,t){if(Ql)return e==="compositionend"||!n_&&IR(e,t)?(e=LR(),km=ZS=Bs=null,Ql=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return zR&&t.locale!=="ko"?null:t.data;default:return null}}var hH={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function AF(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!hH[e.type]:t==="textarea"}function jR(e,t,n,r){vR(r),t=f0(t,"onChange"),0<t.length&&(n=new e_("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var ah=null,Dh=null;function pH(e){JR(e,0)}function hy(e){var t=Zl(e);if(fR(t))return e}function gH(e,t){if(e==="change")return t}var UR=!1;if(os){var zx;if(os){var Ix="oninput"in document;if(!Ix){var FF=document.createElement("div");FF.setAttribute("oninput","return;"),Ix=typeof FF.oninput=="function"}zx=Ix}else zx=!1;UR=zx&&(!document.documentMode||9<document.documentMode)}function TF(){ah&&(ah.detachEvent("onpropertychange",WR),Dh=ah=null)}function WR(e){if(e.propertyName==="value"&&hy(Dh)){var t=[];jR(t,Dh,e,YS(e)),ER(pH,t)}}function mH(e,t,n){e==="focusin"?(TF(),ah=t,Dh=n,ah.attachEvent("onpropertychange",WR)):e==="focusout"&&TF()}function yH(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return hy(Dh)}function vH(e,t){if(e==="click")return hy(t)}function xH(e,t){if(e==="input"||e==="change")return hy(t)}function bH(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var _i=typeof Object.is=="function"?Object.is:bH;function Rh(e,t){if(_i(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Fb.call(t,i)||!_i(e[i],t[i]))return!1}return!0}function MF(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function NF(e,t){var n=MF(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=MF(n)}}function qR(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?qR(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function HR(){for(var e=window,t=i0();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=i0(e.document)}return t}function r_(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function wH(e){var t=HR(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&qR(n.ownerDocument.documentElement,n)){if(r!==null&&r_(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=NF(n,o);var s=NF(n,r);i&&s&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var EH=os&&"documentMode"in document&&11>=document.documentMode,Kl=null,Yb=null,uh=null,Xb=!1;function OF(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Xb||Kl==null||Kl!==i0(r)||(r=Kl,"selectionStart"in r&&r_(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),uh&&Rh(uh,r)||(uh=r,r=f0(Yb,"onSelect"),0<r.length&&(t=new e_("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Kl)))}function Cg(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Jl={animationend:Cg("Animation","AnimationEnd"),animationiteration:Cg("Animation","AnimationIteration"),animationstart:Cg("Animation","AnimationStart"),transitionend:Cg("Transition","TransitionEnd")},Bx={},GR={};os&&(GR=document.createElement("div").style,"AnimationEvent"in window||(delete Jl.animationend.animation,delete Jl.animationiteration.animation,delete Jl.animationstart.animation),"TransitionEvent"in window||delete Jl.transitionend.transition);function py(e){if(Bx[e])return Bx[e];if(!Jl[e])return e;var t=Jl[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in GR)return Bx[e]=t[n];return e}var VR=py("animationend"),YR=py("animationiteration"),XR=py("animationstart"),QR=py("transitionend"),KR=new Map,DF="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ta(e,t){KR.set(e,t),hl(t,[e])}for(var jx=0;jx<DF.length;jx++){var Ux=DF[jx],SH=Ux.toLowerCase(),_H=Ux[0].toUpperCase()+Ux.slice(1);Ta(SH,"on"+_H)}Ta(VR,"onAnimationEnd");Ta(YR,"onAnimationIteration");Ta(XR,"onAnimationStart");Ta("dblclick","onDoubleClick");Ta("focusin","onFocus");Ta("focusout","onBlur");Ta(QR,"onTransitionEnd");Tc("onMouseEnter",["mouseout","mouseover"]);Tc("onMouseLeave",["mouseout","mouseover"]);Tc("onPointerEnter",["pointerout","pointerover"]);Tc("onPointerLeave",["pointerout","pointerover"]);hl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));hl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));hl("onBeforeInput",["compositionend","keypress","textInput","paste"]);hl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));hl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));hl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Od="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kH=new Set("cancel close invalid load scroll toggle".split(" ").concat(Od));function RF(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Sq(r,t,void 0,e),e.currentTarget=null}function JR(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var s=r.length-1;0<=s;s--){var a=r[s],u=a.instance,l=a.currentTarget;if(a=a.listener,u!==o&&i.isPropagationStopped())break e;RF(i,a,l),o=u}else for(s=0;s<r.length;s++){if(a=r[s],u=a.instance,l=a.currentTarget,a=a.listener,u!==o&&i.isPropagationStopped())break e;RF(i,a,l),o=u}}}if(s0)throw e=qb,s0=!1,qb=null,e}function Ve(e,t){var n=t[ew];n===void 0&&(n=t[ew]=new Set);var r=e+"__bubble";n.has(r)||(ZR(t,e,2,!1),n.add(r))}function Wx(e,t,n){var r=0;t&&(r|=4),ZR(n,e,r,t)}var Ag="_reactListening"+Math.random().toString(36).slice(2);function Ph(e){if(!e[Ag]){e[Ag]=!0,sR.forEach(function(n){n!=="selectionchange"&&(kH.has(n)||Wx(n,!1,e),Wx(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ag]||(t[Ag]=!0,Wx("selectionchange",!1,t))}}function ZR(e,t,n,r){switch(PR(t)){case 1:var i=Iq;break;case 4:i=Bq;break;default:i=JS}n=i.bind(null,t,n,e),i=void 0,!Wb||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function qx(e,t,n,r,i){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var u=s.tag;if((u===3||u===4)&&(u=s.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;s=s.return}for(;a!==null;){if(s=xu(a),s===null)return;if(u=s.tag,u===5||u===6){r=o=s;continue e}a=a.parentNode}}r=r.return}ER(function(){var l=o,c=YS(n),f=[];e:{var d=KR.get(e);if(d!==void 0){var h=e_,p=e;switch(e){case"keypress":if($m(n)===0)break e;case"keydown":case"keyup":h=tH;break;case"focusin":p="focus",h=Lx;break;case"focusout":p="blur",h=Lx;break;case"beforeblur":case"afterblur":h=Lx;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=SF;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=Wq;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=iH;break;case VR:case YR:case XR:h=Gq;break;case QR:h=sH;break;case"scroll":h=jq;break;case"wheel":h=uH;break;case"copy":case"cut":case"paste":h=Yq;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=kF}var g=(t&4)!==0,m=!g&&e==="scroll",y=g?d!==null?d+"Capture":null:d;g=[];for(var v=l,x;v!==null;){x=v;var b=x.stateNode;if(x.tag===5&&b!==null&&(x=b,y!==null&&(b=Th(v,y),b!=null&&g.push(Lh(v,b,x)))),m)break;v=v.return}0<g.length&&(d=new h(d,p,null,n,c),f.push({event:d,listeners:g}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",d&&n!==jb&&(p=n.relatedTarget||n.fromElement)&&(xu(p)||p[ss]))break e;if((h||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=l,p=p?xu(p):null,p!==null&&(m=pl(p),p!==m||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=l),h!==p)){if(g=SF,b="onMouseLeave",y="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(g=kF,b="onPointerLeave",y="onPointerEnter",v="pointer"),m=h==null?d:Zl(h),x=p==null?d:Zl(p),d=new g(b,v+"leave",h,n,c),d.target=m,d.relatedTarget=x,b=null,xu(c)===l&&(g=new g(y,v+"enter",p,n,c),g.target=x,g.relatedTarget=m,b=g),m=b,h&&p)t:{for(g=h,y=p,v=0,x=g;x;x=Ml(x))v++;for(x=0,b=y;b;b=Ml(b))x++;for(;0<v-x;)g=Ml(g),v--;for(;0<x-v;)y=Ml(y),x--;for(;v--;){if(g===y||y!==null&&g===y.alternate)break t;g=Ml(g),y=Ml(y)}g=null}else g=null;h!==null&&PF(f,d,h,g,!1),p!==null&&m!==null&&PF(f,m,p,g,!0)}}e:{if(d=l?Zl(l):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var w=gH;else if(AF(d))if(UR)w=xH;else{w=yH;var S=mH}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(w=vH);if(w&&(w=w(e,l))){jR(f,w,n,c);break e}S&&S(e,d,l),e==="focusout"&&(S=d._wrapperState)&&S.controlled&&d.type==="number"&&Pb(d,"number",d.value)}switch(S=l?Zl(l):window,e){case"focusin":(AF(S)||S.contentEditable==="true")&&(Kl=S,Yb=l,uh=null);break;case"focusout":uh=Yb=Kl=null;break;case"mousedown":Xb=!0;break;case"contextmenu":case"mouseup":case"dragend":Xb=!1,OF(f,n,c);break;case"selectionchange":if(EH)break;case"keydown":case"keyup":OF(f,n,c)}var E;if(n_)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Ql?IR(e,n)&&(_="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(zR&&n.locale!=="ko"&&(Ql||_!=="onCompositionStart"?_==="onCompositionEnd"&&Ql&&(E=LR()):(Bs=c,ZS="value"in Bs?Bs.value:Bs.textContent,Ql=!0)),S=f0(l,_),0<S.length&&(_=new _F(_,e,null,n,c),f.push({event:_,listeners:S}),E?_.data=E:(E=BR(n),E!==null&&(_.data=E)))),(E=cH?fH(e,n):dH(e,n))&&(l=f0(l,"onBeforeInput"),0<l.length&&(c=new _F("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:l}),c.data=E))}JR(f,t)})}function Lh(e,t,n){return{instance:e,listener:t,currentTarget:n}}function f0(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=Th(e,n),o!=null&&r.unshift(Lh(e,o,i)),o=Th(e,t),o!=null&&r.push(Lh(e,o,i))),e=e.return}return r}function Ml(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function PF(e,t,n,r,i){for(var o=t._reactName,s=[];n!==null&&n!==r;){var a=n,u=a.alternate,l=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&l!==null&&(a=l,i?(u=Th(n,o),u!=null&&s.unshift(Lh(n,u,a))):i||(u=Th(n,o),u!=null&&s.push(Lh(n,u,a)))),n=n.return}s.length!==0&&e.push({event:t,listeners:s})}var $H=/\r\n?/g,CH=/\u0000|\uFFFD/g;function LF(e){return(typeof e=="string"?e:""+e).replace($H,`
`).replace(CH,"")}function Fg(e,t,n){if(t=LF(t),LF(e)!==t&&n)throw Error(H(425))}function d0(){}var Qb=null,Kb=null;function Jb(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Zb=typeof setTimeout=="function"?setTimeout:void 0,AH=typeof clearTimeout=="function"?clearTimeout:void 0,zF=typeof Promise=="function"?Promise:void 0,FH=typeof queueMicrotask=="function"?queueMicrotask:typeof zF<"u"?function(e){return zF.resolve(null).then(e).catch(TH)}:Zb;function TH(e){setTimeout(function(){throw e})}function Hx(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),Oh(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Oh(t)}function ea(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function IF(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Ef=Math.random().toString(36).slice(2),Vi="__reactFiber$"+Ef,zh="__reactProps$"+Ef,ss="__reactContainer$"+Ef,ew="__reactEvents$"+Ef,MH="__reactListeners$"+Ef,NH="__reactHandles$"+Ef;function xu(e){var t=e[Vi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ss]||n[Vi]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=IF(e);e!==null;){if(n=e[Vi])return n;e=IF(e)}return t}e=n,n=e.parentNode}return null}function Cp(e){return e=e[Vi]||e[ss],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Zl(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(H(33))}function gy(e){return e[zh]||null}var tw=[],ec=-1;function Ma(e){return{current:e}}function Qe(e){0>ec||(e.current=tw[ec],tw[ec]=null,ec--)}function qe(e,t){ec++,tw[ec]=e.current,e.current=t}var ha={},gn=Ma(ha),Yn=Ma(!1),Iu=ha;function Mc(e,t){var n=e.type.contextTypes;if(!n)return ha;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Xn(e){return e=e.childContextTypes,e!=null}function h0(){Qe(Yn),Qe(gn)}function BF(e,t,n){if(gn.current!==ha)throw Error(H(168));qe(gn,t),qe(Yn,n)}function e4(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(H(108,mq(e)||"Unknown",i));return it({},n,r)}function p0(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ha,Iu=gn.current,qe(gn,e),qe(Yn,Yn.current),!0}function jF(e,t,n){var r=e.stateNode;if(!r)throw Error(H(169));n?(e=e4(e,t,Iu),r.__reactInternalMemoizedMergedChildContext=e,Qe(Yn),Qe(gn),qe(gn,e)):Qe(Yn),qe(Yn,n)}var Po=null,my=!1,Gx=!1;function t4(e){Po===null?Po=[e]:Po.push(e)}function OH(e){my=!0,t4(e)}function Na(){if(!Gx&&Po!==null){Gx=!0;var e=0,t=Le;try{var n=Po;for(Le=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Po=null,my=!1}catch(i){throw Po!==null&&(Po=Po.slice(e+1)),$R(XS,Na),i}finally{Le=t,Gx=!1}}return null}var tc=[],nc=0,g0=null,m0=0,Tr=[],Mr=0,Bu=null,jo=1,Uo="";function au(e,t){tc[nc++]=m0,tc[nc++]=g0,g0=e,m0=t}function n4(e,t,n){Tr[Mr++]=jo,Tr[Mr++]=Uo,Tr[Mr++]=Bu,Bu=e;var r=jo;e=Uo;var i=32-vi(r)-1;r&=~(1<<i),n+=1;var o=32-vi(t)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,jo=1<<32-vi(t)+i|n<<i|r,Uo=o+e}else jo=1<<o|n<<i|r,Uo=e}function i_(e){e.return!==null&&(au(e,1),n4(e,1,0))}function o_(e){for(;e===g0;)g0=tc[--nc],tc[nc]=null,m0=tc[--nc],tc[nc]=null;for(;e===Bu;)Bu=Tr[--Mr],Tr[Mr]=null,Uo=Tr[--Mr],Tr[Mr]=null,jo=Tr[--Mr],Tr[Mr]=null}var vr=null,gr=null,Je=!1,ai=null;function r4(e,t){var n=Nr(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function UF(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,vr=e,gr=ea(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,vr=e,gr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Bu!==null?{id:jo,overflow:Uo}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Nr(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,vr=e,gr=null,!0):!1;default:return!1}}function nw(e){return(e.mode&1)!==0&&(e.flags&128)===0}function rw(e){if(Je){var t=gr;if(t){var n=t;if(!UF(e,t)){if(nw(e))throw Error(H(418));t=ea(n.nextSibling);var r=vr;t&&UF(e,t)?r4(r,n):(e.flags=e.flags&-4097|2,Je=!1,vr=e)}}else{if(nw(e))throw Error(H(418));e.flags=e.flags&-4097|2,Je=!1,vr=e}}}function WF(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;vr=e}function Tg(e){if(e!==vr)return!1;if(!Je)return WF(e),Je=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Jb(e.type,e.memoizedProps)),t&&(t=gr)){if(nw(e))throw i4(),Error(H(418));for(;t;)r4(e,t),t=ea(t.nextSibling)}if(WF(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(H(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){gr=ea(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}gr=null}}else gr=vr?ea(e.stateNode.nextSibling):null;return!0}function i4(){for(var e=gr;e;)e=ea(e.nextSibling)}function Nc(){gr=vr=null,Je=!1}function s_(e){ai===null?ai=[e]:ai.push(e)}var DH=hs.ReactCurrentBatchConfig;function ri(e,t){if(e&&e.defaultProps){t=it({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var y0=Ma(null),v0=null,rc=null,a_=null;function u_(){a_=rc=v0=null}function l_(e){var t=y0.current;Qe(y0),e._currentValue=t}function iw(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function yc(e,t){v0=e,a_=rc=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Gn=!0),e.firstContext=null)}function Br(e){var t=e._currentValue;if(a_!==e)if(e={context:e,memoizedValue:t,next:null},rc===null){if(v0===null)throw Error(H(308));rc=e,v0.dependencies={lanes:0,firstContext:e}}else rc=rc.next=e;return t}var bu=null;function c_(e){bu===null?bu=[e]:bu.push(e)}function o4(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,c_(t)):(n.next=i.next,i.next=n),t.interleaved=n,as(e,r)}function as(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Ts=!1;function f_(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function s4(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Qo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ta(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,$e&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,as(e,n)}return i=r.interleaved,i===null?(t.next=t,c_(r)):(t.next=i.next,i.next=t),r.interleaved=t,as(e,n)}function Cm(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,QS(e,n)}}function qF(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=t:o=o.next=t}else i=o=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function x0(e,t,n,r){var i=e.updateQueue;Ts=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,l=u.next;u.next=null,s===null?o=l:s.next=l,s=u;var c=e.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==s&&(a===null?c.firstBaseUpdate=l:a.next=l,c.lastBaseUpdate=u))}if(o!==null){var f=i.baseState;s=0,c=l=u=null,a=o;do{var d=a.lane,h=a.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,g=a;switch(d=t,h=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){f=p.call(h,f,d);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,d=typeof p=="function"?p.call(h,f,d):p,d==null)break e;f=it({},f,d);break e;case 2:Ts=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else h={eventTime:h,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(l=c=h,u=f):c=c.next=h,s|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(1);if(c===null&&(u=f),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,t=i.shared.interleaved,t!==null){i=t;do s|=i.lane,i=i.next;while(i!==t)}else o===null&&(i.shared.lanes=0);Uu|=s,e.lanes=s,e.memoizedState=f}}function HF(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(H(191,i));i.call(r)}}}var a4=new oR.Component().refs;function ow(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:it({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var yy={isMounted:function(e){return(e=e._reactInternals)?pl(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Fn(),i=ra(e),o=Qo(r,i);o.payload=t,n!=null&&(o.callback=n),t=ta(e,o,i),t!==null&&(xi(t,e,i,r),Cm(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Fn(),i=ra(e),o=Qo(r,i);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=ta(e,o,i),t!==null&&(xi(t,e,i,r),Cm(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Fn(),r=ra(e),i=Qo(n,r);i.tag=2,t!=null&&(i.callback=t),t=ta(e,i,r),t!==null&&(xi(t,e,r,n),Cm(t,e,r))}};function GF(e,t,n,r,i,o,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,s):t.prototype&&t.prototype.isPureReactComponent?!Rh(n,r)||!Rh(i,o):!0}function u4(e,t,n){var r=!1,i=ha,o=t.contextType;return typeof o=="object"&&o!==null?o=Br(o):(i=Xn(t)?Iu:gn.current,r=t.contextTypes,o=(r=r!=null)?Mc(e,i):ha),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=yy,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function VF(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&yy.enqueueReplaceState(t,t.state,null)}function sw(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=a4,f_(e);var o=t.contextType;typeof o=="object"&&o!==null?i.context=Br(o):(o=Xn(t)?Iu:gn.current,i.context=Mc(e,o)),i.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(ow(e,t,o,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&yy.enqueueReplaceState(i,i.state,null),x0(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function ed(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(H(309));var r=n.stateNode}if(!r)throw Error(H(147,e));var i=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(s){var a=i.refs;a===a4&&(a=i.refs={}),s===null?delete a[o]:a[o]=s},t._stringRef=o,t)}if(typeof e!="string")throw Error(H(284));if(!n._owner)throw Error(H(290,e))}return e}function Mg(e,t){throw e=Object.prototype.toString.call(t),Error(H(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function YF(e){var t=e._init;return t(e._payload)}function l4(e){function t(y,v){if(e){var x=y.deletions;x===null?(y.deletions=[v],y.flags|=16):x.push(v)}}function n(y,v){if(!e)return null;for(;v!==null;)t(y,v),v=v.sibling;return null}function r(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function i(y,v){return y=ia(y,v),y.index=0,y.sibling=null,y}function o(y,v,x){return y.index=x,e?(x=y.alternate,x!==null?(x=x.index,x<v?(y.flags|=2,v):x):(y.flags|=2,v)):(y.flags|=1048576,v)}function s(y){return e&&y.alternate===null&&(y.flags|=2),y}function a(y,v,x,b){return v===null||v.tag!==6?(v=Zx(x,y.mode,b),v.return=y,v):(v=i(v,x),v.return=y,v)}function u(y,v,x,b){var w=x.type;return w===Xl?c(y,v,x.props.children,b,x.key):v!==null&&(v.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Fs&&YF(w)===v.type)?(b=i(v,x.props),b.ref=ed(y,v,x),b.return=y,b):(b=Om(x.type,x.key,x.props,null,y.mode,b),b.ref=ed(y,v,x),b.return=y,b)}function l(y,v,x,b){return v===null||v.tag!==4||v.stateNode.containerInfo!==x.containerInfo||v.stateNode.implementation!==x.implementation?(v=e2(x,y.mode,b),v.return=y,v):(v=i(v,x.children||[]),v.return=y,v)}function c(y,v,x,b,w){return v===null||v.tag!==7?(v=Au(x,y.mode,b,w),v.return=y,v):(v=i(v,x),v.return=y,v)}function f(y,v,x){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Zx(""+v,y.mode,x),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case bg:return x=Om(v.type,v.key,v.props,null,y.mode,x),x.ref=ed(y,null,v),x.return=y,x;case Yl:return v=e2(v,y.mode,x),v.return=y,v;case Fs:var b=v._init;return f(y,b(v._payload),x)}if(Md(v)||Xf(v))return v=Au(v,y.mode,x,null),v.return=y,v;Mg(y,v)}return null}function d(y,v,x,b){var w=v!==null?v.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return w!==null?null:a(y,v,""+x,b);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case bg:return x.key===w?u(y,v,x,b):null;case Yl:return x.key===w?l(y,v,x,b):null;case Fs:return w=x._init,d(y,v,w(x._payload),b)}if(Md(x)||Xf(x))return w!==null?null:c(y,v,x,b,null);Mg(y,x)}return null}function h(y,v,x,b,w){if(typeof b=="string"&&b!==""||typeof b=="number")return y=y.get(x)||null,a(v,y,""+b,w);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case bg:return y=y.get(b.key===null?x:b.key)||null,u(v,y,b,w);case Yl:return y=y.get(b.key===null?x:b.key)||null,l(v,y,b,w);case Fs:var S=b._init;return h(y,v,x,S(b._payload),w)}if(Md(b)||Xf(b))return y=y.get(x)||null,c(v,y,b,w,null);Mg(v,b)}return null}function p(y,v,x,b){for(var w=null,S=null,E=v,_=v=0,$=null;E!==null&&_<x.length;_++){E.index>_?($=E,E=null):$=E.sibling;var k=d(y,E,x[_],b);if(k===null){E===null&&(E=$);break}e&&E&&k.alternate===null&&t(y,E),v=o(k,v,_),S===null?w=k:S.sibling=k,S=k,E=$}if(_===x.length)return n(y,E),Je&&au(y,_),w;if(E===null){for(;_<x.length;_++)E=f(y,x[_],b),E!==null&&(v=o(E,v,_),S===null?w=E:S.sibling=E,S=E);return Je&&au(y,_),w}for(E=r(y,E);_<x.length;_++)$=h(E,y,_,x[_],b),$!==null&&(e&&$.alternate!==null&&E.delete($.key===null?_:$.key),v=o($,v,_),S===null?w=$:S.sibling=$,S=$);return e&&E.forEach(function(A){return t(y,A)}),Je&&au(y,_),w}function g(y,v,x,b){var w=Xf(x);if(typeof w!="function")throw Error(H(150));if(x=w.call(x),x==null)throw Error(H(151));for(var S=w=null,E=v,_=v=0,$=null,k=x.next();E!==null&&!k.done;_++,k=x.next()){E.index>_?($=E,E=null):$=E.sibling;var A=d(y,E,k.value,b);if(A===null){E===null&&(E=$);break}e&&E&&A.alternate===null&&t(y,E),v=o(A,v,_),S===null?w=A:S.sibling=A,S=A,E=$}if(k.done)return n(y,E),Je&&au(y,_),w;if(E===null){for(;!k.done;_++,k=x.next())k=f(y,k.value,b),k!==null&&(v=o(k,v,_),S===null?w=k:S.sibling=k,S=k);return Je&&au(y,_),w}for(E=r(y,E);!k.done;_++,k=x.next())k=h(E,y,_,k.value,b),k!==null&&(e&&k.alternate!==null&&E.delete(k.key===null?_:k.key),v=o(k,v,_),S===null?w=k:S.sibling=k,S=k);return e&&E.forEach(function(R){return t(y,R)}),Je&&au(y,_),w}function m(y,v,x,b){if(typeof x=="object"&&x!==null&&x.type===Xl&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case bg:e:{for(var w=x.key,S=v;S!==null;){if(S.key===w){if(w=x.type,w===Xl){if(S.tag===7){n(y,S.sibling),v=i(S,x.props.children),v.return=y,y=v;break e}}else if(S.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Fs&&YF(w)===S.type){n(y,S.sibling),v=i(S,x.props),v.ref=ed(y,S,x),v.return=y,y=v;break e}n(y,S);break}else t(y,S);S=S.sibling}x.type===Xl?(v=Au(x.props.children,y.mode,b,x.key),v.return=y,y=v):(b=Om(x.type,x.key,x.props,null,y.mode,b),b.ref=ed(y,v,x),b.return=y,y=b)}return s(y);case Yl:e:{for(S=x.key;v!==null;){if(v.key===S)if(v.tag===4&&v.stateNode.containerInfo===x.containerInfo&&v.stateNode.implementation===x.implementation){n(y,v.sibling),v=i(v,x.children||[]),v.return=y,y=v;break e}else{n(y,v);break}else t(y,v);v=v.sibling}v=e2(x,y.mode,b),v.return=y,y=v}return s(y);case Fs:return S=x._init,m(y,v,S(x._payload),b)}if(Md(x))return p(y,v,x,b);if(Xf(x))return g(y,v,x,b);Mg(y,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,v!==null&&v.tag===6?(n(y,v.sibling),v=i(v,x),v.return=y,y=v):(n(y,v),v=Zx(x,y.mode,b),v.return=y,y=v),s(y)):n(y,v)}return m}var Oc=l4(!0),c4=l4(!1),Ap={},eo=Ma(Ap),Ih=Ma(Ap),Bh=Ma(Ap);function wu(e){if(e===Ap)throw Error(H(174));return e}function d_(e,t){switch(qe(Bh,t),qe(Ih,e),qe(eo,Ap),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:zb(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=zb(t,e)}Qe(eo),qe(eo,t)}function Dc(){Qe(eo),Qe(Ih),Qe(Bh)}function f4(e){wu(Bh.current);var t=wu(eo.current),n=zb(t,e.type);t!==n&&(qe(Ih,e),qe(eo,n))}function h_(e){Ih.current===e&&(Qe(eo),Qe(Ih))}var nt=Ma(0);function b0(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Vx=[];function p_(){for(var e=0;e<Vx.length;e++)Vx[e]._workInProgressVersionPrimary=null;Vx.length=0}var Am=hs.ReactCurrentDispatcher,Yx=hs.ReactCurrentBatchConfig,ju=0,rt=null,yt=null,$t=null,w0=!1,lh=!1,jh=0,RH=0;function Jt(){throw Error(H(321))}function g_(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!_i(e[n],t[n]))return!1;return!0}function m_(e,t,n,r,i,o){if(ju=o,rt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Am.current=e===null||e.memoizedState===null?IH:BH,e=n(r,i),lh){o=0;do{if(lh=!1,jh=0,25<=o)throw Error(H(301));o+=1,$t=yt=null,t.updateQueue=null,Am.current=jH,e=n(r,i)}while(lh)}if(Am.current=E0,t=yt!==null&&yt.next!==null,ju=0,$t=yt=rt=null,w0=!1,t)throw Error(H(300));return e}function y_(){var e=jh!==0;return jh=0,e}function Wi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $t===null?rt.memoizedState=$t=e:$t=$t.next=e,$t}function jr(){if(yt===null){var e=rt.alternate;e=e!==null?e.memoizedState:null}else e=yt.next;var t=$t===null?rt.memoizedState:$t.next;if(t!==null)$t=t,yt=e;else{if(e===null)throw Error(H(310));yt=e,e={memoizedState:yt.memoizedState,baseState:yt.baseState,baseQueue:yt.baseQueue,queue:yt.queue,next:null},$t===null?rt.memoizedState=$t=e:$t=$t.next=e}return $t}function Uh(e,t){return typeof t=="function"?t(e):t}function Xx(e){var t=jr(),n=t.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=e;var r=yt,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var a=s=null,u=null,l=o;do{var c=l.lane;if((ju&c)===c)u!==null&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var f={lane:c,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};u===null?(a=u=f,s=r):u=u.next=f,rt.lanes|=c,Uu|=c}l=l.next}while(l!==null&&l!==o);u===null?s=r:u.next=a,_i(r,t.memoizedState)||(Gn=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do o=i.lane,rt.lanes|=o,Uu|=o,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Qx(e){var t=jr(),n=t.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=e(o,s.action),s=s.next;while(s!==i);_i(o,t.memoizedState)||(Gn=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function d4(){}function h4(e,t){var n=rt,r=jr(),i=t(),o=!_i(r.memoizedState,i);if(o&&(r.memoizedState=i,Gn=!0),r=r.queue,v_(m4.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||$t!==null&&$t.memoizedState.tag&1){if(n.flags|=2048,Wh(9,g4.bind(null,n,r,i,t),void 0,null),Ot===null)throw Error(H(349));ju&30||p4(n,t,i)}return i}function p4(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=rt.updateQueue,t===null?(t={lastEffect:null,stores:null},rt.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function g4(e,t,n,r){t.value=n,t.getSnapshot=r,y4(t)&&v4(e)}function m4(e,t,n){return n(function(){y4(t)&&v4(e)})}function y4(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!_i(e,n)}catch{return!0}}function v4(e){var t=as(e,1);t!==null&&xi(t,e,1,-1)}function XF(e){var t=Wi();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Uh,lastRenderedState:e},t.queue=e,e=e.dispatch=zH.bind(null,rt,e),[t.memoizedState,e]}function Wh(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=rt.updateQueue,t===null?(t={lastEffect:null,stores:null},rt.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function x4(){return jr().memoizedState}function Fm(e,t,n,r){var i=Wi();rt.flags|=e,i.memoizedState=Wh(1|t,n,void 0,r===void 0?null:r)}function vy(e,t,n,r){var i=jr();r=r===void 0?null:r;var o=void 0;if(yt!==null){var s=yt.memoizedState;if(o=s.destroy,r!==null&&g_(r,s.deps)){i.memoizedState=Wh(t,n,o,r);return}}rt.flags|=e,i.memoizedState=Wh(1|t,n,o,r)}function QF(e,t){return Fm(8390656,8,e,t)}function v_(e,t){return vy(2048,8,e,t)}function b4(e,t){return vy(4,2,e,t)}function w4(e,t){return vy(4,4,e,t)}function E4(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function S4(e,t,n){return n=n!=null?n.concat([e]):null,vy(4,4,E4.bind(null,t,e),n)}function x_(){}function _4(e,t){var n=jr();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&g_(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function k4(e,t){var n=jr();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&g_(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function $4(e,t,n){return ju&21?(_i(n,t)||(n=FR(),rt.lanes|=n,Uu|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Gn=!0),e.memoizedState=n)}function PH(e,t){var n=Le;Le=n!==0&&4>n?n:4,e(!0);var r=Yx.transition;Yx.transition={};try{e(!1),t()}finally{Le=n,Yx.transition=r}}function C4(){return jr().memoizedState}function LH(e,t,n){var r=ra(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},A4(e))F4(t,n);else if(n=o4(e,t,n,r),n!==null){var i=Fn();xi(n,e,r,i),T4(n,t,r)}}function zH(e,t,n){var r=ra(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(A4(e))F4(t,i);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var s=t.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,_i(a,s)){var u=t.interleaved;u===null?(i.next=i,c_(t)):(i.next=u.next,u.next=i),t.interleaved=i;return}}catch{}finally{}n=o4(e,t,i,r),n!==null&&(i=Fn(),xi(n,e,r,i),T4(n,t,r))}}function A4(e){var t=e.alternate;return e===rt||t!==null&&t===rt}function F4(e,t){lh=w0=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function T4(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,QS(e,n)}}var E0={readContext:Br,useCallback:Jt,useContext:Jt,useEffect:Jt,useImperativeHandle:Jt,useInsertionEffect:Jt,useLayoutEffect:Jt,useMemo:Jt,useReducer:Jt,useRef:Jt,useState:Jt,useDebugValue:Jt,useDeferredValue:Jt,useTransition:Jt,useMutableSource:Jt,useSyncExternalStore:Jt,useId:Jt,unstable_isNewReconciler:!1},IH={readContext:Br,useCallback:function(e,t){return Wi().memoizedState=[e,t===void 0?null:t],e},useContext:Br,useEffect:QF,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Fm(4194308,4,E4.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Fm(4194308,4,e,t)},useInsertionEffect:function(e,t){return Fm(4,2,e,t)},useMemo:function(e,t){var n=Wi();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Wi();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=LH.bind(null,rt,e),[r.memoizedState,e]},useRef:function(e){var t=Wi();return e={current:e},t.memoizedState=e},useState:XF,useDebugValue:x_,useDeferredValue:function(e){return Wi().memoizedState=e},useTransition:function(){var e=XF(!1),t=e[0];return e=PH.bind(null,e[1]),Wi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=rt,i=Wi();if(Je){if(n===void 0)throw Error(H(407));n=n()}else{if(n=t(),Ot===null)throw Error(H(349));ju&30||p4(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,QF(m4.bind(null,r,o,e),[e]),r.flags|=2048,Wh(9,g4.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Wi(),t=Ot.identifierPrefix;if(Je){var n=Uo,r=jo;n=(r&~(1<<32-vi(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=jh++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=RH++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},BH={readContext:Br,useCallback:_4,useContext:Br,useEffect:v_,useImperativeHandle:S4,useInsertionEffect:b4,useLayoutEffect:w4,useMemo:k4,useReducer:Xx,useRef:x4,useState:function(){return Xx(Uh)},useDebugValue:x_,useDeferredValue:function(e){var t=jr();return $4(t,yt.memoizedState,e)},useTransition:function(){var e=Xx(Uh)[0],t=jr().memoizedState;return[e,t]},useMutableSource:d4,useSyncExternalStore:h4,useId:C4,unstable_isNewReconciler:!1},jH={readContext:Br,useCallback:_4,useContext:Br,useEffect:v_,useImperativeHandle:S4,useInsertionEffect:b4,useLayoutEffect:w4,useMemo:k4,useReducer:Qx,useRef:x4,useState:function(){return Qx(Uh)},useDebugValue:x_,useDeferredValue:function(e){var t=jr();return yt===null?t.memoizedState=e:$4(t,yt.memoizedState,e)},useTransition:function(){var e=Qx(Uh)[0],t=jr().memoizedState;return[e,t]},useMutableSource:d4,useSyncExternalStore:h4,useId:C4,unstable_isNewReconciler:!1};function Rc(e,t){try{var n="",r=t;do n+=gq(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:i,digest:null}}function Kx(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function aw(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var UH=typeof WeakMap=="function"?WeakMap:Map;function M4(e,t,n){n=Qo(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){_0||(_0=!0,yw=r),aw(e,t)},n}function N4(e,t,n){n=Qo(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){aw(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){aw(e,t),typeof r!="function"&&(na===null?na=new Set([this]):na.add(this));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),n}function KF(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new UH;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=nG.bind(null,e,t,n),t.then(e,e))}function JF(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function ZF(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Qo(-1,1),t.tag=2,ta(n,t,1))),n.lanes|=1),e)}var WH=hs.ReactCurrentOwner,Gn=!1;function En(e,t,n,r){t.child=e===null?c4(t,null,n,r):Oc(t,e.child,n,r)}function eT(e,t,n,r,i){n=n.render;var o=t.ref;return yc(t,i),r=m_(e,t,n,r,o,i),n=y_(),e!==null&&!Gn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,us(e,t,i)):(Je&&n&&i_(t),t.flags|=1,En(e,t,r,i),t.child)}function tT(e,t,n,r,i){if(e===null){var o=n.type;return typeof o=="function"&&!C_(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,O4(e,t,o,r,i)):(e=Om(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:Rh,n(s,r)&&e.ref===t.ref)return us(e,t,i)}return t.flags|=1,e=ia(o,r),e.ref=t.ref,e.return=t,t.child=e}function O4(e,t,n,r,i){if(e!==null){var o=e.memoizedProps;if(Rh(o,r)&&e.ref===t.ref)if(Gn=!1,t.pendingProps=r=o,(e.lanes&i)!==0)e.flags&131072&&(Gn=!0);else return t.lanes=e.lanes,us(e,t,i)}return uw(e,t,n,r,i)}function D4(e,t,n){var r=t.pendingProps,i=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},qe(oc,fr),fr|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,qe(oc,fr),fr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,qe(oc,fr),fr|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,qe(oc,fr),fr|=r;return En(e,t,i,n),t.child}function R4(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function uw(e,t,n,r,i){var o=Xn(n)?Iu:gn.current;return o=Mc(t,o),yc(t,i),n=m_(e,t,n,r,o,i),r=y_(),e!==null&&!Gn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,us(e,t,i)):(Je&&r&&i_(t),t.flags|=1,En(e,t,n,i),t.child)}function nT(e,t,n,r,i){if(Xn(n)){var o=!0;p0(t)}else o=!1;if(yc(t,i),t.stateNode===null)Tm(e,t),u4(t,n,r),sw(t,n,r,i),r=!0;else if(e===null){var s=t.stateNode,a=t.memoizedProps;s.props=a;var u=s.context,l=n.contextType;typeof l=="object"&&l!==null?l=Br(l):(l=Xn(n)?Iu:gn.current,l=Mc(t,l));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof s.getSnapshotBeforeUpdate=="function";f||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==r||u!==l)&&VF(t,s,r,l),Ts=!1;var d=t.memoizedState;s.state=d,x0(t,r,s,i),u=t.memoizedState,a!==r||d!==u||Yn.current||Ts?(typeof c=="function"&&(ow(t,n,c,r),u=t.memoizedState),(a=Ts||GF(t,n,a,r,d,u,l))?(f||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),s.props=r,s.state=u,s.context=l,r=a):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,s4(e,t),a=t.memoizedProps,l=t.type===t.elementType?a:ri(t.type,a),s.props=l,f=t.pendingProps,d=s.context,u=n.contextType,typeof u=="object"&&u!==null?u=Br(u):(u=Xn(n)?Iu:gn.current,u=Mc(t,u));var h=n.getDerivedStateFromProps;(c=typeof h=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==f||d!==u)&&VF(t,s,r,u),Ts=!1,d=t.memoizedState,s.state=d,x0(t,r,s,i);var p=t.memoizedState;a!==f||d!==p||Yn.current||Ts?(typeof h=="function"&&(ow(t,n,h,r),p=t.memoizedState),(l=Ts||GF(t,n,l,r,d,p,u)||!1)?(c||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,p,u),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,p,u)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),s.props=r,s.state=p,s.context=u,r=l):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return lw(e,t,n,r,o,i)}function lw(e,t,n,r,i,o){R4(e,t);var s=(t.flags&128)!==0;if(!r&&!s)return i&&jF(t,n,!1),us(e,t,o);r=t.stateNode,WH.current=t;var a=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&s?(t.child=Oc(t,e.child,null,o),t.child=Oc(t,null,a,o)):En(e,t,a,o),t.memoizedState=r.state,i&&jF(t,n,!0),t.child}function P4(e){var t=e.stateNode;t.pendingContext?BF(e,t.pendingContext,t.pendingContext!==t.context):t.context&&BF(e,t.context,!1),d_(e,t.containerInfo)}function rT(e,t,n,r,i){return Nc(),s_(i),t.flags|=256,En(e,t,n,r),t.child}var cw={dehydrated:null,treeContext:null,retryLane:0};function fw(e){return{baseLanes:e,cachePool:null,transitions:null}}function L4(e,t,n){var r=t.pendingProps,i=nt.current,o=!1,s=(t.flags&128)!==0,a;if((a=s)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),qe(nt,i&1),e===null)return rw(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(s=r.children,e=r.fallback,o?(r=t.mode,o=t.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=wy(s,r,0,null),e=Au(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=fw(n),t.memoizedState=cw,e):b_(t,s));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return qH(e,t,s,r,a,i,n);if(o){o=r.fallback,s=t.mode,i=e.child,a=i.sibling;var u={mode:"hidden",children:r.children};return!(s&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=ia(i,u),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?o=ia(a,o):(o=Au(o,s,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,s=e.child.memoizedState,s=s===null?fw(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=e.childLanes&~n,t.memoizedState=cw,r}return o=e.child,e=o.sibling,r=ia(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function b_(e,t){return t=wy({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ng(e,t,n,r){return r!==null&&s_(r),Oc(t,e.child,null,n),e=b_(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function qH(e,t,n,r,i,o,s){if(n)return t.flags&256?(t.flags&=-257,r=Kx(Error(H(422))),Ng(e,t,s,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=wy({mode:"visible",children:r.children},i,0,null),o=Au(o,i,s,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&Oc(t,e.child,null,s),t.child.memoizedState=fw(s),t.memoizedState=cw,o);if(!(t.mode&1))return Ng(e,t,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,o=Error(H(419)),r=Kx(o,r,void 0),Ng(e,t,s,r)}if(a=(s&e.childLanes)!==0,Gn||a){if(r=Ot,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,as(e,i),xi(r,e,i,-1))}return $_(),r=Kx(Error(H(421))),Ng(e,t,s,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=rG.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,gr=ea(i.nextSibling),vr=t,Je=!0,ai=null,e!==null&&(Tr[Mr++]=jo,Tr[Mr++]=Uo,Tr[Mr++]=Bu,jo=e.id,Uo=e.overflow,Bu=t),t=b_(t,r.children),t.flags|=4096,t)}function iT(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),iw(e.return,t,n)}function Jx(e,t,n,r,i){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function z4(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(En(e,t,r.children,n),r=nt.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&iT(e,n,t);else if(e.tag===19)iT(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(qe(nt,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&b0(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Jx(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&b0(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Jx(t,!0,n,null,o);break;case"together":Jx(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Tm(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function us(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Uu|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(H(153));if(t.child!==null){for(e=t.child,n=ia(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=ia(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function HH(e,t,n){switch(t.tag){case 3:P4(t),Nc();break;case 5:f4(t);break;case 1:Xn(t.type)&&p0(t);break;case 4:d_(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;qe(y0,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(qe(nt,nt.current&1),t.flags|=128,null):n&t.child.childLanes?L4(e,t,n):(qe(nt,nt.current&1),e=us(e,t,n),e!==null?e.sibling:null);qe(nt,nt.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return z4(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),qe(nt,nt.current),r)break;return null;case 22:case 23:return t.lanes=0,D4(e,t,n)}return us(e,t,n)}var I4,dw,B4,j4;I4=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};dw=function(){};B4=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,wu(eo.current);var o=null;switch(n){case"input":i=Db(e,i),r=Db(e,r),o=[];break;case"select":i=it({},i,{value:void 0}),r=it({},r,{value:void 0}),o=[];break;case"textarea":i=Lb(e,i),r=Lb(e,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=d0)}Ib(n,r);var s;n=null;for(l in i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var a=i[l];for(s in a)a.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Ah.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var u=r[l];if(a=i!=null?i[l]:void 0,r.hasOwnProperty(l)&&u!==a&&(u!=null||a!=null))if(l==="style")if(a){for(s in a)!a.hasOwnProperty(s)||u&&u.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in u)u.hasOwnProperty(s)&&a[s]!==u[s]&&(n||(n={}),n[s]=u[s])}else n||(o||(o=[]),o.push(l,n)),n=u;else l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(o=o||[]).push(l,u)):l==="children"?typeof u!="string"&&typeof u!="number"||(o=o||[]).push(l,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(Ah.hasOwnProperty(l)?(u!=null&&l==="onScroll"&&Ve("scroll",e),o||a===u||(o=[])):(o=o||[]).push(l,u))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}};j4=function(e,t,n,r){n!==r&&(t.flags|=4)};function td(e,t){if(!Je)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Zt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function GH(e,t,n){var r=t.pendingProps;switch(o_(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zt(t),null;case 1:return Xn(t.type)&&h0(),Zt(t),null;case 3:return r=t.stateNode,Dc(),Qe(Yn),Qe(gn),p_(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Tg(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ai!==null&&(bw(ai),ai=null))),dw(e,t),Zt(t),null;case 5:h_(t);var i=wu(Bh.current);if(n=t.type,e!==null&&t.stateNode!=null)B4(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(H(166));return Zt(t),null}if(e=wu(eo.current),Tg(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[Vi]=t,r[zh]=o,e=(t.mode&1)!==0,n){case"dialog":Ve("cancel",r),Ve("close",r);break;case"iframe":case"object":case"embed":Ve("load",r);break;case"video":case"audio":for(i=0;i<Od.length;i++)Ve(Od[i],r);break;case"source":Ve("error",r);break;case"img":case"image":case"link":Ve("error",r),Ve("load",r);break;case"details":Ve("toggle",r);break;case"input":hF(r,o),Ve("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ve("invalid",r);break;case"textarea":gF(r,o),Ve("invalid",r)}Ib(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="children"?typeof a=="string"?r.textContent!==a&&(o.suppressHydrationWarning!==!0&&Fg(r.textContent,a,e),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&Fg(r.textContent,a,e),i=["children",""+a]):Ah.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&Ve("scroll",r)}switch(n){case"input":wg(r),pF(r,o,!0);break;case"textarea":wg(r),mF(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=d0)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=pR(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),n==="select"&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[Vi]=t,e[zh]=r,I4(e,t,!1,!1),t.stateNode=e;e:{switch(s=Bb(n,r),n){case"dialog":Ve("cancel",e),Ve("close",e),i=r;break;case"iframe":case"object":case"embed":Ve("load",e),i=r;break;case"video":case"audio":for(i=0;i<Od.length;i++)Ve(Od[i],e);i=r;break;case"source":Ve("error",e),i=r;break;case"img":case"image":case"link":Ve("error",e),Ve("load",e),i=r;break;case"details":Ve("toggle",e),i=r;break;case"input":hF(e,r),i=Db(e,r),Ve("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=it({},r,{value:void 0}),Ve("invalid",e);break;case"textarea":gF(e,r),i=Lb(e,r),Ve("invalid",e);break;default:i=r}Ib(n,i),a=i;for(o in a)if(a.hasOwnProperty(o)){var u=a[o];o==="style"?yR(e,u):o==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&gR(e,u)):o==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Fh(e,u):typeof u=="number"&&Fh(e,""+u):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Ah.hasOwnProperty(o)?u!=null&&o==="onScroll"&&Ve("scroll",e):u!=null&&qS(e,o,u,s))}switch(n){case"input":wg(e),pF(e,r,!1);break;case"textarea":wg(e),mF(e);break;case"option":r.value!=null&&e.setAttribute("value",""+da(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?hc(e,!!r.multiple,o,!1):r.defaultValue!=null&&hc(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=d0)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Zt(t),null;case 6:if(e&&t.stateNode!=null)j4(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(H(166));if(n=wu(Bh.current),wu(eo.current),Tg(t)){if(r=t.stateNode,n=t.memoizedProps,r[Vi]=t,(o=r.nodeValue!==n)&&(e=vr,e!==null))switch(e.tag){case 3:Fg(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Fg(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Vi]=t,t.stateNode=r}return Zt(t),null;case 13:if(Qe(nt),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Je&&gr!==null&&t.mode&1&&!(t.flags&128))i4(),Nc(),t.flags|=98560,o=!1;else if(o=Tg(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(H(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(H(317));o[Vi]=t}else Nc(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Zt(t),o=!1}else ai!==null&&(bw(ai),ai=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||nt.current&1?xt===0&&(xt=3):$_())),t.updateQueue!==null&&(t.flags|=4),Zt(t),null);case 4:return Dc(),dw(e,t),e===null&&Ph(t.stateNode.containerInfo),Zt(t),null;case 10:return l_(t.type._context),Zt(t),null;case 17:return Xn(t.type)&&h0(),Zt(t),null;case 19:if(Qe(nt),o=t.memoizedState,o===null)return Zt(t),null;if(r=(t.flags&128)!==0,s=o.rendering,s===null)if(r)td(o,!1);else{if(xt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=b0(e),s!==null){for(t.flags|=128,td(o,!1),r=s.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return qe(nt,nt.current&1|2),t.child}e=e.sibling}o.tail!==null&&ft()>Pc&&(t.flags|=128,r=!0,td(o,!1),t.lanes=4194304)}else{if(!r)if(e=b0(s),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),td(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!Je)return Zt(t),null}else 2*ft()-o.renderingStartTime>Pc&&n!==1073741824&&(t.flags|=128,r=!0,td(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(n=o.last,n!==null?n.sibling=s:t.child=s,o.last=s)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=ft(),t.sibling=null,n=nt.current,qe(nt,r?n&1|2:n&1),t):(Zt(t),null);case 22:case 23:return k_(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?fr&1073741824&&(Zt(t),t.subtreeFlags&6&&(t.flags|=8192)):Zt(t),null;case 24:return null;case 25:return null}throw Error(H(156,t.tag))}function VH(e,t){switch(o_(t),t.tag){case 1:return Xn(t.type)&&h0(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Dc(),Qe(Yn),Qe(gn),p_(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return h_(t),null;case 13:if(Qe(nt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(H(340));Nc()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Qe(nt),null;case 4:return Dc(),null;case 10:return l_(t.type._context),null;case 22:case 23:return k_(),null;case 24:return null;default:return null}}var Og=!1,sn=!1,YH=typeof WeakSet=="function"?WeakSet:Set,ee=null;function ic(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){at(e,t,r)}else n.current=null}function hw(e,t,n){try{n()}catch(r){at(e,t,r)}}var oT=!1;function XH(e,t){if(Qb=l0,e=HR(),r_(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,a=-1,u=-1,l=0,c=0,f=e,d=null;t:for(;;){for(var h;f!==n||i!==0&&f.nodeType!==3||(a=s+i),f!==o||r!==0&&f.nodeType!==3||(u=s+r),f.nodeType===3&&(s+=f.nodeValue.length),(h=f.firstChild)!==null;)d=f,f=h;for(;;){if(f===e)break t;if(d===n&&++l===i&&(a=s),d===o&&++c===r&&(u=s),(h=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=h}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Kb={focusedElem:e,selectionRange:n},l0=!1,ee=t;ee!==null;)if(t=ee,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ee=e;else for(;ee!==null;){t=ee;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,m=p.memoizedState,y=t.stateNode,v=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:ri(t.type,g),m);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var x=t.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(H(163))}}catch(b){at(t,t.return,b)}if(e=t.sibling,e!==null){e.return=t.return,ee=e;break}ee=t.return}return p=oT,oT=!1,p}function ch(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,o!==void 0&&hw(t,n,o)}i=i.next}while(i!==r)}}function xy(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function pw(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function U4(e){var t=e.alternate;t!==null&&(e.alternate=null,U4(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Vi],delete t[zh],delete t[ew],delete t[MH],delete t[NH])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function W4(e){return e.tag===5||e.tag===3||e.tag===4}function sT(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||W4(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function gw(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=d0));else if(r!==4&&(e=e.child,e!==null))for(gw(e,t,n),e=e.sibling;e!==null;)gw(e,t,n),e=e.sibling}function mw(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(mw(e,t,n),e=e.sibling;e!==null;)mw(e,t,n),e=e.sibling}var Bt=null,oi=!1;function _s(e,t,n){for(n=n.child;n!==null;)q4(e,t,n),n=n.sibling}function q4(e,t,n){if(Zi&&typeof Zi.onCommitFiberUnmount=="function")try{Zi.onCommitFiberUnmount(fy,n)}catch{}switch(n.tag){case 5:sn||ic(n,t);case 6:var r=Bt,i=oi;Bt=null,_s(e,t,n),Bt=r,oi=i,Bt!==null&&(oi?(e=Bt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Bt.removeChild(n.stateNode));break;case 18:Bt!==null&&(oi?(e=Bt,n=n.stateNode,e.nodeType===8?Hx(e.parentNode,n):e.nodeType===1&&Hx(e,n),Oh(e)):Hx(Bt,n.stateNode));break;case 4:r=Bt,i=oi,Bt=n.stateNode.containerInfo,oi=!0,_s(e,t,n),Bt=r,oi=i;break;case 0:case 11:case 14:case 15:if(!sn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&hw(n,t,s),i=i.next}while(i!==r)}_s(e,t,n);break;case 1:if(!sn&&(ic(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){at(n,t,a)}_s(e,t,n);break;case 21:_s(e,t,n);break;case 22:n.mode&1?(sn=(r=sn)||n.memoizedState!==null,_s(e,t,n),sn=r):_s(e,t,n);break;default:_s(e,t,n)}}function aT(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new YH),t.forEach(function(r){var i=iG.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Jr(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,s=t,a=s;e:for(;a!==null;){switch(a.tag){case 5:Bt=a.stateNode,oi=!1;break e;case 3:Bt=a.stateNode.containerInfo,oi=!0;break e;case 4:Bt=a.stateNode.containerInfo,oi=!0;break e}a=a.return}if(Bt===null)throw Error(H(160));q4(o,s,i),Bt=null,oi=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(l){at(i,t,l)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)H4(t,e),t=t.sibling}function H4(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Jr(t,e),zi(e),r&4){try{ch(3,e,e.return),xy(3,e)}catch(g){at(e,e.return,g)}try{ch(5,e,e.return)}catch(g){at(e,e.return,g)}}break;case 1:Jr(t,e),zi(e),r&512&&n!==null&&ic(n,n.return);break;case 5:if(Jr(t,e),zi(e),r&512&&n!==null&&ic(n,n.return),e.flags&32){var i=e.stateNode;try{Fh(i,"")}catch(g){at(e,e.return,g)}}if(r&4&&(i=e.stateNode,i!=null)){var o=e.memoizedProps,s=n!==null?n.memoizedProps:o,a=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&dR(i,o),Bb(a,s);var l=Bb(a,o);for(s=0;s<u.length;s+=2){var c=u[s],f=u[s+1];c==="style"?yR(i,f):c==="dangerouslySetInnerHTML"?gR(i,f):c==="children"?Fh(i,f):qS(i,c,f,l)}switch(a){case"input":Rb(i,o);break;case"textarea":hR(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var h=o.value;h!=null?hc(i,!!o.multiple,h,!1):d!==!!o.multiple&&(o.defaultValue!=null?hc(i,!!o.multiple,o.defaultValue,!0):hc(i,!!o.multiple,o.multiple?[]:"",!1))}i[zh]=o}catch(g){at(e,e.return,g)}}break;case 6:if(Jr(t,e),zi(e),r&4){if(e.stateNode===null)throw Error(H(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(g){at(e,e.return,g)}}break;case 3:if(Jr(t,e),zi(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Oh(t.containerInfo)}catch(g){at(e,e.return,g)}break;case 4:Jr(t,e),zi(e);break;case 13:Jr(t,e),zi(e),i=e.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(S_=ft())),r&4&&aT(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(sn=(l=sn)||c,Jr(t,e),sn=l):Jr(t,e),zi(e),r&8192){if(l=e.memoizedState!==null,(e.stateNode.isHidden=l)&&!c&&e.mode&1)for(ee=e,c=e.child;c!==null;){for(f=ee=c;ee!==null;){switch(d=ee,h=d.child,d.tag){case 0:case 11:case 14:case 15:ch(4,d,d.return);break;case 1:ic(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){r=d,n=d.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(g){at(r,n,g)}}break;case 5:ic(d,d.return);break;case 22:if(d.memoizedState!==null){lT(f);continue}}h!==null?(h.return=d,ee=h):lT(f)}c=c.sibling}e:for(c=null,f=e;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,l?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=f.stateNode,u=f.memoizedProps.style,s=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=mR("display",s))}catch(g){at(e,e.return,g)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(g){at(e,e.return,g)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Jr(t,e),zi(e),r&4&&aT(e);break;case 21:break;default:Jr(t,e),zi(e)}}function zi(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(W4(n)){var r=n;break e}n=n.return}throw Error(H(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Fh(i,""),r.flags&=-33);var o=sT(e);mw(e,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,a=sT(e);gw(e,a,s);break;default:throw Error(H(161))}}catch(u){at(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function QH(e,t,n){ee=e,G4(e)}function G4(e,t,n){for(var r=(e.mode&1)!==0;ee!==null;){var i=ee,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||Og;if(!s){var a=i.alternate,u=a!==null&&a.memoizedState!==null||sn;a=Og;var l=sn;if(Og=s,(sn=u)&&!l)for(ee=i;ee!==null;)s=ee,u=s.child,s.tag===22&&s.memoizedState!==null?cT(i):u!==null?(u.return=s,ee=u):cT(i);for(;o!==null;)ee=o,G4(o),o=o.sibling;ee=i,Og=a,sn=l}uT(e)}else i.subtreeFlags&8772&&o!==null?(o.return=i,ee=o):uT(e)}}function uT(e){for(;ee!==null;){var t=ee;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:sn||xy(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!sn)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ri(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&HF(t,o,r);break;case 3:var s=t.updateQueue;if(s!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}HF(t,s,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var l=t.alternate;if(l!==null){var c=l.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&Oh(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(H(163))}sn||t.flags&512&&pw(t)}catch(d){at(t,t.return,d)}}if(t===e){ee=null;break}if(n=t.sibling,n!==null){n.return=t.return,ee=n;break}ee=t.return}}function lT(e){for(;ee!==null;){var t=ee;if(t===e){ee=null;break}var n=t.sibling;if(n!==null){n.return=t.return,ee=n;break}ee=t.return}}function cT(e){for(;ee!==null;){var t=ee;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{xy(4,t)}catch(u){at(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(u){at(t,i,u)}}var o=t.return;try{pw(t)}catch(u){at(t,o,u)}break;case 5:var s=t.return;try{pw(t)}catch(u){at(t,s,u)}}}catch(u){at(t,t.return,u)}if(t===e){ee=null;break}var a=t.sibling;if(a!==null){a.return=t.return,ee=a;break}ee=t.return}}var KH=Math.ceil,S0=hs.ReactCurrentDispatcher,w_=hs.ReactCurrentOwner,Lr=hs.ReactCurrentBatchConfig,$e=0,Ot=null,pt=null,qt=0,fr=0,oc=Ma(0),xt=0,qh=null,Uu=0,by=0,E_=0,fh=null,jn=null,S_=0,Pc=1/0,Oo=null,_0=!1,yw=null,na=null,Dg=!1,js=null,k0=0,dh=0,vw=null,Mm=-1,Nm=0;function Fn(){return $e&6?ft():Mm!==-1?Mm:Mm=ft()}function ra(e){return e.mode&1?$e&2&&qt!==0?qt&-qt:DH.transition!==null?(Nm===0&&(Nm=FR()),Nm):(e=Le,e!==0||(e=window.event,e=e===void 0?16:PR(e.type)),e):1}function xi(e,t,n,r){if(50<dh)throw dh=0,vw=null,Error(H(185));kp(e,n,r),(!($e&2)||e!==Ot)&&(e===Ot&&(!($e&2)&&(by|=n),xt===4&&Ls(e,qt)),Qn(e,r),n===1&&$e===0&&!(t.mode&1)&&(Pc=ft()+500,my&&Na()))}function Qn(e,t){var n=e.callbackNode;Dq(e,t);var r=u0(e,e===Ot?qt:0);if(r===0)n!==null&&xF(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&xF(n),t===1)e.tag===0?OH(fT.bind(null,e)):t4(fT.bind(null,e)),FH(function(){!($e&6)&&Na()}),n=null;else{switch(TR(r)){case 1:n=XS;break;case 4:n=CR;break;case 16:n=a0;break;case 536870912:n=AR;break;default:n=a0}n=eP(n,V4.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function V4(e,t){if(Mm=-1,Nm=0,$e&6)throw Error(H(327));var n=e.callbackNode;if(vc()&&e.callbackNode!==n)return null;var r=u0(e,e===Ot?qt:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=$0(e,r);else{t=r;var i=$e;$e|=2;var o=X4();(Ot!==e||qt!==t)&&(Oo=null,Pc=ft()+500,Cu(e,t));do try{eG();break}catch(a){Y4(e,a)}while(1);u_(),S0.current=o,$e=i,pt!==null?t=0:(Ot=null,qt=0,t=xt)}if(t!==0){if(t===2&&(i=Hb(e),i!==0&&(r=i,t=xw(e,i))),t===1)throw n=qh,Cu(e,0),Ls(e,r),Qn(e,ft()),n;if(t===6)Ls(e,r);else{if(i=e.current.alternate,!(r&30)&&!JH(i)&&(t=$0(e,r),t===2&&(o=Hb(e),o!==0&&(r=o,t=xw(e,o))),t===1))throw n=qh,Cu(e,0),Ls(e,r),Qn(e,ft()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(H(345));case 2:uu(e,jn,Oo);break;case 3:if(Ls(e,r),(r&130023424)===r&&(t=S_+500-ft(),10<t)){if(u0(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Fn(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Zb(uu.bind(null,e,jn,Oo),t);break}uu(e,jn,Oo);break;case 4:if(Ls(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-vi(r);o=1<<s,s=t[s],s>i&&(i=s),r&=~o}if(r=i,r=ft()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*KH(r/1960))-r,10<r){e.timeoutHandle=Zb(uu.bind(null,e,jn,Oo),r);break}uu(e,jn,Oo);break;case 5:uu(e,jn,Oo);break;default:throw Error(H(329))}}}return Qn(e,ft()),e.callbackNode===n?V4.bind(null,e):null}function xw(e,t){var n=fh;return e.current.memoizedState.isDehydrated&&(Cu(e,t).flags|=256),e=$0(e,t),e!==2&&(t=jn,jn=n,t!==null&&bw(t)),e}function bw(e){jn===null?jn=e:jn.push.apply(jn,e)}function JH(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!_i(o(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ls(e,t){for(t&=~E_,t&=~by,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-vi(t),r=1<<n;e[n]=-1,t&=~r}}function fT(e){if($e&6)throw Error(H(327));vc();var t=u0(e,0);if(!(t&1))return Qn(e,ft()),null;var n=$0(e,t);if(e.tag!==0&&n===2){var r=Hb(e);r!==0&&(t=r,n=xw(e,r))}if(n===1)throw n=qh,Cu(e,0),Ls(e,t),Qn(e,ft()),n;if(n===6)throw Error(H(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,uu(e,jn,Oo),Qn(e,ft()),null}function __(e,t){var n=$e;$e|=1;try{return e(t)}finally{$e=n,$e===0&&(Pc=ft()+500,my&&Na())}}function Wu(e){js!==null&&js.tag===0&&!($e&6)&&vc();var t=$e;$e|=1;var n=Lr.transition,r=Le;try{if(Lr.transition=null,Le=1,e)return e()}finally{Le=r,Lr.transition=n,$e=t,!($e&6)&&Na()}}function k_(){fr=oc.current,Qe(oc)}function Cu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,AH(n)),pt!==null)for(n=pt.return;n!==null;){var r=n;switch(o_(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&h0();break;case 3:Dc(),Qe(Yn),Qe(gn),p_();break;case 5:h_(r);break;case 4:Dc();break;case 13:Qe(nt);break;case 19:Qe(nt);break;case 10:l_(r.type._context);break;case 22:case 23:k_()}n=n.return}if(Ot=e,pt=e=ia(e.current,null),qt=fr=t,xt=0,qh=null,E_=by=Uu=0,jn=fh=null,bu!==null){for(t=0;t<bu.length;t++)if(n=bu[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}bu=null}return e}function Y4(e,t){do{var n=pt;try{if(u_(),Am.current=E0,w0){for(var r=rt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}w0=!1}if(ju=0,$t=yt=rt=null,lh=!1,jh=0,w_.current=null,n===null||n.return===null){xt=1,qh=t,pt=null;break}e:{var o=e,s=n.return,a=n,u=t;if(t=qt,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var l=u,c=a,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=JF(s);if(h!==null){h.flags&=-257,ZF(h,s,a,o,t),h.mode&1&&KF(o,l,t),t=h,u=l;var p=t.updateQueue;if(p===null){var g=new Set;g.add(u),t.updateQueue=g}else p.add(u);break e}else{if(!(t&1)){KF(o,l,t),$_();break e}u=Error(H(426))}}else if(Je&&a.mode&1){var m=JF(s);if(m!==null){!(m.flags&65536)&&(m.flags|=256),ZF(m,s,a,o,t),s_(Rc(u,a));break e}}o=u=Rc(u,a),xt!==4&&(xt=2),fh===null?fh=[o]:fh.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var y=M4(o,u,t);qF(o,y);break e;case 1:a=u;var v=o.type,x=o.stateNode;if(!(o.flags&128)&&(typeof v.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(na===null||!na.has(x)))){o.flags|=65536,t&=-t,o.lanes|=t;var b=N4(o,a,t);qF(o,b);break e}}o=o.return}while(o!==null)}K4(n)}catch(w){t=w,pt===n&&n!==null&&(pt=n=n.return);continue}break}while(1)}function X4(){var e=S0.current;return S0.current=E0,e===null?E0:e}function $_(){(xt===0||xt===3||xt===2)&&(xt=4),Ot===null||!(Uu&268435455)&&!(by&268435455)||Ls(Ot,qt)}function $0(e,t){var n=$e;$e|=2;var r=X4();(Ot!==e||qt!==t)&&(Oo=null,Cu(e,t));do try{ZH();break}catch(i){Y4(e,i)}while(1);if(u_(),$e=n,S0.current=r,pt!==null)throw Error(H(261));return Ot=null,qt=0,xt}function ZH(){for(;pt!==null;)Q4(pt)}function eG(){for(;pt!==null&&!kq();)Q4(pt)}function Q4(e){var t=Z4(e.alternate,e,fr);e.memoizedProps=e.pendingProps,t===null?K4(e):pt=t,w_.current=null}function K4(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=VH(n,t),n!==null){n.flags&=32767,pt=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{xt=6,pt=null;return}}else if(n=GH(n,t,fr),n!==null){pt=n;return}if(t=t.sibling,t!==null){pt=t;return}pt=t=e}while(t!==null);xt===0&&(xt=5)}function uu(e,t,n){var r=Le,i=Lr.transition;try{Lr.transition=null,Le=1,tG(e,t,n,r)}finally{Lr.transition=i,Le=r}return null}function tG(e,t,n,r){do vc();while(js!==null);if($e&6)throw Error(H(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(H(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(Rq(e,o),e===Ot&&(pt=Ot=null,qt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Dg||(Dg=!0,eP(a0,function(){return vc(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Lr.transition,Lr.transition=null;var s=Le;Le=1;var a=$e;$e|=4,w_.current=null,XH(e,n),H4(n,e),wH(Kb),l0=!!Qb,Kb=Qb=null,e.current=n,QH(n),$q(),$e=a,Le=s,Lr.transition=o}else e.current=n;if(Dg&&(Dg=!1,js=e,k0=i),o=e.pendingLanes,o===0&&(na=null),Fq(n.stateNode),Qn(e,ft()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(_0)throw _0=!1,e=yw,yw=null,e;return k0&1&&e.tag!==0&&vc(),o=e.pendingLanes,o&1?e===vw?dh++:(dh=0,vw=e):dh=0,Na(),null}function vc(){if(js!==null){var e=TR(k0),t=Lr.transition,n=Le;try{if(Lr.transition=null,Le=16>e?16:e,js===null)var r=!1;else{if(e=js,js=null,k0=0,$e&6)throw Error(H(331));var i=$e;for($e|=4,ee=e.current;ee!==null;){var o=ee,s=o.child;if(ee.flags&16){var a=o.deletions;if(a!==null){for(var u=0;u<a.length;u++){var l=a[u];for(ee=l;ee!==null;){var c=ee;switch(c.tag){case 0:case 11:case 15:ch(8,c,o)}var f=c.child;if(f!==null)f.return=c,ee=f;else for(;ee!==null;){c=ee;var d=c.sibling,h=c.return;if(U4(c),c===l){ee=null;break}if(d!==null){d.return=h,ee=d;break}ee=h}}}var p=o.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var m=g.sibling;g.sibling=null,g=m}while(g!==null)}}ee=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,ee=s;else e:for(;ee!==null;){if(o=ee,o.flags&2048)switch(o.tag){case 0:case 11:case 15:ch(9,o,o.return)}var y=o.sibling;if(y!==null){y.return=o.return,ee=y;break e}ee=o.return}}var v=e.current;for(ee=v;ee!==null;){s=ee;var x=s.child;if(s.subtreeFlags&2064&&x!==null)x.return=s,ee=x;else e:for(s=v;ee!==null;){if(a=ee,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:xy(9,a)}}catch(w){at(a,a.return,w)}if(a===s){ee=null;break e}var b=a.sibling;if(b!==null){b.return=a.return,ee=b;break e}ee=a.return}}if($e=i,Na(),Zi&&typeof Zi.onPostCommitFiberRoot=="function")try{Zi.onPostCommitFiberRoot(fy,e)}catch{}r=!0}return r}finally{Le=n,Lr.transition=t}}return!1}function dT(e,t,n){t=Rc(n,t),t=M4(e,t,1),e=ta(e,t,1),t=Fn(),e!==null&&(kp(e,1,t),Qn(e,t))}function at(e,t,n){if(e.tag===3)dT(e,e,n);else for(;t!==null;){if(t.tag===3){dT(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(na===null||!na.has(r))){e=Rc(n,e),e=N4(t,e,1),t=ta(t,e,1),e=Fn(),t!==null&&(kp(t,1,e),Qn(t,e));break}}t=t.return}}function nG(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Fn(),e.pingedLanes|=e.suspendedLanes&n,Ot===e&&(qt&n)===n&&(xt===4||xt===3&&(qt&130023424)===qt&&500>ft()-S_?Cu(e,0):E_|=n),Qn(e,t)}function J4(e,t){t===0&&(e.mode&1?(t=_g,_g<<=1,!(_g&130023424)&&(_g=4194304)):t=1);var n=Fn();e=as(e,t),e!==null&&(kp(e,t,n),Qn(e,n))}function rG(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),J4(e,n)}function iG(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(H(314))}r!==null&&r.delete(t),J4(e,n)}var Z4;Z4=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Yn.current)Gn=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Gn=!1,HH(e,t,n);Gn=!!(e.flags&131072)}else Gn=!1,Je&&t.flags&1048576&&n4(t,m0,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Tm(e,t),e=t.pendingProps;var i=Mc(t,gn.current);yc(t,n),i=m_(null,t,r,e,i,n);var o=y_();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Xn(r)?(o=!0,p0(t)):o=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,f_(t),i.updater=yy,t.stateNode=i,i._reactInternals=t,sw(t,r,e,n),t=lw(null,t,r,!0,o,n)):(t.tag=0,Je&&o&&i_(t),En(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Tm(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=sG(r),e=ri(r,e),i){case 0:t=uw(null,t,r,e,n);break e;case 1:t=nT(null,t,r,e,n);break e;case 11:t=eT(null,t,r,e,n);break e;case 14:t=tT(null,t,r,ri(r.type,e),n);break e}throw Error(H(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ri(r,i),uw(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ri(r,i),nT(e,t,r,i,n);case 3:e:{if(P4(t),e===null)throw Error(H(387));r=t.pendingProps,o=t.memoizedState,i=o.element,s4(e,t),x0(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){i=Rc(Error(H(423)),t),t=rT(e,t,r,n,i);break e}else if(r!==i){i=Rc(Error(H(424)),t),t=rT(e,t,r,n,i);break e}else for(gr=ea(t.stateNode.containerInfo.firstChild),vr=t,Je=!0,ai=null,n=c4(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Nc(),r===i){t=us(e,t,n);break e}En(e,t,r,n)}t=t.child}return t;case 5:return f4(t),e===null&&rw(t),r=t.type,i=t.pendingProps,o=e!==null?e.memoizedProps:null,s=i.children,Jb(r,i)?s=null:o!==null&&Jb(r,o)&&(t.flags|=32),R4(e,t),En(e,t,s,n),t.child;case 6:return e===null&&rw(t),null;case 13:return L4(e,t,n);case 4:return d_(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Oc(t,null,r,n):En(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ri(r,i),eT(e,t,r,i,n);case 7:return En(e,t,t.pendingProps,n),t.child;case 8:return En(e,t,t.pendingProps.children,n),t.child;case 12:return En(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,qe(y0,r._currentValue),r._currentValue=s,o!==null)if(_i(o.value,s)){if(o.children===i.children&&!Yn.current){t=us(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var a=o.dependencies;if(a!==null){s=o.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(o.tag===1){u=Qo(-1,n&-n),u.tag=2;var l=o.updateQueue;if(l!==null){l=l.shared;var c=l.pending;c===null?u.next=u:(u.next=c.next,c.next=u),l.pending=u}}o.lanes|=n,u=o.alternate,u!==null&&(u.lanes|=n),iw(o.return,n,t),a.lanes|=n;break}u=u.next}}else if(o.tag===10)s=o.type===t.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(H(341));s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),iw(s,n,t),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===t){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}En(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,yc(t,n),i=Br(i),r=r(i),t.flags|=1,En(e,t,r,n),t.child;case 14:return r=t.type,i=ri(r,t.pendingProps),i=ri(r.type,i),tT(e,t,r,i,n);case 15:return O4(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ri(r,i),Tm(e,t),t.tag=1,Xn(r)?(e=!0,p0(t)):e=!1,yc(t,n),u4(t,r,i),sw(t,r,i,n),lw(null,t,r,!0,e,n);case 19:return z4(e,t,n);case 22:return D4(e,t,n)}throw Error(H(156,t.tag))};function eP(e,t){return $R(e,t)}function oG(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nr(e,t,n,r){return new oG(e,t,n,r)}function C_(e){return e=e.prototype,!(!e||!e.isReactComponent)}function sG(e){if(typeof e=="function")return C_(e)?1:0;if(e!=null){if(e=e.$$typeof,e===GS)return 11;if(e===VS)return 14}return 2}function ia(e,t){var n=e.alternate;return n===null?(n=Nr(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Om(e,t,n,r,i,o){var s=2;if(r=e,typeof e=="function")C_(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case Xl:return Au(n.children,i,o,t);case HS:s=8,i|=8;break;case Tb:return e=Nr(12,n,t,i|2),e.elementType=Tb,e.lanes=o,e;case Mb:return e=Nr(13,n,t,i),e.elementType=Mb,e.lanes=o,e;case Nb:return e=Nr(19,n,t,i),e.elementType=Nb,e.lanes=o,e;case lR:return wy(n,i,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case aR:s=10;break e;case uR:s=9;break e;case GS:s=11;break e;case VS:s=14;break e;case Fs:s=16,r=null;break e}throw Error(H(130,e==null?e:typeof e,""))}return t=Nr(s,n,t,i),t.elementType=e,t.type=r,t.lanes=o,t}function Au(e,t,n,r){return e=Nr(7,e,r,t),e.lanes=n,e}function wy(e,t,n,r){return e=Nr(22,e,r,t),e.elementType=lR,e.lanes=n,e.stateNode={isHidden:!1},e}function Zx(e,t,n){return e=Nr(6,e,null,t),e.lanes=n,e}function e2(e,t,n){return t=Nr(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function aG(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Dx(0),this.expirationTimes=Dx(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Dx(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function A_(e,t,n,r,i,o,s,a,u){return e=new aG(e,t,n,a,u),t===1?(t=1,o===!0&&(t|=8)):t=0,o=Nr(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},f_(o),e}function uG(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Yl,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function tP(e){if(!e)return ha;e=e._reactInternals;e:{if(pl(e)!==e||e.tag!==1)throw Error(H(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Xn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(H(171))}if(e.tag===1){var n=e.type;if(Xn(n))return e4(e,n,t)}return t}function nP(e,t,n,r,i,o,s,a,u){return e=A_(n,r,!0,e,i,o,s,a,u),e.context=tP(null),n=e.current,r=Fn(),i=ra(n),o=Qo(r,i),o.callback=t??null,ta(n,o,i),e.current.lanes=i,kp(e,i,r),Qn(e,r),e}function Ey(e,t,n,r){var i=t.current,o=Fn(),s=ra(i);return n=tP(n),t.context===null?t.context=n:t.pendingContext=n,t=Qo(o,s),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=ta(i,t,s),e!==null&&(xi(e,i,s,o),Cm(e,i,s)),s}function C0(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function hT(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function F_(e,t){hT(e,t),(e=e.alternate)&&hT(e,t)}function lG(){return null}var rP=typeof reportError=="function"?reportError:function(e){console.error(e)};function T_(e){this._internalRoot=e}Sy.prototype.render=T_.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(H(409));Ey(e,t,null,null)};Sy.prototype.unmount=T_.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Wu(function(){Ey(null,e,null,null)}),t[ss]=null}};function Sy(e){this._internalRoot=e}Sy.prototype.unstable_scheduleHydration=function(e){if(e){var t=OR();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ps.length&&t!==0&&t<Ps[n].priority;n++);Ps.splice(n,0,e),n===0&&RR(e)}};function M_(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function _y(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function pT(){}function cG(e,t,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var l=C0(s);o.call(l)}}var s=nP(t,r,e,0,null,!1,!1,"",pT);return e._reactRootContainer=s,e[ss]=s.current,Ph(e.nodeType===8?e.parentNode:e),Wu(),s}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var l=C0(u);a.call(l)}}var u=A_(e,0,!1,null,null,!1,!1,"",pT);return e._reactRootContainer=u,e[ss]=u.current,Ph(e.nodeType===8?e.parentNode:e),Wu(function(){Ey(t,u,n,r)}),u}function ky(e,t,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var a=i;i=function(){var u=C0(s);a.call(u)}}Ey(t,s,e,i)}else s=cG(n,t,e,i,r);return C0(s)}MR=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Nd(t.pendingLanes);n!==0&&(QS(t,n|1),Qn(t,ft()),!($e&6)&&(Pc=ft()+500,Na()))}break;case 13:Wu(function(){var r=as(e,1);if(r!==null){var i=Fn();xi(r,e,1,i)}}),F_(e,1)}};KS=function(e){if(e.tag===13){var t=as(e,134217728);if(t!==null){var n=Fn();xi(t,e,134217728,n)}F_(e,134217728)}};NR=function(e){if(e.tag===13){var t=ra(e),n=as(e,t);if(n!==null){var r=Fn();xi(n,e,t,r)}F_(e,t)}};OR=function(){return Le};DR=function(e,t){var n=Le;try{return Le=e,t()}finally{Le=n}};Ub=function(e,t,n){switch(t){case"input":if(Rb(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=gy(r);if(!i)throw Error(H(90));fR(r),Rb(r,i)}}}break;case"textarea":hR(e,n);break;case"select":t=n.value,t!=null&&hc(e,!!n.multiple,t,!1)}};bR=__;wR=Wu;var fG={usingClientEntryPoint:!1,Events:[Cp,Zl,gy,vR,xR,__]},nd={findFiberByHostInstance:xu,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},dG={bundleType:nd.bundleType,version:nd.version,rendererPackageName:nd.rendererPackageName,rendererConfig:nd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:hs.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=_R(e),e===null?null:e.stateNode},findFiberByHostInstance:nd.findFiberByHostInstance||lG,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Rg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Rg.isDisabled&&Rg.supportsFiber)try{fy=Rg.inject(dG),Zi=Rg}catch{}}$r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fG;$r.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!M_(t))throw Error(H(200));return uG(e,t,null,n)};$r.createRoot=function(e,t){if(!M_(e))throw Error(H(299));var n=!1,r="",i=rP;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=A_(e,1,!1,null,null,n,!1,r,i),e[ss]=t.current,Ph(e.nodeType===8?e.parentNode:e),new T_(t)};$r.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(H(188)):(e=Object.keys(e).join(","),Error(H(268,e)));return e=_R(t),e=e===null?null:e.stateNode,e};$r.flushSync=function(e){return Wu(e)};$r.hydrate=function(e,t,n){if(!_y(t))throw Error(H(200));return ky(null,e,t,!0,n)};$r.hydrateRoot=function(e,t,n){if(!M_(e))throw Error(H(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=rP;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),t=nP(t,null,e,1,n??null,i,!1,o,s),e[ss]=t.current,Ph(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Sy(t)};$r.render=function(e,t,n){if(!_y(t))throw Error(H(200));return ky(null,e,t,!1,n)};$r.unmountComponentAtNode=function(e){if(!_y(e))throw Error(H(40));return e._reactRootContainer?(Wu(function(){ky(null,null,e,!1,function(){e._reactRootContainer=null,e[ss]=null})}),!0):!1};$r.unstable_batchedUpdates=__;$r.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!_y(n))throw Error(H(200));if(e==null||e._reactInternals===void 0)throw Error(H(38));return ky(e,t,n,!1,r)};$r.version="18.2.0-next-9e3b772b8-20220608";function iP(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(iP)}catch(e){console.error(e)}}iP(),nR.exports=$r;var hG=nR.exports,gT=hG;Ab.createRoot=gT.createRoot,Ab.hydrateRoot=gT.hydrateRoot;var oP={exports:{}},pG="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",gG=pG,mG=gG;function sP(){}function aP(){}aP.resetWarningCache=sP;var yG=function(){function e(r,i,o,s,a,u){if(u!==mG){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:aP,resetWarningCache:sP};return n.PropTypes=n,n};oP.exports=yG();var vG=oP.exports;const mT=xf(vG),yT={};function ww(e,t){e===void 0&&(e=yT),t===void 0&&(t=yT);const n=Object.keys(e),r=Object.keys(t);return e===t||n.length===r.length&&n.every(i=>e[i]===t[i])}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var xG=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),bG=Object.prototype.hasOwnProperty;function Ew(e,t){return bG.call(e,t)}function Sw(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)Ew(e,i)&&r.push(i);return r}function mr(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function _w(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function lu(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function uP(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function kw(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(kw(e[t]))return!0}else if(typeof e=="object"){for(var r=Sw(e),i=r.length,o=0;o<i;o++)if(kw(e[r[o]]))return!0}}return!1}function vT(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var lP=function(e){xG(t,e);function t(n,r,i,o,s){var a=this.constructor,u=e.call(this,vT(n,{name:r,index:i,operation:o,tree:s}))||this;return u.name=r,u.index=i,u.operation=o,u.tree=s,Object.setPrototypeOf(u,a.prototype),u.message=vT(n,{name:r,index:i,operation:o,tree:s}),u}return t}(Error),st=lP,wG=mr,sc={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=A0(n,this.path);r&&(r=mr(r));var i=Fu(n,{op:"remove",path:this.from}).removed;return Fu(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=A0(n,this.from);return Fu(n,{op:"add",path:this.path,value:mr(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:Hh(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},EG={add:function(e,t,n){return _w(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:sc.move,copy:sc.copy,test:sc.test,_get:sc._get};function A0(e,t){if(t=="")return e;var n={op:"_get",path:t};return Fu(e,n),n.value}function Fu(e,t,n,r,i,o){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),o===void 0&&(o=0),n&&(typeof n=="function"?n(t,0,e,t.path):F0(t,0)),t.path===""){var s={newDocument:e};if(t.op==="add")return s.newDocument=t.value,s;if(t.op==="replace")return s.newDocument=t.value,s.removed=e,s;if(t.op==="move"||t.op==="copy")return s.newDocument=A0(e,t.from),t.op==="move"&&(s.removed=e),s;if(t.op==="test"){if(s.test=Hh(e,t.value),s.test===!1)throw new st("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return s.newDocument=e,s}else{if(t.op==="remove")return s.removed=e,s.newDocument=null,s;if(t.op==="_get")return t.value=e,s;if(n)throw new st("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",o,t,e);return s}}else{r||(e=mr(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=F0;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=uP(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!_w(h))throw new st("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",o,t,e);_w(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new st("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",o,t,e);var s=EG[t.op].call(t,l,h,e);if(s.test===!1)throw new st("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return s}}else if(c>=f){var s=sc[t.op].call(t,l,h,e);if(s.test===!1)throw new st("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return s}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new st("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",o,t,e)}}}function $y(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new st("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=mr(e));for(var o=new Array(t.length),s=0,a=t.length;s<a;s++)o[s]=Fu(e,t[s],n,!0,i,s),e=o[s].newDocument;return o.newDocument=e,o}function SG(e,t,n){var r=Fu(e,t);if(r.test===!1)throw new st("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function F0(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new st("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(sc[e.op]){if(typeof e.path!="string")throw new st("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new st('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new st("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new st("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&kw(e.value))throw new st("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,o=r.split("/").length;if(i!==o+1&&i!==o)throw new st("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new st("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var s={op:"_get",path:e.from,value:void 0},a=cP([s],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new st("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new st("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function cP(e,t,n){try{if(!Array.isArray(e))throw new st("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)$y(mr(t),mr(e),n||!0);else{n=n||F0;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof st)return i;throw i}}function Hh(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,o,s;if(n&&r){if(o=e.length,o!=t.length)return!1;for(i=o;i--!==0;)if(!Hh(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(o=a.length,o!==Object.keys(t).length)return!1;for(i=o;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=o;i--!==0;)if(s=a[i],!Hh(e[s],t[s]))return!1;return!0}return e!==e&&t!==t}const _G=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:st,_areEquals:Hh,applyOperation:Fu,applyPatch:$y,applyReducer:SG,deepClone:wG,getValueByPointer:A0,validate:cP,validator:F0},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var N_=new WeakMap,kG=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),$G=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function CG(e){return N_.get(e)}function AG(e,t){return e.observers.get(t)}function FG(e,t){e.observers.delete(t.callback)}function TG(e,t){t.unobserve()}function MG(e,t){var n=[],r,i=CG(e);if(!i)i=new kG(e),N_.set(e,i);else{var o=AG(i,t);r=o&&o.observer}if(r)return r;if(r={},i.value=mr(e),t){r.callback=t,r.next=null;var s=function(){$w(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(s)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){$w(r),clearTimeout(r.next),FG(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new $G(t,r)),r}function $w(e,t){t===void 0&&(t=!1);var n=N_.get(e.object);O_(n.value,e.object,e.patches,"",t),e.patches.length&&$y(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function O_(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var o=Sw(t),s=Sw(e),a=!1,u=s.length-1;u>=0;u--){var l=s[u],c=e[l];if(Ew(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?O_(c,f,n,r+"/"+lu(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+lu(l),value:mr(c)}),n.push({op:"replace",path:r+"/"+lu(l),value:mr(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+lu(l),value:mr(c)}),n.push({op:"remove",path:r+"/"+lu(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&o.length==s.length))for(var u=0;u<o.length;u++){var l=o[u];!Ew(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+lu(l),value:mr(t[l])})}}}function NG(e,t,n){n===void 0&&(n=!1);var r=[];return O_(e,t,r,"",n),r}const OG=Object.freeze(Object.defineProperty({__proto__:null,compare:NG,generate:$w,observe:MG,unobserve:TG},Symbol.toStringTag,{value:"Module"}));Object.assign({},_G,OG,{JsonPatchError:lP,deepClone:mr,escapePathComponent:lu,unescapePathComponent:uP});var DG=/("(?:[^\\"]|\\.)*")|[:,]/g,RG=function(t,n){var r,i,o;return n=n||{},r=JSON.stringify([1],void 0,n.indent===void 0?2:n.indent).slice(2,-3),i=r===""?1/0:n.maxLength===void 0?80:n.maxLength,o=n.replacer,function s(a,u,l){var c,f,d,h,p,g,m,y,v,x,b,w;if(a&&typeof a.toJSON=="function"&&(a=a.toJSON()),b=JSON.stringify(a,o),b===void 0)return b;if(m=i-u.length-l,b.length<=m&&(v=b.replace(DG,function(S,E){return E||S+" "}),v.length<=m))return v;if(o!=null&&(a=JSON.parse(b),o=void 0),typeof a=="object"&&a!==null){if(y=u+r,d=[],f=0,Array.isArray(a))for(x="[",c="]",m=a.length;f<m;f++)d.push(s(a[f],y,f===m-1?0:1)||"null");else for(x="{",c="}",g=Object.keys(a),m=g.length;f<m;f++)h=g[f],p=JSON.stringify(h)+": ",w=s(a[h],y,p.length+(f===m-1?0:1)),w!==void 0&&d.push(p+w);if(d.length>0)return[x,r+d.join(`,
`+y),c].join(`
`+u)}return b}(t,"",0)};const t2=xf(RG);function ur(e,t,n){return e.fields=t||[],e.fname=n,e}function lt(e){return e==null?null:e.fname}function fn(e){return e==null?null:e.fields}function fP(e){return e.length===1?PG(e[0]):LG(e)}const PG=e=>function(t){return t[e]},LG=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function z(e){throw Error(e)}function yo(e){const t=[],n=e.length;let r=null,i=0,o="",s,a,u;e=e+"";function l(){t.push(o+e.substring(s,a)),o="",s=a+1}for(s=a=0;a<n;++a)if(u=e[a],u==="\\")o+=e.substring(s,a++),s=a;else if(u===r)l(),r=null,i=-1;else{if(r)continue;s===i&&u==='"'||s===i&&u==="'"?(s=a+1,r=u):u==="."&&!i?a>s?l():s=a+1:u==="["?(a>s&&l(),i=s=a+1):u==="]"&&(i||z("Access path missing open bracket: "+e),i>0&&l(),i=0,s=a+1)}return i&&z("Access path missing closing bracket: "+e),r&&z("Access path missing closing quote: "+e),a>s&&(a++,l()),t}function tr(e,t,n){const r=yo(e);return e=r.length===1?r[0]:e,ur((n&&n.get||fP)(r),[e],t||e)}const Fp=tr("id"),mn=ur(e=>e,[],"identity"),zs=ur(()=>0,[],"zero"),Sf=ur(()=>1,[],"one"),Ur=ur(()=>!0,[],"true"),$s=ur(()=>!1,[],"false");function zG(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}const dP=0,D_=1,R_=2,hP=3,pP=4;function P_(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:zG,r=e||dP;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=D_&&n(t||"error","ERROR",arguments),this},warn(){return r>=R_&&n(t||"warn","WARN",arguments),this},info(){return r>=hP&&n(t||"log","INFO",arguments),this},debug(){return r>=pP&&n(t||"log","DEBUG",arguments),this}}}var I=Array.isArray;function J(e){return e===Object(e)}const xT=e=>e!=="__proto__";function _f(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((r,i)=>{for(const o in i)if(o==="signals")r.signals=IG(r.signals,i.signals);else{const s=o==="legend"?{layout:1}:o==="style"?!0:null;kf(r,o,i[o],s)}return r},{})}function kf(e,t,n,r){if(!xT(t))return;let i,o;if(J(n)&&!I(n)){o=J(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?kf(o,i,n[i]):xT(i)&&(o[i]=n[i])}else e[t]=n}function IG(e,t){if(e==null)return t;const n={},r=[];function i(o){n[o.name]||(n[o.name]=1,r.push(o))}return t.forEach(i),e.forEach(i),r}function _e(e){return e[e.length-1]}function un(e){return e==null||e===""?null:+e}const gP=e=>t=>e*Math.exp(t),mP=e=>t=>Math.log(e*t),yP=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),vP=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,T0=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function Cy(e,t,n,r){const i=n(e[0]),o=n(_e(e)),s=(o-i)*t;return[r(i-s),r(o-s)]}function xP(e,t){return Cy(e,t,un,mn)}function bP(e,t){var n=Math.sign(e[0]);return Cy(e,t,mP(n),gP(n))}function wP(e,t,n){return Cy(e,t,T0(n),T0(1/n))}function EP(e,t,n){return Cy(e,t,yP(n),vP(n))}function Ay(e,t,n,r,i){const o=r(e[0]),s=r(_e(e)),a=t!=null?r(t):(o+s)/2;return[i(a+(o-a)*n),i(a+(s-a)*n)]}function L_(e,t,n){return Ay(e,t,n,un,mn)}function z_(e,t,n){const r=Math.sign(e[0]);return Ay(e,t,n,mP(r),gP(r))}function M0(e,t,n,r){return Ay(e,t,n,T0(r),T0(1/r))}function I_(e,t,n,r){return Ay(e,t,n,yP(r),vP(r))}function SP(e){return 1+~~(new Date(e).getMonth()/3)}function _P(e){return 1+~~(new Date(e).getUTCMonth()/3)}function K(e){return e!=null?I(e)?e:[e]:[]}function kP(e,t,n){let r=e[0],i=e[1],o;return i<r&&(o=i,i=r,r=o),o=i-r,o>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-o),r+o]}function pe(e){return typeof e=="function"}const BG="descending";function B_(e,t,n){n=n||{},t=K(t)||[];const r=[],i=[],o={},s=n.comparator||jG;return K(e).forEach((a,u)=>{a!=null&&(r.push(t[u]===BG?-1:1),i.push(a=pe(a)?a:tr(a,null,n)),(fn(a)||[]).forEach(l=>o[l]=1))}),i.length===0?null:ur(s(i,r),Object.keys(o))}const Fy=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),jG=(e,t)=>e.length===1?UG(e[0],t[0]):WG(e,t,e.length),UG=(e,t)=>function(n,r){return Fy(e(n),e(r))*t},WG=(e,t,n)=>(t.push(0),function(r,i){let o,s=0,a=-1;for(;s===0&&++a<n;)o=e[a],s=Fy(o(r),o(i));return s*t[a]});function yn(e){return pe(e)?e:()=>e}function j_(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function he(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function ao(e,t){let n=0,r,i,o,s;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(o=s=i;n<r;++n)i=e[n],i!=null&&(i<o&&(o=i),i>s&&(s=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(o=s=i;n<r;++n)i=t(e[n]),i!=null&&(i<o&&(o=i),i>s&&(s=i))}return[o,s]}function $P(e,t){const n=e.length;let r=-1,i,o,s,a,u;if(t==null){for(;++r<n;)if(o=e[r],o!=null&&o>=o){i=s=o;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)o=e[r],o!=null&&(i>o&&(i=o,a=r),s<o&&(s=o,u=r))}else{for(;++r<n;)if(o=t(e[r],r,e),o!=null&&o>=o){i=s=o;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)o=t(e[r],r,e),o!=null&&(i>o&&(i=o,a=r),s<o&&(s=o,u=r))}return[a,u]}const qG=Object.prototype.hasOwnProperty;function ae(e,t){return qG.call(e,t)}const Pg={};function $f(e){let t={},n;function r(o){return ae(t,o)&&t[o]!==Pg}const i={size:0,empty:0,object:t,has:r,get(o){return r(o)?t[o]:void 0},set(o,s){return r(o)||(++i.size,t[o]===Pg&&--i.empty),t[o]=s,this},delete(o){return r(o)&&(--i.size,++i.empty,t[o]=Pg),this},clear(){i.size=i.empty=0,i.object=t={}},test(o){return arguments.length?(n=o,i):n},clean(){const o={};let s=0;for(const a in t){const u=t[a];u!==Pg&&(!n||!n(u))&&(o[a]=u,++s)}i.size=s,i.empty=0,i.object=t=o}};return e&&Object.keys(e).forEach(o=>{i.set(o,e[o])}),i}function CP(e,t,n,r,i,o){if(!n&&n!==0)return o;const s=+n;let a=e[0],u=_e(e),l;u<a&&(l=a,a=u,u=l),l=Math.abs(t-a);const c=Math.abs(u-t);return l<c&&l<=s?r:c<=s?i:o}function V(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),he(r,n)}function ac(e,t,n,r){let i=t[0],o=t[t.length-1],s;return i>o&&(s=i,i=o,o=s),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=o:e<o)}function Oa(e){return typeof e=="boolean"}function oa(e){return Object.prototype.toString.call(e)==="[object Date]"}function AP(e){return e&&pe(e[Symbol.iterator])}function ze(e){return typeof e=="number"}function FP(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function Q(e){return typeof e=="string"}function U_(e,t,n){e&&(e=t?K(e).map(a=>a.replace(/\\(.)/g,"$1")):K(e));const r=e&&e.length,i=n&&n.get||fP,o=a=>i(t?[a]:yo(a));let s;if(!r)s=function(){return""};else if(r===1){const a=o(e[0]);s=function(u){return""+a(u)}}else{const a=e.map(o);s=function(u){let l=""+a[0](u),c=0;for(;++c<r;)l+="|"+a[c](u);return l}}return ur(s,e,"key")}function TP(e,t){const n=e[0],r=_e(e),i=+t;return i?i===1?r:n+i*(r-n):n}const HG=1e4;function MP(e){e=+e||HG;let t,n,r;const i=()=>{t={},n={},r=0},o=(s,a)=>(++r>e&&(n=t,t={},r=1),t[s]=a);return i(),{clear:i,has:s=>ae(t,s)||ae(n,s),get:s=>ae(t,s)?t[s]:ae(n,s)?o(s,n[s]):void 0,set:(s,a)=>ae(t,s)?t[s]=a:o(s,a)}}function NP(e,t,n,r){const i=t.length,o=n.length;if(!o)return t;if(!i)return n;const s=r||new t.constructor(i+o);let a=0,u=0,l=0;for(;a<i&&u<o;++l)s[l]=e(t[a],n[u])>0?n[u++]:t[a++];for(;a<i;++a,++l)s[l]=t[a];for(;u<o;++u,++l)s[l]=n[u];return s}function Dd(e,t){let n="";for(;--t>=0;)n+=e;return n}function OP(e,t,n,r){const i=n||" ",o=e+"",s=t-o.length;return s<=0?o:r==="left"?Dd(i,s)+o:r==="center"?Dd(i,~~(s/2))+o+Dd(i,Math.ceil(s/2)):o+Dd(i,s)}function Tp(e){return e&&_e(e)-e[0]||0}function G(e){return I(e)?"["+e.map(G)+"]":J(e)||Q(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function W_(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const GG=e=>ze(e)||oa(e)?e:Date.parse(e);function q_(e,t){return t=t||GG,e==null||e===""?null:t(e)}function H_(e){return e==null||e===""?null:e+""}function ki(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function DP(e,t,n,r){const i=r??"…",o=e+"",s=o.length,a=Math.max(0,t-i.length);return s<=t?o:n==="left"?i+o.slice(s-a):n==="center"?o.slice(0,Math.ceil(a/2))+i+o.slice(s-~~(a/2)):o.slice(0,a)+i}function Ms(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const o=t(e[i]);o&&n(o,i,e)}}else e.forEach(n)}var bT={},n2={},r2=34,rd=10,i2=13;function RP(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function VG(e,t){var n=RP(e);return function(r,i){return t(n(r),i,e)}}function wT(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function In(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function YG(e){return e<0?"-"+In(-e,6):e>9999?"+"+In(e,6):In(e,4)}function XG(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":YG(e.getUTCFullYear())+"-"+In(e.getUTCMonth()+1,2)+"-"+In(e.getUTCDate(),2)+(i?"T"+In(t,2)+":"+In(n,2)+":"+In(r,2)+"."+In(i,3)+"Z":r?"T"+In(t,2)+":"+In(n,2)+":"+In(r,2)+"Z":n||t?"T"+In(t,2)+":"+In(n,2)+"Z":"")}function QG(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(f,d){var h,p,g=i(f,function(m,y){if(h)return h(m,y-1);p=m,h=d?VG(m,d):RP(m)});return g.columns=p||[],g}function i(f,d){var h=[],p=f.length,g=0,m=0,y,v=p<=0,x=!1;f.charCodeAt(p-1)===rd&&--p,f.charCodeAt(p-1)===i2&&--p;function b(){if(v)return n2;if(x)return x=!1,bT;var S,E=g,_;if(f.charCodeAt(E)===r2){for(;g++<p&&f.charCodeAt(g)!==r2||f.charCodeAt(++g)===r2;);return(S=g)>=p?v=!0:(_=f.charCodeAt(g++))===rd?x=!0:_===i2&&(x=!0,f.charCodeAt(g)===rd&&++g),f.slice(E+1,S-1).replace(/""/g,'"')}for(;g<p;){if((_=f.charCodeAt(S=g++))===rd)x=!0;else if(_===i2)x=!0,f.charCodeAt(g)===rd&&++g;else if(_!==n)continue;return f.slice(E,S)}return v=!0,f.slice(E,p)}for(;(y=b())!==n2;){for(var w=[];y!==bT&&y!==n2;)w.push(y),y=b();d&&(w=d(w,m++))==null||h.push(w)}return h}function o(f,d){return f.map(function(h){return d.map(function(p){return c(h[p])}).join(e)})}function s(f,d){return d==null&&(d=wT(f)),[d.map(c).join(e)].concat(o(f,d)).join(`
`)}function a(f,d){return d==null&&(d=wT(f)),o(f,d).join(`
`)}function u(f){return f.map(l).join(`
`)}function l(f){return f.map(c).join(e)}function c(f){return f==null?"":f instanceof Date?XG(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:s,formatBody:a,formatRows:u,formatRow:l,formatValue:c}}function KG(e){return e}function JG(e){if(e==null)return KG;var t,n,r=e.scale[0],i=e.scale[1],o=e.translate[0],s=e.translate[1];return function(a,u){u||(t=n=0);var l=2,c=a.length,f=new Array(c);for(f[0]=(t+=a[0])*r+o,f[1]=(n+=a[1])*i+s;l<c;)f[l]=a[l],++l;return f}}function ZG(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function eV(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return ET(e,n)})}:ET(e,t)}function ET(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,o=PP(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:o}:r==null?{type:"Feature",id:n,properties:i,geometry:o}:{type:"Feature",id:n,bbox:r,properties:i,geometry:o}}function PP(e,t){var n=JG(e.transform),r=e.arcs;function i(c,f){f.length&&f.pop();for(var d=r[c<0?~c:c],h=0,p=d.length;h<p;++h)f.push(n(d[h],h));c<0&&ZG(f,p)}function o(c){return n(c)}function s(c){for(var f=[],d=0,h=c.length;d<h;++d)i(c[d],f);return f.length<2&&f.push(f[0]),f}function a(c){for(var f=s(c);f.length<4;)f.push(f[0]);return f}function u(c){return c.map(a)}function l(c){var f=c.type,d;switch(f){case"GeometryCollection":return{type:f,geometries:c.geometries.map(l)};case"Point":d=o(c.coordinates);break;case"MultiPoint":d=c.coordinates.map(o);break;case"LineString":d=s(c.arcs);break;case"MultiLineString":d=c.arcs.map(s);break;case"Polygon":d=u(c.arcs);break;case"MultiPolygon":d=c.arcs.map(u);break;default:return null}return{type:f,coordinates:d}}return l(t)}function tV(e,t){var n={},r={},i={},o=[],s=-1;t.forEach(function(l,c){var f=e.arcs[l<0?~l:l],d;f.length<3&&!f[1][0]&&!f[1][1]&&(d=t[++s],t[s]=l,t[c]=d)}),t.forEach(function(l){var c=a(l),f=c[0],d=c[1],h,p;if(h=i[f])if(delete i[h.end],h.push(l),h.end=d,p=r[d]){delete r[p.start];var g=p===h?h:h.concat(p);r[g.start=h.start]=i[g.end=p.end]=g}else r[h.start]=i[h.end]=h;else if(h=r[d])if(delete r[h.start],h.unshift(l),h.start=f,p=i[f]){delete i[p.end];var m=p===h?h:p.concat(h);r[m.start=p.start]=i[m.end=h.end]=m}else r[h.start]=i[h.end]=h;else h=[l],r[h.start=f]=i[h.end=d]=h});function a(l){var c=e.arcs[l<0?~l:l],f=c[0],d;return e.transform?(d=[0,0],c.forEach(function(h){d[0]+=h[0],d[1]+=h[1]})):d=c[c.length-1],l<0?[d,f]:[f,d]}function u(l,c){for(var f in l){var d=l[f];delete c[d.start],delete d.start,delete d.end,d.forEach(function(h){n[h<0?~h:h]=1}),o.push(d)}}return u(i,r),u(r,i),t.forEach(function(l){n[l<0?~l:l]||o.push([l])}),o}function nV(e){return PP(e,rV.apply(this,arguments))}function rV(e,t,n){var r,i,o;if(arguments.length>1)r=iV(e,t,n);else for(i=0,r=new Array(o=e.arcs.length);i<o;++i)r[i]=i;return{type:"MultiLineString",arcs:tV(e,r)}}function iV(e,t,n){var r=[],i=[],o;function s(f){var d=f<0?~f:f;(i[d]||(i[d]=[])).push({i:f,g:o})}function a(f){f.forEach(s)}function u(f){f.forEach(a)}function l(f){f.forEach(u)}function c(f){switch(o=f,f.type){case"GeometryCollection":f.geometries.forEach(c);break;case"LineString":a(f.arcs);break;case"MultiLineString":case"Polygon":u(f.arcs);break;case"MultiPolygon":l(f.arcs);break}}return c(t),i.forEach(n==null?function(f){r.push(f[0].i)}:function(f){n(f[0].g,f[f.length-1].g)&&r.push(f[0].i)}),r}function Ko(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function oV(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Mp(e){let t,n,r;e.length!==2?(t=Ko,n=(a,u)=>Ko(e(a),u),r=(a,u)=>e(a)-u):(t=e===Ko||e===oV?e:sV,n=e,r=e);function i(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<0?l=f+1:c=f}while(l<c)}return l}function o(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<=0?l=f+1:c=f}while(l<c)}return l}function s(a,u,l=0,c=a.length){const f=i(a,u,l,c-1);return f>l&&r(a[f-1],u)>-r(a[f],u)?f-1:f}return{left:i,center:s,right:o}}function sV(){return 0}function LP(e){return e===null?NaN:+e}function*aV(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const zP=Mp(Ko),N0=zP.right,uV=zP.left;Mp(LP).center;const Np=N0;function lV(e,t){let n=0,r,i=0,o=0;if(t===void 0)for(let s of e)s!=null&&(s=+s)>=s&&(r=s-i,i+=r/++n,o+=r*(s-i));else{let s=-1;for(let a of e)(a=t(a,++s,e))!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,o+=r*(a-i))}if(n>1)return o/(n-1)}function cV(e,t){const n=lV(e,t);return n&&Math.sqrt(n)}class Tn{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const o=n[i],s=t+o,a=Math.abs(t)<Math.abs(o)?t-(s-o):o-(s-t);a&&(n[r++]=a),t=s}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,o,s=0;if(n>0){for(s=t[--n];n>0&&(r=s,i=t[--n],s=r+i,o=i-(s-r),!o););n>0&&(o<0&&t[n-1]<0||o>0&&t[n-1]>0)&&(i=o*2,r=s+i,i==r-s&&(s=r))}return s}}class ST extends Map{constructor(t,n=jP){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(Cw(this,t))}has(t){return super.has(Cw(this,t))}set(t,n){return super.set(IP(this,t),n)}delete(t){return super.delete(BP(this,t))}}class O0 extends Set{constructor(t,n=jP){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(Cw(this,t))}add(t){return super.add(IP(this,t))}delete(t){return super.delete(BP(this,t))}}function Cw({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function IP({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function BP({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function jP(e){return e!==null&&typeof e=="object"?e.valueOf():e}function fV(e,t){return Array.from(t,n=>e[n])}function dV(e=Ko){if(e===Ko)return UP;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function UP(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const hV=Math.sqrt(50),pV=Math.sqrt(10),gV=Math.sqrt(2);function D0(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),s=o>=hV?10:o>=pV?5:o>=gV?2:1;let a,u,l;return i<0?(l=Math.pow(10,-i)/s,a=Math.round(e*l),u=Math.round(t*l),a/l<e&&++a,u/l>t&&--u,l=-l):(l=Math.pow(10,i)*s,a=Math.round(e/l),u=Math.round(t/l),a*l<e&&++a,u*l>t&&--u),u<a&&.5<=n&&n<2?D0(e,t,n*2):[a,u,l]}function Aw(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,o,s]=r?D0(t,e,n):D0(e,t,n);if(!(o>=i))return[];const a=o-i+1,u=new Array(a);if(r)if(s<0)for(let l=0;l<a;++l)u[l]=(o-l)/-s;else for(let l=0;l<a;++l)u[l]=(o-l)*s;else if(s<0)for(let l=0;l<a;++l)u[l]=(i+l)/-s;else for(let l=0;l<a;++l)u[l]=(i+l)*s;return u}function Fw(e,t,n){return t=+t,e=+e,n=+n,D0(e,t,n)[2]}function pa(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?Fw(t,e,n):Fw(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function Tu(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function Tw(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function WP(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?UP:dV(i);r>n;){if(r-n>600){const u=r-n+1,l=t-n+1,c=Math.log(u),f=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*f*(u-f)/u)*(l-u/2<0?-1:1),h=Math.max(n,Math.floor(t-l*f/u+d)),p=Math.min(r,Math.floor(t+(u-l)*f/u+d));WP(e,t,h,p,i)}const o=e[t];let s=n,a=r;for(id(e,n,t),i(e[r],o)>0&&id(e,n,r);s<a;){for(id(e,s,a),++s,--a;i(e[s],o)<0;)++s;for(;i(e[a],o)>0;)--a}i(e[n],o)===0?id(e,n,a):(++a,id(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}return e}function id(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Mw(e,t,n){if(e=Float64Array.from(aV(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return Tw(e);if(t>=1)return Tu(e);var r,i=(r-1)*t,o=Math.floor(i),s=Tu(WP(e,o).subarray(0,o+1)),a=Tw(e.subarray(o+1));return s+(a-s)*(i-o)}}function qP(e,t,n=LP){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,o=Math.floor(i),s=+n(e[o],o,e),a=+n(e[o+1],o+1,e);return s+(a-s)*(i-o)}}function mV(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let o of e)(o=t(o,++i,e))!=null&&(o=+o)>=o&&(++n,r+=o)}if(n)return r/n}function HP(e,t){return Mw(e,.5,t)}function*yV(e){for(const t of e)yield*t}function GP(e){return Array.from(yV(e))}function yr(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,o=new Array(i);++r<i;)o[r]=e+r*n;return o}function VP(e,t){let n=0;if(t===void 0)for(let r of e)(r=+r)&&(n+=r);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}function vV(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function R0(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Lc(e){return e=R0(Math.abs(e)),e?e[1]:NaN}function xV(e,t){return function(n,r){for(var i=n.length,o=[],s=0,a=e[0],u=0;i>0&&a>0&&(u+a+1>r&&(a=Math.max(1,r-u)),o.push(n.substring(i-=a,i+a)),!((u+=a+1)>r));)a=e[s=(s+1)%e.length];return o.reverse().join(t)}}function bV(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var wV=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function qu(e){if(!(t=wV.exec(e)))throw new Error("invalid format: "+e);var t;return new G_({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}qu.prototype=G_.prototype;function G_(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}G_.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function EV(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var YP;function SV(e,t){var n=R0(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(YP=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return o===s?r:o>s?r+new Array(o-s+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+R0(e,Math.max(0,t+o-1))[0]}function _T(e,t){var n=R0(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const kT={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:vV,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>_T(e*100,t),r:_T,s:SV,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function $T(e){return e}var CT=Array.prototype.map,AT=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function XP(e){var t=e.grouping===void 0||e.thousands===void 0?$T:xV(CT.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?$T:bV(CT.call(e.numerals,String)),s=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"−":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function l(f){f=qu(f);var d=f.fill,h=f.align,p=f.sign,g=f.symbol,m=f.zero,y=f.width,v=f.comma,x=f.precision,b=f.trim,w=f.type;w==="n"?(v=!0,w="g"):kT[w]||(x===void 0&&(x=12),b=!0,w="g"),(m||d==="0"&&h==="=")&&(m=!0,d="0",h="=");var S=g==="$"?n:g==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",E=g==="$"?r:/[%p]/.test(w)?s:"",_=kT[w],$=/[defgprs%]/.test(w);x=x===void 0?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,x)):Math.max(0,Math.min(20,x));function k(A){var R=S,C=E,T,F,N;if(w==="c")C=_(A)+C,A="";else{A=+A;var D=A<0||1/A<0;if(A=isNaN(A)?u:_(Math.abs(A),x),b&&(A=EV(A)),D&&+A==0&&p!=="+"&&(D=!1),R=(D?p==="("?p:a:p==="-"||p==="("?"":p)+R,C=(w==="s"?AT[8+YP/3]:"")+C+(D&&p==="("?")":""),$){for(T=-1,F=A.length;++T<F;)if(N=A.charCodeAt(T),48>N||N>57){C=(N===46?i+A.slice(T+1):A.slice(T))+C,A=A.slice(0,T);break}}}v&&!m&&(A=t(A,1/0));var M=R.length+A.length+C.length,O=M<y?new Array(y-M+1).join(d):"";switch(v&&m&&(A=t(O+A,O.length?y-C.length:1/0),O=""),h){case"<":A=R+A+C+O;break;case"=":A=R+O+A+C;break;case"^":A=O.slice(0,M=O.length>>1)+R+A+C+O.slice(M);break;default:A=O+R+A+C;break}return o(A)}return k.toString=function(){return f+""},k}function c(f,d){var h=l((f=qu(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(Lc(d)/3)))*3,g=Math.pow(10,-p),m=AT[8+p/3];return function(y){return h(g*y)+m}}return{format:l,formatPrefix:c}}var Lg,Ty,V_;_V({thousands:",",grouping:[3],currency:["$",""]});function _V(e){return Lg=XP(e),Ty=Lg.format,V_=Lg.formatPrefix,Lg}function QP(e){return Math.max(0,-Lc(Math.abs(e)))}function KP(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Lc(t)/3)))*3-Lc(Math.abs(e)))}function JP(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Lc(t)-Lc(e))+1}const o2=new Date,s2=new Date;function St(e,t,n,r){function i(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(e(o=new Date(+o)),o),i.ceil=o=>(e(o=new Date(o-1)),t(o,1),e(o),o),i.round=o=>{const s=i(o),a=i.ceil(o);return o-s<a-o?s:a},i.offset=(o,s)=>(t(o=new Date(+o),s==null?1:Math.floor(s)),o),i.range=(o,s,a)=>{const u=[];if(o=i.ceil(o),a=a==null?1:Math.floor(a),!(o<s)||!(a>0))return u;let l;do u.push(l=new Date(+o)),t(o,a),e(o);while(l<o&&o<s);return u},i.filter=o=>St(s=>{if(s>=s)for(;e(s),!o(s);)s.setTime(s-1)},(s,a)=>{if(s>=s)if(a<0)for(;++a<=0;)for(;t(s,-1),!o(s););else for(;--a>=0;)for(;t(s,1),!o(s););}),n&&(i.count=(o,s)=>(o2.setTime(+o),s2.setTime(+s),e(o2),e(s2),Math.floor(n(o2,s2))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?s=>r(s)%o===0:s=>i.count(0,s)%o===0):i)),i}const zc=St(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);zc.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?St(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):zc);zc.range;const Wo=1e3,Or=Wo*60,qo=Or*60,ls=qo*24,Y_=ls*7,FT=ls*30,a2=ls*365,Ho=St(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Wo)},(e,t)=>(t-e)/Wo,e=>e.getUTCSeconds());Ho.range;const My=St(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Wo)},(e,t)=>{e.setTime(+e+t*Or)},(e,t)=>(t-e)/Or,e=>e.getMinutes());My.range;const Ny=St(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Or)},(e,t)=>(t-e)/Or,e=>e.getUTCMinutes());Ny.range;const Oy=St(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Wo-e.getMinutes()*Or)},(e,t)=>{e.setTime(+e+t*qo)},(e,t)=>(t-e)/qo,e=>e.getHours());Oy.range;const Dy=St(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*qo)},(e,t)=>(t-e)/qo,e=>e.getUTCHours());Dy.range;const Jo=St(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Or)/ls,e=>e.getDate()-1);Jo.range;const sa=St(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ls,e=>e.getUTCDate()-1);sa.range;const ZP=St(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ls,e=>Math.floor(e/ls));ZP.range;function gl(e){return St(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Or)/Y_)}const Cf=gl(0),P0=gl(1),kV=gl(2),$V=gl(3),Ic=gl(4),CV=gl(5),AV=gl(6);Cf.range;P0.range;kV.range;$V.range;Ic.range;CV.range;AV.range;function ml(e){return St(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/Y_)}const Af=ml(0),L0=ml(1),FV=ml(2),TV=ml(3),Bc=ml(4),MV=ml(5),NV=ml(6);Af.range;L0.range;FV.range;TV.range;Bc.range;MV.range;NV.range;const Gh=St(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Gh.range;const Vh=St(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Vh.range;const uo=St(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());uo.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:St(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});uo.range;const lo=St(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());lo.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:St(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});lo.range;function e6(e,t,n,r,i,o){const s=[[Ho,1,Wo],[Ho,5,5*Wo],[Ho,15,15*Wo],[Ho,30,30*Wo],[o,1,Or],[o,5,5*Or],[o,15,15*Or],[o,30,30*Or],[i,1,qo],[i,3,3*qo],[i,6,6*qo],[i,12,12*qo],[r,1,ls],[r,2,2*ls],[n,1,Y_],[t,1,FT],[t,3,3*FT],[e,1,a2]];function a(l,c,f){const d=c<l;d&&([l,c]=[c,l]);const h=f&&typeof f.range=="function"?f:u(l,c,f),p=h?h.range(l,+c+1):[];return d?p.reverse():p}function u(l,c,f){const d=Math.abs(c-l)/f,h=Mp(([,,m])=>m).right(s,d);if(h===s.length)return e.every(pa(l/a2,c/a2,f));if(h===0)return zc.every(Math.max(pa(l,c,f),1));const[p,g]=s[d/s[h-1][2]<s[h][2]/d?h-1:h];return p.every(g)}return[a,u]}const[OV,DV]=e6(lo,Vh,Af,ZP,Dy,Ny),[RV,PV]=e6(uo,Gh,Cf,Jo,Oy,My),Ht="year",nr="quarter",dn="month",bt="week",rr="date",an="day",co="dayofyear",wr="hours",Er="minutes",Wr="seconds",$i="milliseconds",X_=[Ht,nr,dn,bt,rr,an,co,wr,Er,Wr,$i],u2=X_.reduce((e,t,n)=>(e[t]=1+n,e),{});function Q_(e){const t=K(e).slice(),n={};return t.length||z("Missing time unit."),t.forEach(i=>{ae(u2,i)?n[i]=1:z(`Invalid time unit: ${i}.`)}),(n[bt]||n[an]?1:0)+(n[nr]||n[dn]||n[rr]?1:0)+(n[co]?1:0)>1&&z(`Incompatible time units: ${e}`),t.sort((i,o)=>u2[i]-u2[o]),t}const LV={[Ht]:"%Y ",[nr]:"Q%q ",[dn]:"%b ",[rr]:"%d ",[bt]:"W%U ",[an]:"%a ",[co]:"%j ",[wr]:"%H:00",[Er]:"00:%M",[Wr]:":%S",[$i]:".%L",[`${Ht}-${dn}`]:"%Y-%m ",[`${Ht}-${dn}-${rr}`]:"%Y-%m-%d ",[`${wr}-${Er}`]:"%H:%M"};function t6(e,t){const n=he({},LV,t),r=Q_(e),i=r.length;let o="",s=0,a,u;for(s=0;s<i;)for(a=r.length;a>s;--a)if(u=r.slice(s,a).join("-"),n[u]!=null){o+=n[u],s=a;break}return o.trim()}const du=new Date;function K_(e){return du.setFullYear(e),du.setMonth(0),du.setDate(1),du.setHours(0,0,0,0),du}function n6(e){return i6(new Date(e))}function r6(e){return Nw(new Date(e))}function i6(e){return Jo.count(K_(e.getFullYear())-1,e)}function Nw(e){return Cf.count(K_(e.getFullYear())-1,e)}function Ow(e){return K_(e).getDay()}function zV(e,t,n,r,i,o,s){if(0<=e&&e<100){const a=new Date(-1,t,n,r,i,o,s);return a.setFullYear(e),a}return new Date(e,t,n,r,i,o,s)}function o6(e){return a6(new Date(e))}function s6(e){return Dw(new Date(e))}function a6(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return sa.count(t-1,e)}function Dw(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return Af.count(t-1,e)}function Rw(e){return du.setTime(Date.UTC(e,0,1)),du.getUTCDay()}function IV(e,t,n,r,i,o,s){if(0<=e&&e<100){const a=new Date(Date.UTC(-1,t,n,r,i,o,s));return a.setUTCFullYear(n.y),a}return new Date(Date.UTC(e,t,n,r,i,o,s))}function u6(e,t,n,r,i){const o=t||1,s=_e(e),a=(y,v,x)=>(x=x||y,BV(n[x],r[x],y===s&&o,v)),u=new Date,l=ki(e),c=l[Ht]?a(Ht):yn(2012),f=l[dn]?a(dn):l[nr]?a(nr):zs,d=l[bt]&&l[an]?a(an,1,bt+an):l[bt]?a(bt,1):l[an]?a(an,1):l[rr]?a(rr,1):l[co]?a(co,1):Sf,h=l[wr]?a(wr):zs,p=l[Er]?a(Er):zs,g=l[Wr]?a(Wr):zs,m=l[$i]?a($i):zs;return function(y){u.setTime(+y);const v=c(u);return i(v,f(u),d(u,v),h(u),p(u),g(u),m(u))}}function BV(e,t,n,r){const i=n<=1?e:r?(o,s)=>r+n*Math.floor((e(o,s)-r)/n):(o,s)=>n*Math.floor(e(o,s)/n);return t?(o,s)=>t(i(o,s),s):i}function jc(e,t,n){return t+e*7-(n+6)%7}const jV={[Ht]:e=>e.getFullYear(),[nr]:e=>Math.floor(e.getMonth()/3),[dn]:e=>e.getMonth(),[rr]:e=>e.getDate(),[wr]:e=>e.getHours(),[Er]:e=>e.getMinutes(),[Wr]:e=>e.getSeconds(),[$i]:e=>e.getMilliseconds(),[co]:e=>i6(e),[bt]:e=>Nw(e),[bt+an]:(e,t)=>jc(Nw(e),e.getDay(),Ow(t)),[an]:(e,t)=>jc(1,e.getDay(),Ow(t))},UV={[nr]:e=>3*e,[bt]:(e,t)=>jc(e,0,Ow(t))};function l6(e,t){return u6(e,t||1,jV,UV,zV)}const WV={[Ht]:e=>e.getUTCFullYear(),[nr]:e=>Math.floor(e.getUTCMonth()/3),[dn]:e=>e.getUTCMonth(),[rr]:e=>e.getUTCDate(),[wr]:e=>e.getUTCHours(),[Er]:e=>e.getUTCMinutes(),[Wr]:e=>e.getUTCSeconds(),[$i]:e=>e.getUTCMilliseconds(),[co]:e=>a6(e),[bt]:e=>Dw(e),[an]:(e,t)=>jc(1,e.getUTCDay(),Rw(t)),[bt+an]:(e,t)=>jc(Dw(e),e.getUTCDay(),Rw(t))},qV={[nr]:e=>3*e,[bt]:(e,t)=>jc(e,0,Rw(t))};function c6(e,t){return u6(e,t||1,WV,qV,IV)}const HV={[Ht]:uo,[nr]:Gh.every(3),[dn]:Gh,[bt]:Cf,[rr]:Jo,[an]:Jo,[co]:Jo,[wr]:Oy,[Er]:My,[Wr]:Ho,[$i]:zc},GV={[Ht]:lo,[nr]:Vh.every(3),[dn]:Vh,[bt]:Af,[rr]:sa,[an]:sa,[co]:sa,[wr]:Dy,[Er]:Ny,[Wr]:Ho,[$i]:zc};function Ff(e){return HV[e]}function Tf(e){return GV[e]}function f6(e,t,n){return e?e.offset(t,n):void 0}function d6(e,t,n){return f6(Ff(e),t,n)}function h6(e,t,n){return f6(Tf(e),t,n)}function p6(e,t,n,r){return e?e.range(t,n,r):void 0}function g6(e,t,n,r){return p6(Ff(e),t,n,r)}function m6(e,t,n,r){return p6(Tf(e),t,n,r)}const Rd=1e3,Pd=Rd*60,Ld=Pd*60,Ry=Ld*24,VV=Ry*7,TT=Ry*30,Pw=Ry*365,y6=[Ht,dn,rr,wr,Er,Wr,$i],zd=y6.slice(0,-1),Id=zd.slice(0,-1),Bd=Id.slice(0,-1),YV=Bd.slice(0,-1),XV=[Ht,bt],MT=[Ht,dn],v6=[Ht],od=[[zd,1,Rd],[zd,5,5*Rd],[zd,15,15*Rd],[zd,30,30*Rd],[Id,1,Pd],[Id,5,5*Pd],[Id,15,15*Pd],[Id,30,30*Pd],[Bd,1,Ld],[Bd,3,3*Ld],[Bd,6,6*Ld],[Bd,12,12*Ld],[YV,1,Ry],[XV,1,VV],[MT,1,TT],[MT,3,3*TT],[v6,1,Pw]];function x6(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(Tp(t))/n;let i=Mp(a=>a[2]).right(od,r),o,s;return i===od.length?(o=v6,s=pa(t[0]/Pw,t[1]/Pw,n)):i?(i=od[r/od[i-1][2]<od[i][2]/r?i-1:i],o=i[0],s=i[1]):(o=y6,s=Math.max(pa(t[0],t[1],n),1)),{units:o,step:s}}function l2(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function c2(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function sd(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function b6(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,o=e.days,s=e.shortDays,a=e.months,u=e.shortMonths,l=ad(i),c=ud(i),f=ad(o),d=ud(o),h=ad(s),p=ud(s),g=ad(a),m=ud(a),y=ad(u),v=ud(u),x={a:D,A:M,b:O,B,c:null,d:LT,e:LT,f:vY,g:AY,G:TY,H:gY,I:mY,j:yY,L:w6,m:xY,M:bY,p:X,q:te,Q:BT,s:jT,S:wY,u:EY,U:SY,V:_Y,w:kY,W:$Y,x:null,X:null,y:CY,Y:FY,Z:MY,"%":IT},b={a:xe,A:de,b:Oe,B:zt,c:null,d:zT,e:zT,f:RY,g:HY,G:VY,H:NY,I:OY,j:DY,L:S6,m:PY,M:LY,p:Kr,q:Ya,Q:BT,s:jT,S:zY,u:IY,U:BY,V:jY,w:UY,W:WY,x:null,X:null,y:qY,Y:GY,Z:YY,"%":IT},w={a:k,A,b:R,B:C,c:T,d:RT,e:RT,f:fY,g:DT,G:OT,H:PT,I:PT,j:aY,L:cY,m:sY,M:uY,p:$,q:oY,Q:hY,s:pY,S:lY,u:eY,U:tY,V:nY,w:ZV,W:rY,x:F,X:N,y:DT,Y:OT,Z:iY,"%":dY};x.x=S(n,x),x.X=S(r,x),x.c=S(t,x),b.x=S(n,b),b.X=S(r,b),b.c=S(t,b);function S(Z,ge){return function(ye){var q=[],It=-1,Me=0,Kt=Z.length,vn,Xa,sF;for(ye instanceof Date||(ye=new Date(+ye));++It<Kt;)Z.charCodeAt(It)===37&&(q.push(Z.slice(Me,It)),(Xa=NT[vn=Z.charAt(++It)])!=null?vn=Z.charAt(++It):Xa=vn==="e"?" ":"0",(sF=ge[vn])&&(vn=sF(ye,Xa)),q.push(vn),Me=It+1);return q.push(Z.slice(Me,It)),q.join("")}}function E(Z,ge){return function(ye){var q=sd(1900,void 0,1),It=_(q,Z,ye+="",0),Me,Kt;if(It!=ye.length)return null;if("Q"in q)return new Date(q.Q);if("s"in q)return new Date(q.s*1e3+("L"in q?q.L:0));if(ge&&!("Z"in q)&&(q.Z=0),"p"in q&&(q.H=q.H%12+q.p*12),q.m===void 0&&(q.m="q"in q?q.q:0),"V"in q){if(q.V<1||q.V>53)return null;"w"in q||(q.w=1),"Z"in q?(Me=c2(sd(q.y,0,1)),Kt=Me.getUTCDay(),Me=Kt>4||Kt===0?L0.ceil(Me):L0(Me),Me=sa.offset(Me,(q.V-1)*7),q.y=Me.getUTCFullYear(),q.m=Me.getUTCMonth(),q.d=Me.getUTCDate()+(q.w+6)%7):(Me=l2(sd(q.y,0,1)),Kt=Me.getDay(),Me=Kt>4||Kt===0?P0.ceil(Me):P0(Me),Me=Jo.offset(Me,(q.V-1)*7),q.y=Me.getFullYear(),q.m=Me.getMonth(),q.d=Me.getDate()+(q.w+6)%7)}else("W"in q||"U"in q)&&("w"in q||(q.w="u"in q?q.u%7:"W"in q?1:0),Kt="Z"in q?c2(sd(q.y,0,1)).getUTCDay():l2(sd(q.y,0,1)).getDay(),q.m=0,q.d="W"in q?(q.w+6)%7+q.W*7-(Kt+5)%7:q.w+q.U*7-(Kt+6)%7);return"Z"in q?(q.H+=q.Z/100|0,q.M+=q.Z%100,c2(q)):l2(q)}}function _(Z,ge,ye,q){for(var It=0,Me=ge.length,Kt=ye.length,vn,Xa;It<Me;){if(q>=Kt)return-1;if(vn=ge.charCodeAt(It++),vn===37){if(vn=ge.charAt(It++),Xa=w[vn in NT?ge.charAt(It++):vn],!Xa||(q=Xa(Z,ye,q))<0)return-1}else if(vn!=ye.charCodeAt(q++))return-1}return q}function $(Z,ge,ye){var q=l.exec(ge.slice(ye));return q?(Z.p=c.get(q[0].toLowerCase()),ye+q[0].length):-1}function k(Z,ge,ye){var q=h.exec(ge.slice(ye));return q?(Z.w=p.get(q[0].toLowerCase()),ye+q[0].length):-1}function A(Z,ge,ye){var q=f.exec(ge.slice(ye));return q?(Z.w=d.get(q[0].toLowerCase()),ye+q[0].length):-1}function R(Z,ge,ye){var q=y.exec(ge.slice(ye));return q?(Z.m=v.get(q[0].toLowerCase()),ye+q[0].length):-1}function C(Z,ge,ye){var q=g.exec(ge.slice(ye));return q?(Z.m=m.get(q[0].toLowerCase()),ye+q[0].length):-1}function T(Z,ge,ye){return _(Z,t,ge,ye)}function F(Z,ge,ye){return _(Z,n,ge,ye)}function N(Z,ge,ye){return _(Z,r,ge,ye)}function D(Z){return s[Z.getDay()]}function M(Z){return o[Z.getDay()]}function O(Z){return u[Z.getMonth()]}function B(Z){return a[Z.getMonth()]}function X(Z){return i[+(Z.getHours()>=12)]}function te(Z){return 1+~~(Z.getMonth()/3)}function xe(Z){return s[Z.getUTCDay()]}function de(Z){return o[Z.getUTCDay()]}function Oe(Z){return u[Z.getUTCMonth()]}function zt(Z){return a[Z.getUTCMonth()]}function Kr(Z){return i[+(Z.getUTCHours()>=12)]}function Ya(Z){return 1+~~(Z.getUTCMonth()/3)}return{format:function(Z){var ge=S(Z+="",x);return ge.toString=function(){return Z},ge},parse:function(Z){var ge=E(Z+="",!1);return ge.toString=function(){return Z},ge},utcFormat:function(Z){var ge=S(Z+="",b);return ge.toString=function(){return Z},ge},utcParse:function(Z){var ge=E(Z+="",!0);return ge.toString=function(){return Z},ge}}}var NT={"-":"",_:" ",0:"0"},Lt=/^\s*\d+/,QV=/^%/,KV=/[\\^$*+?|[\]().{}]/g;function Ae(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(t)+i:i)}function JV(e){return e.replace(KV,"\\$&")}function ad(e){return new RegExp("^(?:"+e.map(JV).join("|")+")","i")}function ud(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function ZV(e,t,n){var r=Lt.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function eY(e,t,n){var r=Lt.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function tY(e,t,n){var r=Lt.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function nY(e,t,n){var r=Lt.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function rY(e,t,n){var r=Lt.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function OT(e,t,n){var r=Lt.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function DT(e,t,n){var r=Lt.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function iY(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function oY(e,t,n){var r=Lt.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function sY(e,t,n){var r=Lt.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function RT(e,t,n){var r=Lt.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function aY(e,t,n){var r=Lt.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function PT(e,t,n){var r=Lt.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function uY(e,t,n){var r=Lt.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function lY(e,t,n){var r=Lt.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function cY(e,t,n){var r=Lt.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function fY(e,t,n){var r=Lt.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function dY(e,t,n){var r=QV.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function hY(e,t,n){var r=Lt.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function pY(e,t,n){var r=Lt.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function LT(e,t){return Ae(e.getDate(),t,2)}function gY(e,t){return Ae(e.getHours(),t,2)}function mY(e,t){return Ae(e.getHours()%12||12,t,2)}function yY(e,t){return Ae(1+Jo.count(uo(e),e),t,3)}function w6(e,t){return Ae(e.getMilliseconds(),t,3)}function vY(e,t){return w6(e,t)+"000"}function xY(e,t){return Ae(e.getMonth()+1,t,2)}function bY(e,t){return Ae(e.getMinutes(),t,2)}function wY(e,t){return Ae(e.getSeconds(),t,2)}function EY(e){var t=e.getDay();return t===0?7:t}function SY(e,t){return Ae(Cf.count(uo(e)-1,e),t,2)}function E6(e){var t=e.getDay();return t>=4||t===0?Ic(e):Ic.ceil(e)}function _Y(e,t){return e=E6(e),Ae(Ic.count(uo(e),e)+(uo(e).getDay()===4),t,2)}function kY(e){return e.getDay()}function $Y(e,t){return Ae(P0.count(uo(e)-1,e),t,2)}function CY(e,t){return Ae(e.getFullYear()%100,t,2)}function AY(e,t){return e=E6(e),Ae(e.getFullYear()%100,t,2)}function FY(e,t){return Ae(e.getFullYear()%1e4,t,4)}function TY(e,t){var n=e.getDay();return e=n>=4||n===0?Ic(e):Ic.ceil(e),Ae(e.getFullYear()%1e4,t,4)}function MY(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Ae(t/60|0,"0",2)+Ae(t%60,"0",2)}function zT(e,t){return Ae(e.getUTCDate(),t,2)}function NY(e,t){return Ae(e.getUTCHours(),t,2)}function OY(e,t){return Ae(e.getUTCHours()%12||12,t,2)}function DY(e,t){return Ae(1+sa.count(lo(e),e),t,3)}function S6(e,t){return Ae(e.getUTCMilliseconds(),t,3)}function RY(e,t){return S6(e,t)+"000"}function PY(e,t){return Ae(e.getUTCMonth()+1,t,2)}function LY(e,t){return Ae(e.getUTCMinutes(),t,2)}function zY(e,t){return Ae(e.getUTCSeconds(),t,2)}function IY(e){var t=e.getUTCDay();return t===0?7:t}function BY(e,t){return Ae(Af.count(lo(e)-1,e),t,2)}function _6(e){var t=e.getUTCDay();return t>=4||t===0?Bc(e):Bc.ceil(e)}function jY(e,t){return e=_6(e),Ae(Bc.count(lo(e),e)+(lo(e).getUTCDay()===4),t,2)}function UY(e){return e.getUTCDay()}function WY(e,t){return Ae(L0.count(lo(e)-1,e),t,2)}function qY(e,t){return Ae(e.getUTCFullYear()%100,t,2)}function HY(e,t){return e=_6(e),Ae(e.getUTCFullYear()%100,t,2)}function GY(e,t){return Ae(e.getUTCFullYear()%1e4,t,4)}function VY(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Bc(e):Bc.ceil(e),Ae(e.getUTCFullYear()%1e4,t,4)}function YY(){return"+0000"}function IT(){return"%"}function BT(e){return+e}function jT(e){return Math.floor(+e/1e3)}var Nl,J_,k6,Z_,$6;XY({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function XY(e){return Nl=b6(e),J_=Nl.format,k6=Nl.parse,Z_=Nl.utcFormat,$6=Nl.utcParse,Nl}function jd(e){const t={};return n=>t[n]||(t[n]=e(n))}function QY(e,t){return n=>{const r=e(n),i=r.indexOf(t);if(i<0)return r;let o=KY(r,i);const s=o<r.length?r.slice(o):"";for(;--o>i;)if(r[o]!=="0"){++o;break}return r.slice(0,o)+s}}function KY(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function C6(e){const t=jd(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){const i=qu(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return QY(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,o,s){s=qu(s??",f");const a=pa(r,i,o),u=Math.max(Math.abs(r),Math.abs(i));let l;if(s.precision==null)switch(s.type){case"s":return isNaN(l=KP(a,u))||(s.precision=l),n(s,u);case"":case"e":case"g":case"p":case"r":{isNaN(l=JP(a,u))||(s.precision=l-(s.type==="e"));break}case"f":case"%":{isNaN(l=QP(a))||(s.precision=l-(s.type==="%")*2);break}}return t(s)}}}let Lw;A6();function A6(){return Lw=C6({format:Ty,formatPrefix:V_})}function F6(e){return C6(XP(e))}function z0(e){return arguments.length?Lw=F6(e):Lw}function UT(e,t,n){n=n||{},J(n)||z(`Invalid time multi-format specifier: ${n}`);const r=t(Wr),i=t(Er),o=t(wr),s=t(rr),a=t(bt),u=t(dn),l=t(nr),c=t(Ht),f=e(n[$i]||".%L"),d=e(n[Wr]||":%S"),h=e(n[Er]||"%I:%M"),p=e(n[wr]||"%I %p"),g=e(n[rr]||n[an]||"%a %d"),m=e(n[bt]||"%b %d"),y=e(n[dn]||"%B"),v=e(n[nr]||"%B"),x=e(n[Ht]||"%Y");return b=>(r(b)<b?f:i(b)<b?d:o(b)<b?h:s(b)<b?p:u(b)<b?a(b)<b?g:m:c(b)<b?l(b)<b?y:v:x)(b)}function T6(e){const t=jd(e.format),n=jd(e.utcFormat);return{timeFormat:r=>Q(r)?t(r):UT(t,Ff,r),utcFormat:r=>Q(r)?n(r):UT(n,Tf,r),timeParse:jd(e.parse),utcParse:jd(e.utcParse)}}let zw;M6();function M6(){return zw=T6({format:J_,parse:k6,utcFormat:Z_,utcParse:$6})}function N6(e){return T6(b6(e))}function Yh(e){return arguments.length?zw=N6(e):zw}const Iw=(e,t)=>he({},e,t);function O6(e,t){const n=e?F6(e):z0(),r=t?N6(t):Yh();return Iw(n,r)}function ek(e,t){const n=arguments.length;return n&&n!==2&&z("defaultLocale expects either zero or two arguments."),n?Iw(z0(e),Yh(t)):Iw(z0(),Yh())}function JY(){return A6(),M6(),ek()}const ZY=/^(data:|([A-Za-z]+:)?\/\/)/,eX=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,tX=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,WT="file://";function nX(e,t){return n=>({options:n||{},sanitize:iX,load:rX,fileAccess:!!t,file:oX(t),http:aX(e)})}async function rX(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function iX(e,t){t=he({},this.options,t);const n=this.fileAccess,r={href:null};let i,o,s;const a=eX.test(e.replace(tX,""));(e==null||typeof e!="string"||!a)&&z("Sanitize failure, invalid URI: "+G(e));const u=ZY.test(e);return(s=t.baseURL)&&!u&&(!e.startsWith("/")&&!s.endsWith("/")&&(e="/"+e),e=s+e),o=(i=e.startsWith(WT))||t.mode==="file"||t.mode!=="http"&&!u&&n,i?e=e.slice(WT.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),o=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!o}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function oX(e){return e?t=>new Promise((n,r)=>{e.readFile(t,(i,o)=>{i?r(i):n(o)})}):sX}async function sX(){z("No file system access.")}function aX(e){return e?async function(t,n){const r=he({},this.options.http,n),i=n&&n.response,o=await e(t,r);return o.ok?pe(o[i])?o[i]():o.text():z(o.status+""+o.statusText)}:uX}async function uX(){z("No HTTP fetch method available.")}const lX=e=>e!=null&&e===e,cX=e=>e==="true"||e==="false"||e===!0||e===!1,fX=e=>!Number.isNaN(Date.parse(e)),D6=e=>!Number.isNaN(+e)&&!(e instanceof Date),dX=e=>D6(e)&&Number.isInteger(+e),Bw={boolean:W_,integer:un,number:un,date:q_,string:H_,unknown:mn},zg=[cX,dX,D6,fX],hX=["boolean","integer","number","date"];function R6(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=zg.length,i=zg.map((o,s)=>s+1);for(let o=0,s=0,a,u;o<n;++o)for(u=t?e[o][t]:e[o],a=0;a<r;++a)if(i[a]&&lX(u)&&!zg[a](u)&&(i[a]=0,++s,s===zg.length))return"string";return hX[i.reduce((o,s)=>o===0?s:o,0)-1]}function P6(e,t){return t.reduce((n,r)=>(n[r]=R6(e,r),n),{})}function qT(e){const t=function(n,r){const i={delimiter:e};return tk(n,r?he(r,i):i)};return t.responseType="text",t}function tk(e,t){return t.header&&(e=t.header.map(G).join(t.delimiter)+`
`+e),QG(t.delimiter).parse(e+"")}tk.responseType="text";function pX(e){return typeof Buffer=="function"&&pe(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function nk(e,t){const n=t&&t.property?tr(t.property):mn;return J(e)&&!pX(e)?gX(n(e),t):n(JSON.parse(e))}nk.responseType="json";function gX(e,t){return!I(e)&&AP(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const mX={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function L6(e,t){let n,r,i,o;return e=nk(e,t),t&&t.feature?(n=eV,i=t.feature):t&&t.mesh?(n=nV,i=t.mesh,o=mX[t.filter]):z("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,o):z("Invalid TopoJSON object: "+i),r&&r.features||[r]}L6.responseType="json";const Dm={dsv:tk,csv:qT(","),tsv:qT("	"),json:nk,topojson:L6};function rk(e,t){return arguments.length>1?(Dm[e]=t,this):ae(Dm,e)?Dm[e]:null}function z6(e){const t=rk(e);return t&&t.responseType||"text"}function I6(e,t,n,r){t=t||{};const i=rk(t.type||"json");return i||z("Unknown data format type: "+t.type),e=i(e,t),t.parse&&yX(e,t.parse,n,r),ae(e,"columns")&&delete e.columns,e}function yX(e,t,n,r){if(!e.length)return;const i=Yh();n=n||i.timeParse,r=r||i.utcParse;let o=e.columns||Object.keys(e[0]),s,a,u,l,c,f;t==="auto"&&(t=P6(e,o)),o=Object.keys(t);const d=o.map(h=>{const p=t[h];let g,m;if(p&&(p.startsWith("date:")||p.startsWith("utc:")))return g=p.split(/:(.+)?/,2),m=g[1],(m[0]==="'"&&m[m.length-1]==="'"||m[0]==='"'&&m[m.length-1]==='"')&&(m=m.slice(1,-1)),(g[0]==="utc"?r:n)(m);if(!Bw[p])throw Error("Illegal format pattern: "+h+":"+p);return Bw[p]});for(u=0,c=e.length,f=o.length;u<c;++u)for(s=e[u],l=0;l<f;++l)a=o[l],s[a]=d[l](s[a])}const Py=nX(typeof fetch<"u"&&fetch,null);function Ly(e){const t=e||mn,n=[],r={};return n.add=i=>{const o=t(i);return r[o]||(r[o]=1,n.push(i)),n},n.remove=i=>{const o=t(i);if(r[o]){r[o]=0;const s=n.indexOf(i);s>=0&&n.splice(s,1)}return n},n}async function Rm(e,t){try{await t(e)}catch(n){e.error(n)}}const B6=Symbol("vega_id");let vX=1;function zy(e){return!!(e&&oe(e))}function oe(e){return e[B6]}function j6(e,t){return e[B6]=t,e}function Ne(e){const t=e===Object(e)?e:{data:e};return oe(t)?t:j6(t,vX++)}function ik(e){return Iy(e,Ne({}))}function Iy(e,t){for(const n in e)t[n]=e[n];return t}function U6(e,t){return j6(t,oe(e))}function yl(e,t){return e?t?(n,r)=>e(n,r)||oe(t(n))-oe(t(r)):(n,r)=>e(n,r)||oe(n)-oe(r):null}function W6(e){return e&&e.constructor===vl}function vl(){const e=[],t=[],n=[],r=[],i=[];let o=null,s=!1;return{constructor:vl,insert(a){const u=K(a),l=u.length;for(let c=0;c<l;++c)e.push(u[c]);return this},remove(a){const u=pe(a)?r:t,l=K(a),c=l.length;for(let f=0;f<c;++f)u.push(l[f]);return this},modify(a,u,l){const c={field:u,value:yn(l)};return pe(a)?(c.filter=a,i.push(c)):(c.tuple=a,n.push(c)),this},encode(a,u){return pe(a)?i.push({filter:a,field:u}):n.push({tuple:a,field:u}),this},clean(a){return o=a,this},reflow(){return s=!0,this},pulse(a,u){const l={},c={};let f,d,h,p,g,m;for(f=0,d=u.length;f<d;++f)l[oe(u[f])]=1;for(f=0,d=t.length;f<d;++f)g=t[f],l[oe(g)]=-1;for(f=0,d=r.length;f<d;++f)p=r[f],u.forEach(v=>{p(v)&&(l[oe(v)]=-1)});for(f=0,d=e.length;f<d;++f)g=e[f],m=oe(g),l[m]?l[m]=1:a.add.push(Ne(e[f]));for(f=0,d=u.length;f<d;++f)g=u[f],l[oe(g)]<0&&a.rem.push(g);function y(v,x,b){b?v[x]=b(v):a.encode=x,s||(c[oe(v)]=v)}for(f=0,d=n.length;f<d;++f)h=n[f],g=h.tuple,p=h.field,m=l[oe(g)],m>0&&(y(g,p,h.value),a.modifies(p));for(f=0,d=i.length;f<d;++f)h=i[f],p=h.filter,u.forEach(v=>{p(v)&&l[oe(v)]>0&&y(v,h.field,h.value)}),a.modifies(h.field);if(s)a.mod=t.length||r.length?u.filter(v=>l[oe(v)]>0):u.slice();else for(m in c)a.mod.push(c[m]);return(o||o==null&&(t.length||r.length))&&a.clean(!0),a}}}const Pm="_:mod:_";function By(){Object.defineProperty(this,Pm,{writable:!0,value:{}})}By.prototype={set(e,t,n,r){const i=this,o=i[e],s=i[Pm];return t!=null&&t>=0?(o[t]!==n||r)&&(o[t]=n,s[t+":"+e]=-1,s[e]=-1):(o!==n||r)&&(i[e]=n,s[e]=I(n)?1+n.length:-1),i},modified(e,t){const n=this[Pm];if(arguments.length){if(I(e)){for(let r=0;r<e.length;++r)if(n[e[r]])return!0;return!1}}else{for(const r in n)if(n[r])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[Pm]={},this}};let xX=0;const bX="pulse",wX=new By,EX=1,SX=2;function Ue(e,t,n,r){this.id=++xX,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function HT(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}Ue.prototype={targets(){return this._targets||(this._targets=Ly(Fp))},set(e){return this.value!==e?(this.value=e,1):0},skip:HT(EX),modified:HT(SX),parameters(e,t,n){t=t!==!1;const r=this._argval=this._argval||new By,i=this._argops=this._argops||[],o=[];let s,a,u,l;const c=(f,d,h)=>{h instanceof Ue?(h!==this&&(t&&h.targets().add(this),o.push(h)),i.push({op:h,name:f,index:d})):r.set(f,d,h)};for(s in e)if(a=e[s],s===bX)K(a).forEach(f=>{f instanceof Ue?f!==this&&(f.targets().add(this),o.push(f)):z("Pulse parameters must be operator instances.")}),this.source=a;else if(I(a))for(r.set(s,-1,Array(u=a.length)),l=0;l<u;++l)c(s,l,a[l]);else c(s,-1,a);return this.marshall().clear(),n&&(i.initonly=!0),o},marshall(e){const t=this._argval||wX,n=this._argops;let r,i,o,s;if(n){const a=n.length;for(i=0;i<a;++i)r=n[i],o=r.op,s=o.modified()&&o.stamp===e,t.set(r.name,r.index,o.value,s);if(n.initonly){for(i=0;i<a;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function _X(e,t,n,r){let i=1,o;return e instanceof Ue?o=e:e&&e.prototype instanceof Ue?o=new e:pe(e)?o=new Ue(null,e):(i=0,o=new Ue(e,t)),this.rank(o),i&&(r=n,n=t),n&&this.connect(o,o.parameters(n,r)),this.touch(o),o}function kX(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank){this.rerank(e);return}}let $X=0;function jy(e,t,n){this.id=++$X,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function Cs(e,t,n){return new jy(e,t,n)}jy.prototype={_filter:Ur,_apply:mn,targets(){return this._targets||(this._targets=Ly(Fp))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=Cs(e);return this.targets().add(t),t},apply(e){const t=Cs(null,e);return this.targets().add(t),t},merge(){const e=Cs();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=Cs();return this.targets().add(Cs(null,null,j_(e,n=>{const r=n.dataflow;t.receive(n),r&&r.run&&r.run()}))),t},between(e,t){let n=!1;return e.targets().add(Cs(null,null,()=>n=!0)),t.targets().add(Cs(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=Ur,this._targets=null}};function CX(e,t,n,r){const i=this,o=Cs(n,r),s=function(l){l.dataflow=i;try{o.receive(l)}catch(c){i.error(c)}finally{i.run()}};let a;typeof e=="string"&&typeof document<"u"?a=document.querySelectorAll(e):a=K(e);const u=a.length;for(let l=0;l<u;++l)a[l].addEventListener(t,s);return o}function AX(e,t){const n=this.locale();return I6(e,t,n.timeParse,n.utcParse)}function FX(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function TX(e,t){const n=this;let r=0,i;try{i=await n.loader().load(e,{context:"dataflow",response:z6(t&&t.type)});try{i=n.parse(i,t)}catch(o){r=-2,n.warn("Data ingestion failed",e,o)}}catch(o){r=-1,n.warn("Loading failed",e,o)}return{data:i,status:r}}async function MX(e,t,n){const r=this,i=r._pending||NX(r);i.requests+=1;const o=await r.request(t,n);return r.pulse(e,r.changeset().remove(Ur).insert(o.data||[])),i.done(),o}function NX(e){let t;const n=new Promise(r=>t=r);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const OX={skip:!0};function DX(e,t,n,r,i){return(e instanceof Ue?PX:RX)(this,e,t,n,r,i),this}function RX(e,t,n,r,i,o){const s=he({},o,OX);let a,u;pe(n)||(n=yn(n)),r===void 0?a=l=>e.touch(n(l)):pe(r)?(u=new Ue(null,r,i,!1),a=l=>{u.evaluate(l);const c=n(l),f=u.value;W6(f)?e.pulse(c,f,o):e.update(c,f,s)}):a=l=>e.update(n(l),r,s),t.apply(a)}function PX(e,t,n,r,i,o){if(r===void 0)t.targets().add(n);else{const s=o||{},a=new Ue(null,LX(n,r),i,!1);a.modified(s.force),a.rank=t.rank,t.targets().add(a),n&&(a.skip(!0),a.value=n.value,a.targets().add(n),e.connect(n,[a]))}}function LX(e,t){return t=pe(t)?t:yn(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}function zX(e){e.rank=++this._rank}function IX(e){const t=[e];let n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&z("Cycle detected in dataflow graph.")}const I0={},qi=1,Ns=2,Do=4,BX=qi|Ns,GT=qi|Do,Ol=qi|Ns|Do,VT=8,ld=16,YT=32,XT=64;function aa(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function f2(e,t){const n=[];return Ms(e,t,r=>n.push(r)),n}function QT(e,t){const n={};return e.visit(t,r=>{n[oe(r)]=1}),r=>n[oe(r)]?null:r}function Ig(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}aa.prototype={StopPropagation:I0,ADD:qi,REM:Ns,MOD:Do,ADD_REM:BX,ADD_MOD:GT,ALL:Ol,REFLOW:VT,SOURCE:ld,NO_SOURCE:YT,NO_FIELDS:XT,fork(e){return new aa(this.dataflow).init(this,e)},clone(){const e=this.fork(Ol);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(Ol|ld)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new aa(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&XT)&&(n.fields=e.fields),t&qi?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&Ns?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&Do?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&YT?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||Ol;return t&qi&&this.add.length||t&Ns&&this.rem.length||t&Do&&this.mod.length},reflow(e){if(e)return this.fork(Ol).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(Do,QT(this,qi))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return I(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?I(e)?e.some(r=>n[r]):n[e]:!!n:!1},filter(e,t){const n=this;return e&qi&&(n.addF=Ig(n.addF,t)),e&Ns&&(n.remF=Ig(n.remF,t)),e&Do&&(n.modF=Ig(n.modF,t)),e&ld&&(n.srcF=Ig(n.srcF,t)),n},materialize(e){e=e||Ol;const t=this;return e&qi&&t.addF&&(t.add=f2(t.add,t.addF),t.addF=null),e&Ns&&t.remF&&(t.rem=f2(t.rem,t.remF),t.remF=null),e&Do&&t.modF&&(t.mod=f2(t.mod,t.modF),t.modF=null),e&ld&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,r=t;if(e&ld)return Ms(n.source,n.srcF,r),n;e&qi&&Ms(n.add,n.addF,r),e&Ns&&Ms(n.rem,n.remF,r),e&Do&&Ms(n.mod,n.modF,r);const i=n.source;if(e&VT&&i){const o=n.add.length+n.mod.length;o===i.length||(o?Ms(i,QT(n,GT),r):Ms(i,n.srcF,r))}return n}};function ok(e,t,n,r){const i=this;let o=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(const s of n)if(s.stamp===t){if(s.fields){const a=i.fields||(i.fields={});for(const u in s.fields)a[u]=1}s.changed(i.ADD)&&(o|=i.ADD),s.changed(i.REM)&&(o|=i.REM),s.changed(i.MOD)&&(o|=i.MOD)}this.changes=o}V(ok,aa,{fork(e){const t=new aa(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?I(e)?e.some(r=>n[r]):n[e]:0},filter(){z("MultiPulse does not support filtering.")},materialize(){z("MultiPulse does not support materialization.")},visit(e,t){const n=this,r=n.pulses,i=r.length;let o=0;if(e&n.SOURCE)for(;o<i;++o)r[o].visit(e,t);else for(;o<i;++o)r[o].stamp===n.stamp&&r[o].visit(e,t);return n}});async function jX(e,t,n){const r=this,i=[];if(r._pulse)return q6(r);if(r._pending&&await r._pending,t&&await Rm(r,t),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const o=++r._clock;r._pulse=new aa(r,o,e),r._touched.forEach(c=>r._enqueue(c,!0)),r._touched=Ly(Fp);let s=0,a,u,l;try{for(;r._heap.size()>0;){if(a=r._heap.pop(),a.rank!==a.qrank){r._enqueue(a,!0);continue}u=a.run(r._getPulse(a,e)),u.then?u=await u:u.async&&(i.push(u.async),u=I0),u!==I0&&a._targets&&a._targets.forEach(c=>r._enqueue(c)),++s}}catch(c){r._heap.clear(),l=c}if(r._input={},r._pulse=null,r.debug(`Pulse ${o}: ${s} operators`),l&&(r._postrun=[],r.error(l)),r._postrun.length){const c=r._postrun.sort((f,d)=>d.priority-f.priority);r._postrun=[];for(let f=0;f<c.length;++f)await Rm(r,c[f].callback)}return n&&await Rm(r,n),i.length&&Promise.all(i).then(c=>r.runAsync(null,()=>{c.forEach(f=>{try{f(r)}catch(d){r.error(d)}})})),r}async function UX(e,t,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running}function WX(e,t,n){return this._pulse?q6(this):(this.evaluate(e,t,n),this)}function qX(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}}function q6(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function HX(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function GX(e,t){const n=e.source,r=this._clock;return n&&I(n)?new ok(this,r,n.map(i=>i.pulse),t):this._input[e.id]||VX(this._pulse,n&&n.pulse)}function VX(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==I0&&(e.source=t.source),e)}const sk={skip:!1,force:!1};function YX(e,t){const n=t||sk;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function XX(e,t,n){const r=n||sk;return(e.set(t)||r.force)&&this.touch(e,r),this}function QX(e,t,n){this.touch(e,n||sk);const r=new aa(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this}function KX(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),H6(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,JX(t,0,e)):r=n,r}}}function H6(e,t,n,r){let i,o;const s=e[n];for(;n>t;){if(o=n-1>>1,i=e[o],r(s,i)<0){e[n]=i,n=o;continue}break}return e[n]=s}function JX(e,t,n){const r=t,i=e.length,o=e[t];let s=(t<<1)+1,a;for(;s<i;)a=s+1,a<i&&n(e[s],e[a])>=0&&(s=a),e[t]=e[s],t=s,s=(t<<1)+1;return e[t]=o,H6(e,r,t,n)}function xc(){this.logger(P_()),this.logLevel(D_),this._clock=0,this._rank=0,this._locale=ek();try{this._loader=Py()}catch{}this._touched=Ly(Fp),this._input={},this._pulse=null,this._heap=KX((e,t)=>e.qrank-t.qrank),this._postrun=[]}function cd(e){return function(){return this._log[e].apply(this,arguments)}}xc.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:cd("error"),warn:cd("warn"),info:cd("info"),debug:cd("debug"),logLevel:cd("level"),cleanThreshold:1e4,add:_X,connect:kX,rank:zX,rerank:IX,pulse:QX,touch:YX,update:XX,changeset:vl,ingest:FX,parse:AX,preload:MX,request:TX,events:CX,on:DX,evaluate:jX,run:WX,runAsync:UX,runAfter:qX,_enqueue:HX,_getPulse:GX};function P(e,t){Ue.call(this,e,null,t)}V(P,Ue,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const Uc={};function G6(e){const t=V6(e);return t&&t.Definition||null}function V6(e){return e=e&&e.toLowerCase(),ae(Uc,e)?Uc[e]:null}function*Y6(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)r=t(r,++n,e),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function ak(e,t,n){const r=Float64Array.from(Y6(e,n));return r.sort(Ko),t.map(i=>qP(r,i))}function uk(e,t){return ak(e,[.25,.5,.75],t)}function lk(e,t){const n=e.length,r=cV(e,t),i=uk(e,t),o=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,o)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function X6(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let o=e.extent[0],s=e.extent[1],a,u,l,c,f,d;const h=e.span||s-o||Math.abs(o)||1;if(e.step)a=e.step;else if(e.steps){for(c=h/t,f=0,d=e.steps.length;f<d&&e.steps[f]<c;++f);a=e.steps[Math.max(0,f-1)]}else{for(u=Math.ceil(Math.log(t)/r),l=e.minstep||0,a=Math.max(l,Math.pow(n,Math.round(Math.log(h)/r)-u));Math.ceil(h/a)>t;)a*=n;for(f=0,d=i.length;f<d;++f)c=a/i[f],c>=l&&h/c<=t&&(a=c)}c=Math.log(a);const p=c>=0?0:~~(-c/r)+1,g=Math.pow(n,-p-1);return(e.nice||e.nice===void 0)&&(c=Math.floor(o/a+g)*a,o=o<c?c-a:c,s=Math.ceil(s/a)*a),{start:o,stop:s===o?o+a:s,step:a}}var qr=Math.random;function ZX(e){qr=e}function Q6(e,t,n,r){if(!e.length)return[void 0,void 0];const i=Float64Array.from(Y6(e,r)),o=i.length,s=t;let a,u,l,c;for(l=0,c=Array(s);l<s;++l){for(a=0,u=0;u<o;++u)a+=i[~~(qr()*o)];c[l]=a/o}return c.sort(Ko),[Mw(c,n/2),Mw(c,1-n/2)]}function K6(e,t,n,r){r=r||(d=>d);const i=e.length,o=new Float64Array(i);let s=0,a=1,u=r(e[0]),l=u,c=u+t,f;for(;a<i;++a){if(f=r(e[a]),f>=c){for(l=(u+l)/2;s<a;++s)o[s]=l;c=f+t,u=f}l=f}for(l=(u+l)/2;s<a;++s)o[s]=l;return n?eQ(o,t+t/4):o}function eQ(e,t){const n=e.length;let r=0,i=1,o,s;for(;e[r]===e[i];)++i;for(;i<n;){for(o=i+1;e[i]===e[o];)++o;if(e[i]-e[i-1]<t){for(s=i+(r+o-i-i>>1);s<i;)e[s++]=e[i];for(;s>i;)e[s--]=e[r]}r=i,i=o}return e}function tQ(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function nQ(e,t){t==null&&(t=e,e=0);let n,r,i;const o={min(s){return arguments.length?(n=s||0,i=r-n,o):n},max(s){return arguments.length?(r=s||0,i=r-n,o):r},sample(){return n+Math.floor(i*qr())},pdf(s){return s===Math.floor(s)&&s>=n&&s<r?1/i:0},cdf(s){const a=Math.floor(s);return a<n?0:a>=r?1:(a-n+1)/i},icdf(s){return s>=0&&s<=1?n-1+Math.floor(s*i):NaN}};return o.min(e).max(t)}const J6=Math.sqrt(2*Math.PI),rQ=Math.SQRT2;let fd=NaN;function Uy(e,t){e=e||0,t=t??1;let n=0,r=0,i,o;if(fd===fd)n=fd,fd=NaN;else{do n=qr()*2-1,r=qr()*2-1,i=n*n+r*r;while(i===0||i>1);o=Math.sqrt(-2*Math.log(i)/i),n*=o,fd=r*o}return e+n*t}function ck(e,t,n){n=n??1;const r=(e-(t||0))/n;return Math.exp(-.5*r*r)/(n*J6)}function Wy(e,t,n){t=t||0,n=n??1;const r=(e-t)/n,i=Math.abs(r);let o;if(i>37)o=0;else{const s=Math.exp(-i*i/2);let a;i<7.07106781186547?(a=.0352624965998911*i+.700383064443688,a=a*i+6.37396220353165,a=a*i+33.912866078383,a=a*i+112.079291497871,a=a*i+221.213596169931,a=a*i+220.206867912376,o=s*a,a=.0883883476483184*i+1.75566716318264,a=a*i+16.064177579207,a=a*i+86.7807322029461,a=a*i+296.564248779674,a=a*i+637.333633378831,a=a*i+793.826512519948,a=a*i+440.413735824752,o=o/a):(a=i+.65,a=i+4/a,a=i+3/a,a=i+2/a,a=i+1/a,o=s/a/2.506628274631)}return r>0?1-o:o}function qy(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*rQ*iQ(2*e-1)}function iQ(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function fk(e,t){let n,r;const i={mean(o){return arguments.length?(n=o||0,i):n},stdev(o){return arguments.length?(r=o??1,i):r},sample:()=>Uy(n,r),pdf:o=>ck(o,n,r),cdf:o=>Wy(o,n,r),icdf:o=>qy(o,n,r)};return i.mean(e).stdev(t)}function dk(e,t){const n=fk();let r=0;const i={data(o){return arguments.length?(e=o,r=o?o.length:0,i.bandwidth(t)):e},bandwidth(o){return arguments.length?(t=o,!t&&e&&(t=lk(e)),i):t},sample(){return e[~~(qr()*r)]+t*n.sample()},pdf(o){let s=0,a=0;for(;a<r;++a)s+=n.pdf((o-e[a])/t);return s/t/r},cdf(o){let s=0,a=0;for(;a<r;++a)s+=n.cdf((o-e[a])/t);return s/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function hk(e,t){return e=e||0,t=t??1,Math.exp(e+Uy()*t)}function pk(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*J6*e)}function gk(e,t,n){return Wy(Math.log(e),t,n)}function mk(e,t,n){return Math.exp(qy(e,t,n))}function Z6(e,t){let n,r;const i={mean(o){return arguments.length?(n=o||0,i):n},stdev(o){return arguments.length?(r=o??1,i):r},sample:()=>hk(n,r),pdf:o=>pk(o,n,r),cdf:o=>gk(o,n,r),icdf:o=>mk(o,n,r)};return i.mean(e).stdev(t)}function eL(e,t){let n=0,r;function i(s){const a=[];let u=0,l;for(l=0;l<n;++l)u+=a[l]=s[l]==null?1:+s[l];for(l=0;l<n;++l)a[l]/=u;return a}const o={weights(s){return arguments.length?(r=i(t=s||[]),o):t},distributions(s){return arguments.length?(s?(n=s.length,e=s):(n=0,e=[]),o.weights(t)):e},sample(){const s=qr();let a=e[n-1],u=r[0],l=0;for(;l<n-1;u+=r[++l])if(s<u){a=e[l];break}return a.sample()},pdf(s){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].pdf(s);return a},cdf(s){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].cdf(s);return a},icdf(){throw Error("Mixture icdf not supported.")}};return o.distributions(e).weights(t)}function yk(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*qr()}function vk(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function xk(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function bk(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function tL(e,t){let n,r;const i={min(o){return arguments.length?(n=o||0,i):n},max(o){return arguments.length?(r=o??1,i):r},sample:()=>yk(n,r),pdf:o=>vk(o,n,r),cdf:o=>xk(o,n,r),icdf:o=>bk(o,n,r)};return t==null&&(t=e??1,e=0),i.min(e).max(t)}function wk(e,t,n){let r=0,i=0;for(const o of e){const s=n(o);t(o)==null||s==null||isNaN(s)||(r+=(s-r)/++i)}return{coef:[r],predict:()=>r,rSquared:0}}function Op(e,t,n,r){const i=r-e*e,o=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-o*e,o]}function Hy(e,t,n,r){e=e.filter(h=>{let p=t(h),g=n(h);return p!=null&&(p=+p)>=p&&g!=null&&(g=+g)>=g}),r&&e.sort((h,p)=>t(h)-t(p));const i=e.length,o=new Float64Array(i),s=new Float64Array(i);let a=0,u=0,l=0,c,f,d;for(d of e)o[a]=c=+t(d),s[a]=f=+n(d),++a,u+=(c-u)/a,l+=(f-l)/a;for(a=0;a<i;++a)o[a]-=u,s[a]-=l;return[o,s,u,l]}function Dp(e,t,n,r){let i=-1,o,s;for(const a of e)o=t(a),s=n(a),o!=null&&(o=+o)>=o&&s!=null&&(s=+s)>=s&&r(o,s,++i)}function Mf(e,t,n,r,i){let o=0,s=0;return Dp(e,t,n,(a,u)=>{const l=u-i(a),c=u-r;o+=l*l,s+=c*c}),1-o/s}function Ek(e,t,n){let r=0,i=0,o=0,s=0,a=0;Dp(e,t,n,(c,f)=>{++a,r+=(c-r)/a,i+=(f-i)/a,o+=(c*f-o)/a,s+=(c*c-s)/a});const u=Op(r,i,o,s),l=c=>u[0]+u[1]*c;return{coef:u,predict:l,rSquared:Mf(e,t,n,i,l)}}function nL(e,t,n){let r=0,i=0,o=0,s=0,a=0;Dp(e,t,n,(c,f)=>{++a,c=Math.log(c),r+=(c-r)/a,i+=(f-i)/a,o+=(c*f-o)/a,s+=(c*c-s)/a});const u=Op(r,i,o,s),l=c=>u[0]+u[1]*Math.log(c);return{coef:u,predict:l,rSquared:Mf(e,t,n,i,l)}}function rL(e,t,n){const[r,i,o,s]=Hy(e,t,n);let a=0,u=0,l=0,c=0,f=0,d,h,p;Dp(e,t,n,(v,x)=>{d=r[f++],h=Math.log(x),p=d*x,a+=(x*h-a)/f,u+=(p-u)/f,l+=(p*h-l)/f,c+=(d*p-c)/f});const[g,m]=Op(u/s,a/s,l/s,c/s),y=v=>Math.exp(g+m*(v-o));return{coef:[Math.exp(g-m*o),m],predict:y,rSquared:Mf(e,t,n,s,y)}}function iL(e,t,n){let r=0,i=0,o=0,s=0,a=0,u=0;Dp(e,t,n,(f,d)=>{const h=Math.log(f),p=Math.log(d);++u,r+=(h-r)/u,i+=(p-i)/u,o+=(h*p-o)/u,s+=(h*h-s)/u,a+=(d-a)/u});const l=Op(r,i,o,s),c=f=>l[0]*Math.pow(f,l[1]);return l[0]=Math.exp(l[0]),{coef:l,predict:c,rSquared:Mf(e,t,n,a,c)}}function Sk(e,t,n){const[r,i,o,s]=Hy(e,t,n),a=r.length;let u=0,l=0,c=0,f=0,d=0,h,p,g,m;for(h=0;h<a;)p=r[h],g=i[h++],m=p*p,u+=(m-u)/h,l+=(m*p-l)/h,c+=(m*m-c)/h,f+=(p*g-f)/h,d+=(m*g-d)/h;const y=c-u*u,v=u*y-l*l,x=(d*u-f*l)/v,b=(f*y-d*l)/v,w=-x*u,S=E=>(E=E-o,x*E*E+b*E+w+s);return{coef:[w-b*o+x*o*o+s,b-2*x*o,x],predict:S,rSquared:Mf(e,t,n,s,S)}}function oL(e,t,n,r){if(r===0)return wk(e,t,n);if(r===1)return Ek(e,t,n);if(r===2)return Sk(e,t,n);const[i,o,s,a]=Hy(e,t,n),u=i.length,l=[],c=[],f=r+1;let d,h,p,g,m;for(d=0;d<f;++d){for(p=0,g=0;p<u;++p)g+=Math.pow(i[p],d)*o[p];for(l.push(g),m=new Float64Array(f),h=0;h<f;++h){for(p=0,g=0;p<u;++p)g+=Math.pow(i[p],d+h);m[h]=g}c.push(m)}c.push(l);const y=sQ(c),v=x=>{x-=s;let b=a+y[0]+y[1]*x+y[2]*x*x;for(d=3;d<f;++d)b+=y[d]*Math.pow(x,d);return b};return{coef:oQ(f,y,-s,a),predict:v,rSquared:Mf(e,t,n,a,v)}}function oQ(e,t,n,r){const i=Array(e);let o,s,a,u;for(o=0;o<e;++o)i[o]=0;for(o=e-1;o>=0;--o)for(a=t[o],u=1,i[o]+=a,s=1;s<=o;++s)u*=(o+1-s)/s,i[o-s]+=a*Math.pow(n,s)*u;return i[0]+=r,i}function sQ(e){const t=e.length-1,n=[];let r,i,o,s,a;for(r=0;r<t;++r){for(s=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][s])&&(s=i);for(o=r;o<t+1;++o)a=e[o][r],e[o][r]=e[o][s],e[o][s]=a;for(i=r+1;i<t;++i)for(o=t;o>=r;o--)e[o][i]-=e[o][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(a=0,o=i+1;o<t;++o)a+=e[o][i]*n[o];n[i]=(e[t][i]-a)/e[i][i]}return n}const KT=2,JT=1e-12;function sL(e,t,n,r){const[i,o,s,a]=Hy(e,t,n,!0),u=i.length,l=Math.max(2,~~(r*u)),c=new Float64Array(u),f=new Float64Array(u),d=new Float64Array(u).fill(1);for(let h=-1;++h<=KT;){const p=[0,l-1];for(let m=0;m<u;++m){const y=i[m],v=p[0],x=p[1],b=y-i[v]>i[x]-y?v:x;let w=0,S=0,E=0,_=0,$=0;const k=1/Math.abs(i[b]-y||1);for(let C=v;C<=x;++C){const T=i[C],F=o[C],N=aQ(Math.abs(y-T)*k)*d[C],D=T*N;w+=N,S+=D,E+=F*N,_+=F*D,$+=T*D}const[A,R]=Op(S/w,E/w,_/w,$/w);c[m]=A+R*y,f[m]=Math.abs(o[m]-c[m]),uQ(i,m+1,p)}if(h===KT)break;const g=HP(f);if(Math.abs(g)<JT)break;for(let m=0,y,v;m<u;++m)y=f[m]/(6*g),d[m]=y>=1?JT:(v=1-y*y)*v}return lQ(i,c,s,a)}function aQ(e){return(e=1-e*e*e)*e*e}function uQ(e,t,n){const r=e[t];let i=n[0],o=n[1]+1;if(!(o>=e.length))for(;t>i&&e[o]-r<=r-e[i];)n[0]=++i,n[1]=o,++o}function lQ(e,t,n,r){const i=e.length,o=[];let s=0,a=0,u=[],l;for(;s<i;++s)l=e[s]+n,u[0]===l?u[1]+=(t[s]-u[1])/++a:(a=0,u[1]+=r,u=[l,t[s]],o.push(u));return u[1]+=r,o}const cQ=.5*Math.PI/180;function Gy(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=g=>[g,e(g)],o=t[0],s=t[1],a=s-o,u=a/r,l=[i(o)],c=[];if(n===r){for(let g=1;g<r;++g)l.push(i(o+g/n*a));return l.push(i(s)),l}else{c.push(i(s));for(let g=n;--g>0;)c.push(i(o+g/n*a))}let f=l[0],d=c[c.length-1];const h=1/a,p=fQ(f[1],c);for(;d;){const g=i((f[0]+d[0])/2);g[0]-f[0]>=u&&dQ(f,g,d,h,p)>cQ?c.push(g):(f=d,l.push(d),c.pop()),d=c[c.length-1]}return l}function fQ(e,t){let n=e,r=e;const i=t.length;for(let o=0;o<i;++o){const s=t[o][1];s<n&&(n=s),s>r&&(r=s)}return 1/(r-n)}function dQ(e,t,n,r,i){const o=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),s=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(o-s)}function hQ(e){return t=>{const n=e.length;let r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}}function jw(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:hQ(e)}function aL(e,t,n){return n||e+(t?"_"+t:"")}const d2=()=>{},pQ={init:d2,add:d2,rem:d2,idx:0},Xh={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.sum,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3}},Rp=Object.keys(Xh).filter(e=>e!=="__count__");function gQ(e,t){return n=>he({name:e,out:n||e},pQ,t)}[...Rp,"__count__"].forEach(e=>{Xh[e]=gQ(e,Xh[e])});function uL(e,t){return Xh[e](t)}function lL(e,t){return e.idx-t.idx}function mQ(e){const t={};e.forEach(r=>t[r.name]=r);const n=r=>{r.req&&r.req.forEach(i=>{t[i]||n(t[i]=Xh[i]())})};return e.forEach(n),Object.values(t).sort(lL)}function yQ(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.init(this))}function vQ(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function xQ(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function bQ(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function cL(e,t){const n=t||mn,r=mQ(e),i=e.slice().sort(lL);function o(s){this._ops=r,this._out=i,this.cell=s,this.init()}return o.prototype.init=yQ,o.prototype.add=vQ,o.prototype.rem=xQ,o.prototype.set=bQ,o.prototype.get=n,o.fields=e.map(s=>s.out),o}function _k(e){this._key=e?tr(e):oe,this.reset()}const Qt=_k.prototype;Qt.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};Qt.add=function(e){this._add.push(e)};Qt.rem=function(e){this._rem.push(e)};Qt.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,o=Array(r-i),s={};let a,u,l;for(a=0;a<i;++a)s[n(t[a])]=1;for(a=0,u=0;a<r;++a)s[n(l=e[a])]?s[n(l)]=0:o[u++]=l;return this._rem=[],this._add=o};Qt.distinct=function(e){const t=this.values(),n={};let r=t.length,i=0,o;for(;--r>=0;)o=e(t[r])+"",ae(n,o)||(n[o]=1,++i);return i};Qt.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=$P(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};Qt.argmin=function(e){return this.extent(e)[0]||{}};Qt.argmax=function(e){return this.extent(e)[1]||{}};Qt.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};Qt.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};Qt.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=uk(this.values(),e),this._get=e),this._q};Qt.q1=function(e){return this.quartile(e)[0]};Qt.q2=function(e){return this.quartile(e)[1]};Qt.q3=function(e){return this.quartile(e)[2]};Qt.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=Q6(this.values(),1e3,.05,e),this._get=e),this._ci};Qt.ci0=function(e){return this.ci(e)[0]};Qt.ci1=function(e){return this.ci(e)[1]};function ga(e){P.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}ga.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Rp},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};V(ga,P,{transform(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):Object.create(null),t.visit(t.SOURCE,o=>n.add(o))):(n.value=n.value||n.init(e),t.visit(t.REM,o=>n.rem(o)),t.visit(t.ADD,o=>n.add(o))),r.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){const e=this,t=e.value,n=e._dnames,r=n.map(()=>({})),i=n.length;function o(a){let u,l,c,f;for(u in a)for(c=a[u].tuple,l=0;l<i;++l)r[l][f=c[n[l]]]=f}o(e._prev),o(t);function s(a,u,l){const c=n[l],f=r[l++];for(const d in f){const h=a?a+"|"+d:d;u[c]=f[d],l<i?s(h,u,l):t[h]||e.cell(h,u)}}s("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],r={};function i(m){const y=K(fn(m)),v=y.length;let x=0,b;for(;x<v;++x)r[b=y[x]]||(r[b]=1,t.push(b))}this._dims=K(e.groupby),this._dnames=this._dims.map(m=>{const y=lt(m);return i(m),n.push(y),y}),this.cellkey=e.key?e.key:jw(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const o=e.fields||[null],s=e.ops||["count"],a=e.as||[],u=o.length,l={};let c,f,d,h,p,g;for(u!==s.length&&z("Unmatched number of fields and aggregate ops."),g=0;g<u;++g){if(c=o[g],f=s[g],c==null&&f!=="count"&&z("Null aggregate field specified."),h=lt(c),p=aL(f,h,a[g]),n.push(p),f==="count"){this._counts.push(p);continue}d=l[h],d||(i(c),d=l[h]=[],d.field=c,this._measures.push(d)),f!=="count"&&(this._countOnly=!1),d.push(uL(f,p))}return this._measures=this._measures.map(m=>cL(m,m.field)),Object.create(null)},cellkey:jw(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const r=this._measures,i=r.length;n.agg=Array(i);for(let o=0;o<i;++o)n.agg[o]=new r[o](n)}return n.store&&(n.data=new _k),n},newtuple(e,t){const n=this._dnames,r=this._dims,i=r.length,o={};for(let s=0;s<i;++s)o[n[s]]=r[s](e);return t?U6(t.tuple,o):Ne(o)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let i=0,o=r.length;i<o;++i)r[i].add(r[i].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let i=0,o=r.length;i<o;++i)r[i].rem(r[i].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const r=e.agg;for(let i=0,o=r.length;i<o;++i)r[i].set(t)}return t},changes(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,o=e.add,s=e.rem,a=e.mod;let u,l,c,f;if(r)for(l in r)u=r[l],(!i||u.num)&&s.push(u.tuple);for(c=0,f=this._alen;c<f;++c)o.push(this.celltuple(t[c])),t[c]=null;for(c=0,f=this._mlen;c<f;++c)u=n[c],(u.num===0&&i?s:a).push(this.celltuple(u)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,e}});const wQ=1e-14;function kk(e){P.call(this,null,e)}kk.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};V(kk,P,{transform(e,t){const n=e.interval!==!1,r=this._bins(e),i=r.start,o=r.step,s=e.as||["bin0","bin1"],a=s[0],u=s[1];let l;return e.modified()?(t=t.reflow(!0),l=t.SOURCE):l=t.modified(fn(e.field))?t.ADD_MOD:t.ADD,t.visit(l,n?c=>{const f=r(c);c[a]=f,c[u]=f==null?null:i+o*(1+(f-i)/o)}:c=>c[a]=r(c)),t.modifies(n?s:a)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=X6(e),r=n.step;let i=n.start,o=i+Math.ceil((n.stop-i)/r)*r,s,a;(s=e.anchor)!=null&&(a=s-(i+r*Math.floor((s-i)/r)),i+=a,o+=a);const u=function(l){let c=un(t(l));return c==null?null:c<i?-1/0:c>o?1/0:(c=Math.max(i,Math.min(c,o-r)),i+r*Math.floor(wQ+(c-i)/r))};return u.start=i,u.stop=n.stop,u.step=r,this.value=ur(u,fn(t),e.name||"bin_"+lt(t))}});function fL(e,t,n){const r=e;let i=t||[],o=n||[],s={},a=0;return{add:u=>o.push(u),remove:u=>s[r(u)]=++a,size:()=>i.length,data:(u,l)=>(a&&(i=i.filter(c=>!s[r(c)]),s={},a=0),l&&u&&i.sort(u),o.length&&(i=u?NP(u,i,o.sort(u)):i.concat(o),o=[]),i)}}function $k(e){P.call(this,[],e)}$k.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};V($k,P,{transform(e,t){const n=t.fork(t.ALL),r=fL(oe,this.value,n.materialize(n.ADD).add),i=e.sort,o=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(o),this.value=n.source=r.data(yl(i),o),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function dL(e){Ue.call(this,null,EQ,e)}V(dL,Ue);function EQ(e){return this.value&&!e.modified()?this.value:B_(e.fields,e.orders)}function Ck(e){P.call(this,null,e)}Ck.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function SQ(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}V(Ck,P,{transform(e,t){const n=f=>d=>{for(var h=SQ(a(d),e.case,o)||[],p,g=0,m=h.length;g<m;++g)s.test(p=h[g])||f(p)},r=this._parameterCheck(e,t),i=this._counts,o=this._match,s=this._stop,a=e.field,u=e.as||["text","count"],l=n(f=>i[f]=1+(i[f]||0)),c=n(f=>i[f]-=1);return r?t.visit(t.SOURCE,l):(t.visit(t.ADD,l),t.visit(t.REM,c)),this._finish(t,u)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],o=t[1],s=e.fork(e.NO_SOURCE|e.NO_FIELDS);let a,u,l;for(a in n)u=r[a],l=n[a]||0,!u&&l?(r[a]=u=Ne({}),u[i]=a,u[o]=l,s.add.push(u)):l===0?(u&&s.rem.push(u),n[a]=null,r[a]=null):u[o]!==l&&(u[o]=l,s.mod.push(u));return s.modifies(t)}});function Ak(e){P.call(this,null,e)}Ak.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};V(Ak,P,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],o=r[1],s=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let a=this.value;return s?(a&&(n.rem=a),a=t.materialize(t.SOURCE).source,n.add=this.value=_Q(a,i,o,e.filter||Ur)):n.mod=a,n.source=this.value,n.modifies(r)}});function _Q(e,t,n,r){for(var i=[],o={},s=e.length,a=0,u,l;a<s;++a)for(o[t]=l=e[a],u=0;u<s;++u)o[n]=e[u],r(o)&&(i.push(Ne(o)),o={},o[t]=l);return i}const ZT={kde:dk,mixture:eL,normal:fk,lognormal:Z6,uniform:tL},kQ="distributions",eM="function",$Q="field";function hL(e,t){const n=e[eM];ae(ZT,n)||z("Unknown distribution function: "+n);const r=ZT[n]();for(const i in e)i===$Q?r.data((e.from||t()).map(e[i])):i===kQ?r[i](e[i].map(o=>hL(o,t))):typeof r[i]===eM&&r[i](e[i]);return r}function Fk(e){P.call(this,null,e)}const pL=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],CQ={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:pL},{name:"weights",type:"number",array:!0}]};Fk.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:pL.concat(CQ)},{name:"as",type:"string",array:!0,default:["value","density"]}]};V(Fk,P,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=hL(e.distribution,AQ(t)),i=e.steps||e.minsteps||25,o=e.steps||e.maxsteps||200;let s=e.method||"pdf";s!=="pdf"&&s!=="cdf"&&z("Invalid density method: "+s),!e.extent&&!r.data&&z("Missing density extent parameter."),s=r[s];const a=e.as||["value","density"],u=e.extent||ao(r.data()),l=Gy(s,u,i,o).map(c=>{const f={};return f[a[0]]=c[0],f[a[1]]=c[1],Ne(f)});this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function AQ(e){return()=>e.materialize(e.SOURCE).source}function gL(e,t){return e?e.map((n,r)=>t[r]||lt(n)):null}function Tk(e,t,n){const r=[],i=f=>f(u);let o,s,a,u,l,c;if(t==null)r.push(e.map(n));else for(o={},s=0,a=e.length;s<a;++s)u=e[s],l=t.map(i),c=o[l],c||(o[l]=c=[],c.dims=l,r.push(c)),c.push(n(u));return r}const mL="bin";function Mk(e){P.call(this,null,e)}Mk.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:mL}]};const FQ=(e,t)=>Tp(ao(e,t))/30;V(Mk,P,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,r=Tk(t.source,e.groupby,mn),i=e.smooth||!1,o=e.field,s=e.step||FQ(n,o),a=yl((p,g)=>o(p)-o(g)),u=e.as||mL,l=r.length;let c=1/0,f=-1/0,d=0,h;for(;d<l;++d){const p=r[d].sort(a);h=-1;for(const g of K6(p,s,i,o))g<c&&(c=g),g>f&&(f=g),p[++h][u]=g}return this.value={start:c,stop:f,step:s},t.reflow(!0).modifies(u)}});function yL(e){Ue.call(this,null,TQ,e),this.modified(!0)}V(yL,Ue);function TQ(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:ur(n=>t(n,e),fn(t),lt(t))}function Nk(e){P.call(this,[void 0,void 0],e)}Nk.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};V(Nk,P,{transform(e,t){const n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field");let o=n[0],s=n[1];if((i||o==null)&&(o=1/0,s=-1/0),t.visit(i?t.SOURCE:t.ADD,a=>{const u=un(r(a));u!=null&&(u<o&&(o=u),u>s&&(s=u))}),!Number.isFinite(o)||!Number.isFinite(s)){let a=lt(r);a&&(a=` for field "${a}"`),t.dataflow.warn(`Infinite extent${a}: [${o}, ${s}]`),o=s=void 0}this.value=[o,s]}});function Ok(e,t){Ue.call(this,e),this.parent=t,this.count=0}V(Ok,Ue,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function Vy(e){P.call(this,{},e),this._keys=$f();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let r=0,i=t.active;r<i;++r)n(t[r],r,t)}}V(Vy,P,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){const i=this.value;let o=ae(i,e)&&i[e],s,a;return o?o.value.stamp<n.stamp&&(o.init(n),this.activate(o)):(a=r||(a=this._group[e])&&a.tuple,s=n.dataflow,o=new Ok(n.fork(n.NO_SOURCE),this),s.add(o).connect(t(s,e,a)),i[e]=o,this.activate(o)),o},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){const n=this._targets.filter(r=>r&&r.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,r=e?e.length:0;let i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&t[i]!=null;++i)t[i]=null;t.active=r},transform(e,t){const n=t.dataflow,r=e.key,i=e.subflow,o=this._keys,s=e.modified("key"),a=u=>this.subflow(u,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,u=>{const l=oe(u),c=o.get(l);c!==void 0&&(o.delete(l),a(c).rem(u))}),t.visit(t.ADD,u=>{const l=r(u);o.set(oe(u),l),a(l).add(u)}),s||t.modified(r.fields)?t.visit(t.MOD,u=>{const l=oe(u),c=o.get(l),f=r(u);c===f?a(f).mod(u):(o.set(l,f),a(c).rem(u),a(f).add(u))}):t.changed(t.MOD)&&t.visit(t.MOD,u=>{a(o.get(oe(u))).mod(u)}),s&&t.visit(t.REFLOW,u=>{const l=oe(u),c=o.get(l),f=r(u);c!==f&&(o.set(l,f),a(c).rem(u),a(f).add(u))}),t.clean()?n.runAfter(()=>{this.clean(),o.clean()}):o.empty>n.cleanThreshold&&n.runAfter(o.clean),t}});function vL(e){Ue.call(this,null,MQ,e)}V(vL,Ue);function MQ(e){return this.value&&!e.modified()?this.value:I(e.name)?K(e.name).map(t=>tr(t)):tr(e.name,e.as)}function Dk(e){P.call(this,$f(),e)}Dk.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};V(Dk,P,{transform(e,t){const n=t.dataflow,r=this.value,i=t.fork(),o=i.add,s=i.rem,a=i.mod,u=e.expr;let l=!0;t.visit(t.REM,f=>{const d=oe(f);r.has(d)?r.delete(d):s.push(f)}),t.visit(t.ADD,f=>{u(f,e)?o.push(f):r.set(oe(f),1)});function c(f){const d=oe(f),h=u(f,e),p=r.get(d);h&&p?(r.delete(d),o.push(f)):!h&&!p?(r.set(d,1),s.push(f)):l&&h&&!p&&a.push(f)}return t.visit(t.MOD,c),e.modified()&&(l=!1,t.visit(t.REFLOW,c)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}});function Rk(e){P.call(this,[],e)}Rk.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};V(Rk,P,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=gL(r,e.as||[]),o=e.index||null,s=i.length;return n.rem=this.value,t.visit(t.SOURCE,a=>{const u=r.map(p=>p(a)),l=u.reduce((p,g)=>Math.max(p,g.length),0);let c=0,f,d,h;for(;c<l;++c){for(d=ik(a),f=0;f<s;++f)d[i[f]]=(h=u[f][c])==null?null:h;o&&(d[o]=c),n.add.push(d)}}),this.value=n.source=n.add,o&&n.modifies(o),n.modifies(i)}});function Pk(e){P.call(this,[],e)}Pk.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};V(Pk,P,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(lt),o=e.as||["key","value"],s=o[0],a=o[1],u=r.length;return n.rem=this.value,t.visit(t.SOURCE,l=>{for(let c=0,f;c<u;++c)f=ik(l),f[s]=i[c],f[a]=r[c](l),n.add.push(f)}),this.value=n.source=n.add,n.modifies(o)}});function Lk(e){P.call(this,null,e)}Lk.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};V(Lk,P,{transform(e,t){const n=e.expr,r=e.as,i=e.modified(),o=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(o,s=>s[r]=n(s,e))}});function xL(e){P.call(this,[],e)}V(xL,P,{transform(e,t){const n=t.fork(t.ALL),r=e.generator;let i=this.value,o=e.size-i.length,s,a,u;if(o>0){for(s=[];--o>=0;)s.push(u=Ne(r(e))),i.push(u);n.add=n.add.length?n.materialize(n.ADD).add.concat(s):s}else a=i.slice(0,-o),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(a):a,i=i.slice(-o);return n.source=this.value=i,n}});const Bg={value:"value",median:HP,mean:mV,min:Tw,max:Tu},NQ=[];function zk(e){P.call(this,[],e)}zk.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function OQ(e){var t=e.method||Bg.value,n;if(Bg[t]==null)z("Unrecognized imputation method: "+t);else return t===Bg.value?(n=e.value!==void 0?e.value:0,()=>n):Bg[t]}function DQ(e){const t=e.field;return n=>n?t(n):NaN}V(zk,P,{transform(e,t){var n=t.fork(t.ALL),r=OQ(e),i=DQ(e),o=lt(e.field),s=lt(e.key),a=(e.groupby||[]).map(lt),u=RQ(t.source,e.groupby,e.key,e.keyvals),l=[],c=this.value,f=u.domain.length,d,h,p,g,m,y,v,x,b,w;for(m=0,x=u.length;m<x;++m)for(d=u[m],p=d.values,h=NaN,v=0;v<f;++v)if(d[v]==null){for(g=u.domain[v],w={_impute:!0},y=0,b=p.length;y<b;++y)w[a[y]]=p[y];w[s]=g,w[o]=Number.isNaN(h)?h=r(d,i):h,l.push(Ne(w))}return l.length&&(n.add=n.materialize(n.ADD).add.concat(l)),c.length&&(n.rem=n.materialize(n.REM).rem.concat(c)),this.value=l,n}});function RQ(e,t,n,r){var i=y=>y(m),o=[],s=r?r.slice():[],a={},u={},l,c,f,d,h,p,g,m;for(s.forEach((y,v)=>a[y]=v+1),d=0,g=e.length;d<g;++d)m=e[d],p=n(m),h=a[p]||(a[p]=s.push(p)),c=(l=t?t.map(i):NQ)+"",(f=u[c])||(f=u[c]=[],o.push(f),f.values=l),f[h-1]=m;return o.domain=s,o}function Ik(e){ga.call(this,e)}Ik.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:Rp},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};V(Ik,ga,{transform(e,t){const n=this,r=e.modified();let i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,o=>n.add(o))):(i=n.value=n.value||this.init(e),t.visit(t.REM,o=>n.rem(o)),t.visit(t.ADD,o=>n.add(o))),n.changes(),t.visit(t.SOURCE,o=>{he(o,i[n.cellkey(o)].tuple)}),t.reflow(r).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function Bk(e){P.call(this,null,e)}Bk.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};V(Bk,P,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=Tk(r,e.groupby,e.field),o=(e.groupby||[]).map(lt),s=e.bandwidth,a=e.cumulative?"cdf":"pdf",u=e.as||["value","density"],l=[];let c=e.extent,f=e.steps||e.minsteps||25,d=e.steps||e.maxsteps||200;a!=="pdf"&&a!=="cdf"&&z("Invalid density method: "+a),e.resolve==="shared"&&(c||(c=ao(r,e.field)),f=d=e.steps||d),i.forEach(h=>{const p=dk(h,s)[a],g=e.counts?h.length:1,m=c||ao(h);Gy(p,m,f,d).forEach(y=>{const v={};for(let x=0;x<o.length;++x)v[o[x]]=h.dims[x];v[u[0]]=y[0],v[u[1]]=y[1]*g,l.push(Ne(v))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function bL(e){Ue.call(this,null,PQ,e)}V(bL,Ue);function PQ(e){return this.value&&!e.modified()?this.value:U_(e.fields,e.flat)}function wL(e){P.call(this,[],e),this._pending=null}V(wL,P,{transform(e,t){const n=t.dataflow;return this._pending?h2(this,t,this._pending):LQ(e)?t.StopPropagation:e.values?h2(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(i=>(this._pending=K(i.data),o=>o.touch(this)))}:n.request(e.url,e.format).then(r=>h2(this,t,K(r.data)))}});function LQ(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function h2(e,t,n){n.forEach(Ne);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function jk(e){P.call(this,{},e)}jk.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};V(jk,P,{transform(e,t){const n=e.fields,r=e.index,i=e.values,o=e.default==null?null:e.default,s=e.modified(),a=n.length;let u=s?t.SOURCE:t.ADD,l=t,c=e.as,f,d,h;return i?(d=i.length,a>1&&!c&&z('Multi-field lookup requires explicit "as" parameter.'),c&&c.length!==a*d&&z('The "as" parameter has too few output field names.'),c=c||i.map(lt),f=function(p){for(var g=0,m=0,y,v;g<a;++g)if(v=r.get(n[g](p)),v==null)for(y=0;y<d;++y,++m)p[c[m]]=o;else for(y=0;y<d;++y,++m)p[c[m]]=i[y](v)}):(c||z("Missing output field names."),f=function(p){for(var g=0,m;g<a;++g)m=r.get(n[g](p)),p[c[g]]=m??o}),s?l=t.reflow(!0):(h=n.some(p=>t.modified(p.fields)),u|=h?t.MOD:0),t.visit(u,f),l.modifies(c)}});function EL(e){Ue.call(this,null,zQ,e)}V(EL,Ue);function zQ(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let r=1/0,i=-1/0,o,s;for(o=0;o<n;++o)s=t[o],s[0]<r&&(r=s[0]),s[1]>i&&(i=s[1]);return[r,i]}function SL(e){Ue.call(this,null,IQ,e)}V(SL,Ue);function IQ(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function _L(e){P.call(this,null,e)}V(_L,P,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function Uk(e){ga.call(this,e)}Uk.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:Rp,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};V(Uk,ga,{_transform:ga.prototype.transform,transform(e,t){return this._transform(BQ(e,t),t)}});function BQ(e,t){const n=e.field,r=e.value,i=(e.op==="count"?"__count__":e.op)||"sum",o=fn(n).concat(fn(r)),s=UQ(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:s.map(()=>i),fields:s.map(a=>jQ(a,n,r,o)),as:s.map(a=>a+""),modified:e.modified.bind(e)}}function jQ(e,t,n,r){return ur(i=>t(i)===e?n(i):NaN,r,e+"")}function UQ(e,t,n){const r={},i=[];return n.visit(n.SOURCE,o=>{const s=e(o);r[s]||(r[s]=1,i.push(s))}),i.sort(Fy),t?i.slice(0,t):i}function kL(e){Vy.call(this,e)}V(kL,Vy,{transform(e,t){const n=e.subflow,r=e.field,i=o=>this.subflow(oe(o),n,t,o);return(e.modified("field")||r&&t.modified(fn(r)))&&z("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,o=>{const s=i(o);r(o).forEach(a=>s.mod(a))}),t.visit(t.ADD,o=>{const s=i(o);r(o).forEach(a=>s.add(Ne(a)))}),t.visit(t.REM,o=>{const s=i(o);r(o).forEach(a=>s.rem(a))})):(t.visit(t.MOD,o=>i(o).mod(o)),t.visit(t.ADD,o=>i(o).add(o)),t.visit(t.REM,o=>i(o).rem(o))),t.clean()&&t.runAfter(()=>this.clean()),t}});function Wk(e){P.call(this,null,e)}Wk.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};V(Wk,P,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=gL(e.fields,e.as||[]),o=r?(a,u)=>WQ(a,u,r,i):Iy;let s;return this.value?s=this.value:(t=t.addAll(),s=this.value={}),t.visit(t.REM,a=>{const u=oe(a);n.rem.push(s[u]),s[u]=null}),t.visit(t.ADD,a=>{const u=o(a,Ne({}));s[oe(a)]=u,n.add.push(u)}),t.visit(t.MOD,a=>{n.mod.push(o(a,s[oe(a)]))}),n}});function WQ(e,t,n,r){for(let i=0,o=n.length;i<o;++i)t[r[i]]=n[i](e);return t}function $L(e){P.call(this,null,e)}V($L,P,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function qk(e){P.call(this,null,e)}qk.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const qQ=1e-14;V(qk,P,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const i=t.materialize(t.SOURCE).source,o=Tk(i,e.groupby,e.field),s=(e.groupby||[]).map(lt),a=[],u=e.step||.01,l=e.probs||yr(u/2,1-qQ,u),c=l.length;return o.forEach(f=>{const d=ak(f,l);for(let h=0;h<c;++h){const p={};for(let g=0;g<s.length;++g)p[s[g]]=f.dims[g];p[r[0]]=l[h],p[r[1]]=d[h],a.push(Ne(p))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=a,n}});function CL(e){P.call(this,null,e)}V(CL,P,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,i=>{const o=oe(i);n.rem.push(r[o]),r[o]=null}),t.visit(t.ADD,i=>{const o=ik(i);r[oe(i)]=o,n.add.push(o)}),t.visit(t.MOD,i=>{const o=r[oe(i)];for(const s in i)o[s]=i[s],n.modifies(s);n.mod.push(o)})),n}});function Hk(e){P.call(this,[],e),this.count=0}Hk.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};V(Hk,P,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,o=this.value.reduce((c,f)=>(c[oe(f)]=1,c),{});let s=this.value,a=this.count,u=0;function l(c){let f,d;s.length<i?s.push(c):(d=~~((a+1)*qr()),d<s.length&&d>=u&&(f=s[d],o[oe(f)]&&n.rem.push(f),s[d]=c)),++a}if(t.rem.length&&(t.visit(t.REM,c=>{const f=oe(c);o[f]&&(o[f]=-1,n.rem.push(c)),--a}),s=s.filter(c=>o[oe(c)]!==-1)),(t.rem.length||r)&&s.length<i&&t.source&&(u=a=s.length,t.visit(t.SOURCE,c=>{o[oe(c)]||l(c)}),u=-1),r&&s.length>i){const c=s.length-i;for(let f=0;f<c;++f)o[oe(s[f])]=-1,n.rem.push(s[f]);s=s.slice(c)}return t.mod.length&&t.visit(t.MOD,c=>{o[oe(c)]&&n.mod.push(c)}),t.add.length&&t.visit(t.ADD,l),(t.add.length||u<0)&&(n.add=s.filter(c=>!o[oe(c)])),this.count=a,this.value=n.source=s,n}});function Gk(e){P.call(this,null,e)}Gk.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};V(Gk,P,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=yr(e.start,e.stop,e.step||1).map(i=>{const o={};return o[r]=i,Ne(o)}),n.add=t.add.concat(this.value),n}});function AL(e){P.call(this,null,e),this.modified(!0)}V(AL,P,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function Vk(e){P.call(this,null,e)}const FL=["unit0","unit1"];Vk.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:X_,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:FL}]};V(Vk,P,{transform(e,t){const n=e.field,r=e.interval!==!1,i=e.timezone==="utc",o=this._floor(e,t),s=(i?Tf:Ff)(o.unit).offset,a=e.as||FL,u=a[0],l=a[1],c=o.step;let f=o.start||1/0,d=o.stop||-1/0,h=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(fn(n)))&&(t=t.reflow(!0),h=t.SOURCE,f=1/0,d=-1/0),t.visit(h,p=>{const g=n(p);let m,y;g==null?(p[u]=null,r&&(p[l]=null)):(p[u]=m=y=o(g),r&&(p[l]=y=s(m,c)),m<f&&(f=m),y>d&&(d=y))}),o.start=f,o.stop=d,t.modifies(r?a:u)},_floor(e,t){const n=e.timezone==="utc",{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:x6({extent:e.extent||ao(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),o=Q_(r),s=this.value||{},a=(n?c6:l6)(o,i);return a.unit=_e(o),a.units=o,a.step=i,a.start=s.start,a.stop=s.stop,this.value=a}});function TL(e){P.call(this,$f(),e)}V(TL,P,{transform(e,t){const n=t.dataflow,r=e.field,i=this.value,o=a=>i.set(r(a),a);let s=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,o)):t.changed()?(t.visit(t.REM,a=>i.delete(r(a))),t.visit(t.ADD,o)):s=!1,this.modified(s),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}});function ML(e){P.call(this,null,e)}V(ML,P,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(yl(e.sort)):t.source).map(e.field))}});function HQ(e,t,n,r){const i=Qh[e](t,n);return{init:i.init||zs,update:function(o,s){s[r]=i.next(o)}}}const Qh={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=Qh.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||z("ntile num must be greater than zero.");const n=Qh.cume_dist(),r=n.next;return{init:n.init,next:i=>Math.ceil(t*r(i))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||z("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return r!=null?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=GQ(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};function GQ(e,t,n){for(let r=t.length;n<r;++n)if(e(t[n])!=null)return n;return-1}const VQ=Object.keys(Qh);function NL(e){const t=K(e.ops),n=K(e.fields),r=K(e.params),i=K(e.as),o=this.outputs=[],s=this.windows=[],a={},u={},l=[],c=[];let f=!0;function d(h){K(fn(h)).forEach(p=>a[p]=1)}d(e.sort),t.forEach((h,p)=>{const g=n[p],m=lt(g),y=aL(h,m,i[p]);if(d(g),o.push(y),ae(Qh,h))s.push(HQ(h,n[p],r[p],y));else{if(g==null&&h!=="count"&&z("Null aggregate field specified."),h==="count"){l.push(y);return}f=!1;let v=u[m];v||(v=u[m]=[],v.field=g,c.push(v)),v.push(uL(h,y))}}),(l.length||c.length)&&(this.cell=YQ(c,l,f)),this.inputs=Object.keys(a)}const OL=NL.prototype;OL.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};OL.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,o=r&&r.length;let s;if(n){for(s=e.p0;s<e.i0;++s)n.rem(i[s]);for(s=e.p1;s<e.i1;++s)n.add(i[s]);n.set(t)}for(s=0;s<o;++s)r[s].update(e,t)};function YQ(e,t,n){e=e.map(u=>cL(u,u.field));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,o=r.agg=Array(i),s=0;s<i;++s)o[s]=new e[s](r);if(r.store)var a=r.data=new _k;return r.add=function(u){if(r.num+=1,!n){a&&a.add(u);for(let l=0;l<i;++l)o[l].add(o[l].get(u),u)}},r.rem=function(u){if(r.num-=1,!n){a&&a.rem(u);for(let l=0;l<i;++l)o[l].rem(o[l].get(u),u)}},r.set=function(u){let l,c;for(a&&a.values(),l=0,c=t.length;l<c;++l)u[t[l]]=r.num;if(!n)for(l=0,c=o.length;l<c;++l)o[l].set(u)},r.init=function(){r.num=0,a&&a.reset();for(let u=0;u<i;++u)o[u].init()},r}function Yk(e){P.call(this,{},e),this._mlen=0,this._mods=[]}Yk.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:VQ.concat(Rp)},{name:"params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};V(Yk,P,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),r=yl(e.sort),i=jw(e.groupby),o=a=>this.group(i(a));let s=this.state;(!s||n)&&(s=this.state=new NL(e)),n||t.modified(s.inputs)?(this.value={},t.visit(t.SOURCE,a=>o(a).add(a))):(t.visit(t.REM,a=>o(a).remove(a)),t.visit(t.ADD,a=>o(a).add(a)));for(let a=0,u=this._mlen;a<u;++a)XQ(this._mods[a],s,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(s.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=fL(oe),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function XQ(e,t,n,r){const i=r.sort,o=i&&!r.ignorePeers,s=r.frame||[null,0],a=e.data(n),u=a.length,l=o?Mp(i):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:i||yn(-1)};t.init();for(let f=0;f<u;++f)QQ(c,s,f,u),o&&KQ(c,l),t.update(c,a[f])}function QQ(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function KQ(e,t){const n=e.i0,r=e.i1-1,i=e.compare,o=e.data,s=o.length-1;n>0&&!i(o[n],o[n-1])&&(e.i0=t.left(o,o[n])),r<s&&!i(o[r],o[r+1])&&(e.i1=t.right(o,o[r]))}const JQ=Object.freeze(Object.defineProperty({__proto__:null,aggregate:ga,bin:kk,collect:$k,compare:dL,countpattern:Ck,cross:Ak,density:Fk,dotbin:Mk,expression:yL,extent:Nk,facet:Vy,field:vL,filter:Dk,flatten:Rk,fold:Pk,formula:Lk,generate:xL,impute:zk,joinaggregate:Ik,kde:Bk,key:bL,load:wL,lookup:jk,multiextent:EL,multivalues:SL,params:_L,pivot:Uk,prefacet:kL,project:Wk,proxy:$L,quantile:qk,relay:CL,sample:Hk,sequence:Gk,sieve:AL,subflow:Ok,timeunit:Vk,tupleindex:TL,values:ML,window:Yk},Symbol.toStringTag,{value:"Module"}));function De(e){return function(){return e}}const tM=Math.abs,en=Math.atan2,Qa=Math.cos,ZQ=Math.max,p2=Math.min,Ii=Math.sin,Eu=Math.sqrt,nn=1e-12,Wc=Math.PI,B0=Wc/2,DL=2*Wc;function eK(e){return e>1?0:e<-1?Wc:Math.acos(e)}function nM(e){return e>=1?B0:e<=-1?-B0:Math.asin(e)}const Uw=Math.PI,Ww=2*Uw,cu=1e-6,tK=Ww-cu;function RL(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function nK(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return RL;const n=10**t;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let Xk=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?RL:nK(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,o,s){this._append`C${+t},${+n},${+r},${+i},${this._x1=+o},${this._y1=+s}`}arcTo(t,n,r,i,o){if(t=+t,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let s=this._x1,a=this._y1,u=r-t,l=i-n,c=s-t,f=a-n,d=c*c+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(d>cu)if(!(Math.abs(f*u-l*c)>cu)||!o)this._append`L${this._x1=t},${this._y1=n}`;else{let h=r-s,p=i-a,g=u*u+l*l,m=h*h+p*p,y=Math.sqrt(g),v=Math.sqrt(d),x=o*Math.tan((Uw-Math.acos((g+d-m)/(2*y*v)))/2),b=x/v,w=x/y;Math.abs(b-1)>cu&&this._append`L${t+b*c},${n+b*f}`,this._append`A${o},${o},0,0,${+(f*h>c*p)},${this._x1=t+w*u},${this._y1=n+w*l}`}}arc(t,n,r,i,o,s){if(t=+t,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),u=r*Math.sin(i),l=t+a,c=n+u,f=1^s,d=s?i-o:o-i;this._x1===null?this._append`M${l},${c}`:(Math.abs(this._x1-l)>cu||Math.abs(this._y1-c)>cu)&&this._append`L${l},${c}`,r&&(d<0&&(d=d%Ww+Ww),d>tK?this._append`A${r},${r},0,1,${f},${t-a},${n-u}A${r},${r},0,1,${f},${this._x1=l},${this._y1=c}`:d>cu&&this._append`A${r},${r},0,${+(d>=Uw)},${f},${this._x1=t+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function Yy(){return new Xk}Yy.prototype=Xk.prototype;function Xy(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new Xk(t)}function rK(e){return e.innerRadius}function iK(e){return e.outerRadius}function oK(e){return e.startAngle}function sK(e){return e.endAngle}function aK(e){return e&&e.padAngle}function uK(e,t,n,r,i,o,s,a){var u=n-e,l=r-t,c=s-i,f=a-o,d=f*u-c*l;if(!(d*d<nn))return d=(c*(t-o)-f*(e-i))/d,[e+d*u,t+d*l]}function jg(e,t,n,r,i,o,s){var a=e-n,u=t-r,l=(s?o:-o)/Eu(a*a+u*u),c=l*u,f=-l*a,d=e+c,h=t+f,p=n+c,g=r+f,m=(d+p)/2,y=(h+g)/2,v=p-d,x=g-h,b=v*v+x*x,w=i-o,S=d*g-p*h,E=(x<0?-1:1)*Eu(ZQ(0,w*w*b-S*S)),_=(S*x-v*E)/b,$=(-S*v-x*E)/b,k=(S*x+v*E)/b,A=(-S*v+x*E)/b,R=_-m,C=$-y,T=k-m,F=A-y;return R*R+C*C>T*T+F*F&&(_=k,$=A),{cx:_,cy:$,x01:-c,y01:-f,x11:_*(i/w-1),y11:$*(i/w-1)}}function lK(){var e=rK,t=iK,n=De(0),r=null,i=oK,o=sK,s=aK,a=null,u=Xy(l);function l(){var c,f,d=+e.apply(this,arguments),h=+t.apply(this,arguments),p=i.apply(this,arguments)-B0,g=o.apply(this,arguments)-B0,m=tM(g-p),y=g>p;if(a||(a=c=u()),h<d&&(f=h,h=d,d=f),!(h>nn))a.moveTo(0,0);else if(m>DL-nn)a.moveTo(h*Qa(p),h*Ii(p)),a.arc(0,0,h,p,g,!y),d>nn&&(a.moveTo(d*Qa(g),d*Ii(g)),a.arc(0,0,d,g,p,y));else{var v=p,x=g,b=p,w=g,S=m,E=m,_=s.apply(this,arguments)/2,$=_>nn&&(r?+r.apply(this,arguments):Eu(d*d+h*h)),k=p2(tM(h-d)/2,+n.apply(this,arguments)),A=k,R=k,C,T;if($>nn){var F=nM($/d*Ii(_)),N=nM($/h*Ii(_));(S-=F*2)>nn?(F*=y?1:-1,b+=F,w-=F):(S=0,b=w=(p+g)/2),(E-=N*2)>nn?(N*=y?1:-1,v+=N,x-=N):(E=0,v=x=(p+g)/2)}var D=h*Qa(v),M=h*Ii(v),O=d*Qa(w),B=d*Ii(w);if(k>nn){var X=h*Qa(x),te=h*Ii(x),xe=d*Qa(b),de=d*Ii(b),Oe;if(m<Wc)if(Oe=uK(D,M,xe,de,X,te,O,B)){var zt=D-Oe[0],Kr=M-Oe[1],Ya=X-Oe[0],Z=te-Oe[1],ge=1/Ii(eK((zt*Ya+Kr*Z)/(Eu(zt*zt+Kr*Kr)*Eu(Ya*Ya+Z*Z)))/2),ye=Eu(Oe[0]*Oe[0]+Oe[1]*Oe[1]);A=p2(k,(d-ye)/(ge-1)),R=p2(k,(h-ye)/(ge+1))}else A=R=0}E>nn?R>nn?(C=jg(xe,de,D,M,h,R,y),T=jg(X,te,O,B,h,R,y),a.moveTo(C.cx+C.x01,C.cy+C.y01),R<k?a.arc(C.cx,C.cy,R,en(C.y01,C.x01),en(T.y01,T.x01),!y):(a.arc(C.cx,C.cy,R,en(C.y01,C.x01),en(C.y11,C.x11),!y),a.arc(0,0,h,en(C.cy+C.y11,C.cx+C.x11),en(T.cy+T.y11,T.cx+T.x11),!y),a.arc(T.cx,T.cy,R,en(T.y11,T.x11),en(T.y01,T.x01),!y))):(a.moveTo(D,M),a.arc(0,0,h,v,x,!y)):a.moveTo(D,M),!(d>nn)||!(S>nn)?a.lineTo(O,B):A>nn?(C=jg(O,B,X,te,d,-A,y),T=jg(D,M,xe,de,d,-A,y),a.lineTo(C.cx+C.x01,C.cy+C.y01),A<k?a.arc(C.cx,C.cy,A,en(C.y01,C.x01),en(T.y01,T.x01),!y):(a.arc(C.cx,C.cy,A,en(C.y01,C.x01),en(C.y11,C.x11),!y),a.arc(0,0,d,en(C.cy+C.y11,C.cx+C.x11),en(T.cy+T.y11,T.cx+T.x11),y),a.arc(T.cx,T.cy,A,en(T.y11,T.x11),en(T.y01,T.x01),!y))):a.arc(0,0,d,w,b,y)}if(a.closePath(),c)return a=null,c+""||null}return l.centroid=function(){var c=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-Wc/2;return[Qa(f)*c,Ii(f)*c]},l.innerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:De(+c),l):e},l.outerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:De(+c),l):t},l.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:De(+c),l):n},l.padRadius=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:De(+c),l):r},l.startAngle=function(c){return arguments.length?(i=typeof c=="function"?c:De(+c),l):i},l.endAngle=function(c){return arguments.length?(o=typeof c=="function"?c:De(+c),l):o},l.padAngle=function(c){return arguments.length?(s=typeof c=="function"?c:De(+c),l):s},l.context=function(c){return arguments.length?(a=c??null,l):a},l}function PL(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function LL(e){this._context=e}LL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Qk(e){return new LL(e)}function zL(e){return e[0]}function IL(e){return e[1]}function BL(e,t){var n=De(!0),r=null,i=Qk,o=null,s=Xy(a);e=typeof e=="function"?e:e===void 0?zL:De(e),t=typeof t=="function"?t:t===void 0?IL:De(t);function a(u){var l,c=(u=PL(u)).length,f,d=!1,h;for(r==null&&(o=i(h=s())),l=0;l<=c;++l)!(l<c&&n(f=u[l],l,u))===d&&((d=!d)?o.lineStart():o.lineEnd()),d&&o.point(+e(f,l,u),+t(f,l,u));if(h)return o=null,h+""||null}return a.x=function(u){return arguments.length?(e=typeof u=="function"?u:De(+u),a):e},a.y=function(u){return arguments.length?(t=typeof u=="function"?u:De(+u),a):t},a.defined=function(u){return arguments.length?(n=typeof u=="function"?u:De(!!u),a):n},a.curve=function(u){return arguments.length?(i=u,r!=null&&(o=i(r)),a):i},a.context=function(u){return arguments.length?(u==null?r=o=null:o=i(r=u),a):r},a}function jL(e,t,n){var r=null,i=De(!0),o=null,s=Qk,a=null,u=Xy(l);e=typeof e=="function"?e:e===void 0?zL:De(+e),t=typeof t=="function"?t:De(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?IL:De(+n);function l(f){var d,h,p,g=(f=PL(f)).length,m,y=!1,v,x=new Array(g),b=new Array(g);for(o==null&&(a=s(v=u())),d=0;d<=g;++d){if(!(d<g&&i(m=f[d],d,f))===y)if(y=!y)h=d,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),p=d-1;p>=h;--p)a.point(x[p],b[p]);a.lineEnd(),a.areaEnd()}y&&(x[d]=+e(m,d,f),b[d]=+t(m,d,f),a.point(r?+r(m,d,f):x[d],n?+n(m,d,f):b[d]))}if(v)return a=null,v+""||null}function c(){return BL().defined(i).curve(s).context(o)}return l.x=function(f){return arguments.length?(e=typeof f=="function"?f:De(+f),r=null,l):e},l.x0=function(f){return arguments.length?(e=typeof f=="function"?f:De(+f),l):e},l.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:De(+f),l):r},l.y=function(f){return arguments.length?(t=typeof f=="function"?f:De(+f),n=null,l):t},l.y0=function(f){return arguments.length?(t=typeof f=="function"?f:De(+f),l):t},l.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:De(+f),l):n},l.lineX0=l.lineY0=function(){return c().x(e).y(t)},l.lineY1=function(){return c().x(e).y(n)},l.lineX1=function(){return c().x(r).y(t)},l.defined=function(f){return arguments.length?(i=typeof f=="function"?f:De(!!f),l):i},l.curve=function(f){return arguments.length?(s=f,o!=null&&(a=s(o)),l):s},l.context=function(f){return arguments.length?(f==null?o=a=null:a=s(o=f),l):o},l}const cK={draw(e,t){const n=Eu(t/Wc);e.moveTo(n,0),e.arc(0,0,n,0,DL)}};function fK(e,t){let n=null,r=Xy(i);e=typeof e=="function"?e:De(e||cK),t=typeof t=="function"?t:De(t===void 0?64:+t);function i(){let o;if(n||(n=o=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),o)return n=null,o+""||null}return i.type=function(o){return arguments.length?(e=typeof o=="function"?o:De(o),i):e},i.size=function(o){return arguments.length?(t=typeof o=="function"?o:De(+o),i):t},i.context=function(o){return arguments.length?(n=o??null,i):n},i}function ma(){}function j0(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function Qy(e){this._context=e}Qy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:j0(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:j0(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function dK(e){return new Qy(e)}function UL(e){this._context=e}UL.prototype={areaStart:ma,areaEnd:ma,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:j0(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function hK(e){return new UL(e)}function WL(e){this._context=e}WL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:j0(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function pK(e){return new WL(e)}function qL(e,t){this._basis=new Qy(e),this._beta=t}qL.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],o=e[n]-r,s=t[n]-i,a=-1,u;++a<=n;)u=a/n,this._basis.point(this._beta*e[a]+(1-this._beta)*(r+u*o),this._beta*t[a]+(1-this._beta)*(i+u*s));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const gK=function e(t){function n(r){return t===1?new Qy(r):new qL(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function U0(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function Kk(e,t){this._context=e,this._k=(1-t)/6}Kk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:U0(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:U0(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const mK=function e(t){function n(r){return new Kk(r,t)}return n.tension=function(r){return e(+r)},n}(0);function Jk(e,t){this._context=e,this._k=(1-t)/6}Jk.prototype={areaStart:ma,areaEnd:ma,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:U0(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const yK=function e(t){function n(r){return new Jk(r,t)}return n.tension=function(r){return e(+r)},n}(0);function Zk(e,t){this._context=e,this._k=(1-t)/6}Zk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:U0(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const vK=function e(t){function n(r){return new Zk(r,t)}return n.tension=function(r){return e(+r)},n}(0);function e$(e,t,n){var r=e._x1,i=e._y1,o=e._x2,s=e._y2;if(e._l01_a>nn){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,u=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/u,i=(i*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/u}if(e._l23_a>nn){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);o=(o*l+e._x1*e._l23_2a-t*e._l12_2a)/c,s=(s*l+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,o,s,e._x2,e._y2)}function HL(e,t){this._context=e,this._alpha=t}HL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:e$(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const xK=function e(t){function n(r){return t?new HL(r,t):new Kk(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function GL(e,t){this._context=e,this._alpha=t}GL.prototype={areaStart:ma,areaEnd:ma,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:e$(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const bK=function e(t){function n(r){return t?new GL(r,t):new Jk(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function VL(e,t){this._context=e,this._alpha=t}VL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:e$(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const wK=function e(t){function n(r){return t?new VL(r,t):new Zk(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function YL(e){this._context=e}YL.prototype={areaStart:ma,areaEnd:ma,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function EK(e){return new YL(e)}function rM(e){return e<0?-1:1}function iM(e,t,n){var r=e._x1-e._x0,i=t-e._x1,o=(e._y1-e._y0)/(r||i<0&&-0),s=(n-e._y1)/(i||r<0&&-0),a=(o*i+s*r)/(r+i);return(rM(o)+rM(s))*Math.min(Math.abs(o),Math.abs(s),.5*Math.abs(a))||0}function oM(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function g2(e,t,n){var r=e._x0,i=e._y0,o=e._x1,s=e._y1,a=(o-r)/3;e._context.bezierCurveTo(r+a,i+a*t,o-a,s-a*n,o,s)}function W0(e){this._context=e}W0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:g2(this,this._t0,oM(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,g2(this,oM(this,n=iM(this,e,t)),n);break;default:g2(this,this._t0,n=iM(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function XL(e){this._context=new QL(e)}(XL.prototype=Object.create(W0.prototype)).point=function(e,t){W0.prototype.point.call(this,t,e)};function QL(e){this._context=e}QL.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,o){this._context.bezierCurveTo(t,e,r,n,o,i)}};function SK(e){return new W0(e)}function _K(e){return new XL(e)}function KL(e){this._context=e}KL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=sM(e),i=sM(t),o=0,s=1;s<n;++o,++s)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],e[s],t[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function sM(e){var t,n=e.length-1,r,i=new Array(n),o=new Array(n),s=new Array(n);for(i[0]=0,o[0]=2,s[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,o[t]=4,s[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,o[n-1]=7,s[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/o[t-1],o[t]-=r,s[t]-=r*s[t-1];for(i[n-1]=s[n-1]/o[n-1],t=n-2;t>=0;--t)i[t]=(s[t]-i[t+1])/o[t];for(o[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)o[t]=2*e[t+1]-i[t+1];return[i,o]}function kK(e){return new KL(e)}function Ky(e,t){this._context=e,this._t=t}Ky.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function $K(e){return new Ky(e,.5)}function CK(e){return new Ky(e,0)}function AK(e){return new Ky(e,1)}function ua(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const FK=()=>typeof Image<"u"?Image:null;function vo(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Da(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const qw=Symbol("implicit");function t$(){var e=new ST,t=[],n=[],r=qw;function i(o){let s=e.get(o);if(s===void 0){if(r!==qw)return r;e.set(o,s=t.push(o)-1)}return n[s%n.length]}return i.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new ST;for(const s of o)e.has(s)||e.set(s,t.push(s)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return t$(t,n).unknown(r)},vo.apply(i,arguments),i}function Nf(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Pp(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Ra(){}var Hu=.7,qc=1/Hu,bc="\\s*([+-]?\\d+)\\s*",Kh="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",to="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",TK=/^#([0-9a-f]{3,8})$/,MK=new RegExp(`^rgb\\(${bc},${bc},${bc}\\)$`),NK=new RegExp(`^rgb\\(${to},${to},${to}\\)$`),OK=new RegExp(`^rgba\\(${bc},${bc},${bc},${Kh}\\)$`),DK=new RegExp(`^rgba\\(${to},${to},${to},${Kh}\\)$`),RK=new RegExp(`^hsl\\(${Kh},${to},${to}\\)$`),PK=new RegExp(`^hsla\\(${Kh},${to},${to},${Kh}\\)$`),aM={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Nf(Ra,Jh,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:uM,formatHex:uM,formatHex8:LK,formatHsl:zK,formatRgb:lM,toString:lM});function uM(){return this.rgb().formatHex()}function LK(){return this.rgb().formatHex8()}function zK(){return JL(this).formatHsl()}function lM(){return this.rgb().formatRgb()}function Jh(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=TK.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?cM(t):n===3?new At(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Ug(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Ug(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=MK.exec(e))?new At(t[1],t[2],t[3],1):(t=NK.exec(e))?new At(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=OK.exec(e))?Ug(t[1],t[2],t[3],t[4]):(t=DK.exec(e))?Ug(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=RK.exec(e))?hM(t[1],t[2]/100,t[3]/100,1):(t=PK.exec(e))?hM(t[1],t[2]/100,t[3]/100,t[4]):aM.hasOwnProperty(e)?cM(aM[e]):e==="transparent"?new At(NaN,NaN,NaN,0):null}function cM(e){return new At(e>>16&255,e>>8&255,e&255,1)}function Ug(e,t,n,r){return r<=0&&(e=t=n=NaN),new At(e,t,n,r)}function n$(e){return e instanceof Ra||(e=Jh(e)),e?(e=e.rgb(),new At(e.r,e.g,e.b,e.opacity)):new At}function ya(e,t,n,r){return arguments.length===1?n$(e):new At(e,t,n,r??1)}function At(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Nf(At,ya,Pp(Ra,{brighter(e){return e=e==null?qc:Math.pow(qc,e),new At(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Hu:Math.pow(Hu,e),new At(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new At(Mu(this.r),Mu(this.g),Mu(this.b),q0(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:fM,formatHex:fM,formatHex8:IK,formatRgb:dM,toString:dM}));function fM(){return`#${Su(this.r)}${Su(this.g)}${Su(this.b)}`}function IK(){return`#${Su(this.r)}${Su(this.g)}${Su(this.b)}${Su((isNaN(this.opacity)?1:this.opacity)*255)}`}function dM(){const e=q0(this.opacity);return`${e===1?"rgb(":"rgba("}${Mu(this.r)}, ${Mu(this.g)}, ${Mu(this.b)}${e===1?")":`, ${e})`}`}function q0(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Mu(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Su(e){return e=Mu(e),(e<16?"0":"")+e.toString(16)}function hM(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ci(e,t,n,r)}function JL(e){if(e instanceof ci)return new ci(e.h,e.s,e.l,e.opacity);if(e instanceof Ra||(e=Jh(e)),!e)return new ci;if(e instanceof ci)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),s=NaN,a=o-i,u=(o+i)/2;return a?(t===o?s=(n-r)/a+(n<r)*6:n===o?s=(r-t)/a+2:s=(t-n)/a+4,a/=u<.5?o+i:2-o-i,s*=60):a=u>0&&u<1?0:s,new ci(s,a,u,e.opacity)}function H0(e,t,n,r){return arguments.length===1?JL(e):new ci(e,t,n,r??1)}function ci(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Nf(ci,H0,Pp(Ra,{brighter(e){return e=e==null?qc:Math.pow(qc,e),new ci(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Hu:Math.pow(Hu,e),new ci(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new At(m2(e>=240?e-240:e+120,i,r),m2(e,i,r),m2(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new ci(pM(this.h),Wg(this.s),Wg(this.l),q0(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=q0(this.opacity);return`${e===1?"hsl(":"hsla("}${pM(this.h)}, ${Wg(this.s)*100}%, ${Wg(this.l)*100}%${e===1?")":`, ${e})`}`}}));function pM(e){return e=(e||0)%360,e<0?e+360:e}function Wg(e){return Math.max(0,Math.min(1,e||0))}function m2(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const ZL=Math.PI/180,e8=180/Math.PI,G0=18,t8=.96422,n8=1,r8=.82521,i8=4/29,wc=6/29,o8=3*wc*wc,BK=wc*wc*wc;function s8(e){if(e instanceof no)return new no(e.l,e.a,e.b,e.opacity);if(e instanceof Go)return a8(e);e instanceof At||(e=n$(e));var t=b2(e.r),n=b2(e.g),r=b2(e.b),i=y2((.2225045*t+.7168786*n+.0606169*r)/n8),o,s;return t===n&&n===r?o=s=i:(o=y2((.4360747*t+.3850649*n+.1430804*r)/t8),s=y2((.0139322*t+.0971045*n+.7141733*r)/r8)),new no(116*i-16,500*(o-i),200*(i-s),e.opacity)}function V0(e,t,n,r){return arguments.length===1?s8(e):new no(e,t,n,r??1)}function no(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}Nf(no,V0,Pp(Ra,{brighter(e){return new no(this.l+G0*(e??1),this.a,this.b,this.opacity)},darker(e){return new no(this.l-G0*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=t8*v2(t),e=n8*v2(e),n=r8*v2(n),new At(x2(3.1338561*t-1.6168667*e-.4906146*n),x2(-.9787684*t+1.9161415*e+.033454*n),x2(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function y2(e){return e>BK?Math.pow(e,1/3):e/o8+i8}function v2(e){return e>wc?e*e*e:o8*(e-i8)}function x2(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function b2(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function jK(e){if(e instanceof Go)return new Go(e.h,e.c,e.l,e.opacity);if(e instanceof no||(e=s8(e)),e.a===0&&e.b===0)return new Go(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*e8;return new Go(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function Y0(e,t,n,r){return arguments.length===1?jK(e):new Go(e,t,n,r??1)}function Go(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function a8(e){if(isNaN(e.h))return new no(e.l,0,0,e.opacity);var t=e.h*ZL;return new no(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}Nf(Go,Y0,Pp(Ra,{brighter(e){return new Go(this.h,this.c,this.l+G0*(e??1),this.opacity)},darker(e){return new Go(this.h,this.c,this.l-G0*(e??1),this.opacity)},rgb(){return a8(this).rgb()}}));var u8=-.14861,r$=1.78277,i$=-.29227,Jy=-.90649,Zh=1.97294,gM=Zh*Jy,mM=Zh*r$,yM=r$*i$-Jy*u8;function UK(e){if(e instanceof Nu)return new Nu(e.h,e.s,e.l,e.opacity);e instanceof At||(e=n$(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(yM*r+gM*t-mM*n)/(yM+gM-mM),o=r-i,s=(Zh*(n-i)-i$*o)/Jy,a=Math.sqrt(s*s+o*o)/(Zh*i*(1-i)),u=a?Math.atan2(s,o)*e8-120:NaN;return new Nu(u<0?u+360:u,a,i,e.opacity)}function Hw(e,t,n,r){return arguments.length===1?UK(e):new Nu(e,t,n,r??1)}function Nu(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Nf(Nu,Hw,Pp(Ra,{brighter(e){return e=e==null?qc:Math.pow(qc,e),new Nu(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Hu:Math.pow(Hu,e),new Nu(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*ZL,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new At(255*(t+n*(u8*r+r$*i)),255*(t+n*(i$*r+Jy*i)),255*(t+n*(Zh*r)),this.opacity)}}));function l8(e,t,n,r,i){var o=e*e,s=o*e;return((1-3*e+3*o-s)*t+(4-6*o+3*s)*n+(1+3*e+3*o-3*s)*r+s*i)/6}function c8(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],o=e[r+1],s=r>0?e[r-1]:2*i-o,a=r<t-1?e[r+2]:2*o-i;return l8((n-r/t)*t,s,i,o,a)}}function f8(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],o=e[r%t],s=e[(r+1)%t],a=e[(r+2)%t];return l8((n-r/t)*t,i,o,s,a)}}const Zy=e=>()=>e;function d8(e,t){return function(n){return e+n*t}}function WK(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function ev(e,t){var n=t-e;return n?d8(e,n>180||n<-180?n-360*Math.round(n/360):n):Zy(isNaN(e)?t:e)}function qK(e){return(e=+e)==1?Ft:function(t,n){return n-t?WK(t,n,e):Zy(isNaN(t)?n:t)}}function Ft(e,t){var n=t-e;return n?d8(e,n):Zy(isNaN(e)?t:e)}const Gw=function e(t){var n=qK(t);function r(i,o){var s=n((i=ya(i)).r,(o=ya(o)).r),a=n(i.g,o.g),u=n(i.b,o.b),l=Ft(i.opacity,o.opacity);return function(c){return i.r=s(c),i.g=a(c),i.b=u(c),i.opacity=l(c),i+""}}return r.gamma=e,r}(1);function h8(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),o=new Array(n),s,a;for(s=0;s<n;++s)a=ya(t[s]),r[s]=a.r||0,i[s]=a.g||0,o[s]=a.b||0;return r=e(r),i=e(i),o=e(o),a.opacity=1,function(u){return a.r=r(u),a.g=i(u),a.b=o(u),a+""}}}var HK=h8(c8),GK=h8(f8);function o$(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=e[i]*(1-o)+t[i]*o;return r}}function p8(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function VK(e,t){return(p8(t)?o$:g8)(e,t)}function g8(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),o=new Array(n),s;for(s=0;s<r;++s)i[s]=Pa(e[s],t[s]);for(;s<n;++s)o[s]=t[s];return function(a){for(s=0;s<r;++s)o[s]=i[s](a);return o}}function m8(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function ui(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function y8(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Pa(e[i],t[i]):r[i]=t[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var Vw=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,w2=new RegExp(Vw.source,"g");function YK(e){return function(){return e}}function XK(e){return function(t){return e(t)+""}}function v8(e,t){var n=Vw.lastIndex=w2.lastIndex=0,r,i,o,s=-1,a=[],u=[];for(e=e+"",t=t+"";(r=Vw.exec(e))&&(i=w2.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(r=r[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,u.push({i:s,x:ui(r,i)})),n=w2.lastIndex;return n<t.length&&(o=t.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?u[0]?XK(u[0].x):YK(t):(t=u.length,function(l){for(var c=0,f;c<t;++c)a[(f=u[c]).i]=f.x(l);return a.join("")})}function Pa(e,t){var n=typeof t,r;return t==null||n==="boolean"?Zy(t):(n==="number"?ui:n==="string"?(r=Jh(t))?(t=r,Gw):v8:t instanceof Jh?Gw:t instanceof Date?m8:p8(t)?o$:Array.isArray(t)?g8:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?y8:ui)(e,t)}function QK(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function KK(e,t){var n=ev(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function Lp(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var vM=180/Math.PI,Yw={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function x8(e,t,n,r,i,o){var s,a,u;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,u/=a),e*r<t*n&&(e=-e,t=-t,u=-u,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*vM,skewX:Math.atan(u)*vM,scaleX:s,scaleY:a}}var qg;function JK(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Yw:x8(t.a,t.b,t.c,t.d,t.e,t.f)}function ZK(e){return e==null||(qg||(qg=document.createElementNS("http://www.w3.org/2000/svg","g")),qg.setAttribute("transform",e),!(e=qg.transform.baseVal.consolidate()))?Yw:(e=e.matrix,x8(e.a,e.b,e.c,e.d,e.e,e.f))}function b8(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function o(l,c,f,d,h,p){if(l!==f||c!==d){var g=h.push("translate(",null,t,null,n);p.push({i:g-4,x:ui(l,f)},{i:g-2,x:ui(c,d)})}else(f||d)&&h.push("translate("+f+t+d+n)}function s(l,c,f,d){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:ui(l,c)})):c&&f.push(i(f)+"rotate("+c+r)}function a(l,c,f,d){l!==c?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:ui(l,c)}):c&&f.push(i(f)+"skewX("+c+r)}function u(l,c,f,d,h,p){if(l!==f||c!==d){var g=h.push(i(h)+"scale(",null,",",null,")");p.push({i:g-4,x:ui(l,f)},{i:g-2,x:ui(c,d)})}else(f!==1||d!==1)&&h.push(i(h)+"scale("+f+","+d+")")}return function(l,c){var f=[],d=[];return l=e(l),c=e(c),o(l.translateX,l.translateY,c.translateX,c.translateY,f,d),s(l.rotate,c.rotate,f,d),a(l.skewX,c.skewX,f,d),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,d),l=c=null,function(h){for(var p=-1,g=d.length,m;++p<g;)f[(m=d[p]).i]=m.x(h);return f.join("")}}}var eJ=b8(JK,"px, ","px)","deg)"),tJ=b8(ZK,", ",")",")"),nJ=1e-12;function xM(e){return((e=Math.exp(e))+1/e)/2}function rJ(e){return((e=Math.exp(e))-1/e)/2}function iJ(e){return((e=Math.exp(2*e))-1)/(e+1)}const oJ=function e(t,n,r){function i(o,s){var a=o[0],u=o[1],l=o[2],c=s[0],f=s[1],d=s[2],h=c-a,p=f-u,g=h*h+p*p,m,y;if(g<nJ)y=Math.log(d/l)/t,m=function(E){return[a+E*h,u+E*p,l*Math.exp(t*E*y)]};else{var v=Math.sqrt(g),x=(d*d-l*l+r*g)/(2*l*n*v),b=(d*d-l*l-r*g)/(2*d*n*v),w=Math.log(Math.sqrt(x*x+1)-x),S=Math.log(Math.sqrt(b*b+1)-b);y=(S-w)/t,m=function(E){var _=E*y,$=xM(w),k=l/(n*v)*($*iJ(t*_+w)-rJ(w));return[a+k*h,u+k*p,l*$/xM(t*_+w)]}}return m.duration=y*1e3*t/Math.SQRT2,m}return i.rho=function(o){var s=Math.max(.001,+o),a=s*s,u=a*a;return e(s,a,u)},i}(Math.SQRT2,2,4);function w8(e){return function(t,n){var r=e((t=H0(t)).h,(n=H0(n)).h),i=Ft(t.s,n.s),o=Ft(t.l,n.l),s=Ft(t.opacity,n.opacity);return function(a){return t.h=r(a),t.s=i(a),t.l=o(a),t.opacity=s(a),t+""}}}const sJ=w8(ev);var aJ=w8(Ft);function uJ(e,t){var n=Ft((e=V0(e)).l,(t=V0(t)).l),r=Ft(e.a,t.a),i=Ft(e.b,t.b),o=Ft(e.opacity,t.opacity);return function(s){return e.l=n(s),e.a=r(s),e.b=i(s),e.opacity=o(s),e+""}}function E8(e){return function(t,n){var r=e((t=Y0(t)).h,(n=Y0(n)).h),i=Ft(t.c,n.c),o=Ft(t.l,n.l),s=Ft(t.opacity,n.opacity);return function(a){return t.h=r(a),t.c=i(a),t.l=o(a),t.opacity=s(a),t+""}}}const lJ=E8(ev);var cJ=E8(Ft);function S8(e){return function t(n){n=+n;function r(i,o){var s=e((i=Hw(i)).h,(o=Hw(o)).h),a=Ft(i.s,o.s),u=Ft(i.l,o.l),l=Ft(i.opacity,o.opacity);return function(c){return i.h=s(c),i.s=a(c),i.l=u(Math.pow(c,n)),i.opacity=l(c),i+""}}return r.gamma=t,r}(1)}const fJ=S8(ev);var dJ=S8(Ft);function s$(e,t){t===void 0&&(t=e,e=Pa);for(var n=0,r=t.length-1,i=t[0],o=new Array(r<0?0:r);n<r;)o[n]=e(i,i=t[++n]);return function(s){var a=Math.max(0,Math.min(r-1,Math.floor(s*=r)));return o[a](s-a)}}function hJ(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}const pJ=Object.freeze(Object.defineProperty({__proto__:null,interpolate:Pa,interpolateArray:VK,interpolateBasis:c8,interpolateBasisClosed:f8,interpolateCubehelix:fJ,interpolateCubehelixLong:dJ,interpolateDate:m8,interpolateDiscrete:QK,interpolateHcl:lJ,interpolateHclLong:cJ,interpolateHsl:sJ,interpolateHslLong:aJ,interpolateHue:KK,interpolateLab:uJ,interpolateNumber:ui,interpolateNumberArray:o$,interpolateObject:y8,interpolateRgb:Gw,interpolateRgbBasis:HK,interpolateRgbBasisClosed:GK,interpolateRound:Lp,interpolateString:v8,interpolateTransformCss:eJ,interpolateTransformSvg:tJ,interpolateZoom:oJ,piecewise:s$,quantize:hJ},Symbol.toStringTag,{value:"Module"}));function gJ(e){return function(){return e}}function Xw(e){return+e}var bM=[0,1];function Vn(e){return e}function Qw(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:gJ(isNaN(t)?NaN:.5)}function mJ(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function yJ(e,t,n){var r=e[0],i=e[1],o=t[0],s=t[1];return i<r?(r=Qw(i,r),o=n(s,o)):(r=Qw(r,i),o=n(o,s)),function(a){return o(r(a))}}function vJ(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),s=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<r;)i[s]=Qw(e[s],e[s+1]),o[s]=n(t[s],t[s+1]);return function(a){var u=Np(e,a,1,r)-1;return o[u](i[u](a))}}function zp(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function tv(){var e=bM,t=bM,n=Pa,r,i,o,s=Vn,a,u,l;function c(){var d=Math.min(e.length,t.length);return s!==Vn&&(s=mJ(e[0],e[d-1])),a=d>2?vJ:yJ,u=l=null,f}function f(d){return d==null||isNaN(d=+d)?o:(u||(u=a(e.map(r),t,n)))(r(s(d)))}return f.invert=function(d){return s(i((l||(l=a(t,e.map(r),ui)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,Xw),c()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),c()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),n=Lp,c()},f.clamp=function(d){return arguments.length?(s=d?!0:Vn,c()):s!==Vn},f.interpolate=function(d){return arguments.length?(n=d,c()):n},f.unknown=function(d){return arguments.length?(o=d,f):o},function(d,h){return r=d,i=h,c()}}function _8(){return tv()(Vn,Vn)}function k8(e,t,n,r){var i=pa(e,t,n),o;switch(r=qu(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(o=KP(i,s))&&(r.precision=o),V_(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=JP(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=QP(i))&&(r.precision=o-(r.type==="%")*2);break}}return Ty(r)}function xl(e){var t=e.domain;return e.ticks=function(n){var r=t();return Aw(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return k8(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,o=r.length-1,s=r[i],a=r[o],u,l,c=10;for(a<s&&(l=s,s=a,a=l,l=i,i=o,o=l);c-- >0;){if(l=Fw(s,a,n),l===u)return r[i]=s,r[o]=a,t(r);if(l>0)s=Math.floor(s/l)*l,a=Math.ceil(a/l)*l;else if(l<0)s=Math.ceil(s*l)/l,a=Math.floor(a*l)/l;else break;u=l}return e},e}function $8(){var e=_8();return e.copy=function(){return zp(e,$8())},vo.apply(e,arguments),xl(e)}function C8(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,Xw),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return C8(e).unknown(t)},e=arguments.length?Array.from(e,Xw):[0,1],xl(n)}function A8(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],o=e[r],s;return o<i&&(s=n,n=r,r=s,s=i,i=o,o=s),e[n]=t.floor(i),e[r]=t.ceil(o),e}function wM(e){return Math.log(e)}function EM(e){return Math.exp(e)}function xJ(e){return-Math.log(-e)}function bJ(e){return-Math.exp(-e)}function wJ(e){return isFinite(e)?+("1e"+e):e<0?0:e}function EJ(e){return e===10?wJ:e===Math.E?Math.exp:t=>Math.pow(e,t)}function SJ(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function SM(e){return(t,n)=>-e(-t,n)}function a$(e){const t=e(wM,EM),n=t.domain;let r=10,i,o;function s(){return i=SJ(r),o=EJ(r),n()[0]<0?(i=SM(i),o=SM(o),e(xJ,bJ)):e(wM,EM),t}return t.base=function(a){return arguments.length?(r=+a,s()):r},t.domain=function(a){return arguments.length?(n(a),s()):n()},t.ticks=a=>{const u=n();let l=u[0],c=u[u.length-1];const f=c<l;f&&([l,c]=[c,l]);let d=i(l),h=i(c),p,g;const m=a==null?10:+a;let y=[];if(!(r%1)&&h-d<m){if(d=Math.floor(d),h=Math.ceil(h),l>0){for(;d<=h;++d)for(p=1;p<r;++p)if(g=d<0?p/o(-d):p*o(d),!(g<l)){if(g>c)break;y.push(g)}}else for(;d<=h;++d)for(p=r-1;p>=1;--p)if(g=d>0?p/o(-d):p*o(d),!(g<l)){if(g>c)break;y.push(g)}y.length*2<m&&(y=Aw(l,c,m))}else y=Aw(d,h,Math.min(h-d,m)).map(o);return f?y.reverse():y},t.tickFormat=(a,u)=>{if(a==null&&(a=10),u==null&&(u=r===10?"s":","),typeof u!="function"&&(!(r%1)&&(u=qu(u)).precision==null&&(u.trim=!0),u=Ty(u)),a===1/0)return u;const l=Math.max(1,r*a/t.ticks().length);return c=>{let f=c/o(Math.round(i(c)));return f*r<r-.5&&(f*=r),f<=l?u(c):""}},t.nice=()=>n(A8(n(),{floor:a=>o(Math.floor(i(a))),ceil:a=>o(Math.ceil(i(a)))})),t}function F8(){const e=a$(tv()).domain([1,10]);return e.copy=()=>zp(e,F8()).base(e.base()),vo.apply(e,arguments),e}function _M(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function kM(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function u$(e){var t=1,n=e(_M(t),kM(t));return n.constant=function(r){return arguments.length?e(_M(t=+r),kM(t)):t},xl(n)}function T8(){var e=u$(tv());return e.copy=function(){return zp(e,T8()).constant(e.constant())},vo.apply(e,arguments)}function $M(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function _J(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function kJ(e){return e<0?-e*e:e*e}function l$(e){var t=e(Vn,Vn),n=1;function r(){return n===1?e(Vn,Vn):n===.5?e(_J,kJ):e($M(n),$M(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},xl(t)}function c$(){var e=l$(tv());return e.copy=function(){return zp(e,c$()).exponent(e.exponent())},vo.apply(e,arguments),e}function $J(){return c$.apply(null,arguments).exponent(.5)}function M8(){var e=[],t=[],n=[],r;function i(){var s=0,a=Math.max(1,t.length);for(n=new Array(a-1);++s<a;)n[s-1]=qP(e,s/a);return o}function o(s){return s==null||isNaN(s=+s)?r:t[Np(n,s)]}return o.invertExtent=function(s){var a=t.indexOf(s);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},o.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let a of s)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(Ko),i()},o.range=function(s){return arguments.length?(t=Array.from(s),i()):t.slice()},o.unknown=function(s){return arguments.length?(r=s,o):r},o.quantiles=function(){return n.slice()},o.copy=function(){return M8().domain(e).range(t).unknown(r)},vo.apply(o,arguments)}function N8(){var e=0,t=1,n=1,r=[.5],i=[0,1],o;function s(u){return u!=null&&u<=u?i[Np(r,u,0,n)]:o}function a(){var u=-1;for(r=new Array(n);++u<n;)r[u]=((u+1)*t-(u-n)*e)/(n+1);return s}return s.domain=function(u){return arguments.length?([e,t]=u,e=+e,t=+t,a()):[e,t]},s.range=function(u){return arguments.length?(n=(i=Array.from(u)).length-1,a()):i.slice()},s.invertExtent=function(u){var l=i.indexOf(u);return l<0?[NaN,NaN]:l<1?[e,r[0]]:l>=n?[r[n-1],t]:[r[l-1],r[l]]},s.unknown=function(u){return arguments.length&&(o=u),s},s.thresholds=function(){return r.slice()},s.copy=function(){return N8().domain([e,t]).range(i).unknown(o)},vo.apply(xl(s),arguments)}function O8(){var e=[.5],t=[0,1],n,r=1;function i(o){return o!=null&&o<=o?t[Np(e,o,0,r)]:n}return i.domain=function(o){return arguments.length?(e=Array.from(o),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(o){return arguments.length?(t=Array.from(o),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(o){var s=t.indexOf(o);return[e[s-1],e[s]]},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return O8().domain(e).range(t).unknown(n)},vo.apply(i,arguments)}function CJ(e){return new Date(e)}function AJ(e){return e instanceof Date?+e:+new Date(+e)}function f$(e,t,n,r,i,o,s,a,u,l){var c=_8(),f=c.invert,d=c.domain,h=l(".%L"),p=l(":%S"),g=l("%I:%M"),m=l("%I %p"),y=l("%a %d"),v=l("%b %d"),x=l("%B"),b=l("%Y");function w(S){return(u(S)<S?h:a(S)<S?p:s(S)<S?g:o(S)<S?m:r(S)<S?i(S)<S?y:v:n(S)<S?x:b)(S)}return c.invert=function(S){return new Date(f(S))},c.domain=function(S){return arguments.length?d(Array.from(S,AJ)):d().map(CJ)},c.ticks=function(S){var E=d();return e(E[0],E[E.length-1],S??10)},c.tickFormat=function(S,E){return E==null?w:l(E)},c.nice=function(S){var E=d();return(!S||typeof S.range!="function")&&(S=t(E[0],E[E.length-1],S??10)),S?d(A8(E,S)):c},c.copy=function(){return zp(c,f$(e,t,n,r,i,o,s,a,u,l))},c}function FJ(){return vo.apply(f$(RV,PV,uo,Gh,Cf,Jo,Oy,My,Ho,J_).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function TJ(){return vo.apply(f$(OV,DV,lo,Vh,Af,sa,Dy,Ny,Ho,Z_).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function nv(){var e=0,t=1,n,r,i,o,s=Vn,a=!1,u;function l(f){return f==null||isNaN(f=+f)?u:s(i===0?.5:(f=(o(f)-n)*i,a?Math.max(0,Math.min(1,f)):f))}l.domain=function(f){return arguments.length?([e,t]=f,n=o(e=+e),r=o(t=+t),i=n===r?0:1/(r-n),l):[e,t]},l.clamp=function(f){return arguments.length?(a=!!f,l):a},l.interpolator=function(f){return arguments.length?(s=f,l):s};function c(f){return function(d){var h,p;return arguments.length?([h,p]=d,s=f(h,p),l):[s(0),s(1)]}}return l.range=c(Pa),l.rangeRound=c(Lp),l.unknown=function(f){return arguments.length?(u=f,l):u},function(f){return o=f,n=f(e),r=f(t),i=n===r?0:1/(r-n),l}}function La(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function d$(){var e=xl(nv()(Vn));return e.copy=function(){return La(e,d$())},Da.apply(e,arguments)}function D8(){var e=a$(nv()).domain([1,10]);return e.copy=function(){return La(e,D8()).base(e.base())},Da.apply(e,arguments)}function R8(){var e=u$(nv());return e.copy=function(){return La(e,R8()).constant(e.constant())},Da.apply(e,arguments)}function h$(){var e=l$(nv());return e.copy=function(){return La(e,h$()).exponent(e.exponent())},Da.apply(e,arguments)}function MJ(){return h$.apply(null,arguments).exponent(.5)}function rv(){var e=0,t=.5,n=1,r=1,i,o,s,a,u,l=Vn,c,f=!1,d;function h(g){return isNaN(g=+g)?d:(g=.5+((g=+c(g))-o)*(r*g<r*o?a:u),l(f?Math.max(0,Math.min(1,g)):g))}h.domain=function(g){return arguments.length?([e,t,n]=g,i=c(e=+e),o=c(t=+t),s=c(n=+n),a=i===o?0:.5/(o-i),u=o===s?0:.5/(s-o),r=o<i?-1:1,h):[e,t,n]},h.clamp=function(g){return arguments.length?(f=!!g,h):f},h.interpolator=function(g){return arguments.length?(l=g,h):l};function p(g){return function(m){var y,v,x;return arguments.length?([y,v,x]=m,l=s$(g,[y,v,x]),h):[l(0),l(.5),l(1)]}}return h.range=p(Pa),h.rangeRound=p(Lp),h.unknown=function(g){return arguments.length?(d=g,h):d},function(g){return c=g,i=g(e),o=g(t),s=g(n),a=i===o?0:.5/(o-i),u=o===s?0:.5/(s-o),r=o<i?-1:1,h}}function P8(){var e=xl(rv()(Vn));return e.copy=function(){return La(e,P8())},Da.apply(e,arguments)}function L8(){var e=a$(rv()).domain([.1,1,10]);return e.copy=function(){return La(e,L8()).base(e.base())},Da.apply(e,arguments)}function z8(){var e=u$(rv());return e.copy=function(){return La(e,z8()).constant(e.constant())},Da.apply(e,arguments)}function p$(){var e=l$(rv());return e.copy=function(){return La(e,p$()).exponent(e.exponent())},Da.apply(e,arguments)}function NJ(){return p$.apply(null,arguments).exponent(.5)}function g$(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const OJ="identity",Hc="linear",cs="log",Ip="pow",Bp="sqrt",iv="symlog",Gu="time",Vu="utc",ro="sequential",Of="diverging",Gc="quantile",ov="quantize",sv="threshold",m$="ordinal",Kw="point",I8="band",y$="bin-ordinal",_t="continuous",jp="discrete",Up="discretizing",Yr="interpolating",v$="temporal";function DJ(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function RJ(e){return function(t){const n=e.range();let r=t[0],i=t[1],o=-1,s,a,u,l;for(i<r&&(a=r,r=i,i=a),u=0,l=n.length;u<l;++u)n[u]>=r&&n[u]<=i&&(o<0&&(o=u),s=u);if(!(o<0))return r=e.invertExtent(n[o]),i=e.invertExtent(n[s]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function x$(){const e=t$().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,o,s=!1,a=0,u=0,l=.5;delete e.unknown;function c(){const f=t().length,d=r[1]<r[0],h=r[1-d],p=g$(f,a,u);let g=r[d-0];i=(h-g)/(p||1),s&&(i=Math.floor(i)),g+=(h-g-i*(f-a))*l,o=i*(1-a),s&&(g=Math.round(g),o=Math.round(o));const m=yr(f).map(y=>g+i*y);return n(d?m.reverse():m)}return e.domain=function(f){return arguments.length?(t(f),c()):t()},e.range=function(f){return arguments.length?(r=[+f[0],+f[1]],c()):r.slice()},e.rangeRound=function(f){return r=[+f[0],+f[1]],s=!0,c()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(f){return arguments.length?(s=!!f,c()):s},e.padding=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),a=u,c()):a},e.paddingInner=function(f){return arguments.length?(a=Math.max(0,Math.min(1,f)),c()):a},e.paddingOuter=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),c()):u},e.align=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),c()):l},e.invertRange=function(f){if(f[0]==null||f[1]==null)return;const d=r[1]<r[0],h=d?n().reverse():n(),p=h.length-1;let g=+f[0],m=+f[1],y,v,x;if(!(g!==g||m!==m)&&(m<g&&(x=g,g=m,m=x),!(m<h[0]||g>r[1-d])))return y=Math.max(0,N0(h,g)-1),v=g===m?y:N0(h,m)-1,g-h[y]>o+1e-10&&++y,d&&(x=y,y=p-v,v=p-x),y>v?void 0:t().slice(y,v+1)},e.invert=function(f){const d=e.invertRange([f,f]);return d&&d[0]},e.copy=function(){return x$().domain(t()).range(r).round(s).paddingInner(a).paddingOuter(u).align(l)},c()}function B8(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return B8(t())},e}function PJ(){return B8(x$().paddingInner(1))}var LJ=Array.prototype.map;function zJ(e){return LJ.call(e,un)}const IJ=Array.prototype.slice;function j8(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(Np(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=zJ(r),n):e.slice()},n.range=function(r){return arguments.length?(t=IJ.call(r),n):t.slice()},n.tickFormat=function(r,i){return k8(e[0],_e(e),r??10,i)},n.copy=function(){return j8().domain(n.domain()).range(n.range())},n}const X0=new Map,U8=Symbol("vega_scale");function W8(e){return e[U8]=!0,e}function BJ(e){return e&&e[U8]===!0}function jJ(e,t,n){const r=function(){const o=t();return o.invertRange||(o.invertRange=o.invert?DJ(o):o.invertExtent?RJ(o):void 0),o.type=e,W8(o)};return r.metadata=ki(K(n)),r}function Fe(e,t,n){return arguments.length>1?(X0.set(e,jJ(e,t,n)),this):q8(e)?X0.get(e):void 0}Fe(OJ,C8);Fe(Hc,$8,_t);Fe(cs,F8,[_t,cs]);Fe(Ip,c$,_t);Fe(Bp,$J,_t);Fe(iv,T8,_t);Fe(Gu,FJ,[_t,v$]);Fe(Vu,TJ,[_t,v$]);Fe(ro,d$,[_t,Yr]);Fe(`${ro}-${Hc}`,d$,[_t,Yr]);Fe(`${ro}-${cs}`,D8,[_t,Yr,cs]);Fe(`${ro}-${Ip}`,h$,[_t,Yr]);Fe(`${ro}-${Bp}`,MJ,[_t,Yr]);Fe(`${ro}-${iv}`,R8,[_t,Yr]);Fe(`${Of}-${Hc}`,P8,[_t,Yr]);Fe(`${Of}-${cs}`,L8,[_t,Yr,cs]);Fe(`${Of}-${Ip}`,p$,[_t,Yr]);Fe(`${Of}-${Bp}`,NJ,[_t,Yr]);Fe(`${Of}-${iv}`,z8,[_t,Yr]);Fe(Gc,M8,[Up,Gc]);Fe(ov,N8,Up);Fe(sv,O8,Up);Fe(y$,j8,[jp,Up]);Fe(m$,t$,jp);Fe(I8,x$,jp);Fe(Kw,PJ,jp);function q8(e){return X0.has(e)}function bl(e,t){const n=X0.get(e);return n&&n.metadata[t]}function b$(e){return bl(e,_t)}function Vc(e){return bl(e,jp)}function Jw(e){return bl(e,Up)}function H8(e){return bl(e,cs)}function UJ(e){return bl(e,v$)}function G8(e){return bl(e,Yr)}function V8(e){return bl(e,Gc)}const WJ=["clamp","base","constant","exponent"];function Y8(e,t){const n=t[0],r=_e(t)-n;return function(i){return e(n+i*r)}}function av(e,t,n){return s$(w$(t||"rgb",n),e)}function X8(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function Q8(e,t,n){const r=n-t;let i,o,s;return!r||!Number.isFinite(r)?yn(.5):(i=(o=e.type).indexOf("-"),o=i<0?o:o.slice(i+1),s=Fe(o)().domain([t,n]).range([0,1]),WJ.forEach(a=>e[a]?s[a](e[a]()):0),s)}function w$(e,t){const n=pJ[qJ(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function qJ(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const HJ={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},GJ={category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"};function K8(e){const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function J8(e,t){for(const n in e)E$(n,t(e[n]))}const CM={};J8(GJ,K8);J8(HJ,e=>av(K8(e)));function E$(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(CM[e]=t,this):CM[e]}const Lm="symbol",VJ="discrete",YJ="gradient",XJ=e=>I(e)?e.map(t=>String(t)):String(e),QJ=(e,t)=>e[1]-t[1],KJ=(e,t)=>t[1]-e[1];function S$(e,t,n){let r;return ze(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(Tp(e.domain())/n||1)))),J(t)&&(r=t.step,t=t.interval),Q(t)&&(t=e.type===Gu?Ff(t):e.type==Vu?Tf(t):z("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function Z8(e,t,n){let r=e.range(),i=r[0],o=_e(r),s=QJ;if(i>o&&(r=o,o=i,i=r,s=KJ),i=Math.floor(i),o=Math.ceil(o),t=t.map(a=>[a,e(a)]).filter(a=>i<=a[1]&&a[1]<=o).sort(s).map(a=>a[0]),n>0&&t.length>1){const a=[t[0],_e(t)];for(;t.length>n&&t.length>=3;)t=t.filter((u,l)=>!(l%2));t.length<3&&(t=a)}return t}function _$(e,t){return e.bins?Z8(e,e.bins):e.ticks?e.ticks(t):e.domain()}function ez(e,t,n,r,i,o){const s=t.type;let a=XJ;if(s===Gu||i===Gu)a=e.timeFormat(r);else if(s===Vu||i===Vu)a=e.utcFormat(r);else if(H8(s)){const u=e.formatFloat(r);if(o||t.bins)a=u;else{const l=tz(t,n,!1);a=c=>l(c)?u(c):""}}else if(t.tickFormat){const u=t.domain();a=e.formatSpan(u[0],u[u.length-1],n,r)}else r&&(a=e.format(r));return a}function tz(e,t,n){const r=_$(e,t),i=e.base(),o=Math.log(i),s=Math.max(1,i*t/r.length),a=u=>{let l=u/Math.pow(i,Math.round(Math.log(u)/o));return l*i<i-.5&&(l*=i),l<=s};return n?r.filter(a):a}const Zw={[Gc]:"quantiles",[ov]:"thresholds",[sv]:"domain"},nz={[Gc]:"quantiles",[ov]:"domain"};function rz(e,t){return e.bins?eZ(e.bins):e.type===cs?tz(e,t,!0):Zw[e.type]?ZJ(e[Zw[e.type]]()):_$(e,t)}function JJ(e,t,n){const r=t[nz[t.type]](),i=r.length;let o=i>1?r[1]-r[0]:r[0],s;for(s=1;s<i;++s)o=Math.min(o,r[s]-r[s-1]);return e.formatSpan(0,o,3*10,n)}function ZJ(e){const t=[-1/0].concat(e);return t.max=1/0,t}function eZ(e){const t=e.slice(0,-1);return t.max=_e(e),t}const tZ=e=>Zw[e.type]||e.bins;function iz(e,t,n,r,i,o,s){const a=nz[t.type]&&o!==Gu&&o!==Vu?JJ(e,t,i):ez(e,t,n,i,o,s);return r===Lm&&tZ(t)?nZ(a):r===VJ?rZ(a):iZ(a)}const nZ=e=>(t,n,r)=>{const i=AM(r[n+1],AM(r.max,1/0)),o=FM(t,e),s=FM(i,e);return o&&s?o+" – "+s:s?"< "+s:"≥ "+o},AM=(e,t)=>e??t,rZ=e=>(t,n)=>n?e(t):null,iZ=e=>t=>e(t),FM=(e,t)=>Number.isFinite(e)?t(e):null;function oZ(e){const t=e.domain(),n=t.length-1;let r=+t[0],i=+_e(t),o=i-r;if(e.type===sv){const s=n?o/n:.1;r-=s,i+=s,o=i-r}return s=>(s-r)/o}function sZ(e,t,n,r){const i=r||t.type;return Q(n)&&UJ(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===Gu?e.timeFormat("%A, %d %B %Y, %X"):!n&&i===Vu?e.utcFormat("%A, %d %B %Y, %X UTC"):iz(e,t,5,null,n,r,!0)}function oz(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=sZ(e,t,n.format,n.formatType);if(Jw(t.type)){const o=rz(t).slice(1).map(i),s=o.length;return`${s} boundar${s===1?"y":"ies"}: ${o.join(", ")}`}else if(Vc(t.type)){const o=t.domain(),s=o.length,a=s>r?o.slice(0,r-2).map(i).join(", ")+", ending with "+o.slice(-1).map(i):o.map(i).join(", ");return`${s} value${s===1?"":"s"}: ${a}`}else{const o=t.domain();return`values from ${i(o[0])} to ${i(_e(o))}`}}let sz=0;function aZ(){sz=0}const Q0="p_";function k$(e){return e&&e.gradient}function az(e,t,n){const r=e.gradient;let i=e.id,o=r==="radial"?Q0:"";return i||(i=e.id="gradient_"+sz++,r==="radial"?(e.x1=Bi(e.x1,.5),e.y1=Bi(e.y1,.5),e.r1=Bi(e.r1,0),e.x2=Bi(e.x2,.5),e.y2=Bi(e.y2,.5),e.r2=Bi(e.r2,.5),o=Q0):(e.x1=Bi(e.x1,0),e.y1=Bi(e.y1,0),e.x2=Bi(e.x2,1),e.y2=Bi(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+o+i+")"}function Bi(e,t){return e??t}function uz(e,t){var n=[],r;return r={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(i,o){return n.push({offset:i,color:o}),r}}}const TM={basis:{curve:dK},"basis-closed":{curve:hK},"basis-open":{curve:pK},bundle:{curve:gK,tension:"beta",value:.85},cardinal:{curve:mK,tension:"tension",value:0},"cardinal-open":{curve:vK,tension:"tension",value:0},"cardinal-closed":{curve:yK,tension:"tension",value:0},"catmull-rom":{curve:xK,tension:"alpha",value:.5},"catmull-rom-closed":{curve:bK,tension:"alpha",value:.5},"catmull-rom-open":{curve:wK,tension:"alpha",value:.5},linear:{curve:Qk},"linear-closed":{curve:EK},monotone:{horizontal:_K,vertical:SK},natural:{curve:kK},step:{curve:$K},"step-after":{curve:AK},"step-before":{curve:CK}};function $$(e,t,n){var r=ae(TM,e)&&TM[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}const uZ={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},lZ=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,cZ=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,fZ=/^((\s+,?\s*)|(,\s*))/,dZ=/^[01]/;function Yc(e){const t=[];return(e.match(lZ)||[]).forEach(r=>{let i=r[0];const o=i.toLowerCase(),s=uZ[o],a=hZ(o,s,r.slice(1).trim()),u=a.length;if(u<s||u&&u%s!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([i,...a.slice(0,s)]),u!==s){o==="m"&&(i=i==="M"?"L":"l");for(let l=s;l<u;l+=s)t.push([i,...a.slice(l,l+s)])}}),t}function hZ(e,t,n){const r=[];for(let i=0;t&&i<n.length;)for(let o=0;o<t;++o){const s=e==="a"&&(o===3||o===4)?dZ:cZ,a=n.slice(i).match(s);if(a===null)throw Error("Invalid SVG path, incorrect parameter type");i+=a[0].length,r.push(+a[0]);const u=n.slice(i).match(fZ);u!==null&&(i+=u[0].length)}return r}const va=Math.PI/180,pZ=1e-14,hu=Math.PI/2,Yi=Math.PI*2,Dl=Math.sqrt(3)/2;var E2={},S2={},lz=[].join;function gZ(e,t,n,r,i,o,s,a,u){const l=lz.call(arguments);if(E2[l])return E2[l];const c=s*va,f=Math.sin(c),d=Math.cos(c);n=Math.abs(n),r=Math.abs(r);const h=d*(a-e)*.5+f*(u-t)*.5,p=d*(u-t)*.5-f*(a-e)*.5;let g=h*h/(n*n)+p*p/(r*r);g>1&&(g=Math.sqrt(g),n*=g,r*=g);const m=d/n,y=f/n,v=-f/r,x=d/r,b=m*a+y*u,w=v*a+x*u,S=m*e+y*t,E=v*e+x*t;let $=1/((S-b)*(S-b)+(E-w)*(E-w))-.25;$<0&&($=0);let k=Math.sqrt($);o==i&&(k=-k);const A=.5*(b+S)-k*(E-w),R=.5*(w+E)+k*(S-b),C=Math.atan2(w-R,b-A);let F=Math.atan2(E-R,S-A)-C;F<0&&o===1?F+=Yi:F>0&&o===0&&(F-=Yi);const N=Math.ceil(Math.abs(F/(hu+.001))),D=[];for(let M=0;M<N;++M){const O=C+M*F/N,B=C+(M+1)*F/N;D[M]=[A,R,O,B,n,r,f,d]}return E2[l]=D}function mZ(e){const t=lz.call(e);if(S2[t])return S2[t];var n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],u=e[6],l=e[7];const c=l*s,f=-u*a,d=u*s,h=l*a,p=Math.cos(i),g=Math.sin(i),m=Math.cos(o),y=Math.sin(o),v=.5*(o-i),x=Math.sin(v*.5),b=8/3*x*x/Math.sin(v),w=n+p-b*g,S=r+g+b*p,E=n+m,_=r+y,$=E+b*y,k=_-b*m;return S2[t]=[c*w+f*S,d*w+h*S,c*$+f*k,d*$+h*k,c*E+f*_,d*E+h*_]}const Ar=["l",0,0,0,0,0,0,0];function yZ(e,t,n){const r=Ar[0]=e[0];if(r==="a"||r==="A")Ar[1]=t*e[1],Ar[2]=n*e[2],Ar[3]=e[3],Ar[4]=e[4],Ar[5]=e[5],Ar[6]=t*e[6],Ar[7]=n*e[7];else if(r==="h"||r==="H")Ar[1]=t*e[1];else if(r==="v"||r==="V")Ar[1]=n*e[1];else for(var i=1,o=e.length;i<o;++i)Ar[i]=(i%2==1?t:n)*e[i];return Ar}function ep(e,t,n,r,i,o){var s,a=null,u=0,l=0,c=0,f=0,d,h,p,g,m=0,y=0;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),o==null&&(o=i),e.beginPath&&e.beginPath();for(var v=0,x=t.length;v<x;++v){switch(s=t[v],(i!==1||o!==1)&&(s=yZ(s,i,o)),s[0]){case"l":u+=s[1],l+=s[2],e.lineTo(u+n,l+r);break;case"L":u=s[1],l=s[2],e.lineTo(u+n,l+r);break;case"h":u+=s[1],e.lineTo(u+n,l+r);break;case"H":u=s[1],e.lineTo(u+n,l+r);break;case"v":l+=s[1],e.lineTo(u+n,l+r);break;case"V":l=s[1],e.lineTo(u+n,l+r);break;case"m":u+=s[1],l+=s[2],m=u,y=l,e.moveTo(u+n,l+r);break;case"M":u=s[1],l=s[2],m=u,y=l,e.moveTo(u+n,l+r);break;case"c":d=u+s[5],h=l+s[6],c=u+s[3],f=l+s[4],e.bezierCurveTo(u+s[1]+n,l+s[2]+r,c+n,f+r,d+n,h+r),u=d,l=h;break;case"C":u=s[5],l=s[6],c=s[3],f=s[4],e.bezierCurveTo(s[1]+n,s[2]+r,c+n,f+r,u+n,l+r);break;case"s":d=u+s[3],h=l+s[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,u+s[1]+n,l+s[2]+r,d+n,h+r),c=u+s[1],f=l+s[2],u=d,l=h;break;case"S":d=s[3],h=s[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,s[1]+n,s[2]+r,d+n,h+r),u=d,l=h,c=s[1],f=s[2];break;case"q":d=u+s[3],h=l+s[4],c=u+s[1],f=l+s[2],e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"Q":d=s[3],h=s[4],e.quadraticCurveTo(s[1]+n,s[2]+r,d+n,h+r),u=d,l=h,c=s[1],f=s[2];break;case"t":d=u+s[1],h=l+s[2],a[0].match(/[QqTt]/)===null?(c=u,f=l):a[0]==="t"?(c=2*u-p,f=2*l-g):a[0]==="q"&&(c=2*u-c,f=2*l-f),p=c,g=f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h,c=u+s[1],f=l+s[2];break;case"T":d=s[1],h=s[2],c=2*u-c,f=2*l-f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"a":MM(e,u+n,l+r,[s[1],s[2],s[3],s[4],s[5],s[6]+u+n,s[7]+l+r]),u+=s[6],l+=s[7];break;case"A":MM(e,u+n,l+r,[s[1],s[2],s[3],s[4],s[5],s[6]+n,s[7]+r]),u=s[6],l=s[7];break;case"z":case"Z":u=m,l=y,e.closePath();break}a=s}}function MM(e,t,n,r){const i=gZ(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let o=0;o<i.length;++o){const s=mZ(i[o]);e.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5])}}const NM=.5773502691896257,OM={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,Yi)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,o=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-o),e.lineTo(i,-o),e.lineTo(0,-n),e.lineTo(-i,-o),e.lineTo(-r,-o),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=Dl*n,i=r-n*NM,o=n/4;e.moveTo(0,-r-i),e.lineTo(-o,r-i),e.lineTo(o,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=Dl*n,i=r-n*NM;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Dl*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Dl*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Dl*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Dl*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function cz(e){return ae(OM,e)?OM[e]:vZ(e)}var _2={};function vZ(e){if(!ae(_2,e)){const t=Yc(e);_2[e]={draw:function(n,r){ep(n,t,0,0,Math.sqrt(r)/2)}}}return _2[e]}const ks=.448084975506;function xZ(e){return e.x}function bZ(e){return e.y}function wZ(e){return e.width}function EZ(e){return e.height}function Fo(e){return typeof e=="function"?e:()=>+e}function Hg(e,t,n){return Math.max(t,Math.min(e,n))}function fz(){var e=xZ,t=bZ,n=wZ,r=EZ,i=Fo(0),o=i,s=i,a=i,u=null;function l(c,f,d){var h,p=f??+e.call(this,c),g=d??+t.call(this,c),m=+n.call(this,c),y=+r.call(this,c),v=Math.min(m,y)/2,x=Hg(+i.call(this,c),0,v),b=Hg(+o.call(this,c),0,v),w=Hg(+s.call(this,c),0,v),S=Hg(+a.call(this,c),0,v);if(u||(u=h=Yy()),x<=0&&b<=0&&w<=0&&S<=0)u.rect(p,g,m,y);else{var E=p+m,_=g+y;u.moveTo(p+x,g),u.lineTo(E-b,g),u.bezierCurveTo(E-ks*b,g,E,g+ks*b,E,g+b),u.lineTo(E,_-S),u.bezierCurveTo(E,_-ks*S,E-ks*S,_,E-S,_),u.lineTo(p+w,_),u.bezierCurveTo(p+ks*w,_,p,_-ks*w,p,_-w),u.lineTo(p,g+x),u.bezierCurveTo(p,g+ks*x,p+ks*x,g,p+x,g),u.closePath()}if(h)return u=null,h+""||null}return l.x=function(c){return arguments.length?(e=Fo(c),l):e},l.y=function(c){return arguments.length?(t=Fo(c),l):t},l.width=function(c){return arguments.length?(n=Fo(c),l):n},l.height=function(c){return arguments.length?(r=Fo(c),l):r},l.cornerRadius=function(c,f,d,h){return arguments.length?(i=Fo(c),o=f!=null?Fo(f):i,a=d!=null?Fo(d):i,s=h!=null?Fo(h):o,l):i},l.context=function(c){return arguments.length?(u=c??null,l):u},l}function dz(){var e,t,n,r,i=null,o,s,a,u;function l(f,d,h){const p=h/2;if(o){var g=a-d,m=f-s;if(g||m){var y=Math.sqrt(g*g+m*m),v=(g/=y)*u,x=(m/=y)*u,b=Math.atan2(m,g);i.moveTo(s-v,a-x),i.lineTo(f-g*p,d-m*p),i.arc(f,d,p,b-Math.PI,b),i.lineTo(s+v,a+x),i.arc(s,a,u,b,b+Math.PI)}else i.arc(f,d,p,0,Yi);i.closePath()}else o=1;s=f,a=d,u=p}function c(f){var d,h=f.length,p,g=!1,m;for(i==null&&(i=m=Yy()),d=0;d<=h;++d)!(d<h&&r(p=f[d],d,f))===g&&(g=!g)&&(o=0),g&&l(+e(p,d,f),+t(p,d,f),+n(p,d,f));if(m)return i=null,m+""||null}return c.x=function(f){return arguments.length?(e=f,c):e},c.y=function(f){return arguments.length?(t=f,c):t},c.size=function(f){return arguments.length?(n=f,c):n},c.defined=function(f){return arguments.length?(r=f,c):r},c.context=function(f){return arguments.length?(f==null?i=null:i=f,c):i},c}function Wp(e,t){return e??t}const qp=e=>e.x||0,Hp=e=>e.y||0,SZ=e=>e.width||0,_Z=e=>e.height||0,kZ=e=>(e.x||0)+(e.width||0),$Z=e=>(e.y||0)+(e.height||0),CZ=e=>e.startAngle||0,AZ=e=>e.endAngle||0,FZ=e=>e.padAngle||0,TZ=e=>e.innerRadius||0,MZ=e=>e.outerRadius||0,NZ=e=>e.cornerRadius||0,OZ=e=>Wp(e.cornerRadiusTopLeft,e.cornerRadius)||0,DZ=e=>Wp(e.cornerRadiusTopRight,e.cornerRadius)||0,RZ=e=>Wp(e.cornerRadiusBottomRight,e.cornerRadius)||0,PZ=e=>Wp(e.cornerRadiusBottomLeft,e.cornerRadius)||0,LZ=e=>Wp(e.size,64),zZ=e=>e.size||1,uv=e=>e.defined!==!1,IZ=e=>cz(e.shape||"circle"),BZ=lK().startAngle(CZ).endAngle(AZ).padAngle(FZ).innerRadius(TZ).outerRadius(MZ).cornerRadius(NZ),jZ=jL().x(qp).y1(Hp).y0($Z).defined(uv),UZ=jL().y(Hp).x1(qp).x0(kZ).defined(uv),WZ=BL().x(qp).y(Hp).defined(uv),qZ=fz().x(qp).y(Hp).width(SZ).height(_Z).cornerRadius(OZ,DZ,RZ,PZ),HZ=fK().type(IZ).size(LZ),GZ=dz().x(qp).y(Hp).defined(uv).size(zZ);function C$(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function VZ(e,t){return BZ.context(e)(t)}function YZ(e,t){const n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?UZ:jZ).curve($$(r,n.orient,n.tension)).context(e)(t)}function XZ(e,t){const n=t[0],r=n.interpolate||"linear";return WZ.curve($$(r,n.orient,n.tension)).context(e)(t)}function Df(e,t,n,r){return qZ.context(e)(t,n,r)}function QZ(e,t){return(t.mark.shape||t.shape).context(e)(t)}function KZ(e,t){return HZ.context(e)(t)}function JZ(e,t){return GZ.context(e)(t)}var hz=1;function pz(){hz=1}function A$(e,t,n){var r=t.clip,i=e._defs,o=t.clip_id||(t.clip_id="clip"+hz++),s=i.clipping[o]||(i.clipping[o]={id:o});return pe(r)?s.path=r(null):C$(n)?s.path=Df(null,n,0,0):(s.width=n.width||0,s.height=n.height||0),"url(#"+o+")"}function gt(e){this.clear(),e&&this.union(e)}gt.prototype={clone(){return new gt(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:o,y2:s}=this,a=Math.cos(e),u=Math.sin(e),l=t-t*a+n*u,c=n-t*u-n*a;return[a*r-u*i+l,u*r+a*i+c,a*r-u*s+l,u*r+a*s+c,a*o-u*i+l,u*o+a*i+c,a*o-u*s+l,u*o+a*s+c]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function lv(e){this.mark=e,this.bounds=this.bounds||new gt}function cv(e){lv.call(this,e),this.items=this.items||[]}V(cv,lv);function F$(e){this._pending=0,this._loader=e||Py()}function DM(e){e._pending+=1}function dd(e){e._pending-=1}F$.prototype={pending(){return this._pending},sanitizeURL(e){const t=this;return DM(t),t._loader.sanitize(e,{context:"href"}).then(n=>(dd(t),n)).catch(()=>(dd(t),null))},loadImage(e){const t=this,n=FK();return DM(t),t._loader.sanitize(e,{context:"image"}).then(r=>{const i=r.href;if(!i||!n)throw{url:i};const o=new n,s=ae(r,"crossOrigin")?r.crossOrigin:"anonymous";return s!=null&&(o.crossOrigin=s),o.onload=()=>dd(t),o.onerror=()=>dd(t),o.src=i,o}).catch(r=>(dd(t),{complete:!1,width:0,height:0,src:r&&r.url||""}))},ready(){const e=this;return new Promise(t=>{function n(r){e.pending()?setTimeout(()=>{n(!0)},10):t(r)}n(!1)})}};function ps(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?ZZ(t,r):0))}return e}function ZZ(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const eee=Yi-1e-8;let fv,zm,Im,_u,eE,Bm,tE,nE;const Us=(e,t)=>fv.add(e,t),jm=(e,t)=>Us(zm=e,Im=t),RM=e=>Us(e,fv.y1),PM=e=>Us(fv.x1,e),pu=(e,t)=>eE*e+tE*t,gu=(e,t)=>Bm*e+nE*t,k2=(e,t)=>Us(pu(e,t),gu(e,t)),$2=(e,t)=>jm(pu(e,t),gu(e,t));function Gp(e,t){return fv=e,t?(_u=t*va,eE=nE=Math.cos(_u),Bm=Math.sin(_u),tE=-Bm):(eE=nE=1,_u=Bm=tE=0),tee}const tee={beginPath(){},closePath(){},moveTo:$2,lineTo:$2,rect(e,t,n,r){_u?(k2(e+n,t),k2(e+n,t+r),k2(e,t+r),$2(e,t)):(Us(e+n,t+r),jm(e,t))},quadraticCurveTo(e,t,n,r){const i=pu(e,t),o=gu(e,t),s=pu(n,r),a=gu(n,r);LM(zm,i,s,RM),LM(Im,o,a,PM),jm(s,a)},bezierCurveTo(e,t,n,r,i,o){const s=pu(e,t),a=gu(e,t),u=pu(n,r),l=gu(n,r),c=pu(i,o),f=gu(i,o);zM(zm,s,u,c,RM),zM(Im,a,l,f,PM),jm(c,f)},arc(e,t,n,r,i,o){if(r+=_u,i+=_u,zm=n*Math.cos(i)+e,Im=n*Math.sin(i)+t,Math.abs(i-r)>eee)Us(e-n,t-n),Us(e+n,t+n);else{const s=l=>Us(n*Math.cos(l)+e,n*Math.sin(l)+t);let a,u;if(s(r),s(i),i!==r)if(r=r%Yi,r<0&&(r+=Yi),i=i%Yi,i<0&&(i+=Yi),i<r&&(o=!o,a=r,r=i,i=a),o)for(i-=Yi,a=r-r%hu,u=0;u<4&&a>i;++u,a-=hu)s(a);else for(a=r-r%hu+hu,u=0;u<4&&a<i;++u,a=a+hu)s(a)}}};function LM(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function zM(e,t,n,r,i){const o=r-e+3*t-3*n,s=e+n-2*t,a=e-t;let u=0,l=0,c;Math.abs(o)>pZ?(c=s*s+a*o,c>=0&&(c=Math.sqrt(c),u=(-s+c)/o,l=(-s-c)/o)):u=.5*a/s,0<u&&u<1&&i(IM(u,e,t,n,r)),0<l&&l<1&&i(IM(l,e,t,n,r))}function IM(e,t,n,r,i){const o=1-e,s=o*o,a=e*e;return s*o*t+3*s*e*n+3*o*a*r+a*e*i}var la=(la=ua(1,1))?la.getContext("2d"):null;const rE=new gt;function T$(e){return function(t,n){if(!la)return!0;e(la,t),rE.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:o,y2:s}=rE;for(let a=i;a<=s;++a)for(let u=r;u<=o;++u)if(la.isPointInPath(u,a))return!0;return!1}}function M$(e,t){return t.contains(e.x||0,e.y||0)}function gz(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,o=e.height||0;return t.intersects(rE.set(n,r,n+i,r+o))}function mz(e,t){const n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,o=e.y2!=null?e.y2:r;return uc(t,n,r,i,o)}function uc(e,t,n,r,i){const{x1:o,y1:s,x2:a,y2:u}=e,l=r-t,c=i-n;let f=0,d=1,h,p,g,m;for(m=0;m<4;++m){if(m===0&&(h=-l,p=-(o-t)),m===1&&(h=l,p=a-t),m===2&&(h=-c,p=-(s-n)),m===3&&(h=c,p=u-n),Math.abs(h)<1e-10&&p<0)return!1;if(g=p/h,h<0){if(g>d)return!1;g>f&&(f=g)}else if(h>0){if(g<f)return!1;g<d&&(d=g)}}return!0}function Xc(e,t){e.globalCompositeOperation=t.blend||"source-over"}function ei(e,t){return e??t}function BM(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function nee(e,t,n){const r=n.width(),i=n.height();let o;if(t.gradient==="radial")o=e.createRadialGradient(n.x1+ei(t.x1,.5)*r,n.y1+ei(t.y1,.5)*i,Math.max(r,i)*ei(t.r1,0),n.x1+ei(t.x2,.5)*r,n.y1+ei(t.y2,.5)*i,Math.max(r,i)*ei(t.r2,.5));else{const s=ei(t.x1,0),a=ei(t.y1,0),u=ei(t.x2,1),l=ei(t.y2,0);if(s===u||a===l||r===i)o=e.createLinearGradient(n.x1+s*r,n.y1+a*i,n.x1+u*r,n.y1+l*i);else{const c=ua(Math.ceil(r),Math.ceil(i)),f=c.getContext("2d");return f.scale(r,i),f.fillStyle=BM(f.createLinearGradient(s,a,u,l),t.stops),f.fillRect(0,0,r,i),e.createPattern(c,"no-repeat")}}return BM(o,t.stops)}function yz(e,t,n){return k$(n)?nee(e,n,t.bounds):n}function K0(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=yz(e,t,t.fill),!0):!1}var ree=[];function Qc(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=yz(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||ree),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function iee(e,t){return e.zindex-t.zindex||e.index-t.index}function N$(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,o;for(i=0,o=t.length;i<o;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(iee)}function Ci(e,t){var n=e.items,r,i;if(!n||!n.length)return;const o=N$(e);if(o&&o.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=o}for(r=0,i=n.length;r<i;++r)t(n[r])}function J0(e,t){var n=e.items,r,i;if(!n||!n.length)return null;const o=N$(e);for(o&&o.length&&(n=o),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===o){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function O$(e){return function(t,n,r){Ci(n,i=>{(!r||r.intersects(i.bounds))&&vz(e,t,i,i)})}}function oee(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&vz(e,t,n.items[0],n.items)}}function vz(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(Xc(t,n),n.fill&&K0(t,n,i)&&t.fill(),n.stroke&&Qc(t,n,i)&&t.stroke()))}function dv(e){return e=e||Ur,function(t,n,r,i,o,s){return r*=t.pixelRatio,i*=t.pixelRatio,J0(n,a=>{const u=a.bounds;if(!(u&&!u.contains(o,s)||!u)&&e(t,a,r,i,o,s))return a})}}function Vp(e,t){return function(n,r,i,o){var s=Array.isArray(r)?r[0]:r,a=t??s.fill,u=s.stroke&&n.isPointInStroke,l,c;return u&&(l=s.strokeWidth,c=s.strokeCap,n.lineWidth=l??1,n.lineCap=c??"butt"),e(n,r)?!1:a&&n.isPointInPath(i,o)||u&&n.isPointInStroke(i,o)}}function D$(e){return dv(Vp(e))}function Ou(e,t){return"translate("+e+","+t+")"}function R$(e){return"rotate("+e+")"}function see(e,t){return"scale("+e+","+t+")"}function xz(e){return Ou(e.x||0,e.y||0)}function aee(e){return Ou(e.x||0,e.y||0)+(e.angle?" "+R$(e.angle):"")}function uee(e){return Ou(e.x||0,e.y||0)+(e.angle?" "+R$(e.angle):"")+(e.scaleX||e.scaleY?" "+see(e.scaleX||1,e.scaleY||1):"")}function P$(e,t,n){function r(s,a){s("transform",aee(a)),s("d",t(null,a))}function i(s,a){return t(Gp(s,a.angle),a),ps(s,a).translate(a.x||0,a.y||0)}function o(s,a){var u=a.x||0,l=a.y||0,c=a.angle||0;s.translate(u,l),c&&s.rotate(c*=va),s.beginPath(),t(s,a),c&&s.rotate(-c),s.translate(-u,-l)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:O$(o),pick:D$(o),isect:n||T$(o)}}var lee=P$("arc",VZ);function cee(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,o=1/0,s,a;--i>=0;)e[i].defined!==!1&&(a=Math.abs(e[i][r]-n),a<o&&(o=a,s=e[i]));return s}function fee(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,o,s;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],o=e[r].y-t[1],s=i*i+o*o,s<n))return e[r];return null}function dee(e,t){for(var n=e.length,r,i,o;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],o=r*r+i*i,r=e[n].size||1,o<r*r))return e[n];return null}function L$(e,t,n){function r(u,l){var c=l.mark.items;c.length&&u("d",t(null,c))}function i(u,l){var c=l.items;return c.length===0?u:(t(Gp(u),c),ps(u,c[0]))}function o(u,l){u.beginPath(),t(u,l)}const s=Vp(o);function a(u,l,c,f,d,h){var p=l.items,g=l.bounds;return!p||!p.length||g&&!g.contains(d,h)?null:(c*=u.pixelRatio,f*=u.pixelRatio,s(u,p,c,f)?p[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:oee(o),pick:a,isect:M$,tip:n}}var hee=L$("area",YZ,cee);function pee(e,t){var n=t.clip;e.save(),pe(n)?(e.beginPath(),n(e),e.clip()):bz(e,t.group)}function bz(e,t){e.beginPath(),C$(t)?Df(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function wz(e){const t=ei(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function gee(e,t){e("transform",xz(t))}function Ez(e,t){const n=wz(t);e("d",Df(null,t,n,n))}function mee(e,t){e("class","background"),e("aria-hidden",!0),Ez(e,t)}function yee(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?Ez(e,t):e("d","")}function vee(e,t,n){const r=t.clip?A$(n,t,t):null;e("clip-path",r)}function xee(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),ps(e,t),e.translate(t.x||0,t.y||0)}function tp(e,t,n,r){const i=wz(t);e.beginPath(),Df(e,t,(n||0)+i,(r||0)+i)}const bee=Vp(tp),wee=Vp(tp,!1),Eee=Vp(tp,!0);function See(e,t,n){Ci(t,r=>{const i=r.x||0,o=r.y||0,s=r.strokeForeground,a=r.opacity==null?1:r.opacity;(r.stroke||r.fill)&&a&&(tp(e,r,i,o),Xc(e,r),r.fill&&K0(e,r,a)&&e.fill(),r.stroke&&!s&&Qc(e,r,a)&&e.stroke()),e.save(),e.translate(i,o),r.clip&&bz(e,r),n&&n.translate(-i,-o),Ci(r,u=>{this.draw(e,u,n)}),n&&n.translate(i,o),e.restore(),s&&r.stroke&&a&&(tp(e,r,i,o),Xc(e,r),Qc(e,r,a)&&e.stroke())})}function _ee(e,t,n,r,i,o){if(t.bounds&&!t.bounds.contains(i,o)||!t.items)return null;const s=n*e.pixelRatio,a=r*e.pixelRatio;return J0(t,u=>{let l,c,f;const d=u.bounds;if(d&&!d.contains(i,o))return;c=u.x||0,f=u.y||0;const h=c+(u.width||0),p=f+(u.height||0),g=u.clip;if(g&&(i<c||i>h||o<f||o>p))return;if(e.save(),e.translate(c,f),c=i-c,f=o-f,g&&C$(u)&&!Eee(e,u,s,a))return e.restore(),null;const m=u.strokeForeground,y=t.interactive!==!1;return y&&m&&u.stroke&&wee(e,u,s,a)?(e.restore(),u):(l=J0(u,v=>kee(v,c,f)?this.pick(v,n,r,c,f):null),!l&&y&&(u.fill||!m&&u.stroke)&&bee(e,u,s,a)&&(l=u),e.restore(),l||null)})}function kee(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var $ee={type:"group",tag:"g",nested:!1,attr:gee,bound:xee,draw:See,pick:_ee,isect:gz,content:vee,background:mee,foreground:yee},np={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function z$(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function I$(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function B$(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function hv(e,t){return e==="center"?t/2:e==="right"?t:0}function pv(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function Cee(e,t,n){const r=z$(t,n),i=I$(t,r),o=B$(t,r),s=(t.x||0)-hv(t.align,i),a=(t.y||0)-pv(t.baseline,o),u=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",u,np["xmlns:xlink"],"xlink:href"),e("transform",Ou(s,a)),e("width",i),e("height",o),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function Aee(e,t){const n=t.image,r=I$(t,n),i=B$(t,n),o=(t.x||0)-hv(t.align,r),s=(t.y||0)-pv(t.baseline,i);return e.set(o,s,o+r,s+i)}function Fee(e,t,n){Ci(t,r=>{if(n&&!n.intersects(r.bounds))return;const i=z$(r,this);let o=I$(r,i),s=B$(r,i);if(o===0||s===0)return;let a=(r.x||0)-hv(r.align,o),u=(r.y||0)-pv(r.baseline,s),l,c,f,d;r.aspect!==!1&&(c=i.width/i.height,f=r.width/r.height,c===c&&f===f&&c!==f&&(f<c?(d=o/c,u+=(s-d)/2,s=d):(d=s*c,a+=(o-d)/2,o=d))),(i.complete||i.toDataURL)&&(Xc(e,r),e.globalAlpha=(l=r.opacity)!=null?l:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,a,u,o,s))})}var Tee={type:"image",tag:"image",nested:!1,attr:Cee,bound:Aee,draw:Fee,pick:dv(),isect:Ur,get:z$,xOffset:hv,yOffset:pv},Mee=L$("line",XZ,fee);function Nee(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",uee(t)),e("d",t.path)}function Um(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,o=t.scaleX||1,s=t.scaleY||1,a=(t.angle||0)*va,u=t.pathCache;(!u||u.path!==n)&&((t.pathCache=u=Yc(n)).path=n),a&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(a),ep(e,u,0,0,o,s),e.rotate(-a),e.translate(-r,-i)):ep(e,u,r,i,o,s)}function Oee(e,t){return Um(Gp(e,t.angle),t)?e.set(0,0,0,0):ps(e,t,!0)}var Dee={type:"path",tag:"path",nested:!1,attr:Nee,bound:Oee,draw:O$(Um),pick:D$(Um),isect:T$(Um)};function Ree(e,t){e("d",Df(null,t))}function Pee(e,t){var n,r;return ps(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function jM(e,t){e.beginPath(),Df(e,t)}var Lee={type:"rect",tag:"path",nested:!1,attr:Ree,bound:Pee,draw:O$(jM),pick:D$(jM),isect:gz};function zee(e,t){e("transform",xz(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function Iee(e,t){var n,r;return ps(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function Sz(e,t,n){var r,i,o,s;return t.stroke&&Qc(e,t,n)?(r=t.x||0,i=t.y||0,o=t.x2!=null?t.x2:r,s=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(o,s),!0):!1}function Bee(e,t,n){Ci(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&Sz(e,r,i)&&(Xc(e,r),e.stroke())}})}function jee(e,t,n,r){return e.isPointInStroke?Sz(e,t,1)&&e.isPointInStroke(n,r):!1}var Uee={type:"rule",tag:"line",nested:!1,attr:zee,bound:Iee,draw:Bee,pick:dv(jee),isect:mz},Wee=P$("shape",QZ),qee=P$("symbol",KZ,M$);const UM=MP();var bi={height:xo,measureWidth:j$,estimateWidth:iE,width:iE,canvas:_z};_z(!0);function _z(e){bi.width=e&&la?j$:iE}function iE(e,t){return kz(ba(e,t),xo(e))}function kz(e,t){return~~(.8*e.length*t)}function j$(e,t){return xo(e)<=0||!(t=ba(e,t))?0:$z(t,gv(e))}function $z(e,t){const n=`(${t}) ${e}`;let r=UM.get(n);return r===void 0&&(la.font=t,r=la.measureText(e).width,UM.set(n,r)),r}function xo(e){return e.fontSize!=null?+e.fontSize||0:11}function xa(e){return e.lineHeight!=null?e.lineHeight:xo(e)+2}function Hee(e){return I(e)?e.length>1?e:e[0]:e}function Yp(e){return Hee(e.lineBreak&&e.text&&!I(e.text)?e.text.split(e.lineBreak):e.text)}function U$(e){const t=Yp(e);return(I(t)?t.length-1:0)*xa(e)}function ba(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?Vee(e,n):n}function Gee(e){if(bi.width===j$){const t=gv(e);return n=>$z(n,t)}else{const t=xo(e);return n=>kz(n,t)}}function Vee(e,t){var n=+e.limit,r=Gee(e);if(r(t)<n)return t;var i=e.ellipsis||"…",o=e.dir==="rtl",s=0,a=t.length,u;if(n-=r(i),o){for(;s<a;)u=s+a>>>1,r(t.slice(u))>n?s=u+1:a=u;return i+t.slice(s)}else{for(;s<a;)u=1+(s+a>>>1),r(t.slice(0,u))<n?s=u:a=u-1;return t.slice(0,s)+i}}function Xp(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function gv(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+xo(e)+"px "+Xp(e,t)}function W$(e){var t=e.baseline,n=xo(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*xa(e):t==="line-bottom"?.29*n-.5*xa(e):0)}const Yee={left:"start",center:"middle",right:"end"},hh=new gt;function mv(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-hu,t+=r*Math.cos(i),n+=r*Math.sin(i)),hh.x1=t,hh.y1=n,hh}function Xee(e,t){var n=t.dx||0,r=(t.dy||0)+W$(t),i=mv(t),o=i.x1,s=i.y1,a=t.angle||0,u;e("text-anchor",Yee[t.align]||"start"),a?(u=Ou(o,s)+" "+R$(a),(n||r)&&(u+=" "+Ou(n,r))):u=Ou(o+n,s+r),e("transform",u)}function q$(e,t,n){var r=bi.height(t),i=t.align,o=mv(t),s=o.x1,a=o.y1,u=t.dx||0,l=(t.dy||0)+W$(t)-Math.round(.8*r),c=Yp(t),f;if(I(c)?(r+=xa(t)*(c.length-1),f=c.reduce((d,h)=>Math.max(d,bi.width(t,h)),0)):f=bi.width(t,c),i==="center"?u-=f/2:i==="right"&&(u-=f),e.set(u+=s,l+=a,u+f,l+r),t.angle&&!n)e.rotate(t.angle*va,s,a);else if(n===2)return e.rotatedPoints(t.angle*va,s,a);return e}function Qee(e,t,n){Ci(t,r=>{var i=r.opacity==null?1:r.opacity,o,s,a,u,l,c,f;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=gv(r),e.textAlign=r.align||"left",o=mv(r),s=o.x1,a=o.y1,r.angle&&(e.save(),e.translate(s,a),e.rotate(r.angle*va),s=a=0),s+=r.dx||0,a+=(r.dy||0)+W$(r),c=Yp(r),Xc(e,r),I(c))for(l=xa(r),u=0;u<c.length;++u)f=ba(r,c[u]),r.fill&&K0(e,r,i)&&e.fillText(f,s,a),r.stroke&&Qc(e,r,i)&&e.strokeText(f,s,a),a+=l;else f=ba(r,c),r.fill&&K0(e,r,i)&&e.fillText(f,s,a),r.stroke&&Qc(e,r,i)&&e.strokeText(f,s,a);r.angle&&e.restore()}})}function Kee(e,t,n,r,i,o){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var s=mv(t),a=s.x1,u=s.y1,l=q$(hh,t,1),c=-t.angle*va,f=Math.cos(c),d=Math.sin(c),h=f*i-d*o+(a-f*a+d*u),p=d*i+f*o+(u-d*a-f*u);return l.contains(h,p)}function Jee(e,t){const n=q$(hh,e,2);return uc(t,n[0],n[1],n[2],n[3])||uc(t,n[0],n[1],n[4],n[5])||uc(t,n[4],n[5],n[6],n[7])||uc(t,n[2],n[3],n[6],n[7])}var Zee={type:"text",tag:"text",nested:!1,attr:Xee,bound:q$,draw:Qee,pick:dv(Kee),isect:Jee},ete=L$("trail",JZ,dee),Sr={arc:lee,area:hee,group:$ee,image:Tee,line:Mee,path:Dee,rect:Lee,rule:Uee,shape:Wee,symbol:qee,text:Zee,trail:ete};function oE(e,t,n){var r=Sr[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new gt),e,n)}var WM={mark:null};function Cz(e,t,n){var r=Sr[e.marktype],i=r.bound,o=e.items,s=o&&o.length,a,u,l,c;if(r.nested)return s?l=o[0]:(WM.mark=e,l=WM),c=oE(l,i,n),t=t&&t.union(c)||c,t;if(t=t||e.bounds&&e.bounds.clear()||new gt,s)for(a=0,u=o.length;a<u;++a)t.union(oE(o[a],i,n));return e.bounds=t}const tte=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function Az(e,t){return JSON.stringify(e,tte,t)}function Fz(e){const t=typeof e=="string"?JSON.parse(e):e;return Tz(t)}function Tz(e){var t=e.marktype,n=e.items,r,i,o;if(n)for(i=0,o=n.length;i<o;++i)r=t?"mark":"group",n[i][r]=e,n[i].zindex&&(n[i][r].zdirty=!0),(t||r)==="group"&&Tz(n[i]);return t&&Cz(e),e}function H$(e){arguments.length?this.root=Fz(e):(this.root=Mz({marktype:"group",name:"root",role:"frame"}),this.root.items=[new cv(this.root)])}H$.prototype={toJSON(e){return Az(this.root,e||0)},mark(e,t,n){t=t||this.root.items[0];const r=Mz(e,t);return t.items[n]=r,r.zindex&&(r.group.zdirty=!0),r}};function Mz(e,t){const n={bounds:new gt,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function Ws(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function G$(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function qn(e,t,n,r){var i=e.childNodes[t],o;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(o=i||null,i=Ws(e.ownerDocument,n,r),e.insertBefore(i,o)),i}function fi(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function Nz(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function yv(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function nte(e,t,n,r){var i=e&&e.mark,o,s;if(i&&(o=Sr[i.marktype]).tip){for(s=yv(t,n),s[0]-=r[0],s[1]-=r[1];e=e.mark.group;)s[0]-=e.x||0,s[1]-=e.y||0;e=o.tip(i.items,s)}return e}function wa(e,t){this._active=null,this._handlers={},this._loader=e||Py(),this._tooltip=t||rte}function rte(e,t,n,r){e.element().setAttribute("title",r||"")}wa.prototype={initialize(e,t,n){return this._el=e,this._obj=n||null,this.origin(t)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},origin(e){return arguments.length?(this._origin=e||[0,0],this):this._origin.slice()},scene(e){return arguments.length?(this._scene=e,this):this._scene},on(){},off(){},_handlerIndex(e,t,n){for(let r=e?e.length:0;--r>=0;)if(e[r].type===t&&(!n||e[r].handler===n))return r;return-1},handlers(e){const t=this._handlers,n=[];if(e)n.push(...t[this.eventName(e)]);else for(const r in t)n.push(...t[r]);return n},eventName(e){const t=e.indexOf(".");return t<0?e:e.slice(0,t)},handleHref(e,t,n){this._loader.sanitize(n,{context:"href"}).then(r=>{const i=new MouseEvent(e.type,e),o=Ws(null,"a");for(const s in r)o.setAttribute(s,r[s]);o.dispatchEvent(i)}).catch(()=>{})},handleTooltip(e,t,n){if(t&&t.tooltip!=null){t=nte(t,e,this.canvas(),this._origin);const r=n&&t&&t.tooltip||null;this._tooltip.call(this._obj,this,e,t,r)}},getItemBoundingClientRect(e){const t=this.canvas();if(!t)return;const n=t.getBoundingClientRect(),r=this._origin,i=e.bounds,o=i.width(),s=i.height();let a=i.x1+r[0]+n.left,u=i.y1+r[1]+n.top;for(;e.mark&&(e=e.mark.group);)a+=e.x||0,u+=e.y||0;return{x:a,y:u,width:o,height:s,left:a,top:u,right:a+o,bottom:u+s}}};function bo(e){this._el=null,this._bgcolor=null,this._loader=new F$(e)}bo.prototype={initialize(e,t,n,r,i){return this._el=e,this.resize(t,n,r,i)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},background(e){return arguments.length===0?this._bgcolor:(this._bgcolor=e,this)},resize(e,t,n,r){return this._width=e,this._height=t,this._origin=n||[0,0],this._scale=r||1,this},dirty(){},render(e){const t=this;return t._call=function(){t._render(e)},t._call(),t._call=null,t},_render(){},renderAsync(e){const t=this.render(e);return this._ready?this._ready.then(()=>t):Promise.resolve(t)},_load(e,t){var n=this,r=n._loader[e](t);if(!n._ready){const i=n._call;n._ready=n._loader.ready().then(o=>{o&&i(),n._ready=null})}return r},sanitizeURL(e){return this._load("sanitizeURL",e)},loadImage(e){return this._load("loadImage",e)}};const ite="keydown",ote="keypress",ste="keyup",Oz="dragenter",Wm="dragleave",Dz="dragover",sE="mousedown",ate="mouseup",Z0="mousemove",ph="mouseout",Rz="mouseover",e1="click",ute="dblclick",lte="wheel",Pz="mousewheel",t1="touchstart",n1="touchmove",r1="touchend",cte=[ite,ote,ste,Oz,Wm,Dz,sE,ate,Z0,ph,Rz,e1,ute,lte,Pz,t1,n1,r1],aE=Z0,rp=ph,uE=e1;function Qp(e,t){wa.call(this,e,t),this._down=null,this._touch=null,this._first=!0,this._events={}}const fte=e=>e===t1||e===n1||e===r1?[t1,n1,r1]:[e];function qM(e,t){fte(t).forEach(n=>dte(e,n))}function dte(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}function HM(e,t,n){return function(r){const i=this._active,o=this.pickEvent(r);o===i?this.fire(e,r):((!i||!i.exit)&&this.fire(n,r),this._active=o,this.fire(t,r),this.fire(e,r))}}function GM(e){return function(t){this.fire(e,t),this._active=null}}V(Qp,wa,{initialize(e,t,n){return this._canvas=e&&G$(e,"canvas"),[e1,sE,Z0,ph,Wm].forEach(r=>qM(this,r)),wa.prototype.initialize.call(this,e,t,n)},canvas(){return this._canvas},context(){return this._canvas.getContext("2d")},events:cte,DOMMouseScroll(e){this.fire(Pz,e)},mousemove:HM(Z0,Rz,ph),dragover:HM(Dz,Oz,Wm),mouseout:GM(ph),dragleave:GM(Wm),mousedown(e){this._down=this._active,this.fire(sE,e)},click(e){this._down===this._active&&(this.fire(e1,e),this._down=null)},touchstart(e){this._touch=this.pickEvent(e.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(t1,e,!0)},touchmove(e){this.fire(n1,e,!0)},touchend(e){this.fire(r1,e,!0),this._touch=null},fire(e,t,n){const r=n?this._touch:this._active,i=this._handlers[e];if(t.vegaType=e,e===uE&&r&&r.href?this.handleHref(t,r,r.href):(e===aE||e===rp)&&this.handleTooltip(t,r,e!==rp),i)for(let o=0,s=i.length;o<s;++o)i[o].handler.call(this._obj,t,r)},on(e,t){const n=this.eventName(e),r=this._handlers;return this._handlerIndex(r[n],e,t)<0&&(qM(this,e),(r[n]||(r[n]=[])).push({type:e,handler:t})),this},off(e,t){const n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return i>=0&&r.splice(i,1),this},pickEvent(e){const t=yv(e,this._canvas),n=this._origin;return this.pick(this._scene,t[0],t[1],t[0]-n[0],t[1]-n[1])},pick(e,t,n,r,i){const o=this.context();return Sr[e.marktype].pick.call(this,o,e,t,n,r,i)}});function hte(){return typeof window<"u"&&window.devicePixelRatio||1}var pte=hte();function gte(e,t,n,r,i,o){const s=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,a=e.getContext("2d"),u=s?pte:i;e.width=t*u,e.height=n*u;for(const l in o)a[l]=o[l];return s&&u!==1&&(e.style.width=t+"px",e.style.height=n+"px"),a.pixelRatio=u,a.setTransform(u,0,0,u,u*r[0],u*r[1]),e}function i1(e){bo.call(this,e),this._options={},this._redraw=!1,this._dirty=new gt,this._tempb=new gt}const VM=bo.prototype,mte=(e,t,n)=>new gt().set(0,0,t,n).translate(-e[0],-e[1]);function yte(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}V(i1,bo,{initialize(e,t,n,r,i,o){return this._options=o||{},this._canvas=this._options.externalContext?null:ua(1,1,this._options.type),e&&this._canvas&&(fi(e,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),VM.initialize.call(this,e,t,n,r,i)},resize(e,t,n,r){if(VM.resize.call(this,e,t,n,r),this._canvas)gte(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const i=this._options.externalContext;i||z("CanvasRenderer is missing a valid canvas or context"),i.scale(this._scale,this._scale),i.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this},canvas(){return this._canvas},context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)},dirty(e){const t=this._tempb.clear().union(e.bounds);let n=e.mark.group;for(;n;)t.translate(n.x||0,n.y||0),n=n.mark.group;this._dirty.union(t)},_render(e){const t=this.context(),n=this._origin,r=this._width,i=this._height,o=this._dirty,s=mte(n,r,i);t.save();const a=this._redraw||o.empty()?(this._redraw=!1,s.expand(1)):yte(t,s.intersect(o),n);return this.clear(-n[0],-n[1],r,i),this.draw(t,e,a),t.restore(),o.clear(),this},draw(e,t,n){const r=Sr[t.marktype];t.clip&&pee(e,t),r.draw.call(this,e,t,n),t.clip&&e.restore()},clear(e,t,n,r){const i=this._options,o=this.context();i.type!=="pdf"&&!i.externalContext&&o.clearRect(e,t,n,r),this._bgcolor!=null&&(o.fillStyle=this._bgcolor,o.fillRect(e,t,n,r))}});function V$(e,t){wa.call(this,e,t);const n=this;n._hrefHandler=lE(n,(r,i)=>{i&&i.href&&n.handleHref(r,i,i.href)}),n._tooltipHandler=lE(n,(r,i)=>{n.handleTooltip(r,i,r.type!==rp)})}const lE=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)};V(V$,wa,{initialize(e,t,n){let r=this._svg;return r&&(r.removeEventListener(uE,this._hrefHandler),r.removeEventListener(aE,this._tooltipHandler),r.removeEventListener(rp,this._tooltipHandler)),this._svg=r=e&&G$(e,"svg"),r&&(r.addEventListener(uE,this._hrefHandler),r.addEventListener(aE,this._tooltipHandler),r.addEventListener(rp,this._tooltipHandler)),wa.prototype.initialize.call(this,e,t,n)},canvas(){return this._svg},on(e,t){const n=this.eventName(e),r=this._handlers;if(this._handlerIndex(r[n],e,t)<0){const o={type:e,handler:t,listener:lE(this,t)};(r[n]||(r[n]=[])).push(o),this._svg&&this._svg.addEventListener(n,o.listener)}return this},off(e,t){const n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return i>=0&&(this._svg&&this._svg.removeEventListener(n,r[i].listener),r.splice(i,1)),this}});const Lz="aria-hidden",Y$="aria-label",X$="role",Q$="aria-roledescription",zz="graphics-object",K$="graphics-symbol",Iz=(e,t,n)=>({[X$]:e,[Q$]:t,[Y$]:n||void 0}),vte=ki(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),YM={axis:{desc:"axis",caption:wte},legend:{desc:"legend",caption:Ete},"title-text":{desc:"title",caption:e=>`Title text '${QM(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${QM(e)}'`}},XM={ariaRole:X$,ariaRoleDescription:Q$,description:Y$};function Bz(e,t){const n=t.aria===!1;if(e(Lz,n||void 0),n||t.description==null)for(const r in XM)e(XM[r],void 0);else{const r=t.mark.marktype;e(Y$,t.description),e(X$,t.ariaRole||(r==="group"?zz:K$)),e(Q$,t.ariaRoleDescription||`${r} mark`)}}function jz(e){return e.aria===!1?{[Lz]:!0}:vte[e.role]?null:YM[e.role]?bte(e,YM[e.role]):xte(e)}function xte(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(r=>r.description!=null&&r.aria!==!1);return Iz(n?zz:K$,`${t} mark container`,e.description)}function bte(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return Iz(t.role||K$,t.desc,n.description||r(n))}catch{return null}}function QM(e){return K(e.text).join(" ")}function wte(e){const t=e.datum,n=e.orient,r=t.title?Uz(e):null,i=e.context,o=i.scales[t.scale].value,s=i.dataflow.locale(),a=o.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(r?` titled '${r}'`:"")+` for a ${Vc(a)?"discrete":a} scale with ${oz(s,o,e)}`}function Ete(e){const t=e.datum,n=t.title?Uz(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,o=Object.keys(i),s=e.context,a=s.scales[i[o[0]]].value,u=s.dataflow.locale();return _te(r)+(n?` titled '${n}'`:"")+` for ${Ste(o)} with ${oz(u,a,e)}`}function Uz(e){try{return K(_e(e.items).items[0].text).join(" ")}catch{return null}}function Ste(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+_e(e)}function _te(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const Wz=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),kte=e=>Wz(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function J$(){let e="",t="",n="";const r=[],i=()=>t=n="",o=u=>{t&&(e+=`${t}>${n}`,i()),r.push(u)},s=(u,l)=>(l!=null&&(t+=` ${u}="${kte(l)}"`),a),a={open(u){o(u),t="<"+u;for(var l=arguments.length,c=new Array(l>1?l-1:0),f=1;f<l;f++)c[f-1]=arguments[f];for(const d of c)for(const h in d)s(h,d[h]);return a},close(){const u=r.pop();return t?e+=t+(n?`>${n}</${u}>`:"/>"):e+=`</${u}>`,i(),a},attr:s,text:u=>(n+=Wz(u),a),toString:()=>e};return a}const qz=e=>Hz(J$(),e)+"";function Hz(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const r of n)r.nodeType===3?e.text(r.nodeValue):Hz(e,r)}return e.close()}const o1={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},s1={blend:"mix-blend-mode"},Gz={fill:"none","stroke-miterlimit":10},hd=0,KM="http://www.w3.org/2000/xmlns/",vt=np.xmlns;function Z$(e){bo.call(this,e),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}const C2=bo.prototype;V(Z$,bo,{initialize(e,t,n,r,i){return this._defs={},this._clearDefs(),e&&(this._svg=qn(e,0,"svg",vt),this._svg.setAttributeNS(KM,"xmlns",vt),this._svg.setAttributeNS(KM,"xmlns:xlink",np["xmlns:xlink"]),this._svg.setAttribute("version",np.version),this._svg.setAttribute("class","marks"),fi(e,1),this._root=qn(this._svg,hd,"g",vt),qs(this._root,Gz),fi(this._svg,hd+1)),this.background(this._bgcolor),C2.initialize.call(this,e,t,n,r,i)},background(e){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",e),C2.background.apply(this,arguments)},resize(e,t,n,r){return C2.resize.call(this,e,t,n,r),this._svg&&(qs(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this},canvas(){return this._svg},svg(){const e=this._svg,t=this._bgcolor;if(!e)return null;let n;t&&(e.removeAttribute("style"),n=qn(e,hd,"rect",vt),qs(n,{width:this._width,height:this._height,fill:t}));const r=qz(e);return t&&(e.removeChild(n),this._svg.style.setProperty("background-color",t)),r},_render(e){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,e),fi(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this},dirty(e){e.dirty!==this._dirtyID&&(e.dirty=this._dirtyID,this._dirty.push(e))},isDirty(e){return this._dirtyAll||!e._svg||!e._svg.ownerSVGElement||e.dirty===this._dirtyID},_dirtyCheck(){this._dirtyAll=!0;const e=this._dirty;if(!e.length||!this._dirtyID)return!0;const t=++this._dirtyID;let n,r,i,o,s,a,u;for(s=0,a=e.length;s<a;++s)if(n=e[s],r=n.mark,r.marktype!==i&&(i=r.marktype,o=Sr[i]),r.zdirty&&r.dirty!==t&&(this._dirtyAll=!1,JM(n,t),r.items.forEach(l=>{l.dirty=t})),!r.zdirty){if(n.exit){o.nested&&r.items.length?(u=r.items[0],u._svg&&this._update(o,u._svg,u)):n._svg&&(u=n._svg.parentNode,u&&u.removeChild(n._svg)),n._svg=null;continue}n=o.nested?r.items[0]:n,n._update!==t&&(!n._svg||!n._svg.ownerSVGElement?(this._dirtyAll=!1,JM(n,t)):this._update(o,n._svg,n),n._update=t)}return!this._dirtyAll},mark(e,t,n){if(!this.isDirty(t))return t._svg;const r=this._svg,i=Sr[t.marktype],o=t.interactive===!1?"none":null,s=i.tag==="g",a=ZM(t,e,n,"g",r);a.setAttribute("class",Nz(t));const u=jz(t);for(const d in u)wn(a,d,u[d]);s||wn(a,"pointer-events",o),wn(a,"clip-path",t.clip?A$(this,t,t.group):null);let l=null,c=0;const f=d=>{const h=this.isDirty(d),p=ZM(d,a,l,i.tag,r);h&&(this._update(i,p,d),s&&Ate(this,p,d)),l=p,++c};return i.nested?t.items.length&&f(t.items[0]):Ci(t,f),fi(a,c),a},_update(e,t,n){Vo=t,on=t.__values__,Bz(gh,n),e.attr(gh,n,this);const r=Tte[e.type];r&&r.call(this,e,t,n),Vo&&this.style(Vo,n)},style(e,t){if(t!=null){for(const n in o1){let r=n==="font"?Xp(t):t[n];if(r===on[n])continue;const i=o1[n];r==null?e.removeAttribute(i):(k$(r)&&(r=az(r,this._defs.gradient,Vz())),e.setAttribute(i,r+"")),on[n]=r}for(const n in s1)qm(e,s1[n],t[n])}},defs(){const e=this._svg,t=this._defs;let n=t.el,r=0;for(const i in t.gradient)n||(t.el=n=qn(e,hd+1,"defs",vt)),r=$te(n,t.gradient[i],r);for(const i in t.clipping)n||(t.el=n=qn(e,hd+1,"defs",vt)),r=Cte(n,t.clipping[i],r);n&&(r===0?(e.removeChild(n),t.el=null):fi(n,r))},_clearDefs(){const e=this._defs;e.gradient={},e.clipping={}}});function JM(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function $te(e,t,n){let r,i,o;if(t.gradient==="radial"){let s=qn(e,n++,"pattern",vt);qs(s,{id:Q0+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),s=qn(s,0,"rect",vt),qs(s,{width:1,height:1,fill:`url(${Vz()}#${t.id})`}),e=qn(e,n++,"radialGradient",vt),qs(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=qn(e,n++,"linearGradient",vt),qs(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)o=qn(e,r,"stop",vt),o.setAttribute("offset",t.stops[r].offset),o.setAttribute("stop-color",t.stops[r].color);return fi(e,r),n}function Cte(e,t,n){let r;return e=qn(e,n,"clipPath",vt),e.setAttribute("id",t.id),t.path?(r=qn(e,0,"path",vt),r.setAttribute("d",t.path)):(r=qn(e,0,"rect",vt),qs(r,{x:0,y:0,width:t.width,height:t.height})),fi(e,1),n+1}function Ate(e,t,n){t=t.lastChild.previousSibling;let r,i=0;Ci(n,o=>{r=e.mark(t,o,r),++i}),fi(t,1+i)}function ZM(e,t,n,r,i){let o=e._svg,s;if(!o&&(s=t.ownerDocument,o=Ws(s,r,vt),e._svg=o,e.mark&&(o.__data__=e,o.__values__={fill:"default"},r==="g"))){const a=Ws(s,"path",vt);o.appendChild(a),a.__data__=e;const u=Ws(s,"g",vt);o.appendChild(u),u.__data__=e;const l=Ws(s,"path",vt);o.appendChild(l),l.__data__=e,l.__values__={fill:"default"}}return(o.ownerSVGElement!==i||Fte(o,n))&&t.insertBefore(o,n?n.nextSibling:t.firstChild),o}function Fte(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let Vo=null,on=null;const Tte={group(e,t,n){const r=Vo=t.childNodes[2];on=r.__values__,e.foreground(gh,n,this),on=t.__values__,Vo=t.childNodes[1],e.content(gh,n,this);const i=Vo=t.childNodes[0];e.background(gh,n,this);const o=n.mark.interactive===!1?"none":null;if(o!==on.events&&(wn(r,"pointer-events",o),wn(i,"pointer-events",o),on.events=o),n.strokeForeground&&n.stroke){const s=n.fill;wn(r,"display",null),this.style(i,n),wn(i,"stroke",null),s&&(n.fill=null),on=r.__values__,this.style(r,n),s&&(n.fill=s),Vo=null}else wn(r,"display","none")},image(e,t,n){n.smooth===!1?(qm(t,"image-rendering","optimizeSpeed"),qm(t,"image-rendering","pixelated")):qm(t,"image-rendering",null)},text(e,t,n){const r=Yp(n);let i,o,s,a;I(r)?(o=r.map(u=>ba(n,u)),i=o.join(`
`),i!==on.text&&(fi(t,0),s=t.ownerDocument,a=xa(n),o.forEach((u,l)=>{const c=Ws(s,"tspan",vt);c.__data__=n,c.textContent=u,l&&(c.setAttribute("x",0),c.setAttribute("dy",a)),t.appendChild(c)}),on.text=i)):(o=ba(n,r),o!==on.text&&(t.textContent=o,on.text=o)),wn(t,"font-family",Xp(n)),wn(t,"font-size",xo(n)+"px"),wn(t,"font-style",n.fontStyle),wn(t,"font-variant",n.fontVariant),wn(t,"font-weight",n.fontWeight)}};function gh(e,t,n){t!==on[e]&&(n?Mte(Vo,e,t,n):wn(Vo,e,t),on[e]=t)}function qm(e,t,n){n!==on[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),on[t]=n)}function qs(e,t){for(const n in t)wn(e,n,t[n])}function wn(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function Mte(e,t,n,r){n!=null?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function Vz(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}function eC(e){bo.call(this,e),this._text=null,this._defs={gradient:{},clipping:{}}}V(eC,bo,{svg(){return this._text},_render(e){const t=J$();t.open("svg",he({},np,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const n=this._bgcolor;return n&&n!=="transparent"&&n!=="none"&&t.open("rect",{width:this._width,height:this._height,fill:n}).close(),t.open("g",Gz,{transform:"translate("+this._origin+")"}),this.mark(t,e),t.close(),this.defs(t),this._text=t.close()+"",this},mark(e,t){const n=Sr[t.marktype],r=n.tag,i=[Bz,n.attr];e.open("g",{class:Nz(t),"clip-path":t.clip?A$(this,t,t.group):null},jz(t),{"pointer-events":r!=="g"&&t.interactive===!1?"none":null});const o=s=>{const a=this.href(s);if(a&&e.open("a",a),e.open(r,this.attr(t,s,i,r!=="g"?r:null)),r==="text"){const u=Yp(s);if(I(u)){const l={x:0,dy:xa(s)};for(let c=0;c<u.length;++c)e.open("tspan",c?l:null).text(ba(s,u[c])).close()}else e.text(ba(s,u))}else if(r==="g"){const u=s.strokeForeground,l=s.fill,c=s.stroke;u&&c&&(s.stroke=null),e.open("path",this.attr(t,s,n.background,"bgrect")).close(),e.open("g",this.attr(t,s,n.content)),Ci(s,f=>this.mark(e,f)),e.close(),u&&c?(l&&(s.fill=null),s.stroke=c,e.open("path",this.attr(t,s,n.foreground,"bgrect")).close(),l&&(s.fill=l)):e.open("path",this.attr(t,s,n.foreground,"bgfore")).close()}e.close(),a&&e.close()};return n.nested?t.items&&t.items.length&&o(t.items[0]):Ci(t,o),e.close()},href(e){const t=e.href;let n;if(t){if(n=this._hrefs&&this._hrefs[t])return n;this.sanitizeURL(t).then(r=>{r["xlink:href"]=r.href,r.href=null,(this._hrefs||(this._hrefs={}))[t]=r})}return null},attr(e,t,n,r){const i={},o=(s,a,u,l)=>{i[l||s]=a};return Array.isArray(n)?n.forEach(s=>s(o,t,this)):n(o,t,this),r&&Nte(i,t,e,r,this._defs),i},defs(e){const t=this._defs.gradient,n=this._defs.clipping;if(Object.keys(t).length+Object.keys(n).length!==0){e.open("defs");for(const i in t){const o=t[i],s=o.stops;o.gradient==="radial"?(e.open("pattern",{id:Q0+i,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),e.open("rect",{width:"1",height:"1",fill:"url(#"+i+")"}).close(),e.close(),e.open("radialGradient",{id:i,fx:o.x1,fy:o.y1,fr:o.r1,cx:o.x2,cy:o.y2,r:o.r2})):e.open("linearGradient",{id:i,x1:o.x1,x2:o.x2,y1:o.y1,y2:o.y2});for(let a=0;a<s.length;++a)e.open("stop",{offset:s[a].offset,"stop-color":s[a].color}).close();e.close()}for(const i in n){const o=n[i];e.open("clipPath",{id:i}),o.path?e.open("path",{d:o.path}).close():e.open("rect",{x:0,y:0,width:o.width,height:o.height}).close(),e.close()}e.close()}}});function Nte(e,t,n,r,i){let o;if(t==null||(r==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;r==="image"&&t.smooth===!1&&(o=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),r==="text"&&(e["font-family"]=Xp(t),e["font-size"]=xo(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const s in o1){let a=t[s];const u=o1[s];a==="transparent"&&(u==="fill"||u==="stroke")||a!=null&&(k$(a)&&(a=az(a,i.gradient,"")),e[u]=a)}for(const s in s1){const a=t[s];a!=null&&(o=o||[],o.push(`${s1[s]}: ${a};`))}return o&&(e.style=o.join(" ")),e}const Yz="canvas",Xz="png",Qz="svg",Kz="none",Hs={Canvas:Yz,PNG:Xz,SVG:Qz,None:Kz},Kc={};Kc[Yz]=Kc[Xz]={renderer:i1,headless:i1,handler:Qp};Kc[Qz]={renderer:Z$,headless:eC,handler:V$};Kc[Kz]={};function vv(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(Kc[e]=t,this):Kc[e]}function Jz(e,t,n){const r=[],i=new gt().union(t),o=e.marktype;return o?Zz(e,i,n,r):o==="group"?eI(e,i,n,r):z("Intersect scene must be mark node or group item.")}function Zz(e,t,n,r){if(Ote(e,t,n)){const i=e.items,o=e.marktype,s=i.length;let a=0;if(o==="group")for(;a<s;++a)eI(i[a],t,n,r);else for(const u=Sr[o].isect;a<s;++a){const l=i[a];tI(l,t,u)&&r.push(l)}}return r}function Ote(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function eI(e,t,n,r){n&&n(e.mark)&&tI(e,t,Sr.group.isect)&&r.push(e);const i=e.items,o=i&&i.length;if(o){const s=e.x||0,a=e.y||0;t.translate(-s,-a);for(let u=0;u<o;++u)Zz(i[u],t,n,r);t.translate(s,a)}return r}function tI(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}const A2=new gt;function nI(e){const t=e.clip;if(pe(t))t(Gp(A2.clear()));else if(t)A2.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(A2)}const Dte=1e-9;function tC(e,t,n){return e===t?!0:n==="path"?rI(e,t):e instanceof Date&&t instanceof Date?+e==+t:ze(e)&&ze(t)?Math.abs(e-t)<=Dte:!e||!t||!J(e)&&!J(t)?e==t:Rte(e,t)}function rI(e,t){return tC(Yc(e),Yc(t))}function Rte(e,t){var n=Object.keys(e),r=Object.keys(t),i,o;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),o=n.length-1;o>=0;o--)if(n[o]!=r[o])return!1;for(o=n.length-1;o>=0;o--)if(i=n[o],!tC(e[i],t[i],i))return!1;return typeof e==typeof t}function Pte(){pz(),aZ()}const Jc="top",di="left",pi="right",Ea="bottom",Lte="top-left",zte="top-right",Ite="bottom-left",Bte="bottom-right",nC="start",cE="middle",Sn="end",jte="x",Ute="y",xv="group",rC="axis",iC="title",Wte="frame",qte="scope",oC="legend",iI="row-header",oI="row-footer",sI="row-title",aI="column-header",uI="column-footer",lI="column-title",Hte="padding",Gte="symbol",cI="fit",fI="fit-x",dI="fit-y",Vte="pad",sC="none",Gg="all",fE="each",aC="flush",Gs="column",Vs="row";function hI(e){P.call(this,null,e)}V(hI,P,{transform(e,t){const n=t.dataflow,r=e.mark,i=r.marktype,o=Sr[i],s=o.bound;let a=r.bounds,u;if(o.nested)r.items.length&&n.dirty(r.items[0]),a=Vg(r,s),r.items.forEach(l=>{l.bounds.clear().union(a)});else if(i===xv||e.modified())switch(t.visit(t.MOD,l=>n.dirty(l)),a.clear(),r.items.forEach(l=>a.union(Vg(l,s))),r.role){case rC:case oC:case iC:t.reflow()}else u=t.changed(t.REM),t.visit(t.ADD,l=>{a.union(Vg(l,s))}),t.visit(t.MOD,l=>{u=u||a.alignsWith(l.bounds),n.dirty(l),a.union(Vg(l,s))}),u&&(a.clear(),r.items.forEach(l=>a.union(l.bounds)));return nI(r),t.modifies("bounds")}});function Vg(e,t,n){return t(e.bounds.clear(),e,n)}const eN=":vega_identifier:";function uC(e){P.call(this,0,e)}uC.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};V(uC,P,{transform(e,t){const n=Yte(t.dataflow),r=e.as;let i=n.value;return t.visit(t.ADD,o=>o[r]=o[r]||++i),n.set(this.value=i),t}});function Yte(e){return e._signals[eN]||(e._signals[eN]=e.add(0))}function pI(e){P.call(this,null,e)}V(pI,P,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,Xte(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const r=n.marktype===xv?cv:lv;return t.visit(t.ADD,i=>r.call(i,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function Xte(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function gI(e){P.call(this,null,e)}const tN={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((r,i)=>!i||!mI(n.bounds,r.bounds,t)?(n=r,1):r.opacity=0)}},mI=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),nN=(e,t)=>{for(var n=1,r=e.length,i=e[0].bounds,o;n<r;i=o,++n)if(mI(i,o=e[n].bounds,t))return!0},Qte=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},Kte=(e,t,n)=>{var r=e.range(),i=new gt;return t===Jc||t===Ea?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),o=>i.encloses(o.bounds)},rN=e=>(e.forEach(t=>t.opacity=1),e),iN=(e,t)=>e.reflow(t.modified()).modifies("opacity");V(gI,P,{transform(e,t){const n=tN[e.method]||tN.parity,r=e.separation||0;let i=t.materialize(t.SOURCE).source,o,s;if(!i||!i.length)return;if(!e.method)return e.modified("method")&&(rN(i),t=iN(t,e)),t;if(i=i.filter(Qte),!i.length)return;if(e.sort&&(i=i.slice().sort(e.sort)),o=rN(i),t=iN(t,e),o.length>=3&&nN(o,r)){do o=n(o,r);while(o.length>=3&&nN(o,r));o.length<3&&!_e(i).opacity&&(o.length>1&&(_e(o).opacity=0),_e(i).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(s=Kte(e.boundScale,e.boundOrient,+e.boundTolerance),i.forEach(u=>{s(u)||(u.opacity=0)}));const a=o[0].mark.bounds.clear();return i.forEach(u=>{u.opacity&&a.union(u.bounds)}),t}});function yI(e){P.call(this,null,e)}V(yI,P,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,r=>n.dirty(r)),t.fields&&t.fields.zindex){const r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});const rn=new gt;function lc(e,t,n){return e[t]===n?0:(e[t]=n,1)}function Jte(e){var t=e.items[0].orient;return t===di||t===pi}function Zte(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function ene(e,t,n,r){var i=t.items[0],o=i.datum,s=i.translate!=null?i.translate:.5,a=i.orient,u=Zte(o),l=i.range,c=i.offset,f=i.position,d=i.minExtent,h=i.maxExtent,p=o.title&&i.items[u[2]].items[0],g=i.titlePadding,m=i.bounds,y=p&&U$(p),v=0,x=0,b,w;switch(rn.clear().union(m),m.clear(),(b=u[0])>-1&&m.union(i.items[b].bounds),(b=u[1])>-1&&m.union(i.items[b].bounds),a){case Jc:v=f||0,x=-c,w=Math.max(d,Math.min(h,-m.y1)),m.add(0,-w).add(l,0),p&&Yg(e,p,w,g,y,0,-1,m);break;case di:v=-c,x=f||0,w=Math.max(d,Math.min(h,-m.x1)),m.add(-w,0).add(0,l),p&&Yg(e,p,w,g,y,1,-1,m);break;case pi:v=n+c,x=f||0,w=Math.max(d,Math.min(h,m.x2)),m.add(0,0).add(w,l),p&&Yg(e,p,w,g,y,1,1,m);break;case Ea:v=f||0,x=r+c,w=Math.max(d,Math.min(h,m.y2)),m.add(0,0).add(l,w),p&&Yg(e,p,w,g,0,0,1,m);break;default:v=i.x,x=i.y}return ps(m.translate(v,x),i),lc(i,"x",v+s)|lc(i,"y",x+s)&&(i.bounds=rn,e.dirty(i),i.bounds=m,e.dirty(i)),i.mark.bounds.clear().union(m)}function Yg(e,t,n,r,i,o,s,a){const u=t.bounds;if(t.auto){const l=s*(n+i+r);let c=0,f=0;e.dirty(t),o?c=(t.x||0)-(t.x=l):f=(t.y||0)-(t.y=l),t.mark.bounds.clear().union(u.translate(-c,-f)),e.dirty(t)}a.union(u)}const oN=(e,t)=>Math.floor(Math.min(e,t)),sN=(e,t)=>Math.ceil(Math.max(e,t));function tne(e){var t=e.items,n=t.length,r=0,i,o;const s={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<n;++r)if(i=t[r],o=i.items,i.marktype===xv)switch(i.role){case rC:case oC:case iC:break;case iI:s.rowheaders.push(...o);break;case oI:s.rowfooters.push(...o);break;case aI:s.colheaders.push(...o);break;case uI:s.colfooters.push(...o);break;case sI:s.rowtitle=o[0];break;case lI:s.coltitle=o[0];break;default:s.marks.push(...o)}return s}function nne(e){return new gt().set(0,0,e.width||0,e.height||0)}function rne(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function Ke(e,t,n){const r=J(e)?e[t]:e;return r??(n!==void 0?n:0)}function aN(e){return e<0?Math.ceil(-e):0}function vI(e,t,n){var r=!n.nodirty,i=n.bounds===aC?nne:rne,o=rn.set(0,0,0,0),s=Ke(n.align,Gs),a=Ke(n.align,Vs),u=Ke(n.padding,Gs),l=Ke(n.padding,Vs),c=n.columns||t.length,f=c<=0?1:Math.ceil(t.length/c),d=t.length,h=Array(d),p=Array(c),g=0,m=Array(d),y=Array(f),v=0,x=Array(d),b=Array(d),w=Array(d),S,E,_,$,k,A,R,C,T,F,N;for(E=0;E<c;++E)p[E]=0;for(E=0;E<f;++E)y[E]=0;for(E=0;E<d;++E)A=t[E],k=w[E]=i(A),A.x=A.x||0,x[E]=0,A.y=A.y||0,b[E]=0,_=E%c,$=~~(E/c),g=Math.max(g,R=Math.ceil(k.x2)),v=Math.max(v,C=Math.ceil(k.y2)),p[_]=Math.max(p[_],R),y[$]=Math.max(y[$],C),h[E]=u+aN(k.x1),m[E]=l+aN(k.y1),r&&e.dirty(t[E]);for(E=0;E<d;++E)E%c===0&&(h[E]=0),E<c&&(m[E]=0);if(s===fE)for(_=1;_<c;++_){for(N=0,E=_;E<d;E+=c)N<h[E]&&(N=h[E]);for(E=_;E<d;E+=c)h[E]=N+p[_-1]}else if(s===Gg){for(N=0,E=0;E<d;++E)E%c&&N<h[E]&&(N=h[E]);for(E=0;E<d;++E)E%c&&(h[E]=N+g)}else for(s=!1,_=1;_<c;++_)for(E=_;E<d;E+=c)h[E]+=p[_-1];if(a===fE)for($=1;$<f;++$){for(N=0,E=$*c,S=E+c;E<S;++E)N<m[E]&&(N=m[E]);for(E=$*c;E<S;++E)m[E]=N+y[$-1]}else if(a===Gg){for(N=0,E=c;E<d;++E)N<m[E]&&(N=m[E]);for(E=c;E<d;++E)m[E]=N+v}else for(a=!1,$=1;$<f;++$)for(E=$*c,S=E+c;E<S;++E)m[E]+=y[$-1];for(T=0,E=0;E<d;++E)T=h[E]+(E%c?T:0),x[E]+=T-t[E].x;for(_=0;_<c;++_)for(F=0,E=_;E<d;E+=c)F+=m[E],b[E]+=F-t[E].y;if(s&&Ke(n.center,Gs)&&f>1)for(E=0;E<d;++E)k=s===Gg?g:p[E%c],T=k-w[E].x2-t[E].x-x[E],T>0&&(x[E]+=T/2);if(a&&Ke(n.center,Vs)&&c!==1)for(E=0;E<d;++E)k=a===Gg?v:y[~~(E/c)],F=k-w[E].y2-t[E].y-b[E],F>0&&(b[E]+=F/2);for(E=0;E<d;++E)o.union(w[E].translate(x[E],b[E]));switch(T=Ke(n.anchor,jte),F=Ke(n.anchor,Ute),Ke(n.anchor,Gs)){case Sn:T-=o.width();break;case cE:T-=o.width()/2}switch(Ke(n.anchor,Vs)){case Sn:F-=o.height();break;case cE:F-=o.height()/2}for(T=Math.round(T),F=Math.round(F),o.clear(),E=0;E<d;++E)t[E].mark.bounds.clear();for(E=0;E<d;++E)A=t[E],A.x+=x[E]+=T,A.y+=b[E]+=F,o.union(A.mark.bounds.union(A.bounds.translate(x[E],b[E]))),r&&e.dirty(A);return o}function ine(e,t,n){var r=tne(t),i=r.marks,o=n.bounds===aC?one:sne,s=n.offset,a=n.columns||i.length,u=a<=0?1:Math.ceil(i.length/a),l=u*a,c,f,d,h,p,g,m;const y=vI(e,i,n);y.empty()&&y.set(0,0,0,0),r.rowheaders&&(g=Ke(n.headerBand,Vs,null),c=Xg(e,r.rowheaders,i,a,u,-Ke(s,"rowHeader"),oN,0,o,"x1",0,a,1,g)),r.colheaders&&(g=Ke(n.headerBand,Gs,null),f=Xg(e,r.colheaders,i,a,a,-Ke(s,"columnHeader"),oN,1,o,"y1",0,1,a,g)),r.rowfooters&&(g=Ke(n.footerBand,Vs,null),d=Xg(e,r.rowfooters,i,a,u,Ke(s,"rowFooter"),sN,0,o,"x2",a-1,a,1,g)),r.colfooters&&(g=Ke(n.footerBand,Gs,null),h=Xg(e,r.colfooters,i,a,a,Ke(s,"columnFooter"),sN,1,o,"y2",l-a,1,a,g)),r.rowtitle&&(p=Ke(n.titleAnchor,Vs),m=Ke(s,"rowTitle"),m=p===Sn?d+m:c-m,g=Ke(n.titleBand,Vs,.5),uN(e,r.rowtitle,m,0,y,g)),r.coltitle&&(p=Ke(n.titleAnchor,Gs),m=Ke(s,"columnTitle"),m=p===Sn?h+m:f-m,g=Ke(n.titleBand,Gs,.5),uN(e,r.coltitle,m,1,y,g))}function one(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function sne(e,t){return e.bounds[t]}function Xg(e,t,n,r,i,o,s,a,u,l,c,f,d,h){var p=n.length,g=0,m=0,y,v,x,b,w,S,E,_,$;if(!p)return g;for(y=c;y<p;y+=f)n[y]&&(g=s(g,u(n[y],l)));if(!t.length)return g;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),g+=o,v=0,b=t.length;v<b;++v)e.dirty(t[v]),t[v].mark.bounds.clear();for(y=c,v=0,b=t.length;v<b;++v,y+=f){for(S=t[v],w=S.mark.bounds,x=y;x>=0&&(E=n[x])==null;x-=d);a?(_=h==null?E.x:Math.round(E.bounds.x1+h*E.bounds.width()),$=g):(_=g,$=h==null?E.y:Math.round(E.bounds.y1+h*E.bounds.height())),w.union(S.bounds.translate(_-(S.x||0),$-(S.y||0))),S.x=_,S.y=$,e.dirty(S),m=s(m,w[l])}return m}function uN(e,t,n,r,i,o){if(t){e.dirty(t);var s=n,a=n;r?s=Math.round(i.x1+o*i.width()):a=Math.round(i.y1+o*i.height()),t.bounds.translate(s-(t.x||0),a-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=s,t.y=a,e.dirty(t)}}function ane(e,t){const n=e[t]||{};return(r,i)=>n[r]!=null?n[r]:e[r]!=null?e[r]:i}function une(e,t){let n=-1/0;return e.forEach(r=>{r.offset!=null&&(n=Math.max(n,r.offset))}),n>-1/0?n:t}function lne(e,t,n,r,i,o,s){const a=ane(n,t),u=une(e,a("offset",0)),l=a("anchor",nC),c=l===Sn?1:l===cE?.5:0,f={align:fE,bounds:a("bounds",aC),columns:a("direction")==="vertical"?1:e.length,padding:a("margin",8),center:a("center"),nodirty:!0};switch(t){case di:f.anchor={x:Math.floor(r.x1)-u,column:Sn,y:c*(s||r.height()+2*r.y1),row:l};break;case pi:f.anchor={x:Math.ceil(r.x2)+u,y:c*(s||r.height()+2*r.y1),row:l};break;case Jc:f.anchor={y:Math.floor(i.y1)-u,row:Sn,x:c*(o||i.width()+2*i.x1),column:l};break;case Ea:f.anchor={y:Math.ceil(i.y2)+u,x:c*(o||i.width()+2*i.x1),column:l};break;case Lte:f.anchor={x:u,y:u};break;case zte:f.anchor={x:o-u,y:u,column:Sn};break;case Ite:f.anchor={x:u,y:s-u,row:Sn};break;case Bte:f.anchor={x:o-u,y:s-u,column:Sn,row:Sn};break}return f}function cne(e,t){var n=t.items[0],r=n.datum,i=n.orient,o=n.bounds,s=n.x,a=n.y,u,l;return n._bounds?n._bounds.clear().union(o):n._bounds=o.clone(),o.clear(),dne(e,n,n.items[0].items[0]),o=fne(n,o),u=2*n.padding,l=2*n.padding,o.empty()||(u=Math.ceil(o.width()+u),l=Math.ceil(o.height()+l)),r.type===Gte&&hne(n.items[0].items[0].items[0].items),i!==sC&&(n.x=s=0,n.y=a=0),n.width=u,n.height=l,ps(o.set(s,a,s+u,a+l),n),n.mark.bounds.clear().union(o),n}function fne(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function dne(e,t,n){var r=t.padding,i=r-n.x,o=r-n.y;if(!t.datum.title)(i||o)&&pd(e,n,i,o);else{var s=t.items[1].items[0],a=s.anchor,u=t.titlePadding||0,l=r-s.x,c=r-s.y;switch(s.orient){case di:i+=Math.ceil(s.bounds.width())+u;break;case pi:case Ea:break;default:o+=s.bounds.height()+u}switch((i||o)&&pd(e,n,i,o),s.orient){case di:c+=Rl(t,n,s,a,1,1);break;case pi:l+=Rl(t,n,s,Sn,0,0)+u,c+=Rl(t,n,s,a,1,1);break;case Ea:l+=Rl(t,n,s,a,0,0),c+=Rl(t,n,s,Sn,-1,0,1)+u;break;default:l+=Rl(t,n,s,a,0,0)}(l||c)&&pd(e,s,l,c),(l=Math.round(s.bounds.x1-r))<0&&(pd(e,n,-l,0),pd(e,s,-l,0))}}function Rl(e,t,n,r,i,o,s){const a=e.datum.type!=="symbol",u=n.datum.vgrad,l=a&&(o||!u)&&!s?t.items[0]:t,c=l.bounds[i?"y2":"x2"]-e.padding,f=u&&o?c:0,d=u&&o?0:c,h=i<=0?0:U$(n);return Math.round(r===nC?f:r===Sn?d-h:.5*(c-h))}function pd(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function hne(e){const t=e.reduce((n,r)=>(n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function pne(e,t,n,r,i){var o=t.items[0],s=o.frame,a=o.orient,u=o.anchor,l=o.offset,c=o.padding,f=o.items[0].items[0],d=o.items[1]&&o.items[1].items[0],h=a===di||a===pi?r:n,p=0,g=0,m=0,y=0,v=0,x;if(s!==xv?a===di?(p=i.y2,h=i.y1):a===pi?(p=i.y1,h=i.y2):(p=i.x1,h=i.x2):a===di&&(p=r,h=0),x=u===nC?p:u===Sn?h:(p+h)/2,d&&d.text){switch(a){case Jc:case Ea:v=f.bounds.height()+c;break;case di:y=f.bounds.width()+c;break;case pi:y=-f.bounds.width()-c;break}rn.clear().union(d.bounds),rn.translate(y-(d.x||0),v-(d.y||0)),lc(d,"x",y)|lc(d,"y",v)&&(e.dirty(d),d.bounds.clear().union(rn),d.mark.bounds.clear().union(rn),e.dirty(d)),rn.clear().union(d.bounds)}else rn.clear();switch(rn.union(f.bounds),a){case Jc:g=x,m=i.y1-rn.height()-l;break;case di:g=i.x1-rn.width()-l,m=x;break;case pi:g=i.x2+rn.width()+l,m=x;break;case Ea:g=x,m=i.y2+l;break;default:g=o.x,m=o.y}return lc(o,"x",g)|lc(o,"y",m)&&(rn.translate(g,m),e.dirty(o),o.bounds.clear().union(rn),t.bounds.clear().union(rn),e.dirty(o)),o.bounds}function xI(e){P.call(this,null,e)}V(xI,P,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(r=>{e.layout&&ine(n,r,e.layout),mne(n,r,e)}),gne(e.mark.group)?t.reflow():t}});function gne(e){return e&&e.mark.role!=="legend-entry"}function mne(e,t,n){var r=t.items,i=Math.max(0,t.width||0),o=Math.max(0,t.height||0),s=new gt().set(0,0,i,o),a=s.clone(),u=s.clone(),l=[],c,f,d,h,p,g;for(p=0,g=r.length;p<g;++p)switch(f=r[p],f.role){case rC:h=Jte(f)?a:u,h.union(ene(e,f,i,o));break;case iC:c=f;break;case oC:l.push(cne(e,f));break;case Wte:case qte:case iI:case oI:case sI:case aI:case uI:case lI:a.union(f.bounds),u.union(f.bounds);break;default:s.union(f.bounds)}if(l.length){const m={};l.forEach(y=>{d=y.orient||pi,d!==sC&&(m[d]||(m[d]=[])).push(y)});for(const y in m){const v=m[y];vI(e,v,lne(v,y,n.legends,a,u,i,o))}l.forEach(y=>{const v=y.bounds;if(v.equals(y._bounds)||(y.bounds=y._bounds,e.dirty(y),y.bounds=v,e.dirty(y)),n.autosize&&(n.autosize.type===cI||n.autosize.type===fI||n.autosize.type===dI))switch(y.orient){case di:case pi:s.add(v.x1,0).add(v.x2,0);break;case Jc:case Ea:s.add(0,v.y1).add(0,v.y2)}else s.union(v)})}s.union(a).union(u),c&&s.union(pne(e,c,i,o,s)),t.clip&&s.set(0,0,t.width||0,t.height||0),yne(e,t,s,n)}function yne(e,t,n,r){const i=r.autosize||{},o=i.type;if(e._autosize<1||!o)return;let s=e._width,a=e._height,u=Math.max(0,t.width||0),l=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,t.height||0),f=Math.max(0,Math.ceil(-n.y1));const d=Math.max(0,Math.ceil(n.x2-u)),h=Math.max(0,Math.ceil(n.y2-c));if(i.contains===Hte){const p=e.padding();s-=p.left+p.right,a-=p.top+p.bottom}o===sC?(l=0,f=0,u=s,c=a):o===cI?(u=Math.max(0,s-l-d),c=Math.max(0,a-f-h)):o===fI?(u=Math.max(0,s-l-d),a=c+f+h):o===dI?(s=u+l+d,c=Math.max(0,a-f-h)):o===Vte&&(s=u+l+d,a=c+f+h),e._resizeView(s,a,u,c,[l,f],i.resize)}const vne=Object.freeze(Object.defineProperty({__proto__:null,bound:hI,identifier:uC,mark:pI,overlap:gI,render:yI,viewlayout:xI},Symbol.toStringTag,{value:"Module"}));function bI(e){P.call(this,null,e)}V(bI,P,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,o=e.scale,s=e.count==null?e.values?e.values.length:10:e.count,a=S$(o,s,e.minstep),u=e.format||ez(n,o,a,e.formatSpecifier,e.formatType,!!e.values),l=e.values?Z8(o,e.values,a):_$(o,a);return i&&(r.rem=i),i=l.map((c,f)=>Ne({index:f/(l.length-1||1),value:c,label:u(c)})),e.extra&&i.length&&i.push(Ne({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}});function wI(e){P.call(this,null,e)}function xne(){return Ne({})}function bne(e){const t=$f().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}V(wI,P,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||xne,o=e.key||oe,s=this.value;return I(r.encode)&&(r.encode=null),s&&(e.modified("key")||t.modified(o))&&z("DataJoin does not support modified key function or fields."),s||(t=t.addAll(),this.value=s=bne(o)),t.visit(t.ADD,a=>{const u=o(a);let l=s.get(u);l?l.exit?(s.empty--,r.add.push(l)):r.mod.push(l):(l=i(a),s.set(u,l),r.add.push(l)),l.datum=a,l.exit=!1}),t.visit(t.MOD,a=>{const u=o(a),l=s.get(u);l&&(l.datum=a,r.mod.push(l))}),t.visit(t.REM,a=>{const u=o(a),l=s.get(u);a===l.datum&&!l.exit&&(r.rem.push(l),l.exit=!0,++s.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&s.empty>n.cleanThreshold)&&n.runAfter(s.clean),r}});function EI(e){P.call(this,null,e)}V(EI,P,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,o=t.encode;if(I(o))if(n.changed()||o.every(f=>i[f]))o=o[0],n.encode=null;else return t.StopPropagation;var s=o==="enter",a=i.update||$s,u=i.enter||$s,l=i.exit||$s,c=(o&&!s?i[o]:a)||$s;if(t.changed(t.ADD)&&(t.visit(t.ADD,f=>{u(f,e),a(f,e)}),n.modifies(u.output),n.modifies(a.output),c!==$s&&c!==a&&(t.visit(t.ADD,f=>{c(f,e)}),n.modifies(c.output))),t.changed(t.REM)&&l!==$s&&(t.visit(t.REM,f=>{l(f,e)}),n.modifies(l.output)),s||c!==$s){const f=t.MOD|(e.modified()?t.REFLOW:0);s?(t.visit(f,d=>{const h=u(d,e)||r;(c(d,e)||h)&&n.mod.push(d)}),n.mod.length&&n.modifies(u.output)):t.visit(f,d=>{(c(d,e)||r)&&n.mod.push(d)}),n.mod.length&&n.modifies(c.output)}return n.changed()?n:t.StopPropagation}});function SI(e){P.call(this,[],e)}V(SI,P,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,o=e.type||Lm,s=e.scale,a=+e.limit,u=S$(s,e.count==null?5:e.count,e.minstep),l=!!e.values||o===Lm,c=e.format||iz(n,s,u,o,e.formatSpecifier,e.formatType,l),f=e.values||rz(s,u),d,h,p,g,m;return i&&(r.rem=i),o===Lm?(a&&f.length>a?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=f.slice(0,a-1),m=!0):i=f,pe(p=e.size)?(!e.values&&s(i[0])===0&&(i=i.slice(1)),g=i.reduce((y,v)=>Math.max(y,p(v,e)),0)):p=yn(g=p||8),i=i.map((y,v)=>Ne({index:v,label:c(y,v,i),value:y,offset:g,size:p(y,e)})),m&&(m=f[i.length],i.push(Ne({index:i.length,label:`…${f.length-i.length} entries`,value:m,offset:g,size:p(m,e)})))):o===YJ?(d=s.domain(),h=Q8(s,d[0],_e(d)),f.length<3&&!e.values&&d[0]!==_e(d)&&(f=[d[0],_e(d)]),i=f.map((y,v)=>Ne({index:v,label:c(y,v,f),value:y,perc:h(y)}))):(p=f.length-1,h=oZ(s),i=f.map((y,v)=>Ne({index:v,label:c(y,v,f),value:y,perc:v?h(y):0,perc2:v===p?1:h(f[v+1])}))),r.source=i,r.add=i,this.value=i,r}});const wne=e=>e.source.x,Ene=e=>e.source.y,Sne=e=>e.target.x,_ne=e=>e.target.y;function lC(e){P.call(this,{},e)}lC.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};V(lC,P,{transform(e,t){var n=e.sourceX||wne,r=e.sourceY||Ene,i=e.targetX||Sne,o=e.targetY||_ne,s=e.as||"path",a=e.orient||"vertical",u=e.shape||"line",l=lN.get(u+"-"+a)||lN.get(u);return l||z("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,c=>{c[s]=l(n(c),r(c),i(c),o(c))}),t.reflow(e.modified()).modifies(s)}});const _I=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,kne=(e,t,n,r)=>_I(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),kI=(e,t,n,r)=>{var i=n-e,o=r-t,s=Math.hypot(i,o)/2,a=180*Math.atan2(o,i)/Math.PI;return"M"+e+","+t+"A"+s+","+s+" "+a+" 0 1 "+n+","+r},$ne=(e,t,n,r)=>kI(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),$I=(e,t,n,r)=>{const i=n-e,o=r-t,s=.2*(i+o),a=.2*(o-i);return"M"+e+","+t+"C"+(e+s)+","+(t+a)+" "+(n+a)+","+(r-s)+" "+n+","+r},Cne=(e,t,n,r)=>$I(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),Ane=(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,Fne=(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,Tne=(e,t,n,r)=>{const i=Math.cos(e),o=Math.sin(e),s=Math.cos(n),a=Math.sin(n),u=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*o+"A"+t+","+t+" 0 0,"+(u?1:0)+" "+t*s+","+t*a+"L"+r*s+","+r*a},Mne=(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},Nne=(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},One=(e,t,n,r)=>{const i=Math.cos(e),o=Math.sin(e),s=Math.cos(n),a=Math.sin(n),u=(t+r)/2;return"M"+t*i+","+t*o+"C"+u*i+","+u*o+" "+u*s+","+u*a+" "+r*s+","+r*a},lN=$f({line:_I,"line-radial":kne,arc:kI,"arc-radial":$ne,curve:$I,"curve-radial":Cne,"orthogonal-horizontal":Ane,"orthogonal-vertical":Fne,"orthogonal-radial":Tne,"diagonal-horizontal":Mne,"diagonal-vertical":Nne,"diagonal-radial":One});function cC(e){P.call(this,null,e)}cC.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};V(cC,P,{transform(e,t){var n=e.as||["startAngle","endAngle"],r=n[0],i=n[1],o=e.field||Sf,s=e.startAngle||0,a=e.endAngle!=null?e.endAngle:2*Math.PI,u=t.source,l=u.map(o),c=l.length,f=s,d=(a-s)/VP(l),h=yr(c),p,g,m;for(e.sort&&h.sort((y,v)=>l[y]-l[v]),p=0;p<c;++p)m=l[h[p]],g=u[h[p]],g[r]=f,g[i]=f+=m*d;return this.value=l,t.reflow(e.modified()).modifies(n)}});const Dne=5;function Rne(e){const t=e.type;return!e.bins&&(t===Hc||t===Ip||t===Bp)}function CI(e){return b$(e)&&e!==ro}const Pne=ki(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function AI(e){P.call(this,null,e),this.modified(!0)}V(AI,P,{transform(e,t){var n=t.dataflow,r=this.value,i=Lne(e);(!r||i!==r.type)&&(this.value=r=Fe(i)());for(i in e)if(!Pne[i]){if(i==="padding"&&CI(r.type))continue;pe(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return Wne(r,e,Une(r,e,Ine(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function Lne(e){var t=e.type,n="",r;return t===ro?ro+"-"+Hc:(zne(e)&&(r=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=r===2?ro+"-":r===3?Of+"-":""),(n+t||Hc).toLowerCase())}function zne(e){const t=e.type;return b$(t)&&t!==Gu&&t!==Vu&&(e.scheme||e.range&&e.range.length&&e.range.every(Q))}function Ine(e,t,n){const r=Bne(e,t.domainRaw,n);if(r>-1)return r;var i=t.domain,o=e.type,s=t.zero||t.zero===void 0&&Rne(e),a,u;if(!i)return 0;if(CI(o)&&t.padding&&i[0]!==_e(i)&&(i=jne(o,i,t.range,t.padding,t.exponent,t.constant)),(s||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(a=(i=i.slice()).length-1||1,s&&(i[0]>0&&(i[0]=0),i[a]<0&&(i[a]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[a]=t.domainMax),t.domainMid!=null)){u=t.domainMid;const l=u>i[a]?a+1:u<i[0]?0:a;l!==a&&n.warn("Scale domainMid exceeds domain min or max.",u),i.splice(l,0,u)}return e.domain(FI(o,i,n)),o===m$&&e.unknown(t.domainImplicit?qw:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&S$(e,t.nice)||null),i.length}function Bne(e,t,n){return t?(e.domain(FI(e.type,t,n)),t.length):-1}function jne(e,t,n,r,i,o){var s=Math.abs(_e(n)-n[0]),a=s/(s-2*r),u=e===cs?z_(t,null,a):e===Bp?M0(t,null,a,.5):e===Ip?M0(t,null,a,i||1):e===iv?I_(t,null,a,o||1):L_(t,null,a);return t=t.slice(),t[0]=u[0],t[t.length-1]=u[1],t}function FI(e,t,n){if(H8(e)){var r=Math.abs(t.reduce((i,o)=>i+(o<0?-1:o>0?1:0),0));r!==t.length&&n.warn("Log scale domain includes zero: "+G(t))}return t}function Une(e,t,n){let r=t.bins;if(r&&!I(r)){const i=e.domain(),o=i[0],s=_e(i),a=r.step;let u=r.start==null?o:r.start,l=r.stop==null?s:r.stop;a||z("Scale bins parameter missing step property."),u<o&&(u=a*Math.ceil(o/a)),l>s&&(l=a*Math.floor(s/a)),r=yr(u,l+a/2,a)}return r?e.bins=r:e.bins&&delete e.bins,e.type===y$&&(r?!t.domain&&!t.domainRaw&&(e.domain(r),n=r.length):e.bins=e.domain()),n}function Wne(e,t,n){var r=e.type,i=t.round||!1,o=t.range;if(t.rangeStep!=null)o=qne(r,t,n);else if(t.scheme&&(o=Hne(r,t,n),pe(o))){if(e.interpolator)return e.interpolator(o);z(`Scale type ${r} does not support interpolating color schemes.`)}if(o&&G8(r))return e.interpolator(av(dE(o,t.reverse),t.interpolate,t.interpolateGamma));o&&t.interpolate&&e.interpolate?e.interpolate(w$(t.interpolate,t.interpolateGamma)):pe(e.round)?e.round(i):pe(e.rangeRound)&&e.interpolate(i?Lp:Pa),o&&e.range(dE(o,t.reverse))}function qne(e,t,n){e!==I8&&e!==Kw&&z("Only band and point scales support rangeStep.");var r=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===Kw?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*g$(n,i,r)]}function Hne(e,t,n){var r=t.schemeExtent,i,o;return I(t.scheme)?o=av(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),o=E$(i),o||z(`Unrecognized scheme name: ${t.scheme}`)),n=e===sv?n+1:e===y$?n-1:e===Gc||e===ov?+t.schemeCount||Dne:n,G8(e)?cN(o,r,t.reverse):pe(o)?X8(cN(o,r),n):e===m$?o:o.slice(0,n)}function cN(e,t,n){return pe(e)&&(t||n)?Y8(e,dE(t||[0,1],n)):e}function dE(e,t){return t?e.slice().reverse():e}function TI(e){P.call(this,null,e)}V(TI,P,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(yl(e.sort)),this.modified(n),t}});const fN="zero",MI="center",NI="normalize",OI=["y0","y1"];function fC(e){P.call(this,null,e)}fC.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:fN,values:[fN,MI,NI]},{name:"as",type:"string",array:!0,length:2,default:OI}]};V(fC,P,{transform(e,t){var n=e.as||OI,r=n[0],i=n[1],o=yl(e.sort),s=e.field||Sf,a=e.offset===MI?Gne:e.offset===NI?Vne:Yne,u,l,c,f;for(u=Xne(t.source,e.groupby,o,s),l=0,c=u.length,f=u.max;l<c;++l)a(u[l],f,s,r,i);return t.reflow(e.modified()).modifies(n)}});function Gne(e,t,n,r,i){for(var o=(t-e.sum)/2,s=e.length,a=0,u;a<s;++a)u=e[a],u[r]=o,u[i]=o+=Math.abs(n(u))}function Vne(e,t,n,r,i){for(var o=1/e.sum,s=0,a=e.length,u=0,l=0,c;u<a;++u)c=e[u],c[r]=s,c[i]=s=o*(l+=Math.abs(n(c)))}function Yne(e,t,n,r,i){for(var o=0,s=0,a=e.length,u=0,l,c;u<a;++u)c=e[u],l=+n(c),l<0?(c[r]=s,c[i]=s+=l):(c[r]=o,c[i]=o+=l)}function Xne(e,t,n,r){var i=[],o=g=>g(c),s,a,u,l,c,f,d,h,p;if(t==null)i.push(e.slice());else for(s={},a=0,u=e.length;a<u;++a)c=e[a],f=t.map(o),d=s[f],d||(s[f]=d=[],i.push(d)),d.push(c);for(f=0,p=0,l=i.length;f<l;++f){for(d=i[f],a=0,h=0,u=d.length;a<u;++a)h+=Math.abs(r(d[a]));d.sum=h,h>p&&(p=h),n&&d.sort(n)}return i.max=p,i}const Qne=Object.freeze(Object.defineProperty({__proto__:null,axisticks:bI,datajoin:wI,encode:EI,legendentries:SI,linkpath:lC,pie:cC,scale:AI,sortitems:TI,stack:fC},Symbol.toStringTag,{value:"Module"}));var ue=1e-6,a1=1e-12,ve=Math.PI,ut=ve/2,u1=ve/4,Nn=ve*2,ct=180/ve,me=ve/180,Se=Math.abs,Rf=Math.atan,Hr=Math.atan2,le=Math.cos,Qg=Math.ceil,DI=Math.exp,hE=Math.hypot,l1=Math.log,F2=Math.pow,se=Math.sin,Dr=Math.sign||function(e){return e>0?1:e<0?-1:0},On=Math.sqrt,dC=Math.tan;function RI(e){return e>1?0:e<-1?ve:Math.acos(e)}function ir(e){return e>1?ut:e<-1?-ut:Math.asin(e)}function Ut(){}function c1(e,t){e&&hN.hasOwnProperty(e.type)&&hN[e.type](e,t)}var dN={Feature:function(e,t){c1(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)c1(n[r].geometry,t)}},hN={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){pE(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)pE(n[r],t,0)},Polygon:function(e,t){pN(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)pN(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)c1(n[r],t)}};function pE(e,t,n){var r=-1,i=e.length-n,o;for(t.lineStart();++r<i;)o=e[r],t.point(o[0],o[1],o[2]);t.lineEnd()}function pN(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)pE(e[n],t,1);t.polygonEnd()}function Bo(e,t){e&&dN.hasOwnProperty(e.type)?dN[e.type](e,t):c1(e,t)}var f1=new Tn,d1=new Tn,PI,LI,gE,mE,yE,fo={point:Ut,lineStart:Ut,lineEnd:Ut,polygonStart:function(){f1=new Tn,fo.lineStart=Kne,fo.lineEnd=Jne},polygonEnd:function(){var e=+f1;d1.add(e<0?Nn+e:e),this.lineStart=this.lineEnd=this.point=Ut},sphere:function(){d1.add(Nn)}};function Kne(){fo.point=Zne}function Jne(){zI(PI,LI)}function Zne(e,t){fo.point=zI,PI=e,LI=t,e*=me,t*=me,gE=e,mE=le(t=t/2+u1),yE=se(t)}function zI(e,t){e*=me,t*=me,t=t/2+u1;var n=e-gE,r=n>=0?1:-1,i=r*n,o=le(t),s=se(t),a=yE*s,u=mE*o+a*le(i),l=a*r*se(i);f1.add(Hr(l,u)),gE=e,mE=o,yE=s}function ere(e){return d1=new Tn,Bo(e,fo),d1*2}function h1(e){return[Hr(e[1],e[0]),ir(e[2])]}function Yu(e){var t=e[0],n=e[1],r=le(n);return[r*le(t),r*se(t),se(n)]}function Kg(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Zc(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function T2(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Jg(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function p1(e){var t=On(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var tt,Un,ot,hr,fu,II,BI,Ec,mh,Os,fs,Lo={point:vE,lineStart:gN,lineEnd:mN,polygonStart:function(){Lo.point=UI,Lo.lineStart=tre,Lo.lineEnd=nre,mh=new Tn,fo.polygonStart()},polygonEnd:function(){fo.polygonEnd(),Lo.point=vE,Lo.lineStart=gN,Lo.lineEnd=mN,f1<0?(tt=-(ot=180),Un=-(hr=90)):mh>ue?hr=90:mh<-ue&&(Un=-90),fs[0]=tt,fs[1]=ot},sphere:function(){tt=-(ot=180),Un=-(hr=90)}};function vE(e,t){Os.push(fs=[tt=e,ot=e]),t<Un&&(Un=t),t>hr&&(hr=t)}function jI(e,t){var n=Yu([e*me,t*me]);if(Ec){var r=Zc(Ec,n),i=[r[1],-r[0],0],o=Zc(i,r);p1(o),o=h1(o);var s=e-fu,a=s>0?1:-1,u=o[0]*ct*a,l,c=Se(s)>180;c^(a*fu<u&&u<a*e)?(l=o[1]*ct,l>hr&&(hr=l)):(u=(u+360)%360-180,c^(a*fu<u&&u<a*e)?(l=-o[1]*ct,l<Un&&(Un=l)):(t<Un&&(Un=t),t>hr&&(hr=t))),c?e<fu?dr(tt,e)>dr(tt,ot)&&(ot=e):dr(e,ot)>dr(tt,ot)&&(tt=e):ot>=tt?(e<tt&&(tt=e),e>ot&&(ot=e)):e>fu?dr(tt,e)>dr(tt,ot)&&(ot=e):dr(e,ot)>dr(tt,ot)&&(tt=e)}else Os.push(fs=[tt=e,ot=e]);t<Un&&(Un=t),t>hr&&(hr=t),Ec=n,fu=e}function gN(){Lo.point=jI}function mN(){fs[0]=tt,fs[1]=ot,Lo.point=vE,Ec=null}function UI(e,t){if(Ec){var n=e-fu;mh.add(Se(n)>180?n+(n>0?360:-360):n)}else II=e,BI=t;fo.point(e,t),jI(e,t)}function tre(){fo.lineStart()}function nre(){UI(II,BI),fo.lineEnd(),Se(mh)>ue&&(tt=-(ot=180)),fs[0]=tt,fs[1]=ot,Ec=null}function dr(e,t){return(t-=e)<0?t+360:t}function rre(e,t){return e[0]-t[0]}function yN(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function ire(e){var t,n,r,i,o,s,a;if(hr=ot=-(tt=Un=1/0),Os=[],Bo(e,Lo),n=Os.length){for(Os.sort(rre),t=1,r=Os[0],o=[r];t<n;++t)i=Os[t],yN(r,i[0])||yN(r,i[1])?(dr(r[0],i[1])>dr(r[0],r[1])&&(r[1]=i[1]),dr(i[0],r[1])>dr(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(s=-1/0,n=o.length-1,t=0,r=o[n];t<=n;r=i,++t)i=o[t],(a=dr(r[1],i[0]))>s&&(s=a,tt=i[0],ot=r[1])}return Os=fs=null,tt===1/0||Un===1/0?[[NaN,NaN],[NaN,NaN]]:[[tt,Un],[ot,hr]]}var Ud,g1,m1,y1,v1,x1,b1,w1,xE,bE,wE,WI,qI,_n,kn,$n,gi={sphere:Ut,point:hC,lineStart:vN,lineEnd:xN,polygonStart:function(){gi.lineStart=are,gi.lineEnd=ure},polygonEnd:function(){gi.lineStart=vN,gi.lineEnd=xN}};function hC(e,t){e*=me,t*=me;var n=le(t);Kp(n*le(e),n*se(e),se(t))}function Kp(e,t,n){++Ud,m1+=(e-m1)/Ud,y1+=(t-y1)/Ud,v1+=(n-v1)/Ud}function vN(){gi.point=ore}function ore(e,t){e*=me,t*=me;var n=le(t);_n=n*le(e),kn=n*se(e),$n=se(t),gi.point=sre,Kp(_n,kn,$n)}function sre(e,t){e*=me,t*=me;var n=le(t),r=n*le(e),i=n*se(e),o=se(t),s=Hr(On((s=kn*o-$n*i)*s+(s=$n*r-_n*o)*s+(s=_n*i-kn*r)*s),_n*r+kn*i+$n*o);g1+=s,x1+=s*(_n+(_n=r)),b1+=s*(kn+(kn=i)),w1+=s*($n+($n=o)),Kp(_n,kn,$n)}function xN(){gi.point=hC}function are(){gi.point=lre}function ure(){HI(WI,qI),gi.point=hC}function lre(e,t){WI=e,qI=t,e*=me,t*=me,gi.point=HI;var n=le(t);_n=n*le(e),kn=n*se(e),$n=se(t),Kp(_n,kn,$n)}function HI(e,t){e*=me,t*=me;var n=le(t),r=n*le(e),i=n*se(e),o=se(t),s=kn*o-$n*i,a=$n*r-_n*o,u=_n*i-kn*r,l=hE(s,a,u),c=ir(l),f=l&&-c/l;xE.add(f*s),bE.add(f*a),wE.add(f*u),g1+=c,x1+=c*(_n+(_n=r)),b1+=c*(kn+(kn=i)),w1+=c*($n+($n=o)),Kp(_n,kn,$n)}function cre(e){Ud=g1=m1=y1=v1=x1=b1=w1=0,xE=new Tn,bE=new Tn,wE=new Tn,Bo(e,gi);var t=+xE,n=+bE,r=+wE,i=hE(t,n,r);return i<a1&&(t=x1,n=b1,r=w1,g1<ue&&(t=m1,n=y1,r=v1),i=hE(t,n,r),i<a1)?[NaN,NaN]:[Hr(n,t)*ct,ir(r/i)*ct]}function EE(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function SE(e,t){return Se(e)>ve&&(e-=Math.round(e/Nn)*Nn),[e,t]}SE.invert=SE;function GI(e,t,n){return(e%=Nn)?t||n?EE(wN(e),EN(t,n)):wN(e):t||n?EN(t,n):SE}function bN(e){return function(t,n){return t+=e,Se(t)>ve&&(t-=Math.round(t/Nn)*Nn),[t,n]}}function wN(e){var t=bN(e);return t.invert=bN(-e),t}function EN(e,t){var n=le(e),r=se(e),i=le(t),o=se(t);function s(a,u){var l=le(u),c=le(a)*l,f=se(a)*l,d=se(u),h=d*n+c*r;return[Hr(f*i-h*o,c*n-d*r),ir(h*i+f*o)]}return s.invert=function(a,u){var l=le(u),c=le(a)*l,f=se(a)*l,d=se(u),h=d*i-f*o;return[Hr(f*i+d*o,c*n+h*r),ir(h*n-c*r)]},s}function fre(e){e=GI(e[0]*me,e[1]*me,e.length>2?e[2]*me:0);function t(n){return n=e(n[0]*me,n[1]*me),n[0]*=ct,n[1]*=ct,n}return t.invert=function(n){return n=e.invert(n[0]*me,n[1]*me),n[0]*=ct,n[1]*=ct,n},t}function dre(e,t,n,r,i,o){if(n){var s=le(t),a=se(t),u=r*n;i==null?(i=t+r*Nn,o=t-u/2):(i=SN(s,i),o=SN(s,o),(r>0?i<o:i>o)&&(i+=r*Nn));for(var l,c=i;r>0?c>o:c<o;c-=u)l=h1([s,-a*le(c),-a*se(c)]),e.point(l[0],l[1])}}function SN(e,t){t=Yu(t),t[0]-=e,p1(t);var n=RI(-t[1]);return((-t[2]<0?-n:n)+Nn-ue)%Nn}function VI(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:Ut,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function Hm(e,t){return Se(e[0]-t[0])<ue&&Se(e[1]-t[1])<ue}function Zg(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function YI(e,t,n,r,i){var o=[],s=[],a,u;if(e.forEach(function(p){if(!((g=p.length-1)<=0)){var g,m=p[0],y=p[g],v;if(Hm(m,y)){if(!m[2]&&!y[2]){for(i.lineStart(),a=0;a<g;++a)i.point((m=p[a])[0],m[1]);i.lineEnd();return}y[0]+=2*ue}o.push(v=new Zg(m,p,null,!0)),s.push(v.o=new Zg(m,null,v,!1)),o.push(v=new Zg(y,p,null,!1)),s.push(v.o=new Zg(y,null,v,!0))}}),!!o.length){for(s.sort(t),_N(o),_N(s),a=0,u=s.length;a<u;++a)s[a].e=n=!n;for(var l=o[0],c,f;;){for(var d=l,h=!0;d.v;)if((d=d.n)===l)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(a=0,u=c.length;a<u;++a)i.point((f=c[a])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(c=d.p.z,a=c.length-1;a>=0;--a)i.point((f=c[a])[0],f[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,c=d.z,h=!h}while(!d.v);i.lineEnd()}}}function _N(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function M2(e){return Se(e[0])<=ve?e[0]:Dr(e[0])*((Se(e[0])+ve)%Nn-ve)}function hre(e,t){var n=M2(t),r=t[1],i=se(r),o=[se(n),-le(n),0],s=0,a=0,u=new Tn;i===1?r=ut+ue:i===-1&&(r=-ut-ue);for(var l=0,c=e.length;l<c;++l)if(d=(f=e[l]).length)for(var f,d,h=f[d-1],p=M2(h),g=h[1]/2+u1,m=se(g),y=le(g),v=0;v<d;++v,p=b,m=S,y=E,h=x){var x=f[v],b=M2(x),w=x[1]/2+u1,S=se(w),E=le(w),_=b-p,$=_>=0?1:-1,k=$*_,A=k>ve,R=m*S;if(u.add(Hr(R*$*se(k),y*E+R*le(k))),s+=A?_+$*Nn:_,A^p>=n^b>=n){var C=Zc(Yu(h),Yu(x));p1(C);var T=Zc(o,C);p1(T);var F=(A^_>=0?-1:1)*ir(T[2]);(r>F||r===F&&(C[0]||C[1]))&&(a+=A^_>=0?1:-1)}}return(s<-ue||s<ue&&u<-a1)^a&1}function XI(e,t,n,r){return function(i){var o=t(i),s=VI(),a=t(s),u=!1,l,c,f,d={point:h,lineStart:g,lineEnd:m,polygonStart:function(){d.point=y,d.lineStart=v,d.lineEnd=x,c=[],l=[]},polygonEnd:function(){d.point=h,d.lineStart=g,d.lineEnd=m,c=GP(c);var b=hre(l,r);c.length?(u||(i.polygonStart(),u=!0),YI(c,gre,b,n,i)):b&&(u||(i.polygonStart(),u=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),u&&(i.polygonEnd(),u=!1),c=l=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(b,w){e(b,w)&&i.point(b,w)}function p(b,w){o.point(b,w)}function g(){d.point=p,o.lineStart()}function m(){d.point=h,o.lineEnd()}function y(b,w){f.push([b,w]),a.point(b,w)}function v(){a.lineStart(),f=[]}function x(){y(f[0][0],f[0][1]),a.lineEnd();var b=a.clean(),w=s.result(),S,E=w.length,_,$,k;if(f.pop(),l.push(f),f=null,!!E){if(b&1){if($=w[0],(_=$.length-1)>0){for(u||(i.polygonStart(),u=!0),i.lineStart(),S=0;S<_;++S)i.point((k=$[S])[0],k[1]);i.lineEnd()}return}E>1&&b&2&&w.push(w.pop().concat(w.shift())),c.push(w.filter(pre))}}return d}}function pre(e){return e.length>1}function gre(e,t){return((e=e.x)[0]<0?e[1]-ut-ue:ut-e[1])-((t=t.x)[0]<0?t[1]-ut-ue:ut-t[1])}const kN=XI(function(){return!0},mre,vre,[-ve,-ut]);function mre(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(o,s){var a=o>0?ve:-ve,u=Se(o-t);Se(u-ve)<ue?(e.point(t,n=(n+s)/2>0?ut:-ut),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(o,n),i=0):r!==a&&u>=ve&&(Se(t-r)<ue&&(t-=r*ue),Se(o-a)<ue&&(o-=a*ue),n=yre(t,n,o,s),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),i=0),e.point(t=o,n=s),r=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function yre(e,t,n,r){var i,o,s=se(e-n);return Se(s)>ue?Rf((se(t)*(o=le(r))*se(n)-se(r)*(i=le(t))*se(e))/(i*o*s)):(t+r)/2}function vre(e,t,n,r){var i;if(e==null)i=n*ut,r.point(-ve,i),r.point(0,i),r.point(ve,i),r.point(ve,0),r.point(ve,-i),r.point(0,-i),r.point(-ve,-i),r.point(-ve,0),r.point(-ve,i);else if(Se(e[0]-t[0])>ue){var o=e[0]<t[0]?ve:-ve;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(t[0],t[1])}function xre(e){var t=le(e),n=6*me,r=t>0,i=Se(t)>ue;function o(c,f,d,h){dre(h,e,n,d,c,f)}function s(c,f){return le(c)*le(f)>t}function a(c){var f,d,h,p,g;return{lineStart:function(){p=h=!1,g=1},point:function(m,y){var v=[m,y],x,b=s(m,y),w=r?b?0:l(m,y):b?l(m+(m<0?ve:-ve),y):0;if(!f&&(p=h=b)&&c.lineStart(),b!==h&&(x=u(f,v),(!x||Hm(f,x)||Hm(v,x))&&(v[2]=1)),b!==h)g=0,b?(c.lineStart(),x=u(v,f),c.point(x[0],x[1])):(x=u(f,v),c.point(x[0],x[1],2),c.lineEnd()),f=x;else if(i&&f&&r^b){var S;!(w&d)&&(S=u(v,f,!0))&&(g=0,r?(c.lineStart(),c.point(S[0][0],S[0][1]),c.point(S[1][0],S[1][1]),c.lineEnd()):(c.point(S[1][0],S[1][1]),c.lineEnd(),c.lineStart(),c.point(S[0][0],S[0][1],3)))}b&&(!f||!Hm(f,v))&&c.point(v[0],v[1]),f=v,h=b,d=w},lineEnd:function(){h&&c.lineEnd(),f=null},clean:function(){return g|(p&&h)<<1}}}function u(c,f,d){var h=Yu(c),p=Yu(f),g=[1,0,0],m=Zc(h,p),y=Kg(m,m),v=m[0],x=y-v*v;if(!x)return!d&&c;var b=t*y/x,w=-t*v/x,S=Zc(g,m),E=Jg(g,b),_=Jg(m,w);T2(E,_);var $=S,k=Kg(E,$),A=Kg($,$),R=k*k-A*(Kg(E,E)-1);if(!(R<0)){var C=On(R),T=Jg($,(-k-C)/A);if(T2(T,E),T=h1(T),!d)return T;var F=c[0],N=f[0],D=c[1],M=f[1],O;N<F&&(O=F,F=N,N=O);var B=N-F,X=Se(B-ve)<ue,te=X||B<ue;if(!X&&M<D&&(O=D,D=M,M=O),te?X?D+M>0^T[1]<(Se(T[0]-F)<ue?D:M):D<=T[1]&&T[1]<=M:B>ve^(F<=T[0]&&T[0]<=N)){var xe=Jg($,(-k+C)/A);return T2(xe,E),[T,h1(xe)]}}}function l(c,f){var d=r?e:ve-e,h=0;return c<-d?h|=1:c>d&&(h|=2),f<-d?h|=4:f>d&&(h|=8),h}return XI(s,a,o,r?[0,-e]:[-ve,e-ve])}function bre(e,t,n,r,i,o){var s=e[0],a=e[1],u=t[0],l=t[1],c=0,f=1,d=u-s,h=l-a,p;if(p=n-s,!(!d&&p>0)){if(p/=d,d<0){if(p<c)return;p<f&&(f=p)}else if(d>0){if(p>f)return;p>c&&(c=p)}if(p=i-s,!(!d&&p<0)){if(p/=d,d<0){if(p>f)return;p>c&&(c=p)}else if(d>0){if(p<c)return;p<f&&(f=p)}if(p=r-a,!(!h&&p>0)){if(p/=h,h<0){if(p<c)return;p<f&&(f=p)}else if(h>0){if(p>f)return;p>c&&(c=p)}if(p=o-a,!(!h&&p<0)){if(p/=h,h<0){if(p>f)return;p>c&&(c=p)}else if(h>0){if(p<c)return;p<f&&(f=p)}return c>0&&(e[0]=s+c*d,e[1]=a+c*h),f<1&&(t[0]=s+f*d,t[1]=a+f*h),!0}}}}}var Wd=1e9,em=-Wd;function QI(e,t,n,r){function i(l,c){return e<=l&&l<=n&&t<=c&&c<=r}function o(l,c,f,d){var h=0,p=0;if(l==null||(h=s(l,f))!==(p=s(c,f))||u(l,c)<0^f>0)do d.point(h===0||h===3?e:n,h>1?r:t);while((h=(h+f+4)%4)!==p);else d.point(c[0],c[1])}function s(l,c){return Se(l[0]-e)<ue?c>0?0:3:Se(l[0]-n)<ue?c>0?2:1:Se(l[1]-t)<ue?c>0?1:0:c>0?3:2}function a(l,c){return u(l.x,c.x)}function u(l,c){var f=s(l,1),d=s(c,1);return f!==d?f-d:f===0?c[1]-l[1]:f===1?l[0]-c[0]:f===2?l[1]-c[1]:c[0]-l[0]}return function(l){var c=l,f=VI(),d,h,p,g,m,y,v,x,b,w,S,E={point:_,lineStart:R,lineEnd:C,polygonStart:k,polygonEnd:A};function _(F,N){i(F,N)&&c.point(F,N)}function $(){for(var F=0,N=0,D=h.length;N<D;++N)for(var M=h[N],O=1,B=M.length,X=M[0],te,xe,de=X[0],Oe=X[1];O<B;++O)te=de,xe=Oe,X=M[O],de=X[0],Oe=X[1],xe<=r?Oe>r&&(de-te)*(r-xe)>(Oe-xe)*(e-te)&&++F:Oe<=r&&(de-te)*(r-xe)<(Oe-xe)*(e-te)&&--F;return F}function k(){c=f,d=[],h=[],S=!0}function A(){var F=$(),N=S&&F,D=(d=GP(d)).length;(N||D)&&(l.polygonStart(),N&&(l.lineStart(),o(null,null,1,l),l.lineEnd()),D&&YI(d,a,F,o,l),l.polygonEnd()),c=l,d=h=p=null}function R(){E.point=T,h&&h.push(p=[]),w=!0,b=!1,v=x=NaN}function C(){d&&(T(g,m),y&&b&&f.rejoin(),d.push(f.result())),E.point=_,b&&c.lineEnd()}function T(F,N){var D=i(F,N);if(h&&p.push([F,N]),w)g=F,m=N,y=D,w=!1,D&&(c.lineStart(),c.point(F,N));else if(D&&b)c.point(F,N);else{var M=[v=Math.max(em,Math.min(Wd,v)),x=Math.max(em,Math.min(Wd,x))],O=[F=Math.max(em,Math.min(Wd,F)),N=Math.max(em,Math.min(Wd,N))];bre(M,O,e,t,n,r)?(b||(c.lineStart(),c.point(M[0],M[1])),c.point(O[0],O[1]),D||c.lineEnd(),S=!1):D&&(c.lineStart(),c.point(F,N),S=!1)}v=F,x=N,b=D}return E}}function $N(e,t,n){var r=yr(e,t-ue,n).concat(t);return function(i){return r.map(function(o){return[i,o]})}}function CN(e,t,n){var r=yr(e,t-ue,n).concat(t);return function(i){return r.map(function(o){return[o,i]})}}function wre(){var e,t,n,r,i,o,s,a,u=10,l=u,c=90,f=360,d,h,p,g,m=2.5;function y(){return{type:"MultiLineString",coordinates:v()}}function v(){return yr(Qg(r/c)*c,n,c).map(p).concat(yr(Qg(a/f)*f,s,f).map(g)).concat(yr(Qg(t/u)*u,e,u).filter(function(x){return Se(x%c)>ue}).map(d)).concat(yr(Qg(o/l)*l,i,l).filter(function(x){return Se(x%f)>ue}).map(h))}return y.lines=function(){return v().map(function(x){return{type:"LineString",coordinates:x}})},y.outline=function(){return{type:"Polygon",coordinates:[p(r).concat(g(s).slice(1),p(n).reverse().slice(1),g(a).reverse().slice(1))]}},y.extent=function(x){return arguments.length?y.extentMajor(x).extentMinor(x):y.extentMinor()},y.extentMajor=function(x){return arguments.length?(r=+x[0][0],n=+x[1][0],a=+x[0][1],s=+x[1][1],r>n&&(x=r,r=n,n=x),a>s&&(x=a,a=s,s=x),y.precision(m)):[[r,a],[n,s]]},y.extentMinor=function(x){return arguments.length?(t=+x[0][0],e=+x[1][0],o=+x[0][1],i=+x[1][1],t>e&&(x=t,t=e,e=x),o>i&&(x=o,o=i,i=x),y.precision(m)):[[t,o],[e,i]]},y.step=function(x){return arguments.length?y.stepMajor(x).stepMinor(x):y.stepMinor()},y.stepMajor=function(x){return arguments.length?(c=+x[0],f=+x[1],y):[c,f]},y.stepMinor=function(x){return arguments.length?(u=+x[0],l=+x[1],y):[u,l]},y.precision=function(x){return arguments.length?(m=+x,d=$N(o,i,90),h=CN(t,e,m),p=$N(a,s,90),g=CN(r,n,m),y):m},y.extentMajor([[-180,-90+ue],[180,90-ue]]).extentMinor([[-180,-80-ue],[180,80+ue]])}const ip=e=>e;var N2=new Tn,_E=new Tn,KI,JI,kE,$E,Is={point:Ut,lineStart:Ut,lineEnd:Ut,polygonStart:function(){Is.lineStart=Ere,Is.lineEnd=_re},polygonEnd:function(){Is.lineStart=Is.lineEnd=Is.point=Ut,N2.add(Se(_E)),_E=new Tn},result:function(){var e=N2/2;return N2=new Tn,e}};function Ere(){Is.point=Sre}function Sre(e,t){Is.point=ZI,KI=kE=e,JI=$E=t}function ZI(e,t){_E.add($E*e-kE*t),kE=e,$E=t}function _re(){ZI(KI,JI)}const AN=Is;var ef=1/0,E1=ef,op=-ef,S1=op,kre={point:$re,lineStart:Ut,lineEnd:Ut,polygonStart:Ut,polygonEnd:Ut,result:function(){var e=[[ef,E1],[op,S1]];return op=S1=-(E1=ef=1/0),e}};function $re(e,t){e<ef&&(ef=e),e>op&&(op=e),t<E1&&(E1=t),t>S1&&(S1=t)}const _1=kre;var CE=0,AE=0,qd=0,k1=0,$1=0,cc=0,FE=0,TE=0,Hd=0,e9,t9,Xi,Qi,hi={point:Xu,lineStart:FN,lineEnd:TN,polygonStart:function(){hi.lineStart=Fre,hi.lineEnd=Tre},polygonEnd:function(){hi.point=Xu,hi.lineStart=FN,hi.lineEnd=TN},result:function(){var e=Hd?[FE/Hd,TE/Hd]:cc?[k1/cc,$1/cc]:qd?[CE/qd,AE/qd]:[NaN,NaN];return CE=AE=qd=k1=$1=cc=FE=TE=Hd=0,e}};function Xu(e,t){CE+=e,AE+=t,++qd}function FN(){hi.point=Cre}function Cre(e,t){hi.point=Are,Xu(Xi=e,Qi=t)}function Are(e,t){var n=e-Xi,r=t-Qi,i=On(n*n+r*r);k1+=i*(Xi+e)/2,$1+=i*(Qi+t)/2,cc+=i,Xu(Xi=e,Qi=t)}function TN(){hi.point=Xu}function Fre(){hi.point=Mre}function Tre(){n9(e9,t9)}function Mre(e,t){hi.point=n9,Xu(e9=Xi=e,t9=Qi=t)}function n9(e,t){var n=e-Xi,r=t-Qi,i=On(n*n+r*r);k1+=i*(Xi+e)/2,$1+=i*(Qi+t)/2,cc+=i,i=Qi*e-Xi*t,FE+=i*(Xi+e),TE+=i*(Qi+t),Hd+=i*3,Xu(Xi=e,Qi=t)}const MN=hi;function r9(e){this._context=e}r9.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Nn);break}}},result:Ut};var ME=new Tn,O2,i9,o9,Gd,Vd,C1={point:Ut,lineStart:function(){C1.point=Nre},lineEnd:function(){O2&&s9(i9,o9),C1.point=Ut},polygonStart:function(){O2=!0},polygonEnd:function(){O2=null},result:function(){var e=+ME;return ME=new Tn,e}};function Nre(e,t){C1.point=s9,i9=Gd=e,o9=Vd=t}function s9(e,t){Gd-=e,Vd-=t,ME.add(On(Gd*Gd+Vd*Vd)),Gd=e,Vd=t}const NN=C1;let ON,A1,DN,RN;class PN{constructor(t){this._append=t==null?a9:Ore(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==DN||this._append!==A1){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,DN=r,A1=this._append,RN=this._,this._=i}this._+=RN;break}}}result(){const t=this._;return this._="",t.length?t:null}}function a9(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Ore(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return a9;if(t!==ON){const n=10**t;ON=t,A1=function(i){let o=1;this._+=i[0];for(const s=i.length;o<s;++o)this._+=Math.round(arguments[o]*n)/n+i[o]}}return A1}function u9(e,t){let n=3,r=4.5,i,o;function s(a){return a&&(typeof r=="function"&&o.pointRadius(+r.apply(this,arguments)),Bo(a,i(o))),o.result()}return s.area=function(a){return Bo(a,i(AN)),AN.result()},s.measure=function(a){return Bo(a,i(NN)),NN.result()},s.bounds=function(a){return Bo(a,i(_1)),_1.result()},s.centroid=function(a){return Bo(a,i(MN)),MN.result()},s.projection=function(a){return arguments.length?(i=a==null?(e=null,ip):(e=a).stream,s):e},s.context=function(a){return arguments.length?(o=a==null?(t=null,new PN(n)):new r9(t=a),typeof r!="function"&&o.pointRadius(r),s):t},s.pointRadius=function(a){return arguments.length?(r=typeof a=="function"?a:(o.pointRadius(+a),+a),s):r},s.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const u=Math.floor(a);if(!(u>=0))throw new RangeError(`invalid digits: ${a}`);n=u}return t===null&&(o=new PN(n)),s},s.projection(e).digits(n).context(t)}function bv(e){return function(t){var n=new NE;for(var r in e)n[r]=e[r];return n.stream=t,n}}function NE(){}NE.prototype={constructor:NE,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function pC(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),Bo(n,e.stream(_1)),t(_1.result()),r!=null&&e.clipExtent(r),e}function wv(e,t,n){return pC(e,function(r){var i=t[1][0]-t[0][0],o=t[1][1]-t[0][1],s=Math.min(i/(r[1][0]-r[0][0]),o/(r[1][1]-r[0][1])),a=+t[0][0]+(i-s*(r[1][0]+r[0][0]))/2,u=+t[0][1]+(o-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([a,u])},n)}function gC(e,t,n){return wv(e,[[0,0],t],n)}function mC(e,t,n){return pC(e,function(r){var i=+t,o=i/(r[1][0]-r[0][0]),s=(i-o*(r[1][0]+r[0][0]))/2,a=-o*r[0][1];e.scale(150*o).translate([s,a])},n)}function yC(e,t,n){return pC(e,function(r){var i=+t,o=i/(r[1][1]-r[0][1]),s=-o*r[0][0],a=(i-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([s,a])},n)}var LN=16,Dre=le(30*me);function zN(e,t){return+t?Pre(e,t):Rre(e)}function Rre(e){return bv({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function Pre(e,t){function n(r,i,o,s,a,u,l,c,f,d,h,p,g,m){var y=l-r,v=c-i,x=y*y+v*v;if(x>4*t&&g--){var b=s+d,w=a+h,S=u+p,E=On(b*b+w*w+S*S),_=ir(S/=E),$=Se(Se(S)-1)<ue||Se(o-f)<ue?(o+f)/2:Hr(w,b),k=e($,_),A=k[0],R=k[1],C=A-r,T=R-i,F=v*C-y*T;(F*F/x>t||Se((y*C+v*T)/x-.5)>.3||s*d+a*h+u*p<Dre)&&(n(r,i,o,s,a,u,A,R,$,b/=E,w/=E,S,g,m),m.point(A,R),n(A,R,$,b,w,S,l,c,f,d,h,p,g,m))}}return function(r){var i,o,s,a,u,l,c,f,d,h,p,g,m={point:y,lineStart:v,lineEnd:b,polygonStart:function(){r.polygonStart(),m.lineStart=w},polygonEnd:function(){r.polygonEnd(),m.lineStart=v}};function y(_,$){_=e(_,$),r.point(_[0],_[1])}function v(){f=NaN,m.point=x,r.lineStart()}function x(_,$){var k=Yu([_,$]),A=e(_,$);n(f,d,c,h,p,g,f=A[0],d=A[1],c=_,h=k[0],p=k[1],g=k[2],LN,r),r.point(f,d)}function b(){m.point=y,r.lineEnd()}function w(){v(),m.point=S,m.lineEnd=E}function S(_,$){x(i=_,$),o=f,s=d,a=h,u=p,l=g,m.point=x}function E(){n(f,d,c,h,p,g,o,s,i,a,u,l,LN,r),m.lineEnd=b,b()}return m}}var Lre=bv({point:function(e,t){this.stream.point(e*me,t*me)}});function zre(e){return bv({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function Ire(e,t,n,r,i){function o(s,a){return s*=r,a*=i,[t+e*s,n-e*a]}return o.invert=function(s,a){return[(s-t)/e*r,(n-a)/e*i]},o}function IN(e,t,n,r,i,o){if(!o)return Ire(e,t,n,r,i);var s=le(o),a=se(o),u=s*e,l=a*e,c=s/e,f=a/e,d=(a*n-s*t)/e,h=(a*t+s*n)/e;function p(g,m){return g*=r,m*=i,[u*g-l*m+t,n-l*g-u*m]}return p.invert=function(g,m){return[r*(c*g-f*m+d),i*(h-f*g-c*m)]},p}function wo(e){return l9(function(){return e})()}function l9(e){var t,n=150,r=480,i=250,o=0,s=0,a=0,u=0,l=0,c,f=0,d=1,h=1,p=null,g=kN,m=null,y,v,x,b=ip,w=.5,S,E,_,$,k;function A(F){return _(F[0]*me,F[1]*me)}function R(F){return F=_.invert(F[0],F[1]),F&&[F[0]*ct,F[1]*ct]}A.stream=function(F){return $&&k===F?$:$=Lre(zre(c)(g(S(b(k=F)))))},A.preclip=function(F){return arguments.length?(g=F,p=void 0,T()):g},A.postclip=function(F){return arguments.length?(b=F,m=y=v=x=null,T()):b},A.clipAngle=function(F){return arguments.length?(g=+F?xre(p=F*me):(p=null,kN),T()):p*ct},A.clipExtent=function(F){return arguments.length?(b=F==null?(m=y=v=x=null,ip):QI(m=+F[0][0],y=+F[0][1],v=+F[1][0],x=+F[1][1]),T()):m==null?null:[[m,y],[v,x]]},A.scale=function(F){return arguments.length?(n=+F,C()):n},A.translate=function(F){return arguments.length?(r=+F[0],i=+F[1],C()):[r,i]},A.center=function(F){return arguments.length?(o=F[0]%360*me,s=F[1]%360*me,C()):[o*ct,s*ct]},A.rotate=function(F){return arguments.length?(a=F[0]%360*me,u=F[1]%360*me,l=F.length>2?F[2]%360*me:0,C()):[a*ct,u*ct,l*ct]},A.angle=function(F){return arguments.length?(f=F%360*me,C()):f*ct},A.reflectX=function(F){return arguments.length?(d=F?-1:1,C()):d<0},A.reflectY=function(F){return arguments.length?(h=F?-1:1,C()):h<0},A.precision=function(F){return arguments.length?(S=zN(E,w=F*F),T()):On(w)},A.fitExtent=function(F,N){return wv(A,F,N)},A.fitSize=function(F,N){return gC(A,F,N)},A.fitWidth=function(F,N){return mC(A,F,N)},A.fitHeight=function(F,N){return yC(A,F,N)};function C(){var F=IN(n,0,0,d,h,f).apply(null,t(o,s)),N=IN(n,r-F[0],i-F[1],d,h,f);return c=GI(a,u,l),E=EE(t,N),_=EE(c,E),S=zN(E,w),T()}function T(){return $=k=null,A}return function(){return t=e.apply(this,arguments),A.invert=t.invert&&R,C()}}function vC(e){var t=0,n=ve/3,r=l9(e),i=r(t,n);return i.parallels=function(o){return arguments.length?r(t=o[0]*me,n=o[1]*me):[t*ct,n*ct]},i}function Bre(e){var t=le(e);function n(r,i){return[r*t,se(i)/t]}return n.invert=function(r,i){return[r/t,ir(i*t)]},n}function jre(e,t){var n=se(e),r=(n+se(t))/2;if(Se(r)<ue)return Bre(e);var i=1+n*(2*r-n),o=On(i)/r;function s(a,u){var l=On(i-2*r*se(u))/r;return[l*se(a*=r),o-l*le(a)]}return s.invert=function(a,u){var l=o-u,c=Hr(a,Se(l))*Dr(l);return l*r<0&&(c-=ve*Dr(a)*Dr(l)),[c/r,ir((i-(a*a+l*l)*r*r)/(2*r))]},s}function F1(){return vC(jre).scale(155.424).center([0,33.6442])}function c9(){return F1().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Ure(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function Wre(){var e,t,n=c9(),r,i=F1().rotate([154,0]).center([-2,58.5]).parallels([55,65]),o,s=F1().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,u,l={point:function(d,h){u=[d,h]}};function c(d){var h=d[0],p=d[1];return u=null,r.point(h,p),u||(o.point(h,p),u)||(a.point(h,p),u)}c.invert=function(d){var h=n.scale(),p=n.translate(),g=(d[0]-p[0])/h,m=(d[1]-p[1])/h;return(m>=.12&&m<.234&&g>=-.425&&g<-.214?i:m>=.166&&m<.234&&g>=-.214&&g<-.115?s:n).invert(d)},c.stream=function(d){return e&&t===d?e:e=Ure([n.stream(t=d),i.stream(d),s.stream(d)])},c.precision=function(d){return arguments.length?(n.precision(d),i.precision(d),s.precision(d),f()):n.precision()},c.scale=function(d){return arguments.length?(n.scale(d),i.scale(d*.35),s.scale(d),c.translate(n.translate())):n.scale()},c.translate=function(d){if(!arguments.length)return n.translate();var h=n.scale(),p=+d[0],g=+d[1];return r=n.translate(d).clipExtent([[p-.455*h,g-.238*h],[p+.455*h,g+.238*h]]).stream(l),o=i.translate([p-.307*h,g+.201*h]).clipExtent([[p-.425*h+ue,g+.12*h+ue],[p-.214*h-ue,g+.234*h-ue]]).stream(l),a=s.translate([p-.205*h,g+.212*h]).clipExtent([[p-.214*h+ue,g+.166*h+ue],[p-.115*h-ue,g+.234*h-ue]]).stream(l),f()},c.fitExtent=function(d,h){return wv(c,d,h)},c.fitSize=function(d,h){return gC(c,d,h)},c.fitWidth=function(d,h){return mC(c,d,h)},c.fitHeight=function(d,h){return yC(c,d,h)};function f(){return e=t=null,c}return c.scale(1070)}function f9(e){return function(t,n){var r=le(t),i=le(n),o=e(r*i);return o===1/0?[2,0]:[o*i*se(t),o*se(n)]}}function Jp(e){return function(t,n){var r=On(t*t+n*n),i=e(r),o=se(i),s=le(i);return[Hr(t*o,r*s),ir(r&&n*o/r)]}}var d9=f9(function(e){return On(2/(1+e))});d9.invert=Jp(function(e){return 2*ir(e/2)});function qre(){return wo(d9).scale(124.75).clipAngle(180-.001)}var h9=f9(function(e){return(e=RI(e))&&e/se(e)});h9.invert=Jp(function(e){return e});function Hre(){return wo(h9).scale(79.4188).clipAngle(180-.001)}function Ev(e,t){return[e,l1(dC((ut+t)/2))]}Ev.invert=function(e,t){return[e,2*Rf(DI(t))-ut]};function Gre(){return p9(Ev).scale(961/Nn)}function p9(e){var t=wo(e),n=t.center,r=t.scale,i=t.translate,o=t.clipExtent,s=null,a,u,l;t.scale=function(f){return arguments.length?(r(f),c()):r()},t.translate=function(f){return arguments.length?(i(f),c()):i()},t.center=function(f){return arguments.length?(n(f),c()):n()},t.clipExtent=function(f){return arguments.length?(f==null?s=a=u=l=null:(s=+f[0][0],a=+f[0][1],u=+f[1][0],l=+f[1][1]),c()):s==null?null:[[s,a],[u,l]]};function c(){var f=ve*r(),d=t(fre(t.rotate()).invert([0,0]));return o(s==null?[[d[0]-f,d[1]-f],[d[0]+f,d[1]+f]]:e===Ev?[[Math.max(d[0]-f,s),a],[Math.min(d[0]+f,u),l]]:[[s,Math.max(d[1]-f,a)],[u,Math.min(d[1]+f,l)]])}return c()}function tm(e){return dC((ut+e)/2)}function Vre(e,t){var n=le(e),r=e===t?se(e):l1(n/le(t))/l1(tm(t)/tm(e)),i=n*F2(tm(e),r)/r;if(!r)return Ev;function o(s,a){i>0?a<-ut+ue&&(a=-ut+ue):a>ut-ue&&(a=ut-ue);var u=i/F2(tm(a),r);return[u*se(r*s),i-u*le(r*s)]}return o.invert=function(s,a){var u=i-a,l=Dr(r)*On(s*s+u*u),c=Hr(s,Se(u))*Dr(u);return u*r<0&&(c-=ve*Dr(s)*Dr(u)),[c/r,2*Rf(F2(i/l,1/r))-ut]},o}function Yre(){return vC(Vre).scale(109.5).parallels([30,30])}function T1(e,t){return[e,t]}T1.invert=T1;function Xre(){return wo(T1).scale(152.63)}function Qre(e,t){var n=le(e),r=e===t?se(e):(n-le(t))/(t-e),i=n/r+e;if(Se(r)<ue)return T1;function o(s,a){var u=i-a,l=r*s;return[u*se(l),i-u*le(l)]}return o.invert=function(s,a){var u=i-a,l=Hr(s,Se(u))*Dr(u);return u*r<0&&(l-=ve*Dr(s)*Dr(u)),[l/r,i-Dr(r)*On(s*s+u*u)]},o}function Kre(){return vC(Qre).scale(131.154).center([0,13.9389])}var yh=1.340264,vh=-.081106,xh=893e-6,bh=.003796,M1=On(3)/2,Jre=12;function g9(e,t){var n=ir(M1*se(t)),r=n*n,i=r*r*r;return[e*le(n)/(M1*(yh+3*vh*r+i*(7*xh+9*bh*r))),n*(yh+vh*r+i*(xh+bh*r))]}g9.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,o=0,s,a,u;o<Jre&&(a=n*(yh+vh*r+i*(xh+bh*r))-t,u=yh+3*vh*r+i*(7*xh+9*bh*r),n-=s=a/u,r=n*n,i=r*r*r,!(Se(s)<a1));++o);return[M1*e*(yh+3*vh*r+i*(7*xh+9*bh*r))/le(n),ir(se(n)/M1)]};function Zre(){return wo(g9).scale(177.158)}function m9(e,t){var n=le(t),r=le(e)*n;return[n*se(e)/r,se(t)/r]}m9.invert=Jp(Rf);function eie(){return wo(m9).scale(144.049).clipAngle(60)}function tie(){var e=1,t=0,n=0,r=1,i=1,o=0,s,a,u=null,l,c,f,d=1,h=1,p=bv({point:function(b,w){var S=x([b,w]);this.stream.point(S[0],S[1])}}),g=ip,m,y;function v(){return d=e*r,h=e*i,m=y=null,x}function x(b){var w=b[0]*d,S=b[1]*h;if(o){var E=S*s-w*a;w=w*s+S*a,S=E}return[w+t,S+n]}return x.invert=function(b){var w=b[0]-t,S=b[1]-n;if(o){var E=S*s+w*a;w=w*s-S*a,S=E}return[w/d,S/h]},x.stream=function(b){return m&&y===b?m:m=p(g(y=b))},x.postclip=function(b){return arguments.length?(g=b,u=l=c=f=null,v()):g},x.clipExtent=function(b){return arguments.length?(g=b==null?(u=l=c=f=null,ip):QI(u=+b[0][0],l=+b[0][1],c=+b[1][0],f=+b[1][1]),v()):u==null?null:[[u,l],[c,f]]},x.scale=function(b){return arguments.length?(e=+b,v()):e},x.translate=function(b){return arguments.length?(t=+b[0],n=+b[1],v()):[t,n]},x.angle=function(b){return arguments.length?(o=b%360*me,a=se(o),s=le(o),v()):o*ct},x.reflectX=function(b){return arguments.length?(r=b?-1:1,v()):r<0},x.reflectY=function(b){return arguments.length?(i=b?-1:1,v()):i<0},x.fitExtent=function(b,w){return wv(x,b,w)},x.fitSize=function(b,w){return gC(x,b,w)},x.fitWidth=function(b,w){return mC(x,b,w)},x.fitHeight=function(b,w){return yC(x,b,w)},x}function y9(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}y9.invert=function(e,t){var n=t,r=25,i;do{var o=n*n,s=o*o;n-=i=(n*(1.007226+o*(.015085+s*(-.044475+.028874*o-.005916*s)))-t)/(1.007226+o*(.015085*3+s*(-.044475*7+.028874*9*o-.005916*11*s)))}while(Se(i)>ue&&--r>0);return[e/(.8707+(o=n*n)*(-.131979+o*(-.013791+o*o*o*(.003971-.001529*o)))),n]};function nie(){return wo(y9).scale(175.295)}function v9(e,t){return[le(t)*se(e),se(t)]}v9.invert=Jp(ir);function rie(){return wo(v9).scale(249.5).clipAngle(90+ue)}function x9(e,t){var n=le(t),r=1+le(e)*n;return[n*se(e)/r,se(t)/r]}x9.invert=Jp(function(e){return 2*Rf(e)});function iie(){return wo(x9).scale(250).clipAngle(142)}function b9(e,t){return[l1(dC((ut+t)/2)),-e]}b9.invert=function(e,t){return[-t,2*Rf(DI(e))-ut]};function oie(){var e=p9(b9),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}var sie=Math.abs,OE=Math.cos,N1=Math.sin,aie=1e-6,w9=Math.PI,DE=w9/2,BN=uie(2);function jN(e){return e>1?DE:e<-1?-DE:Math.asin(e)}function uie(e){return e>0?Math.sqrt(e):0}function lie(e,t){var n=e*N1(t),r=30,i;do t-=i=(t+N1(t)-n)/(1+OE(t));while(sie(i)>aie&&--r>0);return t/2}function cie(e,t,n){function r(i,o){return[e*i*OE(o=lie(n,o)),t*N1(o)]}return r.invert=function(i,o){return o=jN(o/t),[i/(e*OE(o)),jN((2*o+N1(2*o))/n)]},r}var fie=cie(BN/DE,BN,w9);function die(){return wo(fie).scale(169.529)}const hie=u9(),RE=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function pie(e,t){return function n(){const r=t();return r.type=e,r.path=u9().projection(r),r.copy=r.copy||function(){const i=n();return RE.forEach(o=>{r[o]&&i[o](r[o]())}),i.path.pointRadius(r.path.pointRadius()),i},W8(r)}}function xC(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(O1[e]=pie(e,t),this):O1[e]||null}function E9(e){return e&&e.path||hie}const O1={albers:c9,albersusa:Wre,azimuthalequalarea:qre,azimuthalequidistant:Hre,conicconformal:Yre,conicequalarea:F1,conicequidistant:Kre,equalEarth:Zre,equirectangular:Xre,gnomonic:eie,identity:tie,mercator:Gre,mollweide:die,naturalEarth1:nie,orthographic:rie,stereographic:iie,transversemercator:oie};for(const e in O1)xC(e,O1[e]);function gie(){}const To=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function S9(){var e=1,t=1,n=a;function r(u,l){return l.map(c=>i(u,c))}function i(u,l){var c=[],f=[];return o(u,l,d=>{n(d,u,l),mie(d)>0?c.push([d]):f.push(d)}),f.forEach(d=>{for(var h=0,p=c.length,g;h<p;++h)if(yie((g=c[h])[0],d)!==-1){g.push(d);return}}),{type:"MultiPolygon",value:l,coordinates:c}}function o(u,l,c){var f=new Array,d=new Array,h,p,g,m,y,v;for(h=p=-1,m=u[0]>=l,To[m<<1].forEach(x);++h<e-1;)g=m,m=u[h+1]>=l,To[g|m<<1].forEach(x);for(To[m<<0].forEach(x);++p<t-1;){for(h=-1,m=u[p*e+e]>=l,y=u[p*e]>=l,To[m<<1|y<<2].forEach(x);++h<e-1;)g=m,m=u[p*e+e+h+1]>=l,v=y,y=u[p*e+h+1]>=l,To[g|m<<1|y<<2|v<<3].forEach(x);To[m|y<<3].forEach(x)}for(h=-1,y=u[p*e]>=l,To[y<<2].forEach(x);++h<e-1;)v=y,y=u[p*e+h+1]>=l,To[y<<2|v<<3].forEach(x);To[y<<3].forEach(x);function x(b){var w=[b[0][0]+h,b[0][1]+p],S=[b[1][0]+h,b[1][1]+p],E=s(w),_=s(S),$,k;($=d[E])?(k=f[_])?(delete d[$.end],delete f[k.start],$===k?($.ring.push(S),c($.ring)):f[$.start]=d[k.end]={start:$.start,end:k.end,ring:$.ring.concat(k.ring)}):(delete d[$.end],$.ring.push(S),d[$.end=_]=$):($=f[_])?(k=d[E])?(delete f[$.start],delete d[k.end],$===k?($.ring.push(S),c($.ring)):f[k.start]=d[$.end]={start:k.start,end:$.end,ring:k.ring.concat($.ring)}):(delete f[$.start],$.ring.unshift(w),f[$.start=E]=$):f[E]=d[_]={start:E,end:_,ring:[w,S]}}}function s(u){return u[0]*2+u[1]*(e+1)*4}function a(u,l,c){u.forEach(f=>{var d=f[0],h=f[1],p=d|0,g=h|0,m,y=l[g*e+p];d>0&&d<e&&p===d&&(m=l[g*e+p-1],f[0]=d+(c-m)/(y-m)-.5),h>0&&h<t&&g===h&&(m=l[(g-1)*e+p],f[1]=h+(c-m)/(y-m)-.5)})}return r.contour=i,r.size=function(u){if(!arguments.length)return[e,t];var l=Math.floor(u[0]),c=Math.floor(u[1]);return l>=0&&c>=0||z("invalid size"),e=l,t=c,r},r.smooth=function(u){return arguments.length?(n=u?a:gie,r):n===a},r}function mie(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function yie(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=vie(e,t[n]))return i;return 0}function vie(e,t){for(var n=t[0],r=t[1],i=-1,o=0,s=e.length,a=s-1;o<s;a=o++){var u=e[o],l=u[0],c=u[1],f=e[a],d=f[0],h=f[1];if(xie(u,f,t))return 0;c>r!=h>r&&n<(d-l)*(r-c)/(h-c)+l&&(i=-i)}return i}function xie(e,t,n){var r;return bie(e,t,n)&&wie(e[r=+(e[0]===t[0])],n[r],t[r])}function bie(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function wie(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function _9(e,t,n){return function(r){var i=ao(r),o=n?Math.min(i[0],0):i[0],s=i[1],a=s-o,u=t?pa(o,s,e):a/(e+1);return yr(o+u,s,u)}}function bC(e){P.call(this,null,e)}bC.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};V(bC,P,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||mn,o=S9().smooth(e.smooth!==!1),s=e.thresholds||Eie(r,i,e),a=e.as===null?null:e.as||"contour",u=[];return r.forEach(l=>{const c=i(l),f=o.size([c.width,c.height])(c.values,I(s)?s:s(c.values));Sie(f,c,l,e),f.forEach(d=>{u.push(Iy(l,Ne(a!=null?{[a]:d}:d)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function Eie(e,t,n){const r=_9(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?r:r(e.map(i=>Tu(t(i).values)))}function Sie(e,t,n,r){let i=r.scale||t.scale,o=r.translate||t.translate;if(pe(i)&&(i=i(n,r)),pe(o)&&(o=o(n,r)),(i===1||i==null)&&!o)return;const s=(ze(i)?i:i[0])||1,a=(ze(i)?i:i[1])||1,u=o&&o[0]||0,l=o&&o[1]||0;e.forEach(k9(t,s,a,u,l))}function k9(e,t,n,r,i){const o=e.x1||0,s=e.y1||0,a=t*n<0;function u(f){f.forEach(l)}function l(f){a&&f.reverse(),f.forEach(c)}function c(f){f[0]=(f[0]-o)*t+r,f[1]=(f[1]-s)*n+i}return function(f){return f.coordinates.forEach(u),f}}function UN(e,t,n){const r=e>=0?e:lk(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function D2(e){return pe(e)?e:yn(+e)}function $9(){var e=u=>u[0],t=u=>u[1],n=Sf,r=[-1,-1],i=960,o=500,s=2;function a(u,l){const c=UN(r[0],u,e)>>s,f=UN(r[1],u,t)>>s,d=c?c+2:0,h=f?f+2:0,p=2*d+(i>>s),g=2*h+(o>>s),m=new Float32Array(p*g),y=new Float32Array(p*g);let v=m;u.forEach(b=>{const w=d+(+e(b)>>s),S=h+(+t(b)>>s);w>=0&&w<p&&S>=0&&S<g&&(m[w+S*p]+=+n(b))}),c>0&&f>0?(Pl(p,g,m,y,c),Ll(p,g,y,m,f),Pl(p,g,m,y,c),Ll(p,g,y,m,f),Pl(p,g,m,y,c),Ll(p,g,y,m,f)):c>0?(Pl(p,g,m,y,c),Pl(p,g,y,m,c),Pl(p,g,m,y,c),v=y):f>0&&(Ll(p,g,m,y,f),Ll(p,g,y,m,f),Ll(p,g,m,y,f),v=y);const x=l?Math.pow(2,-2*s):1/VP(v);for(let b=0,w=p*g;b<w;++b)v[b]*=x;return{values:v,scale:1<<s,width:p,height:g,x1:d,y1:h,x2:d+(i>>s),y2:h+(o>>s)}}return a.x=function(u){return arguments.length?(e=D2(u),a):e},a.y=function(u){return arguments.length?(t=D2(u),a):t},a.weight=function(u){return arguments.length?(n=D2(u),a):n},a.size=function(u){if(!arguments.length)return[i,o];var l=+u[0],c=+u[1];return l>=0&&c>=0||z("invalid size"),i=l,o=c,a},a.cellSize=function(u){return arguments.length?((u=+u)>=1||z("invalid cell size"),s=Math.floor(Math.log(u)/Math.LN2),a):1<<s},a.bandwidth=function(u){return arguments.length?(u=K(u),u.length===1&&(u=[+u[0],+u[0]]),u.length!==2&&z("invalid bandwidth"),r=u,a):r},a}function Pl(e,t,n,r,i){const o=(i<<1)+1;for(let s=0;s<t;++s)for(let a=0,u=0;a<e+i;++a)a<e&&(u+=n[a+s*e]),a>=i&&(a>=o&&(u-=n[a-o+s*e]),r[a-i+s*e]=u/Math.min(a+1,e-1+o-a,o))}function Ll(e,t,n,r,i){const o=(i<<1)+1;for(let s=0;s<e;++s)for(let a=0,u=0;a<t+i;++a)a<t&&(u+=n[s+a*e]),a>=i&&(a>=o&&(u-=n[s+(a-o)*e]),r[s+(a-i)*e]=u/Math.min(a+1,t-1+o-a,o))}function wC(e){P.call(this,null,e)}wC.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const _ie=["x","y","weight","size","cellSize","bandwidth"];function C9(e,t){return _ie.forEach(n=>t[n]!=null?e[n](t[n]):0),e}V(wC,P,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=kie(r,e.groupby),o=(e.groupby||[]).map(lt),s=C9($9(),e),a=e.as||"grid",u=[];function l(c,f){for(let d=0;d<o.length;++d)c[o[d]]=f[d];return c}return u=i.map(c=>Ne(l({[a]:s(c,e.counts)},c.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function kie(e,t){var n=[],r=c=>c(a),i,o,s,a,u,l;if(t==null)n.push(e);else for(i={},o=0,s=e.length;o<s;++o)a=e[o],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function EC(e){P.call(this,null,e)}EC.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};V(EC,P,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=S9().smooth(e.smooth!==!1),i=e.values,o=e.thresholds||_9(e.count||10,e.nice,!!i),s=e.size,a,u;return i||(i=t.materialize(t.SOURCE).source,a=C9($9(),e)(i,!0),u=k9(a,a.scale||1,a.scale||1,0,0),s=[a.width,a.height],i=a.values),o=I(o)?o:o(i),i=r.size(s)(i,o),u&&i.forEach(u),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(Ne),n}});const PE="Feature",SC="FeatureCollection",$ie="MultiPoint";function _C(e){P.call(this,null,e)}_C.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};V(_C,P,{transform(e,t){var n=this._features,r=this._points,i=e.fields,o=i&&i[0],s=i&&i[1],a=e.geojson||!i&&mn,u=t.ADD,l;l=e.modified()||t.changed(t.REM)||t.modified(fn(a))||o&&t.modified(fn(o))||s&&t.modified(fn(s)),(!this.value||l)&&(u=t.SOURCE,this._features=n=[],this._points=r=[]),a&&t.visit(u,c=>n.push(a(c))),o&&s&&(t.visit(u,c=>{var f=o(c),d=s(c);f!=null&&d!=null&&(f=+f)===f&&(d=+d)===d&&r.push([f,d])}),n=n.concat({type:PE,geometry:{type:$ie,coordinates:r}})),this.value={type:SC,features:n}}});function kC(e){P.call(this,null,e)}kC.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};V(kC,P,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||mn,o=e.as||"path",s=n.SOURCE;!r||e.modified()?(this.value=r=E9(e.projection),n.materialize().reflow()):s=i===mn||t.modified(i.fields)?n.ADD_MOD:n.ADD;const a=Cie(r,e.pointRadius);return n.visit(s,u=>u[o]=r(i(u))),r.pointRadius(a),n.modifies(o)}});function Cie(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function $C(e){P.call(this,null,e)}$C.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};V($C,P,{transform(e,t){var n=e.projection,r=e.fields[0],i=e.fields[1],o=e.as||["x","y"],s=o[0],a=o[1],u;function l(c){const f=n([r(c),i(c)]);f?(c[s]=f[0],c[a]=f[1]):(c[s]=void 0,c[a]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,l):(u=t.modified(r.fields)||t.modified(i.fields),t.visit(u?t.ADD_MOD:t.ADD,l)),t.modifies(o)}});function CC(e){P.call(this,null,e)}CC.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};V(CC,P,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",o=n.ADD;return(!r||e.modified())&&(this.value=r=Aie(E9(e.projection),e.field||tr("datum"),e.pointRadius),n.materialize().reflow(),o=n.SOURCE),n.visit(o,s=>s[i]=r),n.modifies(i)}});function Aie(e,t,n){const r=n==null?i=>e(t(i)):i=>{var o=e.pointRadius(),s=e.pointRadius(n)(t(i));return e.pointRadius(o),s};return r.context=i=>(e.context(i),r),r}function AC(e){P.call(this,[],e),this.generator=wre()}AC.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};V(AC,P,{transform(e,t){var n=this.value,r=this.generator,i;if(!n.length||e.modified())for(const o in e)pe(r[o])&&r[o](e[o]);return i=r(),n.length?t.mod.push(U6(n[0],i)):t.add.push(Ne(i)),n[0]=i,t}});function FC(e){P.call(this,null,e)}FC.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};V(FC,P,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r=e.resolve==="shared",i=e.field||mn,o=Tie(e.opacity,e),s=Fie(e.color,e),a=e.as||"image",u={$x:0,$y:0,$value:0,$max:r?Tu(n.map(l=>Tu(i(l).values))):0};return n.forEach(l=>{const c=i(l),f=he({},l,u);r||(f.$max=Tu(c.values||[])),l[a]=Mie(c,f,s.dep?s:yn(s(f)),o.dep?o:yn(o(f)))}),t.reflow(!0).modifies(a)}});function Fie(e,t){let n;return pe(e)?(n=r=>ya(e(r,t)),n.dep=A9(e)):n=yn(ya(e||"#888")),n}function Tie(e,t){let n;return pe(e)?(n=r=>e(r,t),n.dep=A9(e)):e?n=yn(e):(n=r=>r.$value/r.$max||0,n.dep=!0),n}function A9(e){if(!pe(e))return!1;const t=ki(fn(e));return t.$x||t.$y||t.$value||t.$max}function Mie(e,t,n,r){const i=e.width,o=e.height,s=e.x1||0,a=e.y1||0,u=e.x2||i,l=e.y2||o,c=e.values,f=c?m=>c[m]:zs,d=ua(u-s,l-a),h=d.getContext("2d"),p=h.getImageData(0,0,u-s,l-a),g=p.data;for(let m=a,y=0;m<l;++m){t.$y=m-a;for(let v=s,x=m*i;v<u;++v,y+=4){t.$x=v-s,t.$value=f(v+x);const b=n(t);g[y+0]=b.r,g[y+1]=b.g,g[y+2]=b.b,g[y+3]=~~(255*r(t))}}return h.putImageData(p,0,0),d}function F9(e){P.call(this,null,e),this.modified(!0)}V(F9,P,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=Oie(e.type),RE.forEach(r=>{e[r]!=null&&WN(n,r,e[r])})):RE.forEach(r=>{e.modified(r)&&WN(n,r,e[r])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&Nie(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function Nie(e,t){const n=Die(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function Oie(e){const t=xC((e||"mercator").toLowerCase());return t||z("Unrecognized projection type: "+e),t()}function WN(e,t,n){pe(e[t])&&e[t](n)}function Die(e){return e=K(e),e.length===1?e[0]:{type:SC,features:e.reduce((t,n)=>t.concat(Rie(n)),[])}}function Rie(e){return e.type===SC?e.features:K(e).filter(t=>t!=null).map(t=>t.type===PE?t:{type:PE,geometry:t})}const Pie=Object.freeze(Object.defineProperty({__proto__:null,contour:EC,geojson:_C,geopath:kC,geopoint:$C,geoshape:CC,graticule:AC,heatmap:FC,isocontour:bC,kde2d:wC,projection:F9},Symbol.toStringTag,{value:"Module"}));function Lie(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var o,s=n.length,a,u=0,l=0;for(o=0;o<s;++o)a=n[o],u+=a.x,l+=a.y;for(u=(u/s-e)*r,l=(l/s-t)*r,o=0;o<s;++o)a=n[o],a.x-=u,a.y-=l}return i.initialize=function(o){n=o},i.x=function(o){return arguments.length?(e=+o,i):e},i.y=function(o){return arguments.length?(t=+o,i):t},i.strength=function(o){return arguments.length?(r=+o,i):r},i}function zie(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return T9(this.cover(t,n),t,n,e)}function T9(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,o=e._root,s={data:r},a=e._x0,u=e._y0,l=e._x1,c=e._y1,f,d,h,p,g,m,y,v;if(!o)return e._root=s,e;for(;o.length;)if((g=t>=(f=(a+l)/2))?a=f:l=f,(m=n>=(d=(u+c)/2))?u=d:c=d,i=o,!(o=o[y=m<<1|g]))return i[y]=s,e;if(h=+e._x.call(null,o.data),p=+e._y.call(null,o.data),t===h&&n===p)return s.next=o,i?i[y]=s:e._root=s,e;do i=i?i[y]=new Array(4):e._root=new Array(4),(g=t>=(f=(a+l)/2))?a=f:l=f,(m=n>=(d=(u+c)/2))?u=d:c=d;while((y=m<<1|g)===(v=(p>=d)<<1|h>=f));return i[v]=o,i[y]=s,e}function Iie(e){var t,n,r=e.length,i,o,s=new Array(r),a=new Array(r),u=1/0,l=1/0,c=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(o=+this._y.call(null,t))||(s[n]=i,a[n]=o,i<u&&(u=i),i>c&&(c=i),o<l&&(l=o),o>f&&(f=o));if(u>c||l>f)return this;for(this.cover(u,l).cover(c,f),n=0;n<r;++n)T9(this,s[n],a[n],e[n]);return this}function Bie(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,o=(r=Math.floor(t))+1;else{for(var s=i-n||1,a=this._root,u,l;n>e||e>=i||r>t||t>=o;)switch(l=(t<r)<<1|e<n,u=new Array(4),u[l]=a,a=u,s*=2,l){case 0:i=n+s,o=r+s;break;case 1:n=i-s,o=r+s;break;case 2:i=n+s,r=o-s;break;case 3:n=i-s,r=o-s;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this}function jie(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function Uie(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Cn(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function Wie(e,t,n){var r,i=this._x0,o=this._y0,s,a,u,l,c=this._x1,f=this._y1,d=[],h=this._root,p,g;for(h&&d.push(new Cn(h,i,o,c,f)),n==null?n=1/0:(i=e-n,o=t-n,c=e+n,f=t+n,n*=n);p=d.pop();)if(!(!(h=p.node)||(s=p.x0)>c||(a=p.y0)>f||(u=p.x1)<i||(l=p.y1)<o))if(h.length){var m=(s+u)/2,y=(a+l)/2;d.push(new Cn(h[3],m,y,u,l),new Cn(h[2],s,y,m,l),new Cn(h[1],m,a,u,y),new Cn(h[0],s,a,m,y)),(g=(t>=y)<<1|e>=m)&&(p=d[d.length-1],d[d.length-1]=d[d.length-1-g],d[d.length-1-g]=p)}else{var v=e-+this._x.call(null,h.data),x=t-+this._y.call(null,h.data),b=v*v+x*x;if(b<n){var w=Math.sqrt(n=b);i=e-w,o=t-w,c=e+w,f=t+w,r=h.data}}return r}function qie(e){if(isNaN(c=+this._x.call(null,e))||isNaN(f=+this._y.call(null,e)))return this;var t,n=this._root,r,i,o,s=this._x0,a=this._y0,u=this._x1,l=this._y1,c,f,d,h,p,g,m,y;if(!n)return this;if(n.length)for(;;){if((p=c>=(d=(s+u)/2))?s=d:u=d,(g=f>=(h=(a+l)/2))?a=h:l=h,t=n,!(n=n[m=g<<1|p]))return this;if(!n.length)break;(t[m+1&3]||t[m+2&3]||t[m+3&3])&&(r=t,y=m)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(o=n.next)&&delete n.next,i?(o?i.next=o:delete i.next,this):t?(o?t[m]=o:delete t[m],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[y]=n:this._root=n),this):(this._root=o,this)}function Hie(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function Gie(){return this._root}function Vie(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function Yie(e){var t=[],n,r=this._root,i,o,s,a,u;for(r&&t.push(new Cn(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,o=n.x0,s=n.y0,a=n.x1,u=n.y1)&&r.length){var l=(o+a)/2,c=(s+u)/2;(i=r[3])&&t.push(new Cn(i,l,c,a,u)),(i=r[2])&&t.push(new Cn(i,o,c,l,u)),(i=r[1])&&t.push(new Cn(i,l,s,a,c)),(i=r[0])&&t.push(new Cn(i,o,s,l,c))}return this}function Xie(e){var t=[],n=[],r;for(this._root&&t.push(new Cn(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var o,s=r.x0,a=r.y0,u=r.x1,l=r.y1,c=(s+u)/2,f=(a+l)/2;(o=i[0])&&t.push(new Cn(o,s,a,c,f)),(o=i[1])&&t.push(new Cn(o,c,a,u,f)),(o=i[2])&&t.push(new Cn(o,s,f,c,l)),(o=i[3])&&t.push(new Cn(o,c,f,u,l))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function Qie(e){return e[0]}function Kie(e){return arguments.length?(this._x=e,this):this._x}function Jie(e){return e[1]}function Zie(e){return arguments.length?(this._y=e,this):this._y}function TC(e,t,n){var r=new MC(t??Qie,n??Jie,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function MC(e,t,n,r,i,o){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function qN(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var Ln=TC.prototype=MC.prototype;Ln.copy=function(){var e=new MC(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=qN(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=qN(r));return e};Ln.add=zie;Ln.addAll=Iie;Ln.cover=Bie;Ln.data=jie;Ln.extent=Uie;Ln.find=Wie;Ln.remove=qie;Ln.removeAll=Hie;Ln.root=Gie;Ln.size=Vie;Ln.visit=Yie;Ln.visitAfter=Xie;Ln.x=Kie;Ln.y=Zie;function An(e){return function(){return e}}function Ys(e){return(e()-.5)*1e-6}function eoe(e){return e.x+e.vx}function toe(e){return e.y+e.vy}function noe(e){var t,n,r,i=1,o=1;typeof e!="function"&&(e=An(e==null?1:+e));function s(){for(var l,c=t.length,f,d,h,p,g,m,y=0;y<o;++y)for(f=TC(t,eoe,toe).visitAfter(a),l=0;l<c;++l)d=t[l],g=n[d.index],m=g*g,h=d.x+d.vx,p=d.y+d.vy,f.visit(v);function v(x,b,w,S,E){var _=x.data,$=x.r,k=g+$;if(_){if(_.index>d.index){var A=h-_.x-_.vx,R=p-_.y-_.vy,C=A*A+R*R;C<k*k&&(A===0&&(A=Ys(r),C+=A*A),R===0&&(R=Ys(r),C+=R*R),C=(k-(C=Math.sqrt(C)))/C*i,d.vx+=(A*=C)*(k=($*=$)/(m+$)),d.vy+=(R*=C)*k,_.vx-=A*(k=1-k),_.vy-=R*k)}return}return b>h+k||S<h-k||w>p+k||E<p-k}}function a(l){if(l.data)return l.r=n[l.data.index];for(var c=l.r=0;c<4;++c)l[c]&&l[c].r>l.r&&(l.r=l[c].r)}function u(){if(t){var l,c=t.length,f;for(n=new Array(c),l=0;l<c;++l)f=t[l],n[f.index]=+e(f,l,t)}}return s.initialize=function(l,c){t=l,r=c,u()},s.iterations=function(l){return arguments.length?(o=+l,s):o},s.strength=function(l){return arguments.length?(i=+l,s):i},s.radius=function(l){return arguments.length?(e=typeof l=="function"?l:An(+l),u(),s):e},s}function roe(e){return e.index}function HN(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function ioe(e){var t=roe,n=f,r,i=An(30),o,s,a,u,l,c=1;e==null&&(e=[]);function f(m){return 1/Math.min(a[m.source.index],a[m.target.index])}function d(m){for(var y=0,v=e.length;y<c;++y)for(var x=0,b,w,S,E,_,$,k;x<v;++x)b=e[x],w=b.source,S=b.target,E=S.x+S.vx-w.x-w.vx||Ys(l),_=S.y+S.vy-w.y-w.vy||Ys(l),$=Math.sqrt(E*E+_*_),$=($-o[x])/$*m*r[x],E*=$,_*=$,S.vx-=E*(k=u[x]),S.vy-=_*k,w.vx+=E*(k=1-k),w.vy+=_*k}function h(){if(s){var m,y=s.length,v=e.length,x=new Map(s.map((w,S)=>[t(w,S,s),w])),b;for(m=0,a=new Array(y);m<v;++m)b=e[m],b.index=m,typeof b.source!="object"&&(b.source=HN(x,b.source)),typeof b.target!="object"&&(b.target=HN(x,b.target)),a[b.source.index]=(a[b.source.index]||0)+1,a[b.target.index]=(a[b.target.index]||0)+1;for(m=0,u=new Array(v);m<v;++m)b=e[m],u[m]=a[b.source.index]/(a[b.source.index]+a[b.target.index]);r=new Array(v),p(),o=new Array(v),g()}}function p(){if(s)for(var m=0,y=e.length;m<y;++m)r[m]=+n(e[m],m,e)}function g(){if(s)for(var m=0,y=e.length;m<y;++m)o[m]=+i(e[m],m,e)}return d.initialize=function(m,y){s=m,l=y,h()},d.links=function(m){return arguments.length?(e=m,h(),d):e},d.id=function(m){return arguments.length?(t=m,d):t},d.iterations=function(m){return arguments.length?(c=+m,d):c},d.strength=function(m){return arguments.length?(n=typeof m=="function"?m:An(+m),p(),d):n},d.distance=function(m){return arguments.length?(i=typeof m=="function"?m:An(+m),g(),d):i},d}var ooe={value:()=>{}};function M9(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Gm(n)}function Gm(e){this._=e}function soe(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Gm.prototype=M9.prototype={constructor:Gm,on:function(e,t){var n=this._,r=soe(e+"",n),i,o=-1,s=r.length;if(arguments.length<2){for(;++o<s;)if((i=(e=r[o]).type)&&(i=aoe(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<s;)if(i=(e=r[o]).type)n[i]=GN(n[i],e.name,t);else if(t==null)for(i in n)n[i]=GN(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Gm(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};function aoe(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function GN(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=ooe,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var tf=0,Yd=0,gd=0,N9=1e3,D1,Xd,R1=0,Qu=0,Sv=0,sp=typeof performance=="object"&&performance.now?performance:Date,O9=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function NC(){return Qu||(O9(uoe),Qu=sp.now()+Sv)}function uoe(){Qu=0}function P1(){this._call=this._time=this._next=null}P1.prototype=D9.prototype={constructor:P1,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?NC():+n)+(t==null?0:+t),!this._next&&Xd!==this&&(Xd?Xd._next=this:D1=this,Xd=this),this._call=e,this._time=n,LE()},stop:function(){this._call&&(this._call=null,this._time=1/0,LE())}};function D9(e,t,n){var r=new P1;return r.restart(e,t,n),r}function loe(){NC(),++tf;for(var e=D1,t;e;)(t=Qu-e._time)>=0&&e._call.call(void 0,t),e=e._next;--tf}function VN(){Qu=(R1=sp.now())+Sv,tf=Yd=0;try{loe()}finally{tf=0,foe(),Qu=0}}function coe(){var e=sp.now(),t=e-R1;t>N9&&(Sv-=t,R1=e)}function foe(){for(var e,t=D1,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:D1=n);Xd=e,LE(r)}function LE(e){if(!tf){Yd&&(Yd=clearTimeout(Yd));var t=e-Qu;t>24?(e<1/0&&(Yd=setTimeout(VN,e-sp.now()-Sv)),gd&&(gd=clearInterval(gd))):(gd||(R1=sp.now(),gd=setInterval(coe,N9)),tf=1,O9(VN))}}function doe(e,t,n){var r=new P1,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(o,s,a){s=+s,a=a==null?NC():+a,r._restart(function u(l){l+=i,r._restart(u,i+=s,a),o(l)},s,a)},r.restart(e,t,n),r)}const hoe=1664525,poe=1013904223,YN=4294967296;function goe(){let e=1;return()=>(e=(hoe*e+poe)%YN)/YN}function moe(e){return e.x}function yoe(e){return e.y}var voe=10,xoe=Math.PI*(3-Math.sqrt(5));function boe(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,s=.6,a=new Map,u=D9(f),l=M9("tick","end"),c=goe();e==null&&(e=[]);function f(){d(),l.call("tick",t),n<r&&(u.stop(),l.call("end",t))}function d(g){var m,y=e.length,v;g===void 0&&(g=1);for(var x=0;x<g;++x)for(n+=(o-n)*i,a.forEach(function(b){b(n)}),m=0;m<y;++m)v=e[m],v.fx==null?v.x+=v.vx*=s:(v.x=v.fx,v.vx=0),v.fy==null?v.y+=v.vy*=s:(v.y=v.fy,v.vy=0);return t}function h(){for(var g=0,m=e.length,y;g<m;++g){if(y=e[g],y.index=g,y.fx!=null&&(y.x=y.fx),y.fy!=null&&(y.y=y.fy),isNaN(y.x)||isNaN(y.y)){var v=voe*Math.sqrt(.5+g),x=g*xoe;y.x=v*Math.cos(x),y.y=v*Math.sin(x)}(isNaN(y.vx)||isNaN(y.vy))&&(y.vx=y.vy=0)}}function p(g){return g.initialize&&g.initialize(e,c),g}return h(),t={tick:d,restart:function(){return u.restart(f),t},stop:function(){return u.stop(),t},nodes:function(g){return arguments.length?(e=g,h(),a.forEach(p),t):e},alpha:function(g){return arguments.length?(n=+g,t):n},alphaMin:function(g){return arguments.length?(r=+g,t):r},alphaDecay:function(g){return arguments.length?(i=+g,t):+i},alphaTarget:function(g){return arguments.length?(o=+g,t):o},velocityDecay:function(g){return arguments.length?(s=1-g,t):1-s},randomSource:function(g){return arguments.length?(c=g,a.forEach(p),t):c},force:function(g,m){return arguments.length>1?(m==null?a.delete(g):a.set(g,p(m)),t):a.get(g)},find:function(g,m,y){var v=0,x=e.length,b,w,S,E,_;for(y==null?y=1/0:y*=y,v=0;v<x;++v)E=e[v],b=g-E.x,w=m-E.y,S=b*b+w*w,S<y&&(_=E,y=S);return _},on:function(g,m){return arguments.length>1?(l.on(g,m),t):l.on(g)}}}function woe(){var e,t,n,r,i=An(-30),o,s=1,a=1/0,u=.81;function l(h){var p,g=e.length,m=TC(e,moe,yoe).visitAfter(f);for(r=h,p=0;p<g;++p)t=e[p],m.visit(d)}function c(){if(e){var h,p=e.length,g;for(o=new Array(p),h=0;h<p;++h)g=e[h],o[g.index]=+i(g,h,e)}}function f(h){var p=0,g,m,y=0,v,x,b;if(h.length){for(v=x=b=0;b<4;++b)(g=h[b])&&(m=Math.abs(g.value))&&(p+=g.value,y+=m,v+=m*g.x,x+=m*g.y);h.x=v/y,h.y=x/y}else{g=h,g.x=g.data.x,g.y=g.data.y;do p+=o[g.data.index];while(g=g.next)}h.value=p}function d(h,p,g,m){if(!h.value)return!0;var y=h.x-t.x,v=h.y-t.y,x=m-p,b=y*y+v*v;if(x*x/u<b)return b<a&&(y===0&&(y=Ys(n),b+=y*y),v===0&&(v=Ys(n),b+=v*v),b<s&&(b=Math.sqrt(s*b)),t.vx+=y*h.value*r/b,t.vy+=v*h.value*r/b),!0;if(h.length||b>=a)return;(h.data!==t||h.next)&&(y===0&&(y=Ys(n),b+=y*y),v===0&&(v=Ys(n),b+=v*v),b<s&&(b=Math.sqrt(s*b)));do h.data!==t&&(x=o[h.data.index]*r/b,t.vx+=y*x,t.vy+=v*x);while(h=h.next)}return l.initialize=function(h,p){e=h,n=p,c()},l.strength=function(h){return arguments.length?(i=typeof h=="function"?h:An(+h),c(),l):i},l.distanceMin=function(h){return arguments.length?(s=h*h,l):Math.sqrt(s)},l.distanceMax=function(h){return arguments.length?(a=h*h,l):Math.sqrt(a)},l.theta=function(h){return arguments.length?(u=h*h,l):Math.sqrt(u)},l}function Eoe(e){var t=An(.1),n,r,i;typeof e!="function"&&(e=An(e==null?0:+e));function o(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vx+=(i[u]-c.x)*r[u]*a}function s(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return o.initialize=function(a){n=a,s()},o.strength=function(a){return arguments.length?(t=typeof a=="function"?a:An(+a),s(),o):t},o.x=function(a){return arguments.length?(e=typeof a=="function"?a:An(+a),s(),o):e},o}function Soe(e){var t=An(.1),n,r,i;typeof e!="function"&&(e=An(e==null?0:+e));function o(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vy+=(i[u]-c.y)*r[u]*a}function s(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return o.initialize=function(a){n=a,s()},o.strength=function(a){return arguments.length?(t=typeof a=="function"?a:An(+a),s(),o):t},o.y=function(a){return arguments.length?(e=typeof a=="function"?a:An(+a),s(),o):e},o}const XN={center:Lie,collide:noe,nbody:woe,link:ioe,x:Eoe,y:Soe},Qd="forces",zE=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],_oe=["static","iterations"],R9=["x","y","vx","vy"];function OC(e){P.call(this,null,e)}OC.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:R9}]};V(OC,P,{transform(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(zE),o=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&P9(n,e,0,t)):(this.value=n=$oe(t.source,e),n.on("tick",koe(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(_oe)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/o)),e.static)for(n.stop();--o>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let a=this._argops,u=0,l=a.length,c;u<l;++u)if(c=a[u],!(c.name!==Qd||c.op._argval.force!=="link")){for(var r=c.op._argops,i=0,o=r.length,s;i<o;++i)if(r[i].name==="links"&&(s=r[i].op.source)){n.pulse(s,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(R9)}});function koe(e,t){return()=>e.touch(t).run()}function $oe(e,t){const n=boe(e),r=n.stop,i=n.restart;let o=!1;return n.stopped=()=>o,n.restart=()=>(o=!1,i()),n.stop=()=>(o=!0,r()),P9(n,t,!0).on("end",()=>o=!0)}function P9(e,t,n,r){var i=K(t.forces),o,s,a,u;for(o=0,s=zE.length;o<s;++o)a=zE[o],a!==Qd&&t.modified(a)&&e[a](t[a]);for(o=0,s=i.length;o<s;++o)u=Qd+o,a=n||t.modified(Qd,o)?Aoe(i[o]):r&&Coe(i[o],r)?e.force(u):null,a&&e.force(u,a);for(s=e.numForces||0;o<s;++o)e.force(Qd+o,null);return e.numForces=i.length,e}function Coe(e,t){var n,r;for(n in e)if(pe(r=e[n])&&t.modified(fn(r)))return 1;return 0}function Aoe(e){var t,n;ae(XN,e.force)||z("Unrecognized force: "+e.force),t=XN[e.force]();for(n in e)pe(t[n])&&Foe(t[n],e[n],e);return t}function Foe(e,t,n){e(pe(t)?r=>t(r,n):t)}const Toe=Object.freeze(Object.defineProperty({__proto__:null,force:OC},Symbol.toStringTag,{value:"Module"}));function Moe(e,t){return e.parent===t.parent?1:2}function Noe(e){return e.reduce(Ooe,0)/e.length}function Ooe(e,t){return e+t.x}function Doe(e){return 1+e.reduce(Roe,0)}function Roe(e,t){return Math.max(e,t.y)}function Poe(e){for(var t;t=e.children;)e=t[0];return e}function Loe(e){for(var t;t=e.children;)e=t[t.length-1];return e}function zoe(){var e=Moe,t=1,n=1,r=!1;function i(o){var s,a=0;o.eachAfter(function(d){var h=d.children;h?(d.x=Noe(h),d.y=Doe(h)):(d.x=s?a+=e(d,s):0,d.y=0,s=d)});var u=Poe(o),l=Loe(o),c=u.x-e(u,l)/2,f=l.x+e(l,u)/2;return o.eachAfter(r?function(d){d.x=(d.x-o.x)*t,d.y=(o.y-d.y)*n}:function(d){d.x=(d.x-c)/(f-c)*t,d.y=(1-(o.y?d.y/o.y:1))*n})}return i.separation=function(o){return arguments.length?(e=o,i):e},i.size=function(o){return arguments.length?(r=!1,t=+o[0],n=+o[1],i):r?null:[t,n]},i.nodeSize=function(o){return arguments.length?(r=!0,t=+o[0],n=+o[1],i):r?[t,n]:null},i}function Ioe(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function Boe(){return this.eachAfter(Ioe)}function joe(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function Uoe(e,t){for(var n=this,r=[n],i,o,s=-1;n=r.pop();)if(e.call(t,n,++s,this),i=n.children)for(o=i.length-1;o>=0;--o)r.push(i[o]);return this}function Woe(e,t){for(var n=this,r=[n],i=[],o,s,a,u=-1;n=r.pop();)if(i.push(n),o=n.children)for(s=0,a=o.length;s<a;++s)r.push(o[s]);for(;n=i.pop();)e.call(t,n,++u,this);return this}function qoe(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function Hoe(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function Goe(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function Voe(e){for(var t=this,n=Yoe(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function Yoe(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function Xoe(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function Qoe(){return Array.from(this)}function Koe(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function Joe(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*Zoe(){var e=this,t,n=[e],r,i,o;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,o=r.length;i<o;++i)n.push(r[i]);while(n.length)}function DC(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=nse)):t===void 0&&(t=tse);for(var n=new nf(e),r,i=[n],o,s,a,u;r=i.pop();)if((s=t(r.data))&&(u=(s=Array.from(s)).length))for(r.children=s,a=u-1;a>=0;--a)i.push(o=s[a]=new nf(s[a])),o.parent=r,o.depth=r.depth+1;return n.eachBefore(L9)}function ese(){return DC(this).eachBefore(rse)}function tse(e){return e.children}function nse(e){return Array.isArray(e)?e[1]:null}function rse(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function L9(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function nf(e){this.data=e,this.depth=this.height=0,this.parent=null}nf.prototype=DC.prototype={constructor:nf,count:Boe,each:joe,eachAfter:Woe,eachBefore:Uoe,find:qoe,sum:Hoe,sort:Goe,path:Voe,ancestors:Xoe,descendants:Qoe,leaves:Koe,links:Joe,copy:ese,[Symbol.iterator]:Zoe};function Vm(e){return e==null?null:z9(e)}function z9(e){if(typeof e!="function")throw new Error;return e}function mu(){return 0}function Gl(e){return function(){return e}}const ise=1664525,ose=1013904223,QN=4294967296;function sse(){let e=1;return()=>(e=(ise*e+ose)%QN)/QN}function ase(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function use(e,t){let n=e.length,r,i;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function lse(e,t){for(var n=0,r=(e=use(Array.from(e),t)).length,i=[],o,s;n<r;)o=e[n],s&&I9(s,o)?++n:(s=fse(i=cse(i,o)),n=0);return s}function cse(e,t){var n,r;if(R2(t,e))return[t];for(n=0;n<e.length;++n)if(nm(t,e[n])&&R2(Kd(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(nm(Kd(e[n],e[r]),t)&&nm(Kd(e[n],t),e[r])&&nm(Kd(e[r],t),e[n])&&R2(B9(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function nm(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function I9(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function R2(e,t){for(var n=0;n<t.length;++n)if(!I9(e,t[n]))return!1;return!0}function fse(e){switch(e.length){case 1:return dse(e[0]);case 2:return Kd(e[0],e[1]);case 3:return B9(e[0],e[1],e[2])}}function dse(e){return{x:e.x,y:e.y,r:e.r}}function Kd(e,t){var n=e.x,r=e.y,i=e.r,o=t.x,s=t.y,a=t.r,u=o-n,l=s-r,c=a-i,f=Math.sqrt(u*u+l*l);return{x:(n+o+u/f*c)/2,y:(r+s+l/f*c)/2,r:(f+i+a)/2}}function B9(e,t,n){var r=e.x,i=e.y,o=e.r,s=t.x,a=t.y,u=t.r,l=n.x,c=n.y,f=n.r,d=r-s,h=r-l,p=i-a,g=i-c,m=u-o,y=f-o,v=r*r+i*i-o*o,x=v-s*s-a*a+u*u,b=v-l*l-c*c+f*f,w=h*p-d*g,S=(p*b-g*x)/(w*2)-r,E=(g*m-p*y)/w,_=(h*x-d*b)/(w*2)-i,$=(d*y-h*m)/w,k=E*E+$*$-1,A=2*(o+S*E+_*$),R=S*S+_*_-o*o,C=-(Math.abs(k)>1e-6?(A+Math.sqrt(A*A-4*k*R))/(2*k):R/A);return{x:r+S+E*C,y:i+_+$*C,r:C}}function KN(e,t,n){var r=e.x-t.x,i,o,s=e.y-t.y,a,u,l=r*r+s*s;l?(o=t.r+n.r,o*=o,u=e.r+n.r,u*=u,o>u?(i=(l+u-o)/(2*l),a=Math.sqrt(Math.max(0,u/l-i*i)),n.x=e.x-i*r-a*s,n.y=e.y-i*s+a*r):(i=(l+o-u)/(2*l),a=Math.sqrt(Math.max(0,o/l-i*i)),n.x=t.x+i*r-a*s,n.y=t.y+i*s+a*r)):(n.x=t.x+n.r,n.y=t.y)}function JN(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function ZN(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,o=(t.y*n.r+n.y*t.r)/r;return i*i+o*o}function rm(e){this._=e,this.next=null,this.previous=null}function hse(e,t){if(!(o=(e=ase(e)).length))return 0;var n,r,i,o,s,a,u,l,c,f,d;if(n=e[0],n.x=0,n.y=0,!(o>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(o>2))return n.r+r.r;KN(r,n,i=e[2]),n=new rm(n),r=new rm(r),i=new rm(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(u=3;u<o;++u){KN(n._,r._,i=e[u]),i=new rm(i),l=r.next,c=n.previous,f=r._.r,d=n._.r;do if(f<=d){if(JN(l._,i._)){r=l,n.next=r,r.previous=n,--u;continue e}f+=l._.r,l=l.next}else{if(JN(c._,i._)){n=c,n.next=r,r.previous=n,--u;continue e}d+=c._.r,c=c.previous}while(l!==c.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,s=ZN(n);(i=i.next)!==r;)(a=ZN(i))<s&&(n=i,s=a);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=lse(n,t),u=0;u<o;++u)n=e[u],n.x-=i.x,n.y-=i.y;return i.r}function pse(e){return Math.sqrt(e.value)}function gse(){var e=null,t=1,n=1,r=mu;function i(o){const s=sse();return o.x=t/2,o.y=n/2,e?o.eachBefore(eO(e)).eachAfter(P2(r,.5,s)).eachBefore(tO(1)):o.eachBefore(eO(pse)).eachAfter(P2(mu,1,s)).eachAfter(P2(r,o.r/Math.min(t,n),s)).eachBefore(tO(Math.min(t,n)/(2*o.r))),o}return i.radius=function(o){return arguments.length?(e=Vm(o),i):e},i.size=function(o){return arguments.length?(t=+o[0],n=+o[1],i):[t,n]},i.padding=function(o){return arguments.length?(r=typeof o=="function"?o:Gl(+o),i):r},i}function eO(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function P2(e,t,n){return function(r){if(i=r.children){var i,o,s=i.length,a=e(r)*t||0,u;if(a)for(o=0;o<s;++o)i[o].r+=a;if(u=hse(i,n),a)for(o=0;o<s;++o)i[o].r-=a;r.r=u+a}}}function tO(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function j9(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function Zp(e,t,n,r,i){for(var o=e.children,s,a=-1,u=o.length,l=e.value&&(r-t)/e.value;++a<u;)s=o[a],s.y0=n,s.y1=i,s.x0=t,s.x1=t+=s.value*l}function mse(){var e=1,t=1,n=0,r=!1;function i(s){var a=s.height+1;return s.x0=s.y0=n,s.x1=e,s.y1=t/a,s.eachBefore(o(t,a)),r&&s.eachBefore(j9),s}function o(s,a){return function(u){u.children&&Zp(u,u.x0,s*(u.depth+1)/a,u.x1,s*(u.depth+2)/a);var l=u.x0,c=u.y0,f=u.x1-n,d=u.y1-n;f<l&&(l=f=(l+f)/2),d<c&&(c=d=(c+d)/2),u.x0=l,u.y0=c,u.x1=f,u.y1=d}}return i.round=function(s){return arguments.length?(r=!!s,i):r},i.size=function(s){return arguments.length?(e=+s[0],t=+s[1],i):[e,t]},i.padding=function(s){return arguments.length?(n=+s,i):n},i}var yse={depth:-1},nO={},L2={};function vse(e){return e.id}function xse(e){return e.parentId}function rO(){var e=vse,t=xse,n;function r(i){var o=Array.from(i),s=e,a=t,u,l,c,f,d,h,p,g,m=new Map;if(n!=null){const y=o.map((b,w)=>bse(n(b,w,i))),v=y.map(iO),x=new Set(y).add("");for(const b of v)x.has(b)||(x.add(b),y.push(b),v.push(iO(b)),o.push(L2));s=(b,w)=>y[w],a=(b,w)=>v[w]}for(c=0,u=o.length;c<u;++c)l=o[c],h=o[c]=new nf(l),(p=s(l,c,i))!=null&&(p+="")&&(g=h.id=p,m.set(g,m.has(g)?nO:h)),(p=a(l,c,i))!=null&&(p+="")&&(h.parent=p);for(c=0;c<u;++c)if(h=o[c],p=h.parent){if(d=m.get(p),!d)throw new Error("missing: "+p);if(d===nO)throw new Error("ambiguous: "+p);d.children?d.children.push(h):d.children=[h],h.parent=d}else{if(f)throw new Error("multiple roots");f=h}if(!f)throw new Error("no root");if(n!=null){for(;f.data===L2&&f.children.length===1;)f=f.children[0],--u;for(let y=o.length-1;y>=0&&(h=o[y],h.data===L2);--y)h.data=null}if(f.parent=yse,f.eachBefore(function(y){y.depth=y.parent.depth+1,--u}).eachBefore(L9),f.parent=null,u>0)throw new Error("cycle");return f}return r.id=function(i){return arguments.length?(e=Vm(i),r):e},r.parentId=function(i){return arguments.length?(t=Vm(i),r):t},r.path=function(i){return arguments.length?(n=Vm(i),r):n},r}function bse(e){e=`${e}`;let t=e.length;return IE(e,t-1)&&!IE(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function iO(e){let t=e.length;if(t<2)return"";for(;--t>1&&!IE(e,t););return e.slice(0,t)}function IE(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function wse(e,t){return e.parent===t.parent?1:2}function z2(e){var t=e.children;return t?t[0]:e.t}function I2(e){var t=e.children;return t?t[t.length-1]:e.t}function Ese(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function Sse(e){for(var t=0,n=0,r=e.children,i=r.length,o;--i>=0;)o=r[i],o.z+=t,o.m+=t,t+=o.s+(n+=o.c)}function _se(e,t,n){return e.a.parent===t.parent?e.a:n}function Ym(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}Ym.prototype=Object.create(nf.prototype);function kse(e){for(var t=new Ym(e,0),n,r=[t],i,o,s,a;n=r.pop();)if(o=n._.children)for(n.children=new Array(a=o.length),s=a-1;s>=0;--s)r.push(i=n.children[s]=new Ym(o[s],s)),i.parent=n;return(t.parent=new Ym(null,0)).children=[t],t}function $se(){var e=wse,t=1,n=1,r=null;function i(l){var c=kse(l);if(c.eachAfter(o),c.parent.m=-c.z,c.eachBefore(s),r)l.eachBefore(u);else{var f=l,d=l,h=l;l.eachBefore(function(v){v.x<f.x&&(f=v),v.x>d.x&&(d=v),v.depth>h.depth&&(h=v)});var p=f===d?1:e(f,d)/2,g=p-f.x,m=t/(d.x+p+g),y=n/(h.depth||1);l.eachBefore(function(v){v.x=(v.x+g)*m,v.y=v.depth*y})}return l}function o(l){var c=l.children,f=l.parent.children,d=l.i?f[l.i-1]:null;if(c){Sse(l);var h=(c[0].z+c[c.length-1].z)/2;d?(l.z=d.z+e(l._,d._),l.m=l.z-h):l.z=h}else d&&(l.z=d.z+e(l._,d._));l.parent.A=a(l,d,l.parent.A||f[0])}function s(l){l._.x=l.z+l.parent.m,l.m+=l.parent.m}function a(l,c,f){if(c){for(var d=l,h=l,p=c,g=d.parent.children[0],m=d.m,y=h.m,v=p.m,x=g.m,b;p=I2(p),d=z2(d),p&&d;)g=z2(g),h=I2(h),h.a=l,b=p.z+v-d.z-m+e(p._,d._),b>0&&(Ese(_se(p,l,f),l,b),m+=b,y+=b),v+=p.m,m+=d.m,x+=g.m,y+=h.m;p&&!I2(h)&&(h.t=p,h.m+=v-y),d&&!z2(g)&&(g.t=d,g.m+=m-x,f=l)}return f}function u(l){l.x*=t,l.y=l.depth*n}return i.separation=function(l){return arguments.length?(e=l,i):e},i.size=function(l){return arguments.length?(r=!1,t=+l[0],n=+l[1],i):r?null:[t,n]},i.nodeSize=function(l){return arguments.length?(r=!0,t=+l[0],n=+l[1],i):r?[t,n]:null},i}function _v(e,t,n,r,i){for(var o=e.children,s,a=-1,u=o.length,l=e.value&&(i-n)/e.value;++a<u;)s=o[a],s.x0=t,s.x1=r,s.y0=n,s.y1=n+=s.value*l}var U9=(1+Math.sqrt(5))/2;function W9(e,t,n,r,i,o){for(var s=[],a=t.children,u,l,c=0,f=0,d=a.length,h,p,g=t.value,m,y,v,x,b,w,S;c<d;){h=i-n,p=o-r;do m=a[f++].value;while(!m&&f<d);for(y=v=m,w=Math.max(p/h,h/p)/(g*e),S=m*m*w,b=Math.max(v/S,S/y);f<d;++f){if(m+=l=a[f].value,l<y&&(y=l),l>v&&(v=l),S=m*m*w,x=Math.max(v/S,S/y),x>b){m-=l;break}b=x}s.push(u={value:m,dice:h<p,children:a.slice(c,f)}),u.dice?Zp(u,n,r,i,g?r+=p*m/g:o):_v(u,n,r,g?n+=h*m/g:i,o),g-=m,c=f}return s}const q9=function e(t){function n(r,i,o,s,a){W9(t,r,i,o,s,a)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(U9);function Cse(){var e=q9,t=!1,n=1,r=1,i=[0],o=mu,s=mu,a=mu,u=mu,l=mu;function c(d){return d.x0=d.y0=0,d.x1=n,d.y1=r,d.eachBefore(f),i=[0],t&&d.eachBefore(j9),d}function f(d){var h=i[d.depth],p=d.x0+h,g=d.y0+h,m=d.x1-h,y=d.y1-h;m<p&&(p=m=(p+m)/2),y<g&&(g=y=(g+y)/2),d.x0=p,d.y0=g,d.x1=m,d.y1=y,d.children&&(h=i[d.depth+1]=o(d)/2,p+=l(d)-h,g+=s(d)-h,m-=a(d)-h,y-=u(d)-h,m<p&&(p=m=(p+m)/2),y<g&&(g=y=(g+y)/2),e(d,p,g,m,y))}return c.round=function(d){return arguments.length?(t=!!d,c):t},c.size=function(d){return arguments.length?(n=+d[0],r=+d[1],c):[n,r]},c.tile=function(d){return arguments.length?(e=z9(d),c):e},c.padding=function(d){return arguments.length?c.paddingInner(d).paddingOuter(d):c.paddingInner()},c.paddingInner=function(d){return arguments.length?(o=typeof d=="function"?d:Gl(+d),c):o},c.paddingOuter=function(d){return arguments.length?c.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):c.paddingTop()},c.paddingTop=function(d){return arguments.length?(s=typeof d=="function"?d:Gl(+d),c):s},c.paddingRight=function(d){return arguments.length?(a=typeof d=="function"?d:Gl(+d),c):a},c.paddingBottom=function(d){return arguments.length?(u=typeof d=="function"?d:Gl(+d),c):u},c.paddingLeft=function(d){return arguments.length?(l=typeof d=="function"?d:Gl(+d),c):l},c}function Ase(e,t,n,r,i){var o=e.children,s,a=o.length,u,l=new Array(a+1);for(l[0]=u=s=0;s<a;++s)l[s+1]=u+=o[s].value;c(0,a,e.value,t,n,r,i);function c(f,d,h,p,g,m,y){if(f>=d-1){var v=o[f];v.x0=p,v.y0=g,v.x1=m,v.y1=y;return}for(var x=l[f],b=h/2+x,w=f+1,S=d-1;w<S;){var E=w+S>>>1;l[E]<b?w=E+1:S=E}b-l[w-1]<l[w]-b&&f+1<w&&--w;var _=l[w]-x,$=h-_;if(m-p>y-g){var k=h?(p*$+m*_)/h:m;c(f,w,_,p,g,k,y),c(w,d,$,k,g,m,y)}else{var A=h?(g*$+y*_)/h:y;c(f,w,_,p,g,m,A),c(w,d,$,p,A,m,y)}}}function Fse(e,t,n,r,i){(e.depth&1?_v:Zp)(e,t,n,r,i)}const Tse=function e(t){function n(r,i,o,s,a){if((u=r._squarify)&&u.ratio===t)for(var u,l,c,f,d=-1,h,p=u.length,g=r.value;++d<p;){for(l=u[d],c=l.children,f=l.value=0,h=c.length;f<h;++f)l.value+=c[f].value;l.dice?Zp(l,i,o,s,g?o+=(a-o)*l.value/g:a):_v(l,i,o,g?i+=(s-i)*l.value/g:s,a),g-=l.value}else r._squarify=u=W9(t,r,i,o,s,a),u.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(U9);function BE(e,t,n){const r={};return e.each(i=>{const o=i.data;n(o)&&(r[t(o)]=i)}),e.lookup=r,e}function RC(e){P.call(this,null,e)}RC.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const Mse=e=>e.values;V(RC,P,{transform(e,t){t.source||z("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),o=this.value;return(!o||r||t.changed())&&(o&&o.each(s=>{s.children&&zy(s.data)&&i.rem.push(s.data)}),this.value=o=DC({values:K(e.keys).reduce((s,a)=>(s.key(a),s),Nse()).entries(i.source)},Mse),n&&o.each(s=>{s.children&&(s=Ne(s.data),i.add.push(s),i.source.push(s))}),BE(o,oe,oe)),i.source.root=o,i}});function Nse(){const e=[],t={entries:i=>r(n(i,0),0),key:i=>(e.push(i),t)};function n(i,o){if(o>=e.length)return i;const s=i.length,a=e[o++],u={},l={};let c=-1,f,d,h;for(;++c<s;)f=a(d=i[c])+"",(h=u[f])?h.push(d):u[f]=[d];for(f in u)l[f]=n(u[f],o);return l}function r(i,o){if(++o>e.length)return i;const s=[];for(const a in i)s.push({key:a,values:r(i[a],o)});return s}return t}function gs(e){P.call(this,null,e)}const Ose=(e,t)=>e.parent===t.parent?1:2;V(gs,P,{transform(e,t){(!t.source||!t.source.root)&&z(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),r=this.fields,i=t.source.root,o=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(yl(e.sort,s=>s.data)),Dse(n,this.params,e),n.separation&&n.separation(e.separation!==!1?Ose:Sf);try{this.value=n(i)}catch(s){z(s)}return i.each(s=>Rse(s,r,o)),t.reflow(e.modified()).modifies(o).modifies("leaf")}});function Dse(e,t,n){for(let r,i=0,o=t.length;i<o;++i)r=t[i],r in n&&e[r](n[r])}function Rse(e,t,n){const r=e.data,i=t.length-1;for(let o=0;o<i;++o)r[n[o]]=e[t[o]];r[n[i]]=e.children?e.children.length:0}const jE=["x","y","r","depth","children"];function PC(e){gs.call(this,e)}PC.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:jE.length,default:jE}]};V(PC,gs,{layout:gse,params:["radius","size","padding"],fields:jE});const UE=["x0","y0","x1","y1","depth","children"];function LC(e){gs.call(this,e)}LC.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:UE.length,default:UE}]};V(LC,gs,{layout:mse,params:["size","round","padding"],fields:UE});function zC(e){P.call(this,null,e)}zC.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};V(zC,P,{transform(e,t){t.source||z("Stratify transform requires an upstream data source.");let n=this.value;const r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),o=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),o&&(n=i.source.length?BE(rO().id(e.key).parentId(e.parentKey)(i.source),e.key,Ur):BE(rO()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});const oO={tidy:$se,cluster:zoe},WE=["x","y","depth","children"];function IC(e){gs.call(this,e)}IC.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:WE.length,default:WE}]};V(IC,gs,{layout(e){const t=e||"tidy";if(ae(oO,t))return oO[t]();z("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:WE});function BC(e){P.call(this,[],e)}BC.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};V(BC,P,{transform(e,t){const n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),o={};return r||z("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,s=>o[oe(s)]=1),r.each(s=>{const a=s.data,u=s.parent&&s.parent.data;u&&o[oe(a)]&&o[oe(u)]&&i.add.push(Ne({source:u,target:a}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,s=>o[oe(s)]=1),n.forEach(s=>{(o[oe(s.source)]||o[oe(s.target)])&&i.mod.push(s)})),i}});const sO={binary:Ase,dice:Zp,slice:_v,slicedice:Fse,squarify:q9,resquarify:Tse},qE=["x0","y0","x1","y1","depth","children"];function jC(e){gs.call(this,e)}jC.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:qE.length,default:qE}]};V(jC,gs,{layout(){const e=Cse();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{ae(sO,t)?e.tile(sO[t]):z("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:qE});const Pse=Object.freeze(Object.defineProperty({__proto__:null,nest:RC,pack:PC,partition:LC,stratify:zC,tree:IC,treelinks:BC,treemap:jC},Symbol.toStringTag,{value:"Module"})),B2=4278190080;function Lse(e,t){const n=e.bitmap();return(t||[]).forEach(r=>n.set(e(r.boundary[0]),e(r.boundary[3]))),[n,void 0]}function zse(e,t,n,r,i){const o=e.width,s=e.height,a=r||i,u=ua(o,s).getContext("2d"),l=ua(o,s).getContext("2d"),c=a&&ua(o,s).getContext("2d");n.forEach(_=>Xm(u,_,!1)),Xm(l,t,!1),a&&Xm(c,t,!0);const f=j2(u,o,s),d=j2(l,o,s),h=a&&j2(c,o,s),p=e.bitmap(),g=a&&e.bitmap();let m,y,v,x,b,w,S,E;for(y=0;y<s;++y)for(m=0;m<o;++m)b=y*o+m,w=f[b]&B2,E=d[b]&B2,S=a&&h[b]&B2,(w||S||E)&&(v=e(m),x=e(y),!i&&(w||E)&&p.set(v,x),a&&(w||S)&&g.set(v,x));return[p,g]}function j2(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function Xm(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;r==="group"?t.forEach(i=>{i.items.forEach(o=>Xm(e,o.items,n))}):Sr[r].draw(e,{items:n?t.map(Ise):t})}function Ise(e){const t=Iy(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const Mo=5,xn=31,ap=32,Ds=new Uint32Array(ap+1),li=new Uint32Array(ap+1);li[0]=0;Ds[0]=~li[0];for(let e=1;e<=ap;++e)li[e]=li[e-1]<<1|1,Ds[e]=~li[e];function Bse(e,t){const n=new Uint32Array(~~((e*t+ap)/ap));function r(o,s){n[o]|=s}function i(o,s){n[o]&=s}return{array:n,get:(o,s)=>{const a=s*e+o;return n[a>>>Mo]&1<<(a&xn)},set:(o,s)=>{const a=s*e+o;r(a>>>Mo,1<<(a&xn))},clear:(o,s)=>{const a=s*e+o;i(a>>>Mo,~(1<<(a&xn)))},getRange:(o,s,a,u)=>{let l=u,c,f,d,h;for(;l>=s;--l)if(c=l*e+o,f=l*e+a,d=c>>>Mo,h=f>>>Mo,d===h){if(n[d]&Ds[c&xn]&li[(f&xn)+1])return!0}else{if(n[d]&Ds[c&xn]||n[h]&li[(f&xn)+1])return!0;for(let p=d+1;p<h;++p)if(n[p])return!0}return!1},setRange:(o,s,a,u)=>{let l,c,f,d,h;for(;s<=u;++s)if(l=s*e+o,c=s*e+a,f=l>>>Mo,d=c>>>Mo,f===d)r(f,Ds[l&xn]&li[(c&xn)+1]);else for(r(f,Ds[l&xn]),r(d,li[(c&xn)+1]),h=f+1;h<d;++h)r(h,4294967295)},clearRange:(o,s,a,u)=>{let l,c,f,d,h;for(;s<=u;++s)if(l=s*e+o,c=s*e+a,f=l>>>Mo,d=c>>>Mo,f===d)i(f,li[l&xn]|Ds[(c&xn)+1]);else for(i(f,li[l&xn]),i(d,Ds[(c&xn)+1]),h=f+1;h<d;++h)i(h,0)},outOfBounds:(o,s,a,u)=>o<0||s<0||u>=t||a>=e}}function jse(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),o=~~((t+2*n+r)/r),s=a=>~~((a+n)/r);return s.invert=a=>a*r-n,s.bitmap=()=>Bse(i,o),s.ratio=r,s.padding=n,s.width=e,s.height=t,s}function Use(e,t,n,r){const i=e.width,o=e.height;return function(s){const a=s.datum.datum.items[r].items,u=a.length,l=s.datum.fontSize,c=bi.width(s.datum,s.datum.text);let f=0,d,h,p,g,m,y,v;for(let x=0;x<u;++x)d=a[x].x,p=a[x].y,h=a[x].x2===void 0?d:a[x].x2,g=a[x].y2===void 0?p:a[x].y2,m=(d+h)/2,y=(p+g)/2,v=Math.abs(h-d+g-p),v>=f&&(f=v,s.x=m,s.y=y);return m=c/2,y=l/2,d=s.x-m,h=s.x+m,p=s.y-y,g=s.y+y,s.align="center",d<0&&h<=i?s.align="left":0<=d&&i<h&&(s.align="right"),s.baseline="middle",p<0&&g<=o?s.baseline="top":0<=p&&o<g&&(s.baseline="bottom"),!0}}function L1(e,t,n,r,i,o){let s=n/2;return e-s<0||e+s>i||t-(s=r/2)<0||t+s>o}function Xs(e,t,n,r,i,o,s,a){const u=i*o/(r*2),l=e(t-u),c=e(t+u),f=e(n-(o=o/2)),d=e(n+o);return s.outOfBounds(l,f,c,d)||s.getRange(l,f,c,d)||a&&a.getRange(l,f,c,d)}function Wse(e,t,n,r){const i=e.width,o=e.height,s=t[0],a=t[1];function u(l,c,f,d,h){const p=e.invert(l),g=e.invert(c);let m=f,y=o,v;if(!L1(p,g,d,h,i,o)&&!Xs(e,p,g,h,d,m,s,a)&&!Xs(e,p,g,h,d,h,s,null)){for(;y-m>=1;)v=(m+y)/2,Xs(e,p,g,h,d,v,s,a)?y=v:m=v;if(m>f)return[p,g,m,!0]}}return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=bi.width(l.datum,l.datum.text);let p=n?d:0,g=!1,m=!1,y=0,v,x,b,w,S,E,_,$,k,A,R,C,T,F,N,D,M;for(let O=0;O<f;++O){for(v=c[O].x,b=c[O].y,x=c[O].x2===void 0?v:c[O].x2,w=c[O].y2===void 0?b:c[O].y2,v>x&&(M=v,v=x,x=M),b>w&&(M=b,b=w,w=M),k=e(v),R=e(x),A=~~((k+R)/2),C=e(b),F=e(w),T=~~((C+F)/2),_=A;_>=k;--_)for($=T;$>=C;--$)D=u(_,$,p,h,d),D&&([l.x,l.y,p,g]=D);for(_=A;_<=R;++_)for($=T;$<=F;++$)D=u(_,$,p,h,d),D&&([l.x,l.y,p,g]=D);!g&&!n&&(N=Math.abs(x-v+w-b),S=(v+x)/2,E=(b+w)/2,N>=y&&!L1(S,E,h,d,i,o)&&!Xs(e,S,E,d,h,d,s,null)&&(y=N,l.x=S,l.y=E,m=!0))}return g||m?(S=h/2,E=d/2,s.setRange(e(l.x-S),e(l.y-E),e(l.x+S),e(l.y+E)),l.align="center",l.baseline="middle",!0):!1}}const qse=[-1,-1,1,1],Hse=[-1,1,-1,1];function Gse(e,t,n,r){const i=e.width,o=e.height,s=t[0],a=t[1],u=e.bitmap();return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=bi.width(l.datum,l.datum.text),p=[];let g=n?d:0,m=!1,y=!1,v=0,x,b,w,S,E,_,$,k,A,R,C,T;for(let F=0;F<f;++F){for(x=c[F].x,w=c[F].y,b=c[F].x2===void 0?x:c[F].x2,S=c[F].y2===void 0?w:c[F].y2,p.push([e((x+b)/2),e((w+S)/2)]);p.length;)if([$,k]=p.pop(),!(s.get($,k)||a.get($,k)||u.get($,k))){u.set($,k);for(let N=0;N<4;++N)E=$+qse[N],_=k+Hse[N],u.outOfBounds(E,_,E,_)||p.push([E,_]);if(E=e.invert($),_=e.invert(k),A=g,R=o,!L1(E,_,h,d,i,o)&&!Xs(e,E,_,d,h,A,s,a)&&!Xs(e,E,_,d,h,d,s,null)){for(;R-A>=1;)C=(A+R)/2,Xs(e,E,_,d,h,C,s,a)?R=C:A=C;A>g&&(l.x=E,l.y=_,g=A,m=!0)}}!m&&!n&&(T=Math.abs(b-x+S-w),E=(x+b)/2,_=(w+S)/2,T>=v&&!L1(E,_,h,d,i,o)&&!Xs(e,E,_,d,h,d,s,null)&&(v=T,l.x=E,l.y=_,y=!0))}return m||y?(E=h/2,_=d/2,s.setRange(e(l.x-E),e(l.y-_),e(l.x+E),e(l.y+_)),l.align="center",l.baseline="middle",!0):!1}}const Vse=["right","center","left"],Yse=["bottom","middle","top"];function Xse(e,t,n,r){const i=e.width,o=e.height,s=t[0],a=t[1],u=r.length;return function(l){const c=l.boundary,f=l.datum.fontSize;if(c[2]<0||c[5]<0||c[0]>i||c[3]>o)return!1;let d=l.textWidth??0,h,p,g,m,y,v,x,b,w,S,E,_,$,k,A;for(let R=0;R<u;++R){if(h=(n[R]&3)-1,p=(n[R]>>>2&3)-1,g=h===0&&p===0||r[R]<0,m=h&&p?Math.SQRT1_2:1,y=r[R]<0?-1:1,v=c[1+h]+r[R]*h*m,E=c[4+p]+y*f*p/2+r[R]*p*m,b=E-f/2,w=E+f/2,_=e(v),k=e(b),A=e(w),!d)if(aO(_,_,k,A,s,a,v,v,b,w,c,g))d=bi.width(l.datum,l.datum.text);else continue;if(S=v+y*d*h/2,v=S-d/2,x=S+d/2,_=e(v),$=e(x),aO(_,$,k,A,s,a,v,x,b,w,c,g))return l.x=h?h*y<0?x:v:S,l.y=p?p*y<0?w:b:E,l.align=Vse[h*y+1],l.baseline=Yse[p*y+1],s.setRange(_,k,$,A),!0}return!1}}function aO(e,t,n,r,i,o,s,a,u,l,c,f){return!(i.outOfBounds(e,n,t,r)||(f&&o||i).getRange(e,n,t,r))}const U2=0,W2=4,q2=8,H2=0,G2=1,V2=2,Qse={"top-left":U2+H2,top:U2+G2,"top-right":U2+V2,left:W2+H2,middle:W2+G2,right:W2+V2,"bottom-left":q2+H2,bottom:q2+G2,"bottom-right":q2+V2},Kse={naive:Use,"reduced-search":Wse,floodfill:Gse};function Jse(e,t,n,r,i,o,s,a,u,l,c){if(!e.length)return e;const f=Math.max(r.length,i.length),d=Zse(r,f),h=eae(i,f),p=tae(e[0].datum),g=p==="group"&&e[0].datum.items[u].marktype,m=g==="area",y=nae(p,g,a,u),v=l===null||l===1/0,x=m&&c==="naive";let b=-1,w=-1;const S=e.map(k=>{const A=v?bi.width(k,k.text):void 0;return b=Math.max(b,A),w=Math.max(w,k.fontSize),{datum:k,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:y(k),textWidth:A}});l=l===null||l===1/0?Math.max(b,w)+Math.max(...r):l;const E=jse(t[0],t[1],l);let _;if(!x){n&&S.sort((R,C)=>n(R.datum,C.datum));let k=!1;for(let R=0;R<h.length&&!k;++R)k=h[R]===5||d[R]<0;const A=(p&&s||m)&&e.map(R=>R.datum);_=o.length||A?zse(E,A||[],o,k,m):Lse(E,s&&S)}const $=m?Kse[c](E,_,s,u):Xse(E,_,h,d);return S.forEach(k=>k.opacity=+$(k)),S}function Zse(e,t){const n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}function eae(e,t){const n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=Qse[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}function tae(e){return e&&e.mark&&e.mark.marktype}function nae(e,t,n,r){const i=o=>[o.x,o.x,o.x,o.y,o.y,o.y];return e?e==="line"||e==="area"?o=>i(o.datum):t==="line"?o=>{const s=o.datum.items[r].items;return i(s.length?s[n==="start"?0:s.length-1]:{x:NaN,y:NaN})}:o=>{const s=o.datum.bounds;return[s.x1,(s.x1+s.x2)/2,s.x2,s.y1,(s.y1+s.y2)/2,s.y2]}:i}const HE=["x","y","opacity","align","baseline"],H9=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function UC(e){P.call(this,null,e)}UC.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:H9},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:HE.length,default:HE}]};V(UC,P,{transform(e,t){function n(o){const s=e[o];return pe(s)&&t.modified(s.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&z("Size parameter should be specified as a [width, height] array.");const i=e.as||HE;return Jse(t.materialize(t.SOURCE).source||[],e.size,e.sort,K(e.offset==null?1:e.offset),K(e.anchor||H9),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(o=>{const s=o.datum;s[i[0]]=o.x,s[i[1]]=o.y,s[i[2]]=o.opacity,s[i[3]]=o.align,s[i[4]]=o.baseline}),t.reflow(r).modifies(i)}});const rae=Object.freeze(Object.defineProperty({__proto__:null,label:UC},Symbol.toStringTag,{value:"Module"}));function G9(e,t){var n=[],r=function(c){return c(a)},i,o,s,a,u,l;if(t==null)n.push(e);else for(i={},o=0,s=e.length;o<s;++o)a=e[o],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function WC(e){P.call(this,null,e)}WC.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};V(WC,P,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=G9(r,e.groupby),o=(e.groupby||[]).map(lt),s=o.length,a=e.as||[lt(e.x),lt(e.y)],u=[];i.forEach(l=>{sL(l,e.x,e.y,e.bandwidth||.3).forEach(c=>{const f={};for(let d=0;d<s;++d)f[o[d]]=l.dims[d];f[a[0]]=c[0],f[a[1]]=c[1],u.push(Ne(f))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});const GE={constant:wk,linear:Ek,log:nL,exp:rL,pow:iL,quad:Sk,poly:oL},iae=(e,t)=>e==="poly"?t:e==="quad"?2:1;function qC(e){P.call(this,null,e)}qC.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(GE)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};V(qC,P,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=G9(r,e.groupby),o=(e.groupby||[]).map(lt),s=e.method||"linear",a=e.order==null?3:e.order,u=iae(s,a),l=e.as||[lt(e.x),lt(e.y)],c=GE[s],f=[];let d=e.extent;ae(GE,s)||z("Invalid regression method: "+s),d!=null&&s==="log"&&d[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),d=null),i.forEach(h=>{if(h.length<=u){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const g=c(h,e.x,e.y,a);if(e.params){f.push(Ne({keys:h.dims,coef:g.coef,rSquared:g.rSquared}));return}const m=d||ao(h,e.x),y=v=>{const x={};for(let b=0;b<o.length;++b)x[o[b]]=h.dims[b];x[l[0]]=v[0],x[l[1]]=v[1],f.push(Ne(x))};s==="linear"||s==="constant"?m.forEach(v=>y([v,g.predict(v)])):Gy(g.predict,m,25,200).forEach(y)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});const oae=Object.freeze(Object.defineProperty({__proto__:null,loess:WC,regression:qC},Symbol.toStringTag,{value:"Module"})),Zo=11102230246251565e-32,tn=134217729,sae=(3+8*Zo)*Zo;function Y2(e,t,n,r,i){let o,s,a,u,l=t[0],c=r[0],f=0,d=0;c>l==c>-l?(o=l,l=t[++f]):(o=c,c=r[++d]);let h=0;if(f<e&&d<n)for(c>l==c>-l?(s=l+o,a=o-(s-l),l=t[++f]):(s=c+o,a=o-(s-c),c=r[++d]),o=s,a!==0&&(i[h++]=a);f<e&&d<n;)c>l==c>-l?(s=o+l,u=s-o,a=o-(s-u)+(l-u),l=t[++f]):(s=o+c,u=s-o,a=o-(s-u)+(c-u),c=r[++d]),o=s,a!==0&&(i[h++]=a);for(;f<e;)s=o+l,u=s-o,a=o-(s-u)+(l-u),l=t[++f],o=s,a!==0&&(i[h++]=a);for(;d<n;)s=o+c,u=s-o,a=o-(s-u)+(c-u),c=r[++d],o=s,a!==0&&(i[h++]=a);return(o!==0||h===0)&&(i[h++]=o),h}function aae(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function eg(e){return new Float64Array(e)}const uae=(3+16*Zo)*Zo,lae=(2+12*Zo)*Zo,cae=(9+64*Zo)*Zo*Zo,zl=eg(4),uO=eg(8),lO=eg(12),cO=eg(16),bn=eg(4);function fae(e,t,n,r,i,o,s){let a,u,l,c,f,d,h,p,g,m,y,v,x,b,w,S,E,_;const $=e-i,k=n-i,A=t-o,R=r-o;b=$*R,d=tn*$,h=d-(d-$),p=$-h,d=tn*R,g=d-(d-R),m=R-g,w=p*m-(b-h*g-p*g-h*m),S=A*k,d=tn*A,h=d-(d-A),p=A-h,d=tn*k,g=d-(d-k),m=k-g,E=p*m-(S-h*g-p*g-h*m),y=w-E,f=w-y,zl[0]=w-(y+f)+(f-E),v=b+y,f=v-b,x=b-(v-f)+(y-f),y=x-S,f=x-y,zl[1]=x-(y+f)+(f-S),_=v+y,f=_-v,zl[2]=v-(_-f)+(y-f),zl[3]=_;let C=aae(4,zl),T=lae*s;if(C>=T||-C>=T||(f=e-$,a=e-($+f)+(f-i),f=n-k,l=n-(k+f)+(f-i),f=t-A,u=t-(A+f)+(f-o),f=r-R,c=r-(R+f)+(f-o),a===0&&u===0&&l===0&&c===0)||(T=cae*s+sae*Math.abs(C),C+=$*c+R*a-(A*l+k*u),C>=T||-C>=T))return C;b=a*R,d=tn*a,h=d-(d-a),p=a-h,d=tn*R,g=d-(d-R),m=R-g,w=p*m-(b-h*g-p*g-h*m),S=u*k,d=tn*u,h=d-(d-u),p=u-h,d=tn*k,g=d-(d-k),m=k-g,E=p*m-(S-h*g-p*g-h*m),y=w-E,f=w-y,bn[0]=w-(y+f)+(f-E),v=b+y,f=v-b,x=b-(v-f)+(y-f),y=x-S,f=x-y,bn[1]=x-(y+f)+(f-S),_=v+y,f=_-v,bn[2]=v-(_-f)+(y-f),bn[3]=_;const F=Y2(4,zl,4,bn,uO);b=$*c,d=tn*$,h=d-(d-$),p=$-h,d=tn*c,g=d-(d-c),m=c-g,w=p*m-(b-h*g-p*g-h*m),S=A*l,d=tn*A,h=d-(d-A),p=A-h,d=tn*l,g=d-(d-l),m=l-g,E=p*m-(S-h*g-p*g-h*m),y=w-E,f=w-y,bn[0]=w-(y+f)+(f-E),v=b+y,f=v-b,x=b-(v-f)+(y-f),y=x-S,f=x-y,bn[1]=x-(y+f)+(f-S),_=v+y,f=_-v,bn[2]=v-(_-f)+(y-f),bn[3]=_;const N=Y2(F,uO,4,bn,lO);b=a*c,d=tn*a,h=d-(d-a),p=a-h,d=tn*c,g=d-(d-c),m=c-g,w=p*m-(b-h*g-p*g-h*m),S=u*l,d=tn*u,h=d-(d-u),p=u-h,d=tn*l,g=d-(d-l),m=l-g,E=p*m-(S-h*g-p*g-h*m),y=w-E,f=w-y,bn[0]=w-(y+f)+(f-E),v=b+y,f=v-b,x=b-(v-f)+(y-f),y=x-S,f=x-y,bn[1]=x-(y+f)+(f-S),_=v+y,f=_-v,bn[2]=v-(_-f)+(y-f),bn[3]=_;const D=Y2(N,lO,4,bn,cO);return cO[D-1]}function im(e,t,n,r,i,o){const s=(t-o)*(n-i),a=(e-i)*(r-o),u=s-a,l=Math.abs(s+a);return Math.abs(u)>=uae*l?u:-fae(e,t,n,r,i,o,l)}const fO=Math.pow(2,-52),om=new Uint32Array(512);class z1{static from(t,n=mae,r=yae){const i=t.length,o=new Float64Array(i*2);for(let s=0;s<i;s++){const a=t[s];o[2*s]=n(a),o[2*s+1]=r(a)}return new z1(o)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:o}=this,s=t.length>>1;let a=1/0,u=1/0,l=-1/0,c=-1/0;for(let k=0;k<s;k++){const A=t[2*k],R=t[2*k+1];A<a&&(a=A),R<u&&(u=R),A>l&&(l=A),R>c&&(c=R),this._ids[k]=k}const f=(a+l)/2,d=(u+c)/2;let h=1/0,p,g,m;for(let k=0;k<s;k++){const A=X2(f,d,t[2*k],t[2*k+1]);A<h&&(p=k,h=A)}const y=t[2*p],v=t[2*p+1];h=1/0;for(let k=0;k<s;k++){if(k===p)continue;const A=X2(y,v,t[2*k],t[2*k+1]);A<h&&A>0&&(g=k,h=A)}let x=t[2*g],b=t[2*g+1],w=1/0;for(let k=0;k<s;k++){if(k===p||k===g)continue;const A=pae(y,v,x,b,t[2*k],t[2*k+1]);A<w&&(m=k,w=A)}let S=t[2*m],E=t[2*m+1];if(w===1/0){for(let R=0;R<s;R++)this._dists[R]=t[2*R]-t[0]||t[2*R+1]-t[1];fc(this._ids,this._dists,0,s-1);const k=new Uint32Array(s);let A=0;for(let R=0,C=-1/0;R<s;R++){const T=this._ids[R];this._dists[T]>C&&(k[A++]=T,C=this._dists[T])}this.hull=k.subarray(0,A),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(im(y,v,x,b,S,E)<0){const k=g,A=x,R=b;g=m,x=S,b=E,m=k,S=A,E=R}const _=gae(y,v,x,b,S,E);this._cx=_.x,this._cy=_.y;for(let k=0;k<s;k++)this._dists[k]=X2(t[2*k],t[2*k+1],_.x,_.y);fc(this._ids,this._dists,0,s-1),this._hullStart=p;let $=3;r[p]=n[m]=g,r[g]=n[p]=m,r[m]=n[g]=p,i[p]=0,i[g]=1,i[m]=2,o.fill(-1),o[this._hashKey(y,v)]=p,o[this._hashKey(x,b)]=g,o[this._hashKey(S,E)]=m,this.trianglesLen=0,this._addTriangle(p,g,m,-1,-1,-1);for(let k=0,A,R;k<this._ids.length;k++){const C=this._ids[k],T=t[2*C],F=t[2*C+1];if(k>0&&Math.abs(T-A)<=fO&&Math.abs(F-R)<=fO||(A=T,R=F,C===p||C===g||C===m))continue;let N=0;for(let X=0,te=this._hashKey(T,F);X<this._hashSize&&(N=o[(te+X)%this._hashSize],!(N!==-1&&N!==r[N]));X++);N=n[N];let D=N,M;for(;M=r[D],im(T,F,t[2*D],t[2*D+1],t[2*M],t[2*M+1])>=0;)if(D=M,D===N){D=-1;break}if(D===-1)continue;let O=this._addTriangle(D,C,r[D],-1,-1,i[D]);i[C]=this._legalize(O+2),i[D]=O,$++;let B=r[D];for(;M=r[B],im(T,F,t[2*B],t[2*B+1],t[2*M],t[2*M+1])<0;)O=this._addTriangle(B,C,M,i[C],-1,i[B]),i[C]=this._legalize(O+2),r[B]=B,$--,B=M;if(D===N)for(;M=n[D],im(T,F,t[2*M],t[2*M+1],t[2*D],t[2*D+1])<0;)O=this._addTriangle(M,C,D,-1,i[D],i[M]),this._legalize(O+2),i[M]=O,r[D]=D,$--,D=M;this._hullStart=n[C]=D,r[D]=n[B]=C,r[C]=B,o[this._hashKey(T,F)]=C,o[this._hashKey(t[2*D],t[2*D+1])]=D}this.hull=new Uint32Array($);for(let k=0,A=this._hullStart;k<$;k++)this.hull[k]=A,A=r[A];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(dae(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let o=0,s=0;for(;;){const a=r[t],u=t-t%3;if(s=u+(t+2)%3,a===-1){if(o===0)break;t=om[--o];continue}const l=a-a%3,c=u+(t+1)%3,f=l+(a+2)%3,d=n[s],h=n[t],p=n[c],g=n[f];if(hae(i[2*d],i[2*d+1],i[2*h],i[2*h+1],i[2*p],i[2*p+1],i[2*g],i[2*g+1])){n[t]=g,n[a]=d;const y=r[f];if(y===-1){let x=this._hullStart;do{if(this._hullTri[x]===f){this._hullTri[x]=t;break}x=this._hullPrev[x]}while(x!==this._hullStart)}this._link(t,y),this._link(a,r[s]),this._link(s,f);const v=l+(a+1)%3;o<om.length&&(om[o++]=v)}else{if(o===0)break;t=om[--o]}}return s}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,o,s){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=r,this._link(a,i),this._link(a+1,o),this._link(a+2,s),this.trianglesLen+=3,a}}function dae(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function X2(e,t,n,r){const i=e-n,o=t-r;return i*i+o*o}function hae(e,t,n,r,i,o,s,a){const u=e-s,l=t-a,c=n-s,f=r-a,d=i-s,h=o-a,p=u*u+l*l,g=c*c+f*f,m=d*d+h*h;return u*(f*m-g*h)-l*(c*m-g*d)+p*(c*h-f*d)<0}function pae(e,t,n,r,i,o){const s=n-e,a=r-t,u=i-e,l=o-t,c=s*s+a*a,f=u*u+l*l,d=.5/(s*l-a*u),h=(l*c-a*f)*d,p=(s*f-u*c)*d;return h*h+p*p}function gae(e,t,n,r,i,o){const s=n-e,a=r-t,u=i-e,l=o-t,c=s*s+a*a,f=u*u+l*l,d=.5/(s*l-a*u),h=e+(l*c-a*f)*d,p=t+(s*f-u*c)*d;return{x:h,y:p}}function fc(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const o=e[i],s=t[o];let a=i-1;for(;a>=n&&t[e[a]]>s;)e[a+1]=e[a--];e[a+1]=o}else{const i=n+r>>1;let o=n+1,s=r;md(e,i,o),t[e[n]]>t[e[r]]&&md(e,n,r),t[e[o]]>t[e[r]]&&md(e,o,r),t[e[n]]>t[e[o]]&&md(e,n,o);const a=e[o],u=t[a];for(;;){do o++;while(t[e[o]]<u);do s--;while(t[e[s]]>u);if(s<o)break;md(e,o,s)}e[n+1]=e[s],e[s]=a,r-o+1>=s-n?(fc(e,t,o,r),fc(e,t,n,s-1)):(fc(e,t,n,s-1),fc(e,t,o,r))}}function md(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function mae(e){return e[0]}function yae(e){return e[1]}const dO=1e-6;class ku{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,o=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${o}`:(Math.abs(this._x1-i)>dO||Math.abs(this._y1-o)>dO)&&(this._+="L"+i+","+o),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=o}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class VE{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let vae=class{constructor(t,[n,r,i,o]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((o=+o)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=o,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this;let o,s;const a=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let g=0,m=0,y=r.length,v,x;g<y;g+=3,m+=2){const b=r[g]*2,w=r[g+1]*2,S=r[g+2]*2,E=t[b],_=t[b+1],$=t[w],k=t[w+1],A=t[S],R=t[S+1],C=$-E,T=k-_,F=A-E,N=R-_,D=(C*N-T*F)*2;if(Math.abs(D)<1e-9){if(o===void 0){o=s=0;for(const O of n)o+=t[O*2],s+=t[O*2+1];o/=n.length,s/=n.length}const M=1e9*Math.sign((o-E)*N-(s-_)*F);v=(E+A)/2-M*N,x=(_+R)/2+M*F}else{const M=1/D,O=C*C+T*T,B=F*F+N*N;v=E+(N*O-T*B)*M,x=_+(C*B-F*O)*M}a[m]=v,a[m+1]=x}let u=n[n.length-1],l,c=u*4,f,d=t[2*u],h,p=t[2*u+1];i.fill(0);for(let g=0;g<n.length;++g)u=n[g],l=c,f=d,h=p,c=u*4,d=t[2*u],p=t[2*u+1],i[l+2]=i[c]=h-p,i[l+3]=i[c+1]=d-f}render(t){const n=t==null?t=new ku:void 0,{delaunay:{halfedges:r,inedges:i,hull:o},circumcenters:s,vectors:a}=this;if(o.length<=1)return null;for(let c=0,f=r.length;c<f;++c){const d=r[c];if(d<c)continue;const h=Math.floor(c/3)*2,p=Math.floor(d/3)*2,g=s[h],m=s[h+1],y=s[p],v=s[p+1];this._renderSegment(g,m,y,v,t)}let u,l=o[o.length-1];for(let c=0;c<o.length;++c){u=l,l=o[c];const f=Math.floor(i[l]/3)*2,d=s[f],h=s[f+1],p=u*4,g=this._project(d,h,a[p+2],a[p+3]);g&&this._renderSegment(d,h,g[0],g[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new ku:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new ku:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let o=i.length;for(;i[0]===i[o-2]&&i[1]===i[o-1]&&o>1;)o-=2;for(let s=2;s<o;s+=2)(i[s]!==i[s-2]||i[s+1]!==i[s-1])&&n.lineTo(i[s],i[s+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new VE;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,o){let s;const a=this._regioncode(t,n),u=this._regioncode(r,i);a===0&&u===0?(o.moveTo(t,n),o.lineTo(r,i)):(s=this._clipSegment(t,n,r,i,a,u))&&(o.moveTo(s[0],s[1]),o.lineTo(s[2],s[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){e:for(let o=0,s=n.length;o<s;o+=2)for(let a=0,u=i.length;a<u;a+=2)if(n[o]===i[a]&&n[o+1]===i[a+1]&&n[(o+2)%s]===i[(a+u-2)%u]&&n[(o+3)%s]===i[(a+u-1)%u]){yield r;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:o}}=this,s=r[t];if(s===-1)return null;const a=[];let u=s;do{const l=Math.floor(u/3);if(a.push(n[l*2],n[l*2+1]),u=u%3===2?u-2:u+1,o[u]!==t)break;u=i[u]}while(u!==s&&u!==-1);return a}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){const r=n.length;let i=null,o,s,a=n[r-2],u=n[r-1],l,c=this._regioncode(a,u),f,d=0;for(let h=0;h<r;h+=2)if(o=a,s=u,a=n[h],u=n[h+1],l=c,c=this._regioncode(a,u),l===0&&c===0)f=d,d=0,i?i.push(a,u):i=[a,u];else{let p,g,m,y,v;if(l===0){if((p=this._clipSegment(o,s,a,u,l,c))===null)continue;[g,m,y,v]=p}else{if((p=this._clipSegment(a,u,o,s,c,l))===null)continue;[y,v,g,m]=p,f=d,d=this._edgecode(g,m),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(g,m):i=[g,m]}f=d,d=this._edgecode(y,v),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(y,v):i=[y,v]}if(i)f=d,d=this._edgecode(i[0],i[1]),f&&d&&this._edge(t,f,d,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,o,s){const a=o<s;for(a&&([t,n,r,i,o,s]=[r,i,t,n,s,o]);;){if(o===0&&s===0)return a?[r,i,t,n]:[t,n,r,i];if(o&s)return null;let u,l,c=o||s;c&8?(u=t+(r-t)*(this.ymax-n)/(i-n),l=this.ymax):c&4?(u=t+(r-t)*(this.ymin-n)/(i-n),l=this.ymin):c&2?(l=n+(i-n)*(this.xmax-t)/(r-t),u=this.xmax):(l=n+(i-n)*(this.xmin-t)/(r-t),u=this.xmin),o?(t=u,n=l,o=this._regioncode(t,n)):(r=u,i=l,s=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,o,s){let a=Array.from(n),u;if((u=this._project(a[0],a[1],r,i))&&a.unshift(u[0],u[1]),(u=this._project(a[a.length-2],a[a.length-1],o,s))&&a.push(u[0],u[1]),a=this._clipFinite(t,a))for(let l=0,c=a.length,f,d=this._edgecode(a[c-2],a[c-1]);l<c;l+=2)f=d,d=this._edgecode(a[l],a[l+1]),f&&d&&(l=this._edge(t,f,d,a,l),c=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,r,i,o){for(;n!==r;){let s,a;switch(n){case 5:n=4;continue;case 4:n=6,s=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,s=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,s=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,s=this.xmin,a=this.ymin;break}(i[o]!==s||i[o+1]!==a)&&this.contains(t,s,a)&&(i.splice(o,0,s,a),o+=2)}return o}_project(t,n,r,i){let o=1/0,s,a,u;if(i<0){if(n<=this.ymin)return null;(s=(this.ymin-n)/i)<o&&(u=this.ymin,a=t+(o=s)*r)}else if(i>0){if(n>=this.ymax)return null;(s=(this.ymax-n)/i)<o&&(u=this.ymax,a=t+(o=s)*r)}if(r>0){if(t>=this.xmax)return null;(s=(this.xmax-t)/r)<o&&(a=this.xmax,u=n+(o=s)*i)}else if(r<0){if(t<=this.xmin)return null;(s=(this.xmin-t)/r)<o&&(a=this.xmin,u=n+(o=s)*i)}return[a,u]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}};const xae=2*Math.PI,Il=Math.pow;function bae(e){return e[0]}function wae(e){return e[1]}function Eae(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],o=2*t[r+1],s=2*t[r+2];if((n[s]-n[i])*(n[o+1]-n[i+1])-(n[o]-n[i])*(n[s+1]-n[i+1])>1e-10)return!1}return!0}function Sae(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class HC{static from(t,n=bae,r=wae,i){return new HC("length"in t?_ae(t,n,r,i):Float64Array.from(kae(t,n,r,i)))}constructor(t){this._delaunator=new z1(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&Eae(t)){this.collinear=Int32Array.from({length:n.length/2},(d,h)=>h).sort((d,h)=>n[2*d]-n[2*h]||n[2*d+1]-n[2*h+1]);const u=this.collinear[0],l=this.collinear[this.collinear.length-1],c=[n[2*u],n[2*u+1],n[2*l],n[2*l+1]],f=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let d=0,h=n.length/2;d<h;++d){const p=Sae(n[2*d],n[2*d+1],f);n[2*d]=p[0],n[2*d+1]=p[1]}this._delaunator=new z1(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,o=this.triangles=this._delaunator.triangles,s=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let u=0,l=r.length;u<l;++u){const c=o[u%3===2?u-2:u+1];(r[u]===-1||s[c]===-1)&&(s[c]=u)}for(let u=0,l=i.length;u<l;++u)a[i[u]]=u;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],s[i[0]]=1,i.length===2&&(s[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new vae(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:o,triangles:s,collinear:a}=this;if(a){const f=a.indexOf(t);f>0&&(yield a[f-1]),f<a.length-1&&(yield a[f+1]);return}const u=n[t];if(u===-1)return;let l=u,c=-1;do{if(yield c=s[l],l=l%3===2?l-2:l+1,s[l]!==t)return;if(l=o[l],l===-1){const f=r[(i[t]+1)%r.length];f!==c&&(yield f);return}}while(l!==u)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let o;for(;(o=this._step(r,t,n))>=0&&o!==r&&o!==i;)r=o;return o}_step(t,n,r){const{inedges:i,hull:o,_hullIndex:s,halfedges:a,triangles:u,points:l}=this;if(i[t]===-1||!l.length)return(t+1)%(l.length>>1);let c=t,f=Il(n-l[t*2],2)+Il(r-l[t*2+1],2);const d=i[t];let h=d;do{let p=u[h];const g=Il(n-l[p*2],2)+Il(r-l[p*2+1],2);if(g<f&&(f=g,c=p),h=h%3===2?h-2:h+1,u[h]!==t)break;if(h=a[h],h===-1){if(h=o[(s[t]+1)%o.length],h!==p&&Il(n-l[h*2],2)+Il(r-l[h*2+1],2)<f)return h;break}}while(h!==d);return c}render(t){const n=t==null?t=new ku:void 0,{points:r,halfedges:i,triangles:o}=this;for(let s=0,a=i.length;s<a;++s){const u=i[s];if(u<s)continue;const l=o[s]*2,c=o[u]*2;t.moveTo(r[l],r[l+1]),t.lineTo(r[c],r[c+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const r=t==null?t=new ku:void 0,{points:i}=this;for(let o=0,s=i.length;o<s;o+=2){const a=i[o],u=i[o+1];t.moveTo(a+n,u),t.arc(a,u,n,0,xae)}return r&&r.value()}renderHull(t){const n=t==null?t=new ku:void 0,{hull:r,points:i}=this,o=r[0]*2,s=r.length;t.moveTo(i[o],i[o+1]);for(let a=1;a<s;++a){const u=2*r[a];t.lineTo(i[u],i[u+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new VE;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new ku:void 0,{points:i,triangles:o}=this,s=o[t*=3]*2,a=o[t+1]*2,u=o[t+2]*2;return n.moveTo(i[s],i[s+1]),n.lineTo(i[a],i[a+1]),n.lineTo(i[u],i[u+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new VE;return this.renderTriangle(t,n),n.value()}}function _ae(e,t,n,r){const i=e.length,o=new Float64Array(i*2);for(let s=0;s<i;++s){const a=e[s];o[s*2]=t.call(r,a,s,e),o[s*2+1]=n.call(r,a,s,e)}return o}function*kae(e,t,n,r){let i=0;for(const o of e)yield t.call(r,o,i,e),yield n.call(r,o,i,e),++i}function GC(e){P.call(this,null,e)}GC.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const $ae=[-1e5,-1e5,1e5,1e5];V(GC,P,{transform(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:$ae;const o=this.value=HC.from(r,e.x,e.y).voronoi(i);for(let s=0,a=r.length;s<a;++s){const u=o.cellPolygon(s);r[s][n]=u?Cae(u):null}return t.reflow(e.modified()).modifies(n)}});function Cae(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}const Aae=Object.freeze(Object.defineProperty({__proto__:null,voronoi:GC},Symbol.toStringTag,{value:"Module"}));var Q2=Math.PI/180,Jd=64,Qm=2048;function Fae(){var e=[256,256],t,n,r,i,o,s,a,u=V9,l=[],c=Math.random,f={};f.layout=function(){for(var p=d(ua()),g=Rae((e[0]>>5)*e[1]),m=null,y=l.length,v=-1,x=[],b=l.map(S=>({text:t(S),font:n(S),style:i(S),weight:o(S),rotate:s(S),size:~~(r(S)+1e-14),padding:a(S),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:S})).sort((S,E)=>E.size-S.size);++v<y;){var w=b[v];w.x=e[0]*(c()+.5)>>1,w.y=e[1]*(c()+.5)>>1,Tae(p,w,b,v),w.hasText&&h(g,w,m)&&(x.push(w),m?Nae(m,w):m=[{x:w.x+w.x0,y:w.y+w.y0},{x:w.x+w.x1,y:w.y+w.y1}],w.x-=e[0]>>1,w.y-=e[1]>>1)}return x};function d(p){p.width=p.height=1;var g=Math.sqrt(p.getContext("2d").getImageData(0,0,1,1).data.length>>2);p.width=(Jd<<5)/g,p.height=Qm/g;var m=p.getContext("2d");return m.fillStyle=m.strokeStyle="red",m.textAlign="center",{context:m,ratio:g}}function h(p,g,m){for(var y=g.x,v=g.y,x=Math.sqrt(e[0]*e[0]+e[1]*e[1]),b=u(e),w=c()<.5?1:-1,S=-w,E,_,$;(E=b(S+=w))&&(_=~~E[0],$=~~E[1],!(Math.min(Math.abs(_),Math.abs($))>=x));)if(g.x=y+_,g.y=v+$,!(g.x+g.x0<0||g.y+g.y0<0||g.x+g.x1>e[0]||g.y+g.y1>e[1])&&(!m||!Mae(g,p,e[0]))&&(!m||Oae(g,m))){for(var k=g.sprite,A=g.width>>5,R=e[0]>>5,C=g.x-(A<<4),T=C&127,F=32-T,N=g.y1-g.y0,D=(g.y+g.y0)*R+(C>>5),M,O=0;O<N;O++){M=0;for(var B=0;B<=A;B++)p[D+B]|=M<<F|(B<A?(M=k[O*A+B])>>>T:0);D+=R}return g.sprite=null,!0}return!1}return f.words=function(p){return arguments.length?(l=p,f):l},f.size=function(p){return arguments.length?(e=[+p[0],+p[1]],f):e},f.font=function(p){return arguments.length?(n=Ka(p),f):n},f.fontStyle=function(p){return arguments.length?(i=Ka(p),f):i},f.fontWeight=function(p){return arguments.length?(o=Ka(p),f):o},f.rotate=function(p){return arguments.length?(s=Ka(p),f):s},f.text=function(p){return arguments.length?(t=Ka(p),f):t},f.spiral=function(p){return arguments.length?(u=Pae[p]||p,f):u},f.fontSize=function(p){return arguments.length?(r=Ka(p),f):r},f.padding=function(p){return arguments.length?(a=Ka(p),f):a},f.random=function(p){return arguments.length?(c=p,f):c},f}function Tae(e,t,n,r){if(!t.sprite){var i=e.context,o=e.ratio;i.clearRect(0,0,(Jd<<5)/o,Qm/o);var s=0,a=0,u=0,l=n.length,c,f,d,h,p;for(--r;++r<l;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/o)+"px "+t.font,c=i.measureText(t.text+"m").width*o,d=t.size<<1,t.rotate){var g=Math.sin(t.rotate*Q2),m=Math.cos(t.rotate*Q2),y=c*m,v=c*g,x=d*m,b=d*g;c=Math.max(Math.abs(y+b),Math.abs(y-b))+31>>5<<5,d=~~Math.max(Math.abs(v+x),Math.abs(v-x))}else c=c+31>>5<<5;if(d>u&&(u=d),s+c>=Jd<<5&&(s=0,a+=u,u=0),a+d>=Qm)break;i.translate((s+(c>>1))/o,(a+(d>>1))/o),t.rotate&&i.rotate(t.rotate*Q2),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=c,t.height=d,t.xoff=s,t.yoff=a,t.x1=c>>1,t.y1=d>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,s+=c}for(var w=i.getImageData(0,0,(Jd<<5)/o,Qm/o).data,S=[];--r>=0;)if(t=n[r],!!t.hasText){for(c=t.width,f=c>>5,d=t.y1-t.y0,h=0;h<d*f;h++)S[h]=0;if(s=t.xoff,s==null)return;a=t.yoff;var E=0,_=-1;for(p=0;p<d;p++){for(h=0;h<c;h++){var $=f*p+(h>>5),k=w[(a+p)*(Jd<<5)+(s+h)<<2]?1<<31-h%32:0;S[$]|=k,E|=k}E?_=p:(t.y0++,d--,p--,a++)}t.y1=t.y0+_,t.sprite=S.slice(0,(t.y1-t.y0)*f)}}}function Mae(e,t,n){n>>=5;for(var r=e.sprite,i=e.width>>5,o=e.x-(i<<4),s=o&127,a=32-s,u=e.y1-e.y0,l=(e.y+e.y0)*n+(o>>5),c,f=0;f<u;f++){c=0;for(var d=0;d<=i;d++)if((c<<a|(d<i?(c=r[f*i+d])>>>s:0))&t[l+d])return!0;l+=n}return!1}function Nae(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function Oae(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function V9(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function Dae(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(o){var s=o<0?-1:1;switch(Math.sqrt(1+4*s*o)-s&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t;break}return[r,i]}}function Rae(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function Ka(e){return typeof e=="function"?e:function(){return e}}var Pae={archimedean:V9,rectangular:Dae};const Y9=["x","y","font","fontSize","fontStyle","fontWeight","angle"],Lae=["text","font","rotate","fontSize","fontStyle","fontWeight"];function VC(e){P.call(this,Fae(),e)}VC.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:Y9}]};V(VC,P,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&z("Wordcloud size dimensions must be non-zero.");function n(p){const g=e[p];return pe(g)&&t.modified(g.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||Lae.some(n)))return;const i=t.materialize(t.SOURCE).source,o=this.value,s=e.as||Y9;let a=e.fontSize||14,u;if(pe(a)?u=e.fontSizeRange:a=yn(a),u){const p=a,g=Fe("sqrt")().domain(ao(i,p)).range(u);a=m=>g(p(m))}i.forEach(p=>{p[s[0]]=NaN,p[s[1]]=NaN,p[s[3]]=0});const l=o.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(a).random(qr).layout(),c=o.size(),f=c[0]>>1,d=c[1]>>1,h=l.length;for(let p=0,g,m;p<h;++p)g=l[p],m=g.datum,m[s[0]]=g.x+f,m[s[1]]=g.y+d,m[s[2]]=g.font,m[s[3]]=g.size,m[s[4]]=g.style,m[s[5]]=g.weight,m[s[6]]=g.rotate;return t.reflow(r).modifies(s)}});const zae=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:VC},Symbol.toStringTag,{value:"Module"})),Iae=e=>new Uint8Array(e),Bae=e=>new Uint16Array(e),wh=e=>new Uint32Array(e);function jae(){let e=8,t=[],n=wh(0),r=sm(0,e),i=sm(0,e);return{data:()=>t,seen:()=>n=Uae(n,t.length),add(o){for(let s=0,a=t.length,u=o.length,l;s<u;++s)l=o[s],l._index=a++,t.push(l)},remove(o,s){const a=t.length,u=Array(a-o),l=t;let c,f,d;for(f=0;!s[f]&&f<a;++f)u[f]=t[f],l[f]=f;for(d=f;f<a;++f)c=t[f],s[f]?l[f]=-1:(l[f]=d,r[d]=r[f],i[d]=i[f],u[d]=c,c._index=d++),r[f]=0;return t=u,l},size:()=>t.length,curr:()=>r,prev:()=>i,reset:o=>i[o]=r[o],all:()=>e<257?255:e<65537?65535:4294967295,set(o,s){r[o]|=s},clear(o,s){r[o]&=~s},resize(o,s){const a=r.length;(o>a||s>e)&&(e=Math.max(s,e),r=sm(o,e,r),i=sm(o,e))}}}function Uae(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function sm(e,t,n){const r=(t<257?Iae:t<65537?Bae:wh)(e);return n&&r.set(n),r}function hO(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(i,o){const s=this,a=s.bisect(s.range,i.value),u=i.index,l=a[0],c=a[1],f=u.length;let d;for(d=0;d<l;++d)o[u[d]]|=r;for(d=c;d<f;++d)o[u[d]]|=r;return s}}}function pO(){let e=wh(0),t=[],n=0;function r(a,u,l){if(!u.length)return[];const c=n,f=u.length,d=wh(f);let h=Array(f),p,g,m;for(m=0;m<f;++m)h[m]=a(u[m]),d[m]=m;if(h=Wae(h,d),c)p=t,g=e,t=Array(c+f),e=wh(c+f),qae(l,p,g,c,h,d,f,t,e);else{if(l>0)for(m=0;m<f;++m)d[m]+=l;t=h,e=d}return n=c+f,{index:d,value:h}}function i(a,u){const l=n;let c,f,d;for(f=0;!u[e[f]]&&f<l;++f);for(d=f;f<l;++f)u[c=e[f]]||(e[d]=c,t[d]=t[f],++d);n=l-a}function o(a){for(let u=0,l=n;u<l;++u)e[u]=a[e[u]]}function s(a,u){let l;return u?l=u.length:(u=t,l=n),[uV(u,a[0],0,l),N0(u,a[1],0,l)]}return{insert:r,remove:i,bisect:s,reindex:o,index:()=>e,size:()=>n}}function Wae(e,t){return e.sort.call(t,(n,r)=>{const i=e[n],o=e[r];return i<o?-1:i>o?1:0}),fV(e,t)}function qae(e,t,n,r,i,o,s,a,u){let l=0,c=0,f;for(f=0;l<r&&c<s;++f)t[l]<i[c]?(a[f]=t[l],u[f]=n[l++]):(a[f]=i[c],u[f]=o[c++]+e);for(;l<r;++l,++f)a[f]=t[l],u[f]=n[l];for(;c<s;++c,++f)a[f]=i[c],u[f]=o[c]+e}function YC(e){P.call(this,jae(),e),this._indices=null,this._dims=null}YC.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};V(YC,P,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(r=>t.modified(r.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,r=e.query,i=this._indices={},o=this._dims=[],s=r.length;let a=0,u,l;for(;a<s;++a)u=n[a].fname,l=i[u]||(i[u]=pO()),o.push(hO(l,a,r[a]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,o=this._indices,s=this._dims,a=this.value,u=a.curr(),l=a.prev(),c=a.all(),f=n.rem=n.add,d=n.mod,h=i.length,p={};let g,m,y,v,x,b,w,S,E;if(l.set(u),t.rem.length&&(x=this.remove(e,t,n)),t.add.length&&a.add(t.add),t.mod.length)for(b={},v=t.mod,w=0,S=v.length;w<S;++w)b[v[w]._index]=1;for(w=0;w<h;++w)E=r[w],(!s[w]||e.modified("fields",w)||t.modified(E.fields))&&(y=E.fname,(g=p[y])||(o[y]=m=pO(),p[y]=g=m.insert(E,t.source,0)),s[w]=hO(m,w,i[w]).onAdd(g,u));for(w=0,S=a.data().length;w<S;++w)x[w]||(l[w]!==u[w]?f.push(w):b[w]&&u[w]!==c&&d.push(w));return a.mask=(1<<h)-1,n},eval(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){const r=t.add,i=this.value,o=this._dims,s=this._indices,a=e.fields,u={},l=n.add,c=i.size()+r.length,f=o.length;let d=i.size(),h,p,g;i.resize(c,f),i.add(r);const m=i.curr(),y=i.prev(),v=i.all();for(h=0;h<f;++h)p=a[h].fname,g=u[p]||(u[p]=s[p].insert(a[h],r,d)),o[h].onAdd(g,m);for(;d<c;++d)y[d]=v,m[d]!==v&&l.push(d)},modify(e,t){const n=t.mod,r=this.value,i=r.curr(),o=r.all(),s=e.mod;let a,u,l;for(a=0,u=s.length;a<u;++a)l=s[a]._index,i[l]!==o&&n.push(l)},remove(e,t,n){const r=this._indices,i=this.value,o=i.curr(),s=i.prev(),a=i.all(),u={},l=n.rem,c=t.rem;let f,d,h,p;for(f=0,d=c.length;f<d;++f)h=c[f]._index,u[h]=1,s[h]=p=o[h],o[h]=a,p!==a&&l.push(h);for(h in r)r[h].remove(d,u);return this.reindex(t,d,u),u},reindex(e,t,n){const r=this._indices,i=this.value;e.runAfter(()=>{const o=i.remove(t,n);for(const s in r)r[s].reindex(o)})},update(e,t,n){const r=this._dims,i=e.query,o=t.stamp,s=r.length;let a=0,u,l;for(n.filters=0,l=0;l<s;++l)e.modified("query",l)&&(u=l,++a);if(a===1)a=r[u].one,this.incrementOne(r[u],i[u],n.add,n.rem);else for(l=0,a=0;l<s;++l)e.modified("query",l)&&(a|=r[l].one,this.incrementAll(r[l],i[l],o,n.add),n.rem=n.add);return a},incrementAll(e,t,n,r){const i=this.value,o=i.seen(),s=i.curr(),a=i.prev(),u=e.index(),l=e.bisect(e.range),c=e.bisect(t),f=c[0],d=c[1],h=l[0],p=l[1],g=e.one;let m,y,v;if(f<h)for(m=f,y=Math.min(h,d);m<y;++m)v=u[m],o[v]!==n&&(a[v]=s[v],o[v]=n,r.push(v)),s[v]^=g;else if(f>h)for(m=h,y=Math.min(f,p);m<y;++m)v=u[m],o[v]!==n&&(a[v]=s[v],o[v]=n,r.push(v)),s[v]^=g;if(d>p)for(m=Math.max(f,p),y=d;m<y;++m)v=u[m],o[v]!==n&&(a[v]=s[v],o[v]=n,r.push(v)),s[v]^=g;else if(d<p)for(m=Math.max(h,d),y=p;m<y;++m)v=u[m],o[v]!==n&&(a[v]=s[v],o[v]=n,r.push(v)),s[v]^=g;e.range=t.slice()},incrementOne(e,t,n,r){const i=this.value,o=i.curr(),s=e.index(),a=e.bisect(e.range),u=e.bisect(t),l=u[0],c=u[1],f=a[0],d=a[1],h=e.one;let p,g,m;if(l<f)for(p=l,g=Math.min(f,c);p<g;++p)m=s[p],o[m]^=h,n.push(m);else if(l>f)for(p=f,g=Math.min(l,d);p<g;++p)m=s[p],o[m]^=h,r.push(m);if(c>d)for(p=Math.max(l,d),g=c;p<g;++p)m=s[p],o[m]^=h,n.push(m);else if(c<d)for(p=Math.max(f,c),g=d;p<g;++p)m=s[p],o[m]^=h,r.push(m);e.range=t.slice()}});function XC(e){P.call(this,null,e)}XC.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};V(XC,P,{transform(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if(!(i&n))return t.StopPropagation;const o=t.fork(t.ALL),s=r.data(),a=r.curr(),u=r.prev(),l=c=>a[c]&n?null:s[c];return o.filter(o.MOD,l),i&i-1?(o.filter(o.ADD,c=>{const f=a[c]&n;return!f&&f^u[c]&n?s[c]:null}),o.filter(o.REM,c=>{const f=a[c]&n;return f&&!(f^(f^u[c]&n))?s[c]:null})):(o.filter(o.ADD,l),o.filter(o.REM,c=>(a[c]&n)===i?s[c]:null)),o.filter(o.SOURCE,c=>l(c._index))}});const Hae=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:YC,resolvefilter:XC},Symbol.toStringTag,{value:"Module"})),Gae="RawCode",Ku="Literal",Vae="Property",Yae="Identifier",Xae="ArrayExpression",Qae="BinaryExpression",X9="CallExpression",Kae="ConditionalExpression",Jae="LogicalExpression",Zae="MemberExpression",eue="ObjectExpression",tue="UnaryExpression";function Ti(e){this.type=e}Ti.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=nue(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function nue(e){switch(e.type){case Xae:return e.elements;case Qae:case Jae:return[e.left,e.right];case X9:return[e.callee].concat(e.arguments);case Kae:return[e.test,e.consequent,e.alternate];case Zae:return[e.object,e.property];case eue:return e.properties;case Vae:return[e.key,e.value];case tue:return[e.argument];case Yae:case Ku:case Gae:default:return[]}}var Eo,ne,L,hn,Pe,kv=1,tg=2,Ju=3,za=4,$v=5,wl=6,Bn=7,ng=8,rue=9;Eo={};Eo[kv]="Boolean";Eo[tg]="<end>";Eo[Ju]="Identifier";Eo[za]="Keyword";Eo[$v]="Null";Eo[wl]="Numeric";Eo[Bn]="Punctuator";Eo[ng]="String";Eo[rue]="RegularExpression";var iue="ArrayExpression",oue="BinaryExpression",sue="CallExpression",aue="ConditionalExpression",Q9="Identifier",uue="Literal",lue="LogicalExpression",cue="MemberExpression",fue="ObjectExpression",due="Property",hue="UnaryExpression",Tt="Unexpected token %0",pue="Unexpected number",gue="Unexpected string",mue="Unexpected identifier",yue="Unexpected reserved word",vue="Unexpected end of input",YE="Invalid regular expression",K2="Invalid regular expression: missing /",K9="Octal literals are not allowed in strict mode.",xue="Duplicate data property in object literal not allowed in strict mode",Wt="ILLEGAL",up="Disabled.",bue=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),wue=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function Cv(e,t){if(!e)throw new Error("ASSERT: "+t)}function zo(e){return e>=48&&e<=57}function QC(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function Eh(e){return"01234567".indexOf(e)>=0}function Eue(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function lp(e){return e===10||e===13||e===8232||e===8233}function rg(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&bue.test(String.fromCharCode(e))}function I1(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&wue.test(String.fromCharCode(e))}const Sue={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function J9(){for(;L<hn;){const e=ne.charCodeAt(L);if(Eue(e)||lp(e))++L;else break}}function XE(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)L<hn&&QC(ne[L])?(r=ne[L++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):Ce({},Tt,Wt);return String.fromCharCode(i)}function _ue(){var e,t,n,r;for(e=ne[L],t=0,e==="}"&&Ce({},Tt,Wt);L<hn&&(e=ne[L++],!!QC(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&Ce({},Tt,Wt),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function Z9(){var e,t;for(e=ne.charCodeAt(L++),t=String.fromCharCode(e),e===92&&(ne.charCodeAt(L)!==117&&Ce({},Tt,Wt),++L,e=XE("u"),(!e||e==="\\"||!rg(e.charCodeAt(0)))&&Ce({},Tt,Wt),t=e);L<hn&&(e=ne.charCodeAt(L),!!I1(e));)++L,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),ne.charCodeAt(L)!==117&&Ce({},Tt,Wt),++L,e=XE("u"),(!e||e==="\\"||!I1(e.charCodeAt(0)))&&Ce({},Tt,Wt),t+=e);return t}function kue(){var e,t;for(e=L++;L<hn;){if(t=ne.charCodeAt(L),t===92)return L=e,Z9();if(I1(t))++L;else break}return ne.slice(e,L)}function $ue(){var e,t,n;return e=L,t=ne.charCodeAt(L)===92?Z9():kue(),t.length===1?n=Ju:Sue.hasOwnProperty(t)?n=za:t==="null"?n=$v:t==="true"||t==="false"?n=kv:n=Ju,{type:n,value:t,start:e,end:L}}function J2(){var e=L,t=ne.charCodeAt(L),n,r=ne[L],i,o,s;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++L,{type:Bn,value:String.fromCharCode(t),start:e,end:L};default:if(n=ne.charCodeAt(L+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return L+=2,{type:Bn,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:L};case 33:case 61:return L+=2,ne.charCodeAt(L)===61&&++L,{type:Bn,value:ne.slice(e,L),start:e,end:L}}}if(s=ne.substr(L,4),s===">>>=")return L+=4,{type:Bn,value:s,start:e,end:L};if(o=s.substr(0,3),o===">>>"||o==="<<="||o===">>=")return L+=3,{type:Bn,value:o,start:e,end:L};if(i=o.substr(0,2),r===i[1]&&"+-<>&|".indexOf(r)>=0||i==="=>")return L+=2,{type:Bn,value:i,start:e,end:L};if(i==="//"&&Ce({},Tt,Wt),"<>=!+-*%&|^/".indexOf(r)>=0)return++L,{type:Bn,value:r,start:e,end:L};Ce({},Tt,Wt)}function Cue(e){let t="";for(;L<hn&&QC(ne[L]);)t+=ne[L++];return t.length===0&&Ce({},Tt,Wt),rg(ne.charCodeAt(L))&&Ce({},Tt,Wt),{type:wl,value:parseInt("0x"+t,16),start:e,end:L}}function Aue(e){let t="0"+ne[L++];for(;L<hn&&Eh(ne[L]);)t+=ne[L++];return(rg(ne.charCodeAt(L))||zo(ne.charCodeAt(L)))&&Ce({},Tt,Wt),{type:wl,value:parseInt(t,8),octal:!0,start:e,end:L}}function gO(){var e,t,n;if(n=ne[L],Cv(zo(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=L,e="",n!=="."){if(e=ne[L++],n=ne[L],e==="0"){if(n==="x"||n==="X")return++L,Cue(t);if(Eh(n))return Aue(t);n&&zo(n.charCodeAt(0))&&Ce({},Tt,Wt)}for(;zo(ne.charCodeAt(L));)e+=ne[L++];n=ne[L]}if(n==="."){for(e+=ne[L++];zo(ne.charCodeAt(L));)e+=ne[L++];n=ne[L]}if(n==="e"||n==="E")if(e+=ne[L++],n=ne[L],(n==="+"||n==="-")&&(e+=ne[L++]),zo(ne.charCodeAt(L)))for(;zo(ne.charCodeAt(L));)e+=ne[L++];else Ce({},Tt,Wt);return rg(ne.charCodeAt(L))&&Ce({},Tt,Wt),{type:wl,value:parseFloat(e),start:t,end:L}}function Fue(){var e="",t,n,r,i,o=!1;for(t=ne[L],Cv(t==="'"||t==='"',"String literal must starts with a quote"),n=L,++L;L<hn;)if(r=ne[L++],r===t){t="";break}else if(r==="\\")if(r=ne[L++],!r||!lp(r.charCodeAt(0)))switch(r){case"u":case"x":ne[L]==="{"?(++L,e+=_ue()):e+=XE(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:Eh(r)?(i="01234567".indexOf(r),i!==0&&(o=!0),L<hn&&Eh(ne[L])&&(o=!0,i=i*8+"01234567".indexOf(ne[L++]),"0123".indexOf(r)>=0&&L<hn&&Eh(ne[L])&&(i=i*8+"01234567".indexOf(ne[L++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&ne[L]===`
`&&++L;else{if(lp(r.charCodeAt(0)))break;e+=r}return t!==""&&Ce({},Tt,Wt),{type:ng,value:e,octal:o,start:n,end:L}}function Tue(e,t){let n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";Ce({},YE)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{Ce({},YE)}try{return new RegExp(e,t)}catch{return null}}function Mue(){var e,t,n,r,i;for(e=ne[L],Cv(e==="/","Regular expression literal must start with a slash"),t=ne[L++],n=!1,r=!1;L<hn;)if(e=ne[L++],t+=e,e==="\\")e=ne[L++],lp(e.charCodeAt(0))&&Ce({},K2),t+=e;else if(lp(e.charCodeAt(0)))Ce({},K2);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||Ce({},K2),i=t.substr(1,t.length-2),{value:i,literal:t}}function Nue(){var e,t,n;for(t="",n="";L<hn&&(e=ne[L],!!I1(e.charCodeAt(0)));)++L,e==="\\"&&L<hn?Ce({},Tt,Wt):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&Ce({},YE,n),{value:n,literal:t}}function Oue(){var e,t,n,r;return Pe=null,J9(),e=L,t=Mue(),n=Nue(),r=Tue(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:L}}function Due(e){return e.type===Ju||e.type===za||e.type===kv||e.type===$v}function e7(){if(J9(),L>=hn)return{type:tg,start:L,end:L};const e=ne.charCodeAt(L);return rg(e)?$ue():e===40||e===41||e===59?J2():e===39||e===34?Fue():e===46?zo(ne.charCodeAt(L+1))?gO():J2():zo(e)?gO():J2()}function Hn(){const e=Pe;return L=e.end,Pe=e7(),L=e.end,e}function t7(){const e=L;Pe=e7(),L=e}function Rue(e){const t=new Ti(iue);return t.elements=e,t}function mO(e,t,n){const r=new Ti(e==="||"||e==="&&"?lue:oue);return r.operator=e,r.left=t,r.right=n,r}function Pue(e,t){const n=new Ti(sue);return n.callee=e,n.arguments=t,n}function Lue(e,t,n){const r=new Ti(aue);return r.test=e,r.consequent=t,r.alternate=n,r}function KC(e){const t=new Ti(Q9);return t.name=e,t}function Zd(e){const t=new Ti(uue);return t.value=e.value,t.raw=ne.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function yO(e,t,n){const r=new Ti(cue);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function zue(e){const t=new Ti(fue);return t.properties=e,t}function vO(e,t,n){const r=new Ti(due);return r.key=t,r.value=n,r.kind=e,r}function Iue(e,t){const n=new Ti(hue);return n.operator=e,n.argument=t,n.prefix=!0,n}function Ce(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(o,s)=>(Cv(s<r.length,"Message reference must be in range"),r[s]));throw n=new Error(i),n.index=L,n.description=i,n}function Av(e){e.type===tg&&Ce(e,vue),e.type===wl&&Ce(e,pue),e.type===ng&&Ce(e,gue),e.type===Ju&&Ce(e,mue),e.type===za&&Ce(e,yue),Ce(e,Tt,e.value)}function pn(e){const t=Hn();(t.type!==Bn||t.value!==e)&&Av(t)}function Ye(e){return Pe.type===Bn&&Pe.value===e}function Z2(e){return Pe.type===za&&Pe.value===e}function Bue(){const e=[];for(L=Pe.start,pn("[");!Ye("]");)Ye(",")?(Hn(),e.push(null)):(e.push(Zu()),Ye("]")||pn(","));return Hn(),Rue(e)}function xO(){L=Pe.start;const e=Hn();return e.type===ng||e.type===wl?(e.octal&&Ce(e,K9),Zd(e)):KC(e.value)}function jue(){var e,t,n,r;if(L=Pe.start,e=Pe,e.type===Ju)return n=xO(),pn(":"),r=Zu(),vO("init",n,r);if(e.type===tg||e.type===Bn)Av(e);else return t=xO(),pn(":"),r=Zu(),vO("init",t,r)}function Uue(){var e=[],t,n,r,i={},o=String;for(L=Pe.start,pn("{");!Ye("}");)t=jue(),t.key.type===Q9?n=t.key.name:n=o(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?Ce({},xue):i[r]=!0,e.push(t),Ye("}")||pn(",");return pn("}"),zue(e)}function Wue(){pn("(");const e=JC();return pn(")"),e}const que={if:1};function Hue(){var e,t,n;if(Ye("("))return Wue();if(Ye("["))return Bue();if(Ye("{"))return Uue();if(e=Pe.type,L=Pe.start,e===Ju||que[Pe.value])n=KC(Hn().value);else if(e===ng||e===wl)Pe.octal&&Ce(Pe,K9),n=Zd(Hn());else{if(e===za)throw new Error(up);e===kv?(t=Hn(),t.value=t.value==="true",n=Zd(t)):e===$v?(t=Hn(),t.value=null,n=Zd(t)):Ye("/")||Ye("/=")?(n=Zd(Oue()),t7()):Av(Hn())}return n}function Gue(){const e=[];if(pn("("),!Ye(")"))for(;L<hn&&(e.push(Zu()),!Ye(")"));)pn(",");return pn(")"),e}function Vue(){L=Pe.start;const e=Hn();return Due(e)||Av(e),KC(e.value)}function Yue(){return pn("."),Vue()}function Xue(){pn("[");const e=JC();return pn("]"),e}function Que(){var e,t,n;for(e=Hue();;)if(Ye("."))n=Yue(),e=yO(".",e,n);else if(Ye("("))t=Gue(),e=Pue(e,t);else if(Ye("["))n=Xue(),e=yO("[",e,n);else break;return e}function bO(){const e=Que();if(Pe.type===Bn&&(Ye("++")||Ye("--")))throw new Error(up);return e}function Km(){var e,t;if(Pe.type!==Bn&&Pe.type!==za)t=bO();else{if(Ye("++")||Ye("--"))throw new Error(up);if(Ye("+")||Ye("-")||Ye("~")||Ye("!"))e=Hn(),t=Km(),t=Iue(e.value,t);else{if(Z2("delete")||Z2("void")||Z2("typeof"))throw new Error(up);t=bO()}}return t}function wO(e){let t=0;if(e.type!==Bn&&e.type!==za)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function Kue(){var e,t,n,r,i,o,s,a,u,l;if(e=Pe,u=Km(),r=Pe,i=wO(r),i===0)return u;for(r.prec=i,Hn(),t=[e,Pe],s=Km(),o=[u,r,s];(i=wO(Pe))>0;){for(;o.length>2&&i<=o[o.length-2].prec;)s=o.pop(),a=o.pop().value,u=o.pop(),t.pop(),n=mO(a,u,s),o.push(n);r=Hn(),r.prec=i,o.push(r),t.push(Pe),n=Km(),o.push(n)}for(l=o.length-1,n=o[l],t.pop();l>1;)t.pop(),n=mO(o[l-1].value,o[l-2],n),l-=2;return n}function Zu(){var e,t,n;return e=Kue(),Ye("?")&&(Hn(),t=Zu(),pn(":"),n=Zu(),e=Lue(e,t,n)),e}function JC(){const e=Zu();if(Ye(","))throw new Error(up);return e}function ZC(e){ne=e,L=0,hn=ne.length,Pe=null,t7();const t=JC();if(Pe.type!==tg)throw new Error("Unexpect token after expression.");return t}var n7={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function r7(e){function t(s,a,u,l){let c=e(a[0]);return u&&(c=u+"("+c+")",u.lastIndexOf("new ",0)===0&&(c="("+c+")")),c+"."+s+(l<0?"":l===0?"()":"("+a.slice(1).map(e).join(",")+")")}function n(s,a,u){return l=>t(s,l,a,u)}const r="new Date",i="String",o="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(s){s.length<3&&z("Missing arguments to clamp function."),s.length>3&&z("Too many arguments to clamp function.");const a=s.map(e);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:o,test:n("test",o),if:function(s){s.length<3&&z("Missing arguments to if function."),s.length>3&&z("Too many arguments to if function.");const a=s.map(e);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function Jue(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function i7(e){e=e||{};const t=e.allowed?ki(e.allowed):{},n=e.forbidden?ki(e.forbidden):{},r=e.constants||n7,i=(e.functions||r7)(f),o=e.globalvar,s=e.fieldvar,a=pe(o)?o:p=>`${o}["${p}"]`;let u={},l={},c=0;function f(p){if(Q(p))return p;const g=d[p.type];return g==null&&z("Unsupported type: "+p.type),g(p)}const d={Literal:p=>p.raw,Identifier:p=>{const g=p.name;return c>0?g:ae(n,g)?z("Illegal identifier: "+g):ae(r,g)?r[g]:ae(t,g)?g:(u[g]=1,a(g))},MemberExpression:p=>{const g=!p.computed,m=f(p.object);g&&(c+=1);const y=f(p.property);return m===s&&(l[Jue(y)]=1),g&&(c-=1),m+(g?"."+y:"["+y+"]")},CallExpression:p=>{p.callee.type!=="Identifier"&&z("Illegal callee type: "+p.callee.type);const g=p.callee.name,m=p.arguments,y=ae(i,g)&&i[g];return y||z("Unrecognized function: "+g),pe(y)?y(m):y+"("+m.map(f).join(",")+")"},ArrayExpression:p=>"["+p.elements.map(f).join(",")+"]",BinaryExpression:p=>"("+f(p.left)+" "+p.operator+" "+f(p.right)+")",UnaryExpression:p=>"("+p.operator+f(p.argument)+")",ConditionalExpression:p=>"("+f(p.test)+"?"+f(p.consequent)+":"+f(p.alternate)+")",LogicalExpression:p=>"("+f(p.left)+p.operator+f(p.right)+")",ObjectExpression:p=>"{"+p.properties.map(f).join(",")+"}",Property:p=>{c+=1;const g=f(p.key);return c-=1,g+":"+f(p.value)}};function h(p){const g={code:f(p),globals:Object.keys(u),fields:Object.keys(l)};return u={},l={},g}return h.functions=i,h.constants=r,h}function eb(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Zue(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function ele(e){let t,n,r;e.length!==2?(t=eb,n=(a,u)=>eb(e(a),u),r=(a,u)=>e(a)-u):(t=e===eb||e===Zue?e:tle,n=e,r=e);function i(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<0?l=f+1:c=f}while(l<c)}return l}function o(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<=0?l=f+1:c=f}while(l<c)}return l}function s(a,u,l=0,c=a.length){const f=i(a,u,l,c-1);return f>l&&r(a[f-1],u)>-r(a[f],u)?f-1:f}return{left:i,center:s,right:o}}function tle(){return 0}function nle(e,...t){e=new O0(e),t=t.map(rle);e:for(const n of e)for(const r of t)if(!r.has(n)){e.delete(n);continue e}return e}function rle(e){return e instanceof O0?e:new O0(e)}function ile(...e){const t=new O0;for(const n of e)for(const r of n)t.add(r);return t}const eA="intersect",EO="union",ole="vlMulti",sle="vlPoint",SO="or",ale="and",Gi="_vgsid_",cp=tr(Gi),ule="E",lle="R",cle="R-E",fle="R-LE",dle="R-RE",B1="index:unit";function _O(e,t){for(var n=t.fields,r=t.values,i=n.length,o=0,s,a;o<i;++o)if(a=n[o],a.getter=tr.getter||tr(a.field),s=a.getter(e),oa(s)&&(s=un(s)),oa(r[o])&&(r[o]=un(r[o])),oa(r[o][0])&&(r[o]=r[o].map(un)),a.type===ule){if(I(r[o])?r[o].indexOf(s)<0:s!==r[o])return!1}else if(a.type===lle){if(!ac(s,r[o]))return!1}else if(a.type===dle){if(!ac(s,r[o],!0,!1))return!1}else if(a.type===cle){if(!ac(s,r[o],!1,!1))return!1}else if(a.type===fle&&!ac(s,r[o],!1,!0))return!1;return!0}function hle(e,t,n){for(var r=this.context.data[e],i=r?r.values.value:[],o=r?r[B1]&&r[B1].value:void 0,s=n===eA,a=i.length,u=0,l,c,f,d,h;u<a;++u)if(l=i[u],o&&s){if(c=c||{},f=c[d=l.unit]||0,f===-1)continue;if(h=_O(t,l),c[d]=h?-1:++f,h&&o.size===1)return!0;if(!h&&f===o.get(d).count)return!1}else if(h=_O(t,l),s^h)return h;return a&&s}const o7=ele(cp),ple=o7.left,gle=o7.right;function mle(e,t,n){const r=this.context.data[e],i=r?r.values.value:[],o=r?r[B1]&&r[B1].value:void 0,s=n===eA,a=cp(t),u=ple(i,a);if(u===i.length||cp(i[u])!==a)return!1;if(o&&s){if(o.size===1)return!0;if(gle(i,a)-u<o.size)return!1}return!0}function yle(e,t){return e.map(n=>he(t.fields?{values:t.fields.map(r=>(r.getter||(r.getter=tr(r.field)))(n.datum))}:{[Gi]:cp(n.datum)},t))}function vle(e,t,n,r){for(var i=this.context.data[e],o=i?i.values.value:[],s={},a={},u={},l,c,f,d,h,p,g,m,y,v,x=o.length,b=0,w,S;b<x;++b)if(l=o[b],d=l.unit,c=l.fields,f=l.values,c&&f){for(w=0,S=c.length;w<S;++w)h=c[w],g=s[h.field]||(s[h.field]={}),m=g[d]||(g[d]=[]),u[h.field]=y=h.type.charAt(0),v=tb[`${y}_union`],g[d]=v(m,K(f[w]));n&&(m=a[d]||(a[d]=[]),m.push(K(f).reduce((E,_,$)=>(E[c[$].field]=_,E),{})))}else h=Gi,p=cp(l),g=s[h]||(s[h]={}),m=g[d]||(g[d]=[]),m.push(p),n&&(m=a[d]||(a[d]=[]),m.push({[Gi]:p}));if(t=t||EO,s[Gi]?s[Gi]=tb[`${Gi}_${t}`](...Object.values(s[Gi])):Object.keys(s).forEach(E=>{s[E]=Object.keys(s[E]).map(_=>s[E][_]).reduce((_,$)=>_===void 0?$:tb[`${u[E]}_${t}`](_,$))}),o=Object.keys(a),n&&o.length){const E=r?sle:ole;s[E]=t===EO?{[SO]:o.reduce((_,$)=>(_.push(...a[$]),_),[])}:{[ale]:o.map(_=>({[SO]:a[_]}))}}return s}var tb={[`${Gi}_union`]:ile,[`${Gi}_intersect`]:nle,E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.indexOf(n)>=0):t},R_union:function(e,t){var n=un(t[0]),r=un(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=un(t[0]),r=un(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};const xle=":",ble="@";function tA(e,t,n,r){t[0].type!==Ku&&z("First argument to selection functions must be a string literal.");const i=t[0].value,o=t.length>=2&&_e(t).value,s="unit",a=ble+s,u=xle+i;o===eA&&!ae(r,a)&&(r[a]=n.getData(i).indataRef(n,s)),ae(r,u)||(r[u]=n.getData(i).tuplesRef())}function s7(e){const t=this.context.data[e];return t?t.values.value:[]}function wle(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count}function Ele(e,t){const n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove(Ur).insert(t)),1}function Sle(e,t,n){if(e){const r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return n!==void 0?n:e}const ig=e=>function(t,n){return this.context.dataflow.locale()[e](n)(t)},_le=ig("format"),a7=ig("timeFormat"),kle=ig("utcFormat"),$le=ig("timeParse"),Cle=ig("utcParse"),am=new Date(2e3,0,1);function Fv(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(am.setYear(2e3),am.setMonth(e),am.setDate(t),a7.call(this,am,n))}function Ale(e){return Fv.call(this,e,1,"%B")}function Fle(e){return Fv.call(this,e,1,"%b")}function Tle(e){return Fv.call(this,0,2+e,"%A")}function Mle(e){return Fv.call(this,0,2+e,"%a")}const Nle=":",Ole="@",QE="%",u7="$";function nA(e,t,n,r){t[0].type!==Ku&&z("First argument to data functions must be a string literal.");const i=t[0].value,o=Nle+i;if(!ae(o,r))try{r[o]=n.getData(i).tuplesRef()}catch{}}function Dle(e,t,n,r){t[0].type!==Ku&&z("First argument to indata must be a string literal."),t[1].type!==Ku&&z("Second argument to indata must be a string literal.");const i=t[0].value,o=t[1].value,s=Ole+o;ae(s,r)||(r[s]=n.getData(i).indataRef(n,o))}function Kn(e,t,n,r){if(t[0].type===Ku)kO(n,r,t[0].value);else for(e in n.scales)kO(n,r,e)}function kO(e,t,n){const r=QE+n;if(!ae(t,r))try{t[r]=e.scaleRef(n)}catch{}}function ms(e,t){if(pe(e))return e;if(Q(e)){const n=t.scales[e];return n&&BJ(n.value)?n.value:void 0}}function Rle(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=Kn,n._range=Kn,n._scale=Kn;const r=i=>"_["+(i.type===Ku?G(QE+i.value):G(QE)+"+"+e(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${e(i[1])})`}}function rA(e,t){return function(n,r,i){if(n){const o=ms(n,(i||this).context);return o&&o.path[e](r)}else return t(r)}}const Ple=rA("area",ere),Lle=rA("bounds",ire),zle=rA("centroid",cre);function Ile(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function iA(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function Ble(){return iA(this.context.dataflow,"warn",arguments)}function jle(){return iA(this.context.dataflow,"info",arguments)}function Ule(){return iA(this.context.dataflow,"debug",arguments)}function nb(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function KE(e){const t=ya(e),n=nb(t.r),r=nb(t.g),i=nb(t.b);return .2126*n+.7152*r+.0722*i}function Wle(e,t){const n=KE(e),r=KE(t),i=Math.max(n,r),o=Math.min(n,r);return(i+.05)/(o+.05)}function qle(){const e=[].slice.call(arguments);return e.unshift({}),he(...e)}function l7(e,t){return e===t||e!==e&&t!==t?!0:I(e)?I(t)&&e.length===t.length?Hle(e,t):!1:J(e)&&J(t)?c7(e,t):!1}function Hle(e,t){for(let n=0,r=e.length;n<r;++n)if(!l7(e[n],t[n]))return!1;return!0}function c7(e,t){for(const n in e)if(!l7(e[n],t[n]))return!1;return!0}function $O(e){return t=>c7(e,t)}function Gle(e,t,n,r,i,o){const s=this.context.dataflow,a=this.context.data[e],u=a.input,l=s.stamp();let c=a.changes,f,d;if(s._trigger===!1||!(u.value.length||t||r))return 0;if((!c||c.stamp<l)&&(a.changes=c=s.changeset(),c.stamp=l,s.runAfter(()=>{a.modified=!0,s.pulse(u,c).run()},!0,1)),n&&(f=n===!0?Ur:I(n)||zy(n)?n:$O(n),c.remove(f)),t&&c.insert(t),r&&(f=$O(r),u.value.some(f)?c.remove(f):c.insert(r)),i)for(d in o)c.modify(i,d,o[d]);return 1}function Vle(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.hypot(n,r)}function Yle(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const CO={};function Xle(e,t){const n=CO[t]||(CO[t]=tr(t));return I(e)?e.map(n):n(e)}function oA(e){return I(e)||ArrayBuffer.isView(e)?e:null}function sA(e){return oA(e)||(Q(e)?e:null)}function Qle(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return oA(e).join(...n)}function Kle(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return sA(e).indexOf(...n)}function Jle(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return sA(e).lastIndexOf(...n)}function Zle(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return sA(e).slice(...n)}function ece(e,t,n){return pe(n)&&z("Function argument passed to replace."),String(e).replace(t,n)}function tce(e){return oA(e).slice().reverse()}function nce(e,t,n){return g$(e||0,t||0,n||0)}function rce(e,t){const n=ms(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function ice(e,t){const n=ms(e,(t||this).context);return n?n.copy():void 0}function oce(e,t){const n=ms(e,(t||this).context);return n?n.domain():[]}function sce(e,t,n){const r=ms(e,(n||this).context);return r?I(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function ace(e,t){const n=ms(e,(t||this).context);return n&&n.range?n.range():[]}function uce(e,t,n){const r=ms(e,(n||this).context);return r?r(t):void 0}function lce(e,t,n,r,i){e=ms(e,(i||this).context);const o=uz(t,n);let s=e.domain(),a=s[0],u=_e(s),l=mn;return u-a?l=Q8(e,a,u):e=(e.interpolator?Fe("sequential")().interpolator(e.interpolator()):Fe("linear")().interpolate(e.interpolate()).range(e.range())).domain([a=0,u=1]),e.ticks&&(s=e.ticks(+r||15),a!==s[0]&&s.unshift(a),u!==_e(s)&&s.push(u)),s.forEach(c=>o.stop(l(c),e(c))),o}function cce(e,t,n){const r=ms(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}}function fce(e){let t=null;return function(n){return n?ep(n,t=t||Yc(e)):e}}const f7=e=>e.data;function d7(e,t){const n=s7.call(t,e);return n.root&&n.root.lookup||{}}function dce(e,t,n){const r=d7(e,this),i=r[t],o=r[n];return i&&o?i.path(o).map(f7):void 0}function hce(e,t){const n=d7(e,this)[t];return n?n.ancestors().map(f7):void 0}const h7=()=>typeof window<"u"&&window||null;function pce(){const e=h7();return e?e.screen:{}}function gce(){const e=h7();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function mce(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function p7(e,t,n){if(!e)return[];const[r,i]=e,o=new gt().set(r[0],r[1],i[0],i[1]),s=n||this.context.dataflow.scenegraph().root;return Jz(s,o,yce(t))}function yce(e){let t=null;if(e){const n=K(e.marktype),r=K(e.markname);t=i=>(!n.length||n.some(o=>i.marktype===o))&&(!r.length||r.some(o=>i.name===o))}return t}function vce(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=K(e);const i=e[e.length-1];return i===void 0||Math.hypot(i[0]-t,i[1]-n)>r?[...e,[t,n]]:e}function xce(e){return K(e).reduce((t,n,r)=>{let[i,o]=n;return t+=r==0?`M ${i},${o} `:r===e.length-1?" Z":`L ${i},${o} `},"")}function bce(e,t,n){const{x:r,y:i,mark:o}=n,s=new gt().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[u,l]of t)u<s.x1&&(s.x1=u),u>s.x2&&(s.x2=u),l<s.y1&&(s.y1=l),l>s.y2&&(s.y2=l);return s.translate(r,i),p7([[s.x1,s.y1],[s.x2,s.y2]],e,o).filter(u=>wce(u.x,u.y,t))}function wce(e,t,n){let r=0;for(let i=0,o=n.length-1;i<n.length;o=i++){const[s,a]=n[o],[u,l]=n[i];l>t!=a>t&&e<(s-u)*(t-l)/(a-l)+u&&r++}return r&1}const fp={random(){return qr()},cumulativeNormal:Wy,cumulativeLogNormal:gk,cumulativeUniform:xk,densityNormal:ck,densityLogNormal:pk,densityUniform:vk,quantileNormal:qy,quantileLogNormal:mk,quantileUniform:bk,sampleNormal:Uy,sampleLogNormal:hk,sampleUniform:yk,isArray:I,isBoolean:Oa,isDate:oa,isDefined(e){return e!==void 0},isNumber:ze,isObject:J,isRegExp:FP,isString:Q,isTuple:zy,isValid(e){return e!=null&&e===e},toBoolean:W_,toDate(e){return q_(e)},toNumber:un,toString:H_,indexof:Kle,join:Qle,lastindexof:Jle,replace:ece,reverse:tce,slice:Zle,flush:CP,lerp:TP,merge:qle,pad:OP,peek:_e,pluck:Xle,span:Tp,inrange:ac,truncate:DP,rgb:ya,lab:V0,hcl:Y0,hsl:H0,luminance:KE,contrast:Wle,sequence:yr,format:_le,utcFormat:kle,utcParse:Cle,utcOffset:h6,utcSequence:m6,timeFormat:a7,timeParse:$le,timeOffset:d6,timeSequence:g6,timeUnitSpecifier:t6,monthFormat:Ale,monthAbbrevFormat:Fle,dayFormat:Tle,dayAbbrevFormat:Mle,quarter:SP,utcquarter:_P,week:r6,utcweek:s6,dayofyear:n6,utcdayofyear:o6,warn:Ble,info:jle,debug:Ule,extent(e){return ao(e)},inScope:Ile,intersect:p7,clampRange:kP,pinchDistance:Vle,pinchAngle:Yle,screen:pce,containerSize:mce,windowSize:gce,bandspace:nce,setdata:Ele,pathShape:fce,panLinear:xP,panLog:bP,panPow:wP,panSymlog:EP,zoomLinear:L_,zoomLog:z_,zoomPow:M0,zoomSymlog:I_,encode:Sle,modify:Gle,lassoAppend:vce,lassoPath:xce,intersectLasso:bce},Ece=["view","item","group","xy","x","y"],Sce="event.vega.",g7="this.",aA={},m7={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${G(u7+e)}]`,functions:_ce,constants:n7,visitors:aA},JE=i7(m7);function _ce(e){const t=r7(e);Ece.forEach(n=>t[n]=Sce+n);for(const n in fp)t[n]=g7+n;return he(t,Rle(e,fp,aA)),t}function mt(e,t,n){return arguments.length===1?fp[e]:(fp[e]=t,n&&(aA[e]=n),JE&&(JE.functions[e]=g7+e),this)}mt("bandwidth",rce,Kn);mt("copy",ice,Kn);mt("domain",oce,Kn);mt("range",ace,Kn);mt("invert",sce,Kn);mt("scale",uce,Kn);mt("gradient",lce,Kn);mt("geoArea",Ple,Kn);mt("geoBounds",Lle,Kn);mt("geoCentroid",zle,Kn);mt("geoShape",cce,Kn);mt("indata",wle,Dle);mt("data",s7,nA);mt("treePath",dce,nA);mt("treeAncestors",hce,nA);mt("vlSelectionTest",hle,tA);mt("vlSelectionIdTest",mle,tA);mt("vlSelectionResolve",vle,tA);mt("vlSelectionTuples",yle);function ho(e,t){const n={};let r;try{e=Q(e)?e:G(e)+"",r=ZC(e)}catch{z("Expression parse error: "+e)}r.visit(o=>{if(o.type!==X9)return;const s=o.callee.name,a=m7.visitors[s];a&&a(s,o.arguments,t,n)});const i=JE(r);return i.globals.forEach(o=>{const s=u7+o;!ae(n,s)&&t.getSignal(o)&&(n[s]=t.signalRef(o))}),{$expr:he({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}function kce(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(r=>t.parseOperator(r)),n.forEach(r=>t.parseOperatorParameters(r)),(e.streams||[]).forEach(r=>t.parseStream(r)),(e.updates||[]).forEach(r=>t.parseUpdate(r)),t.resolve()}const $ce=ki(["rule"]),AO=ki(["group","image","rect"]);function Cce(e,t){let n="";return $ce[t]||(e.x2&&(e.x?(AO[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(AO[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function uA(e){return(e+"").toLowerCase()}function Ace(e){return uA(e)==="operator"}function Fce(e){return uA(e)==="collect"}function yd(e,t,n){n.endsWith(";")||(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}function Tce(e,t,n,r){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${r}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${r} : `}var Mce={operator:(e,t)=>yd(e,["_"],t.code),parameter:(e,t)=>yd(e,["datum","_"],t.code),event:(e,t)=>yd(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return yd(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:r}=t;let i="var o=item,datum=o.datum,m=0,$;";for(const o in r){const s="o["+G(o)+"]";i+=`$=${r[o].code};if(${s}!==$)${s}=$,m=1;`}return i+=Cce(r,n),i+="return m;",yd(e,["item","_"],i)},codegen:{get(e){const t=`[${e.map(G).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const r=(o,s)=>{const a=t[s];let u,l;return o.path?(u=`a${o.path}`,l=`b${o.path}`):((n=n||{})["f"+s]=o,u=`this.f${s}(a)`,l=`this.f${s}(b)`),Tce(u,l,-a,a)},i=Function("a","b","var u, v; return "+e.map(r).join("")+"0;");return n?i.bind(n):i}}};function Nce(e){const t=this;Ace(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function Oce(e){const t=this;if(e.params){const n=t.get(e.id);n||z("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function Dce(e,t){t=t||{};const n=this;for(const r in e){const i=e[r];t[r]=I(i)?i.map(o=>FO(o,n,t)):FO(i,n,t)}return t}function FO(e,t,n){if(!e||!J(e))return e;for(let r=0,i=TO.length,o;r<i;++r)if(o=TO[r],ae(e,o.key))return o.parse(e,t,n);return e}var TO=[{key:"$ref",parse:Rce},{key:"$key",parse:Lce},{key:"$expr",parse:Pce},{key:"$field",parse:zce},{key:"$encode",parse:Bce},{key:"$compare",parse:Ice},{key:"$context",parse:jce},{key:"$subflow",parse:Uce},{key:"$tupleid",parse:Wce}];function Rce(e,t){return t.get(e.$ref)||z("Operator not defined: "+e.$ref)}function Pce(e,t,n){e.$params&&t.parseParameters(e.$params,n);const r="e:"+e.$expr.code;return t.fn[r]||(t.fn[r]=ur(t.parameterExpression(e.$expr),e.$fields))}function Lce(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=U_(e.$key,e.$flat,t.expr.codegen))}function zce(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=tr(e.$field,e.$name,t.expr.codegen))}function Ice(e,t){const n="c:"+e.$compare+"_"+e.$order,r=K(e.$compare).map(i=>i&&i.$tupleid?oe:i);return t.fn[n]||(t.fn[n]=B_(r,e.$order,t.expr.codegen))}function Bce(e,t){const n=e.$encode,r={};for(const i in n){const o=n[i];r[i]=ur(t.encodeExpression(o.$expr),o.$fields),r[i].output=o.$output}return r}function jce(e,t){return t}function Uce(e,t){const n=e.$subflow;return function(r,i,o){const s=t.fork().parse(n),a=s.get(n.operators[0].id),u=s.signals.parent;return u&&u.set(o),a.detachSubflow=()=>t.detach(s),a}}function Wce(){return oe}function qce(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,r=e.stream!=null?t.get(e.stream):void 0,i;e.source?r=t.events(e.source,e.type,n):e.merge&&(i=e.merge.map(o=>t.get(o)),r=i[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(o=>t.get(o)),r=r.between(i[0],i[1])),e.filter&&(r=r.filter(n)),e.throttle!=null&&(r=r.throttle(+e.throttle)),e.debounce!=null&&(r=r.debounce(+e.debounce)),r==null&&z("Invalid stream definition: "+JSON.stringify(e)),e.consume&&r.consume(!0),t.stream(e,r)}function Hce(e){var t=this,n=J(n=e.source)?n.$ref:n,r=t.get(n),i=null,o=e.update,s=void 0;r||z("Source not defined: "+e.source),i=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),o&&o.$expr&&(o.$params&&(s=t.parseParameters(o.$params)),o=t.handlerExpression(o.$expr)),t.update(e,r,i,o,s)}const Gce={skip:!0};function Vce(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(o=>{const s=t.signals[o];e.signals(o,s)&&(r[o]=s.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(o=>{const s=t.data[o];e.data(o,s)&&(i[o]=s.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(o=>o.getState(e))),n}function Yce(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(o=>{n.update(t.signals[o],i[o],Gce)}),Object.keys(r||{}).forEach(o=>{n.pulse(t.data[o].input,n.changeset().remove(Ur).insert(r[o]))}),(e.subcontext||[]).forEach((o,s)=>{const a=t.subcontext[s];a&&a.setState(o)})}function y7(e,t,n,r){return new v7(e,t,n,r)}function v7(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||Mce,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function MO(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}v7.prototype=MO.prototype={fork(){const e=new MO(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),Fce(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let o=n.get(e.parent.$ref);o?(r.connect(o,[t]),t.targets().add(o)):(n.unresolved=n.unresolved||[]).push(()=>{o=n.get(e.parent.$ref),r.connect(o,[t]),t.targets().add(o)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const o in e.data){const s=n.data[o]||(n.data[o]={});e.data[o].forEach(a=>s[a]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[uA(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:kce,parseOperator:Nce,parseOperatorParameters:Oce,parseParameters:Dce,parseStream:qce,parseUpdate:Hce,getState:Vce,setState:Yce};function Xce(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),x7(t,e.description()))}function x7(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function Qce(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const rb="default";function Kce(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:rb,item:null}));e.on(e.events("view","mousemove"),t,(n,r)=>{const i=t.value,o=i?Q(i)?i:i.user:rb,s=r.item&&r.item.cursor||null;return i&&o===i.user&&s==i.item?i:{user:o,item:s}}),e.add(null,function(n){let r=n.cursor,i=this.value;return Q(r)||(i=r.item,r=r.user),ZE(e,r&&r!==rb?r:i||r),i},{cursor:t})}function ZE(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function j1(e,t){var n=e._runtime.data;return ae(n,t)||z("Unrecognized data set: "+t),n[t]}function Jce(e,t){return arguments.length<2?j1(this,e).values.value:Tv.call(this,e,vl().remove(Ur).insert(t))}function Tv(e,t){W6(t)||z("Second argument to changes must be a changeset.");const n=j1(this,e);return n.modified=!0,this.pulse(n.input,t)}function Zce(e,t){return Tv.call(this,e,vl().insert(t))}function efe(e,t){return Tv.call(this,e,vl().remove(t))}function b7(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function w7(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function Mv(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function tfe(e){var t=Mv(e),n=b7(e),r=w7(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r)}catch(o){e.error(o)}})}function nfe(e,t,n){var r=e._renderer,i=r&&r.canvas(),o,s,a;return i&&(a=Mv(e),s=t.changedTouches?t.changedTouches[0]:t,o=yv(s,i),o[0]-=a[0],o[1]-=a[1]),t.dataflow=e,t.item=n,t.vega=rfe(e,n,o),t}function rfe(e,t,n){const r=t?t.mark.marktype==="group"?t:t.mark.group:null;function i(s){var a=r,u;if(s){for(u=t;u;u=u.mark.group)if(u.mark.name===s){a=u;break}}return a&&a.mark&&a.mark.interactive?a:{}}function o(s){if(!s)return n;Q(s)&&(s=i(s));const a=n.slice();for(;s;)a[0]-=s.x||0,a[1]-=s.y||0,s=s.mark&&s.mark.group;return a}return{view:yn(e),item:yn(t||{}),group:i,xy:o,x:s=>o(s)[0],y:s=>o(s)[1]}}const NO="view",ife="timer",ofe="window",sfe={trap:!1};function afe(e){const t=he({defaults:{}},e),n=(r,i)=>{i.forEach(o=>{I(r[o])&&(r[o]=ki(r[o]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function E7(e,t,n,r){e._eventListeners.push({type:n,sources:K(t),handler:r})}function ufe(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[t]:i?!i[t]:e.preventDefault()}function um(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return r===!1||J(r)&&!r[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function lfe(e,t,n){var r=this,i=new jy(n),o=function(l,c){r.runAsync(null,()=>{e===NO&&ufe(r,t)&&l.preventDefault(),i.receive(nfe(r,l,c))})},s;if(e===ife)um(r,"timer",t)&&r.timer(o,t);else if(e===NO)um(r,"view",t)&&r.addEventListener(t,o,sfe);else if(e===ofe?um(r,"window",t)&&typeof window<"u"&&(s=[window]):typeof document<"u"&&um(r,"selector",t)&&(s=Array.from(document.querySelectorAll(e))),!s)r.warn("Can not resolve event source: "+e);else{for(var a=0,u=s.length;a<u;++a)s[a].addEventListener(t,o);E7(r,s,t,o)}return i}function OO(e){return e.item}function DO(e){return e.item.mark.source}function RO(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function cfe(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","mouseover",OO),DO,RO(e)),this.on(this.events("view","mouseout",OO),DO,RO(t)),this}function ffe(){var e=this._tooltip,t=this._timers,n=this._eventListeners,r,i,o;for(r=t.length;--r>=0;)t[r].stop();for(r=n.length;--r>=0;)for(o=n[r],i=o.sources.length;--i>=0;)o.sources[i].removeEventListener(o.type,o.handler);return e&&e.call(this,this._handler,null,null,null),this}function xr(e,t,n){const r=document.createElement(e);for(const i in t)r.setAttribute(i,t[i]);return n!=null&&(r.textContent=n),r}const dfe="vega-bind",hfe="vega-bind-name",pfe="vega-bind-radio";function gfe(e,t,n){if(!t)return;const r=n.param;let i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:s=>{s!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,s)})}},r.debounce&&(i.update=j_(r.debounce,i.update))),(r.input==null&&r.element?mfe:vfe)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}function mfe(e,t,n,r){const i=n.event||"input",o=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,o),E7(r,t,i,o),e.set=s=>{t.value=s,t.dispatchEvent(yfe(i))}}function yfe(e){return typeof Event<"u"?new Event(e):{type:e}}function vfe(e,t,n,r){const i=r.signal(n.signal),o=xr("div",{class:dfe}),s=n.input==="radio"?o:o.appendChild(xr("label"));s.appendChild(xr("span",{class:hfe},n.name||n.signal)),t.appendChild(o);let a=xfe;switch(n.input){case"checkbox":a=bfe;break;case"select":a=wfe;break;case"radio":a=Efe;break;case"range":a=Sfe;break}a(e,s,n,i)}function xfe(e,t,n,r){const i=xr("input");for(const o in n)o!=="signal"&&o!=="element"&&i.setAttribute(o==="input"?"type":o,n[o]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=o=>i.value=o}function bfe(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const o=xr("input",i);t.appendChild(o),o.addEventListener("change",()=>e.update(o.checked)),e.elements=[o],e.set=s=>o.checked=!!s||null}function wfe(e,t,n,r){const i=xr("select",{name:n.signal}),o=n.labels||[];n.options.forEach((s,a)=>{const u={value:s};U1(s,r)&&(u.selected=!0),i.appendChild(xr("option",u,(o[a]||s)+""))}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=s=>{for(let a=0,u=n.options.length;a<u;++a)if(U1(n.options[a],s)){i.selectedIndex=a;return}}}function Efe(e,t,n,r){const i=xr("span",{class:pfe}),o=n.labels||[];t.appendChild(i),e.elements=n.options.map((s,a)=>{const u={type:"radio",name:n.signal,value:s};U1(s,r)&&(u.checked=!0);const l=xr("input",u);l.addEventListener("change",()=>e.update(s));const c=xr("label",{},(o[a]||s)+"");return c.prepend(l),i.appendChild(c),l}),e.set=s=>{const a=e.elements,u=a.length;for(let l=0;l<u;++l)U1(a[l].value,s)&&(a[l].checked=!0)}}function Sfe(e,t,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;const i=n.max!=null?n.max:Math.max(100,+r)||100,o=n.min||Math.min(0,i,+r)||0,s=n.step||pa(o,i,100),a=xr("input",{type:"range",name:n.signal,min:o,max:i,step:s});a.value=r;const u=xr("span",{},+r);t.appendChild(a),t.appendChild(u);const l=()=>{u.textContent=a.value,e.update(+a.value)};a.addEventListener("input",l),a.addEventListener("change",l),e.elements=[a],e.set=c=>{a.value=c,u.textContent=c}}function U1(e,t){return e===t||e+""==t+""}function S7(e,t,n,r,i,o){return t=t||new r(e.loader()),t.initialize(n,b7(e),w7(e),Mv(e),i,o).background(e.background())}function lA(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function _fe(e,t,n,r){const i=new r(e.loader(),lA(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,Mv(e),e);return t&&t.handlers().forEach(o=>{i.on(o.type,o.handler)}),i}function kfe(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,o=vv(r);e=n._el=e?ib(n,e,!0):null,Xce(n),o||n.error("Unrecognized renderer type: "+r);const s=o.handler||Qp,a=e?o.renderer:o.headless;return n._renderer=a?S7(n,n._renderer,e,a):null,n._handler=_fe(n,n._handler,e,s),n._redraw=!0,e&&i!=="none"&&(t=t?n._elBind=ib(n,t,!0):e.appendChild(xr("form",{class:"vega-bindings"})),n._bind.forEach(u=>{u.param.element&&i!=="container"&&(u.element=ib(n,u.param.element,!!u.param.input))}),n._bind.forEach(u=>{gfe(n,u.element||t,u)})),n}function ib(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(r){t=null,e.error(r)}return t}const vd=e=>+e||0,$fe=e=>({top:e,bottom:e,left:e,right:e});function PO(e){return J(e)?{top:vd(e.top),bottom:vd(e.bottom),left:vd(e.left),right:vd(e.right)}:$fe(vd(e))}async function cA(e,t,n,r){const i=vv(t),o=i&&i.headless;return o||z("Unrecognized renderer type: "+t),await e.runAsync(),S7(e,null,null,o,n,r).renderAsync(e._scenegraph.root)}async function Cfe(e,t){e!==Hs.Canvas&&e!==Hs.SVG&&e!==Hs.PNG&&z("Unrecognized image type: "+e);const n=await cA(this,e,t);return e===Hs.SVG?Afe(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function Afe(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function Ffe(e,t){return(await cA(this,Hs.Canvas,e,t)).canvas()}async function Tfe(e){return(await cA(this,Hs.SVG,e)).svg()}function Mfe(e,t,n){return y7(e,Uc,fp,n).parse(t)}function Nfe(e){var t=this._runtime.scales;return ae(t,e)||z("Unrecognized scale or projection: "+e),t[e].value}var _7="width",k7="height",fA="padding",LO={skip:!0};function $7(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===fA?r.left+r.right:0)}function C7(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===fA?r.top+r.bottom:0)}function Ofe(e){var t=e._signals,n=t[_7],r=t[k7],i=t[fA];function o(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,a=>{e._width=a.size,e._viewWidth=$7(e,a.size),o()},{size:n}),e._resizeHeight=e.add(null,a=>{e._height=a.size,e._viewHeight=C7(e,a.size),o()},{size:r});const s=e.add(null,o,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,s.rank=i.rank+1}function Dfe(e,t,n,r,i,o){this.runAfter(s=>{let a=0;s._autosize=0,s.width()!==n&&(a=1,s.signal(_7,n,LO),s._resizeWidth.skip(!0)),s.height()!==r&&(a=1,s.signal(k7,r,LO),s._resizeHeight.skip(!0)),s._viewWidth!==e&&(s._resize=1,s._viewWidth=e),s._viewHeight!==t&&(s._resize=1,s._viewHeight=t),(s._origin[0]!==i[0]||s._origin[1]!==i[1])&&(s._resize=1,s._origin=i),a&&s.run("enter"),o&&s.runAfter(u=>u.resize())},!1,1)}function Rfe(e){return this._runtime.getState(e||{data:Pfe,signals:Lfe,recurse:!0})}function Pfe(e,t){return t.modified&&I(t.input.value)&&e.indexOf("_:vega:_")}function Lfe(e,t){return!(e==="parent"||t instanceof Uc.proxy)}function zfe(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function Ife(e,t){function n(r){e({timestamp:Date.now(),elapsed:r})}this._timers.push(doe(n,t))}function Bfe(e,t,n,r){const i=e.element();i&&i.setAttribute("title",jfe(r))}function jfe(e){return e==null?"":I(e)?A7(e):J(e)&&!oa(e)?Ufe(e):e+""}function Ufe(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(I(n)?A7(n):F7(n))}).join(`
`)}function A7(e){return"["+e.map(F7).join(", ")+"]"}function F7(e){return I(e)?"[…]":J(e)&&!oa(e)?"{…}":e}function T7(e,t){const n=this;if(t=t||{},xc.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const o=he({},e.locale,t.locale);n.locale(O6(o.number,o.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||Hs.Canvas,n._scenegraph=new H$;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||Bfe,n._redraw=!0,n._handler=new Qp().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=afe(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=Mfe(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(o=>({state:null,param:he({},o)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=$7(n,n._width),n._viewHeight=C7(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,Ofe(n),Qce(n),Kce(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind)}function lm(e,t){return ae(e._signals,t)?e._signals[t]:z("Unrecognized signal name: "+G(t))}function M7(e,t){const n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null}function zO(e,t,n,r){let i=M7(n,r);return i||(i=lA(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e}function IO(e,t,n){const r=M7(t,n);return r&&t._targets.remove(r),e}V(T7,xc,{async evaluate(e,t,n){if(await xc.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,tfe(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&Rm(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&x7(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const r=lm(this,e);return arguments.length===1?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",PO(e)):PO(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(vv(e)||z("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(xc.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(lm(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:Dfe,addEventListener(e,t,n){let r=t;return n&&n.trap===!1||(r=lA(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),r=n.length,i,o;--r>=0;)if(o=n[r].type,i=n[r].handler,e===o&&(t===i||t===i.raw)){this._handler.off(o,i);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.indexOf(e)<0&&t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return zO(this,e,lm(this,e),t)},removeSignalListener(e,t){return IO(this,lm(this,e),t)},addDataListener(e,t){return zO(this,e,j1(this,e).values,t)},removeDataListener(e,t){return IO(this,j1(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=ZE(this,null);this._globalCursor=!!e,t&&ZE(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:Ife,events:lfe,finalize:ffe,hover:cfe,data:Jce,change:Tv,insert:Zce,remove:efe,scale:Nfe,initialize:kfe,toImageURL:Cfe,toCanvas:Ffe,toSVG:Tfe,getState:Rfe,setState:zfe});const Wfe="view",W1="[",q1="]",N7="{",O7="}",qfe=":",D7=",",Hfe="@",Gfe=">",Vfe=/[[\]{}]/,Yfe={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let R7,P7;function Ia(e,t,n){return R7=t||Wfe,P7=n||Yfe,L7(e.trim()).map(eS)}function Xfe(e){return P7[e]}function Sh(e,t,n,r,i){const o=e.length;let s=0,a;for(;t<o;++t){if(a=e[t],!s&&a===n)return t;i&&i.indexOf(a)>=0?--s:r&&r.indexOf(a)>=0&&++s}return t}function L7(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=Sh(e,i,D7,W1+N7,q1+O7),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function eS(e){return e[0]==="["?Qfe(e):Kfe(e)}function Qfe(e){const t=e.length;let n=1,r;if(n=Sh(e,n,q1,W1,q1),n===t)throw"Empty between selector: "+e;if(r=L7(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==Gfe)throw"Expected '>' after between selector: "+e;r=r.map(eS);const i=eS(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function Kfe(e){const t={source:R7},n=[];let r=[0,0],i=0,o=0,s=e.length,a=0,u,l;if(e[s-1]===O7){if(a=e.lastIndexOf(N7),a>=0){try{r=Jfe(e.substring(a+1,s-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,a).trim(),s=e.length}else throw"Unmatched right brace: "+e;a=0}if(!s)throw e;if(e[0]===Hfe&&(i=++a),u=Sh(e,a,qfe),u<s&&(n.push(e.substring(o,u).trim()),o=a=++u),a=Sh(e,a,W1),a===s)n.push(e.substring(o,s).trim());else if(n.push(e.substring(o,a).trim()),l=[],o=++a,o===s)throw"Unmatched left bracket: "+e;for(;a<s;){if(a=Sh(e,a,q1),a===s)throw"Unmatched left bracket: "+e;if(l.push(e.substring(o,a).trim()),a<s-1&&e[++a]!==W1)throw"Expected left bracket: "+e;o=++a}if(!(s=n.length)||Vfe.test(n[s-1]))throw"Invalid event selector: "+e;return s>1?(t.type=n[1],i?t.markname=n[0].slice(1):Xfe(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),l!=null&&(t.filter=l),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function Jfe(e){const t=e.split(D7);if(!e.length||t.length>2)throw e;return t.map(n=>{const r=+n;if(r!==r)throw e;return r})}function Zfe(e){return J(e)?e:{type:e||"pad"}}const xd=e=>+e||0,ede=e=>({top:e,bottom:e,left:e,right:e});function tde(e){return J(e)?e.signal?e:{top:xd(e.top),bottom:xd(e.bottom),left:xd(e.left),right:xd(e.right)}:ede(xd(e))}const Mt=e=>J(e)&&!I(e)?he({},e):{value:e};function BO(e,t,n,r){return n!=null?(J(n)&&!I(n)||I(n)&&n.length&&J(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function Yt(e,t,n){for(const r in t)BO(e,r,t[r]);for(const r in n)BO(e,r,n[r],"update")}function Pf(e,t,n){for(const r in t)n&&ae(n,r)||(e[r]=he(e[r]||{},t[r]));return e}function Vl(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const dA="mark",hA="frame",pA="scope",nde="axis",rde="axis-domain",ide="axis-grid",ode="axis-label",sde="axis-tick",ade="axis-title",ude="legend",lde="legend-band",cde="legend-entry",fde="legend-gradient",z7="legend-label",dde="legend-symbol",hde="legend-title",pde="title",gde="title-text",mde="title-subtitle";function yde(e,t,n,r,i){const o={},s={};let a,u,l,c;u="lineBreak",t==="text"&&i[u]!=null&&!Vl(u,e)&&ob(o,u,i[u]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),c=n===hA?i.group:n===dA?he({},i.mark,i[t]):null;for(u in c)l=Vl(u,e)||(u==="fill"||u==="stroke")&&(Vl("fill",e)||Vl("stroke",e)),l||ob(o,u,c[u]);K(r).forEach(f=>{const d=i.style&&i.style[f];for(const h in d)Vl(h,e)||ob(o,h,d[h])}),e=he({},e);for(u in o)c=o[u],c.signal?(a=a||{})[u]=c:s[u]=c;return e.enter=he(s,e.enter),a&&(e.update=he(a,e.update)),e}function ob(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const I7=e=>Q(e)?G(e):e.signal?`(${e.signal})`:B7(e);function Nv(e){if(e.gradient!=null)return xde(e);let t=e.signal?`(${e.signal})`:e.color?vde(e.color):e.field!=null?B7(e.field):e.value!==void 0?G(e.value):void 0;return e.scale!=null&&(t=bde(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${Jm(e.exponent)})`),e.mult!=null&&(t+=`*${Jm(e.mult)}`),e.offset!=null&&(t+=`+${Jm(e.offset)}`),e.round&&(t=`round(${t})`),t}const cm=(e,t,n,r)=>`(${e}(${[t,n,r].map(Nv).join(",")})+'')`;function vde(e){return e.c?cm("hcl",e.h,e.c,e.l):e.h||e.s?cm("hsl",e.h,e.s,e.l):e.l||e.a?cm("lab",e.l,e.a,e.b):e.r||e.g||e.b?cm("rgb",e.r,e.g,e.b):null}function xde(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:G(n));for(;t.length&&_e(t)==null;)t.pop();return t.unshift(I7(e.gradient)),`gradient(${t.join(",")})`}function Jm(e){return J(e)?"("+Nv(e)+")":e}function B7(e){return j7(J(e)?e:{datum:e})}function j7(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):z("Invalid field reference: "+G(e));return e.signal||(r=Q(r)?yo(r).map(G).join("]["):j7(r)),t+"["+r+"]"}function bde(e,t){const n=I7(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+Jm(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function wde(e){let t="";return e.forEach(n=>{const r=Nv(n);t+=n.test?`(${n.test})?${r}:`:r}),_e(t)===":"&&(t+="null"),t}function U7(e,t,n,r,i,o){const s={};o=o||{},o.encoders={$encode:s},e=yde(e,t,n,r,i.config);for(const a in e)s[a]=Ede(e[a],t,o,i);return o}function Ede(e,t,n,r){const i={},o={};for(const s in e)e[s]!=null&&(i[s]=_de(Sde(e[s]),r,n,o));return{$expr:{marktype:t,channels:i},$fields:Object.keys(o),$output:Object.keys(e)}}function Sde(e){return I(e)?wde(e):Nv(e)}function _de(e,t,n,r){const i=ho(e,t);return i.$fields.forEach(o=>r[o]=1),he(n,i.$params),i.$expr}const kde="outer",$de=["value","update","init","react","bind"];function jO(e,t){z(e+' for "outer" push: '+G(t))}function W7(e,t){const n=e.name;if(e.push===kde)t.signals[n]||jO("No prior signal definition",n),$de.forEach(r=>{e[r]!==void 0&&jO("Invalid property ",r)});else{const r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function tS(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function Ov(e,t,n,r){return new tS(e,t,n,r)}function H1(e,t){return Ov("operator",e,t)}function ie(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function dp(e,t){return t?{$field:e,$name:t}:{$field:e}}const nS=dp("key");function UO(e,t){return{$compare:e,$order:t}}function Cde(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const Ade="ascending",Fde="descending";function Tde(e){return J(e)?(e.order===Fde?"-":"+")+Dv(e.op,e.field):""}function Dv(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const gA="scope",rS="view";function Et(e){return e&&e.signal}function Mde(e){return e&&e.expr}function Zm(e){if(Et(e))return!0;if(J(e)){for(const t in e)if(Zm(e[t]))return!0}return!1}function si(e,t){return e??t}function Du(e){return e&&e.signal||e}const WO="timer";function hp(e,t){return(e.merge?Ode:e.stream?Dde:e.type?Rde:z("Invalid stream specification: "+G(e)))(e,t)}function Nde(e){return e===gA?rS:e||rS}function Ode(e,t){const n=e.merge.map(i=>hp(i,t)),r=mA({merge:n},e,t);return t.addStream(r).id}function Dde(e,t){const n=hp(e.stream,t),r=mA({stream:n},e,t);return t.addStream(r).id}function Rde(e,t){let n;e.type===WO?(n=t.event(WO,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(Nde(e.source),e.type);const r=mA({stream:n},e,t);return Object.keys(r).length===1?n:t.addStream(r).id}function mA(e,t,n){let r=t.between;return r&&(r.length!==2&&z('Stream "between" parameter must have 2 entries: '+G(t)),e.between=[hp(r[0],n),hp(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(Pde(t.marktype,t.markname,t.markrole)),t.source===gA&&r.push("inScope(event.item)"),r.length&&(e.filter=ho("("+r.join(")&&(")+")",n).$expr),(r=t.throttle)!=null&&(e.throttle=+r),(r=t.debounce)!=null&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function Pde(e,t,n){const r="event.item";return r+(e&&e!=="*"?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}const Lde={code:"_.$value",ast:{type:"Identifier",value:"value"}};function zde(e,t,n){const r=e.encode,i={target:n};let o=e.events,s=e.update,a=[];o||z("Signal update missing events specification."),Q(o)&&(o=Ia(o,t.isSubscope()?gA:rS)),o=K(o).filter(u=>u.signal||u.scale?(a.push(u),0):1),a.length>1&&(a=[Bde(a)]),o.length&&a.push(o.length>1?{merge:o}:o[0]),r!=null&&(s&&z("Signal encode and update are mutually exclusive."),s="encode(item(),"+G(r)+")"),i.update=Q(s)?ho(s,t):s.expr!=null?ho(s.expr,t):s.value!=null?s.value:s.signal!=null?{$expr:Lde,$params:{$value:t.signalRef(s.signal)}}:z("Invalid signal update specification."),e.force&&(i.options={force:!0}),a.forEach(u=>t.addUpdate(he(Ide(u,t),i)))}function Ide(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):hp(e,t)}}function Bde(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function jde(e,t){const n=t.getSignal(e.name);let r=e.update;e.init&&(r?z("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=ho(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach(i=>zde(i,t,n.id))}const je=e=>(t,n,r)=>Ov(e,n,t||void 0,r),q7=je("aggregate"),Ude=je("axisticks"),H7=je("bound"),Mi=je("collect"),qO=je("compare"),Wde=je("datajoin"),G7=je("encode"),qde=je("expression"),Hde=je("facet"),Gde=je("field"),Vde=je("key"),Yde=je("legendentries"),Xde=je("load"),Qde=je("mark"),Kde=je("multiextent"),Jde=je("multivalues"),Zde=je("overlap"),ehe=je("params"),V7=je("prefacet"),the=je("projection"),nhe=je("proxy"),rhe=je("relay"),Y7=je("render"),ihe=je("scale"),El=je("sieve"),ohe=je("sortitems"),X7=je("viewlayout"),she=je("values");let ahe=0;const Q7={min:"min",max:"max",count:"sum"};function uhe(e,t){const n=e.type||"linear";q8(n)||z("Unrecognized scale type: "+G(n)),t.addScale(e.name,{type:n,domain:void 0})}function lhe(e,t){const n=t.getScale(e.name).params;let r;n.domain=K7(e.domain,e,t),e.range!=null&&(n.range=Z7(e,t,n)),e.interpolate!=null&&xhe(e.interpolate,n),e.nice!=null&&(n.nice=vhe(e.nice)),e.bins!=null&&(n.bins=yhe(e.bins,t));for(r in e)ae(n,r)||r==="name"||(n[r]=Rr(e[r],t))}function Rr(e,t){return J(e)?e.signal?t.signalRef(e.signal):z("Unsupported object: "+G(e)):e}function e0(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>Rr(n,t))}function Rv(e){z("Can not find data set: "+G(e))}function K7(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&z("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(I(e)?che:e.fields?dhe:fhe)(e,t,n)}function che(e,t,n){return e.map(r=>Rr(r,n))}function fhe(e,t,n){const r=n.getData(e.data);return r||Rv(e.data),Vc(t.type)?r.valuesRef(n,e.field,J7(e.sort,!1)):V8(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function dhe(e,t,n){const r=e.data,i=e.fields.reduce((o,s)=>(s=Q(s)?{data:r,field:s}:I(s)||s.signal?hhe(s,n):s,o.push(s),o),[]);return(Vc(t.type)?phe:V8(t.type)?ghe:mhe)(e,n,i)}function hhe(e,t){const n="_:vega:_"+ahe++,r=Mi({});if(I(e))r.value={$ingest:e};else if(e.signal){const i="setdata("+G(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,El({})]),{data:n,field:"data"}}function phe(e,t,n){const r=J7(e.sort,!0);let i,o;const s=n.map(l=>{const c=t.getData(l.data);return c||Rv(l.data),c.countsRef(t,l.field,r)}),a={groupby:nS,pulse:s};r&&(i=r.op||"count",o=r.field?Dv(i,r.field):"count",a.ops=[Q7[i]],a.fields=[t.fieldRef(o)],a.as=[o]),i=t.add(q7(a));const u=t.add(Mi({pulse:ie(i)}));return o=t.add(she({field:nS,sort:t.sortRef(r),pulse:ie(u)})),ie(o)}function J7(e,t){return e&&(!e.field&&!e.op?J(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?z("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!Q7[e.op]&&z("Multiple domain scales can not be sorted using "+e.op)),e}function ghe(e,t,n){const r=n.map(i=>{const o=t.getData(i.data);return o||Rv(i.data),o.domainRef(t,i.field)});return ie(t.add(Jde({values:r})))}function mhe(e,t,n){const r=n.map(i=>{const o=t.getData(i.data);return o||Rv(i.data),o.extentRef(t,i.field)});return ie(t.add(Kde({extents:r})))}function yhe(e,t){return e.signal||I(e)?e0(e,t):t.objectProperty(e)}function vhe(e){return J(e)?{interval:Rr(e.interval),step:Rr(e.step)}:Rr(e)}function xhe(e,t){t.interpolate=Rr(e.type||e),e.gamma!=null&&(t.interpolateGamma=Rr(e.gamma))}function Z7(e,t,n){const r=t.config.range;let i=e.range;if(i.signal)return t.signalRef(i.signal);if(Q(i)){if(r&&ae(r,i))return e=he({},e,{range:r[i]}),Z7(e,t,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=Vc(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:z("Unrecognized scale range value: "+G(i))}else if(i.scheme){n.scheme=I(i.scheme)?e0(i.scheme,t):Rr(i.scheme,t),i.extent&&(n.schemeExtent=e0(i.extent,t)),i.count&&(n.schemeCount=Rr(i.count,t));return}else if(i.step){n.rangeStep=Rr(i.step,t);return}else{if(Vc(e.type)&&!I(i))return K7(i,e,t);I(i)||z("Unsupported range type: "+G(i))}return i.map(o=>(I(o)?e0:Rr)(o,t))}function bhe(e,t){const n=t.config.projection||{},r={};for(const i in e)i!=="name"&&(r[i]=iS(e[i],i,t));for(const i in n)r[i]==null&&(r[i]=iS(n[i],i,t));t.addProjection(e.name,r)}function iS(e,t,n){return I(e)?e.map(r=>iS(r,t,n)):J(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:z("Unsupported parameter object: "+G(e)):e}const Ni="top",Lf="left",zf="right",Sa="bottom",eB="center",whe="vertical",Ehe="start",She="middle",_he="end",oS="index",yA="label",khe="offset",rf="perc",$he="perc2",zr="value",og="guide-label",vA="guide-title",Che="group-title",Ahe="group-subtitle",HO="symbol",t0="gradient",sS="discrete",aS="size",Fhe="shape",The="fill",Mhe="stroke",Nhe="strokeWidth",Ohe="strokeDash",Dhe="opacity",xA=[aS,Fhe,The,Mhe,Nhe,Ohe,Dhe],sg={name:1,style:1,interactive:1},ke={value:0},Ir={value:1},Pv="group",tB="rect",bA="rule",Rhe="symbol",Sl="text";function pp(e){return e.type=Pv,e.interactive=e.interactive||!1,e}function lr(e,t){const n=(r,i)=>si(e[r],si(t[r],i));return n.isVertical=r=>whe===si(e.direction,t.direction||(r?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>si(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>si(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>si(e.columns,si(t.columns,+n.isVertical(!0))),n}function nB(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function Phe(e,t,n){const r=t.config.style[n];return r&&r[e]}function Lv(e,t,n){return`item.anchor === '${Ehe}' ? ${e} : item.anchor === '${_he}' ? ${t} : ${n}`}const wA=Lv(G(Lf),G(zf),G(eB));function Lhe(e){const t=e("tickBand");let n=e("tickOffset"),r,i;return t?t.signal?(r={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${t.signal}) === 'extent'`},J(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(r=1,i=!0,n=0):(r=.5,i=!1):(r=e("bandPosition"),i=e("tickExtra")),{extra:i,band:r,offset:n}}function rB(e,t){return t?e?J(e)?Object.assign({},e,{offset:rB(e.offset,t)}):{value:e,offset:t}:t:e}function _r(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=Pf(e.encode,t,sg)):e.interactive=!1,e}function zhe(e,t,n,r){const i=lr(e,n),o=i.isVertical(),s=i.gradientThickness(),a=i.gradientLength();let u,l,c,f,d;o?(l=[0,1],c=[0,0],f=s,d=a):(l=[0,0],c=[1,0],f=a,d=s);const h={enter:u={opacity:ke,x:ke,y:ke,width:Mt(f),height:Mt(d)},update:he({},u,{opacity:Ir,fill:{gradient:t,start:l,stop:c}}),exit:{opacity:ke}};return Yt(h,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),_r({type:tB,role:fde,encode:h},r)}function Ihe(e,t,n,r,i){const o=lr(e,n),s=o.isVertical(),a=o.gradientThickness(),u=o.gradientLength();let l,c,f,d,h="";s?(l="y",f="y2",c="x",d="width",h="1-"):(l="x",f="x2",c="y",d="height");const p={opacity:ke,fill:{scale:t,field:zr}};p[l]={signal:h+"datum."+rf,mult:u},p[c]=ke,p[f]={signal:h+"datum."+$he,mult:u},p[d]=Mt(a);const g={enter:p,update:he({},p,{opacity:Ir}),exit:{opacity:ke}};return Yt(g,{stroke:o("gradientStrokeColor"),strokeWidth:o("gradientStrokeWidth")},{opacity:o("gradientOpacity")}),_r({type:tB,role:lde,key:zr,from:i,encode:g},r)}const Bhe=`datum.${rf}<=0?"${Lf}":datum.${rf}>=1?"${zf}":"${eB}"`,jhe=`datum.${rf}<=0?"${Sa}":datum.${rf}>=1?"${Ni}":"${She}"`;function GO(e,t,n,r){const i=lr(e,t),o=i.isVertical(),s=Mt(i.gradientThickness()),a=i.gradientLength();let u=i("labelOverlap"),l,c,f,d,h="";const p={enter:l={opacity:ke},update:c={opacity:Ir,text:{field:yA}},exit:{opacity:ke}};return Yt(p,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:si(e.labelLimit,t.gradientLabelLimit)}),o?(l.align={value:"left"},l.baseline=c.baseline={signal:jhe},f="y",d="x",h="1-"):(l.align=c.align={signal:Bhe},l.baseline={value:"top"},f="x",d="y"),l[f]=c[f]={signal:h+"datum."+rf,mult:a},l[d]=c[d]=s,s.offset=si(e.labelOffset,t.gradientLabelOffset)||0,u=u?{separation:i("labelSeparation"),method:u,order:"datum."+oS}:void 0,_r({type:Sl,role:z7,style:og,key:zr,from:r,encode:p,overlap:u},n)}function Uhe(e,t,n,r,i){const o=lr(e,t),s=n.entries,a=!!(s&&s.interactive),u=s?s.name:void 0,l=o("clipHeight"),c=o("symbolOffset"),f={data:"value"},d=`(${i}) ? datum.${khe} : datum.${aS}`,h=l?Mt(l):{field:aS},p=`datum.${oS}`,g=`max(1, ${i})`;let m,y,v,x,b;h.mult=.5,m={enter:y={opacity:ke,x:{signal:d,mult:.5,offset:c},y:h},update:v={opacity:Ir,x:y.x,y:y.y},exit:{opacity:ke}};let w=null,S=null;e.fill||(w=t.symbolBaseFillColor,S=t.symbolBaseStrokeColor),Yt(m,{fill:o("symbolFillColor",w),shape:o("symbolType"),size:o("symbolSize"),stroke:o("symbolStrokeColor",S),strokeDash:o("symbolDash"),strokeDashOffset:o("symbolDashOffset"),strokeWidth:o("symbolStrokeWidth")},{opacity:o("symbolOpacity")}),xA.forEach(k=>{e[k]&&(v[k]=y[k]={scale:e[k],field:zr})});const E=_r({type:Rhe,role:dde,key:zr,from:f,clip:l?!0:void 0,encode:m},n.symbols),_=Mt(c);_.offset=o("labelOffset"),m={enter:y={opacity:ke,x:{signal:d,offset:_},y:h},update:v={opacity:Ir,text:{field:yA},x:y.x,y:y.y},exit:{opacity:ke}},Yt(m,{align:o("labelAlign"),baseline:o("labelBaseline"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontStyle:o("labelFontStyle"),fontWeight:o("labelFontWeight"),limit:o("labelLimit")});const $=_r({type:Sl,role:z7,style:og,key:zr,from:f,encode:m},n.labels);return m={enter:{noBound:{value:!l},width:ke,height:l?Mt(l):ke,opacity:ke},exit:{opacity:ke},update:v={opacity:Ir,row:{signal:null},column:{signal:null}}},o.isVertical(!0)?(x=`ceil(item.mark.items.length / ${g})`,v.row.signal=`${p}%${x}`,v.column.signal=`floor(${p} / ${x})`,b={field:["row",p]}):(v.row.signal=`floor(${p} / ${g})`,v.column.signal=`${p} % ${g}`,b={field:p}),v.column.signal=`(${i})?${v.column.signal}:${p}`,r={facet:{data:r,name:"value",groupby:oS}},pp({role:pA,from:r,encode:Pf(m,s,sg),marks:[E,$],name:u,interactive:a,sort:b})}function Whe(e,t){const n=lr(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const EA='item.orient === "left"',SA='item.orient === "right"',zv=`(${EA} || ${SA})`,qhe=`datum.vgrad && ${zv}`,Hhe=Lv('"top"','"bottom"','"middle"'),Ghe=Lv('"right"','"left"','"center"'),Vhe=`datum.vgrad && ${SA} ? (${Ghe}) : (${zv} && !(datum.vgrad && ${EA})) ? "left" : ${wA}`,Yhe=`item._anchor || (${zv} ? "middle" : "start")`,Xhe=`${qhe} ? (${EA} ? -90 : 90) : 0`,Qhe=`${zv} ? (datum.vgrad ? (${SA} ? "bottom" : "top") : ${Hhe}) : "top"`;function Khe(e,t,n,r){const i=lr(e,t),o={enter:{opacity:ke},update:{opacity:Ir,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:ke}};return Yt(o,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:Yhe},angle:{signal:Xhe},align:{signal:Vhe},baseline:{signal:Qhe},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),_r({type:Sl,role:hde,style:vA,from:r,encode:o},n)}function Jhe(e,t){let n;return J(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+VO(e.path)+")":e.sphere&&(n="geoShape("+VO(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function VO(e){return J(e)&&e.signal?e.signal:G(e)}function iB(e){const t=e.role||"";return!t.indexOf("axis")||!t.indexOf("legend")||!t.indexOf("title")?t:e.type===Pv?pA:t||dA}function Zhe(e){return{marktype:e.type,name:e.name||void 0,role:e.role||iB(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function epe(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function _A(e,t){const n=G6(e.type);n||z("Unrecognized transform type: "+G(e.type));const r=Ov(n.type.toLowerCase(),null,oB(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function oB(e,t,n){const r={},i=e.params.length;for(let o=0;o<i;++o){const s=e.params[o];r[s.name]=tpe(s,t,n)}return r}function tpe(e,t,n){const r=e.type,i=t[e.name];if(r==="index")return npe(e,t,n);if(i===void 0){e.required&&z("Missing required "+G(t.type)+" parameter: "+G(e.name));return}else{if(r==="param")return rpe(e,t,n);if(r==="projection")return n.projectionRef(t[e.name])}return e.array&&!Et(i)?i.map(o=>YO(e,o,n)):YO(e,i,n)}function YO(e,t,n){const r=e.type;if(Et(t))return QO(r)?z("Expression references can not be signals."):sb(r)?n.fieldRef(t):KO(r)?n.compareRef(t):n.signalRef(t.signal);{const i=e.expr||sb(r);return i&&ipe(t)?n.exprRef(t.expr,t.as):i&&ope(t)?dp(t.field,t.as):QO(r)?ho(t,n):spe(r)?ie(n.getData(t).values):sb(r)?dp(t):KO(r)?n.compareRef(t):t}}function npe(e,t,n){return Q(t.from)||z('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function rpe(e,t,n){const r=t[e.name];return e.array?(I(r)||z("Expected an array of sub-parameters. Instead: "+G(r)),r.map(i=>XO(e,i,n))):XO(e,r,n)}function XO(e,t,n){const r=e.params.length;let i;for(let s=0;s<r;++s){i=e.params[s];for(const a in i.key)if(i.key[a]!==t[a]){i=null;break}if(i)break}i||z("Unsupported parameter: "+G(t));const o=he(oB(i,t,n),i.key);return ie(n.add(ehe(o)))}const ipe=e=>e&&e.expr,ope=e=>e&&e.field,spe=e=>e==="data",QO=e=>e==="expr",sb=e=>e==="field",KO=e=>e==="compare";function ape(e,t,n){let r,i,o,s,a;return e?(r=e.facet)&&(t||z("Only group marks can be faceted."),r.field!=null?s=a=n0(r,n):(e.data?a=ie(n.getData(e.data).aggregate):(o=_A(he({type:"aggregate",groupby:K(r.groupby)},r.aggregate),n),o.params.key=n.keyRef(r.groupby),o.params.pulse=n0(r,n),s=a=ie(n.add(o))),i=n.keyRef(r.groupby,!0))):s=ie(n.add(Mi(null,[{}]))),s||(s=n0(e,n)),{key:i,pulse:s,parent:a}}function n0(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:ie(t.getData(e.data).output)}function el(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}el.fromEntries=function(e,t){const n=t.length,r=t[n-1],i=t[n-2];let o=t[0],s=null,a=1;for(o&&o.type==="load"&&(o=t[1]),e.add(t[0]);a<n;++a)t[a].params.pulse=ie(t[a-1]),e.add(t[a]),t[a].type==="aggregate"&&(s=t[a]);return new el(e,o,i,r,s)};function sB(e){return Q(e)?e:null}function JO(e,t,n){const r=Dv(n.op,n.field);let i;if(t.ops){for(let o=0,s=t.as.length;o<s;++o)if(t.as[o]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function bd(e,t,n,r,i,o,s){const a=t[n]||(t[n]={}),u=Tde(o);let l=sB(i),c,f;if(l!=null&&(e=t.scope,l=l+(u?"|"+u:""),c=a[l]),!c){const d=o?{field:nS,pulse:t.countsRef(e,i,o)}:{field:e.fieldRef(i),pulse:ie(t.output)};u&&(d.sort=e.sortRef(o)),f=e.add(Ov(r,void 0,d)),s&&(t.index[i]=f),c=ie(f),l!=null&&(a[l]=c)}return c}el.prototype={countsRef(e,t,n){const r=this,i=r.counts||(r.counts={}),o=sB(t);let s,a,u;return o!=null&&(e=r.scope,s=i[o]),s?n&&n.field&&JO(e,s.agg.params,n):(u={groupby:e.fieldRef(t,"key"),pulse:ie(r.output)},n&&n.field&&JO(e,u,n),a=e.add(q7(u)),s=e.add(Mi({pulse:ie(a)})),s={agg:a,ref:ie(s)},o!=null&&(i[o]=s)),s.ref},tuplesRef(){return ie(this.values)},extentRef(e,t){return bd(e,this,"extent","extent",t,!1)},domainRef(e,t){return bd(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return bd(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return bd(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return bd(e,this,"indata","tupleindex",t,!0,!0)}};function upe(e,t,n){const r=e.from.facet,i=r.name,o=n0(r,t);let s;r.name||z("Facet must have a name: "+G(r)),r.data||z("Facet must reference a data set: "+G(r)),r.field?s=t.add(V7({field:t.fieldRef(r.field),pulse:o})):r.groupby?s=t.add(Hde({key:t.keyRef(r.groupby),group:ie(t.proxy(n.parent)),pulse:o})):z("Facet must specify groupby or field: "+G(r));const a=t.fork(),u=a.add(Mi()),l=a.add(El({pulse:ie(u)}));a.addData(i,new el(a,u,u,l)),a.addSignal("parent",null),s.params.subflow={$subflow:a.parse(e).toRuntime()}}function lpe(e,t,n){const r=t.add(V7({pulse:n.pulse})),i=t.fork();i.add(El()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}function aB(e,t,n){const r=e.remove,i=e.insert,o=e.toggle,s=e.modify,a=e.values,u=t.add(H1()),l="if("+e.trigger+',modify("'+n+'",'+[i,r,o,s,a].map(f=>f??"null").join(",")+"),0)",c=ho(l,t);u.update=c.$expr,u.params=c.$params}function Iv(e,t){const n=iB(e),r=e.type===Pv,i=e.from&&e.from.facet,o=e.overlap;let s=e.layout||n===pA||n===hA,a,u,l,c,f,d,h;const p=n===dA||s||i,g=ape(e.from,r,t);u=t.add(Wde({key:g.key||(e.key?dp(e.key):void 0),pulse:g.pulse,clean:!r}));const m=ie(u);u=l=t.add(Mi({pulse:m})),u=t.add(Qde({markdef:Zhe(e),interactive:epe(e.interactive,t),clip:Jhe(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:ie(u)}));const y=ie(u);u=c=t.add(G7(U7(e.encode,e.type,n,e.style,t,{mod:!1,pulse:y}))),u.params.parent=t.encode(),e.transform&&e.transform.forEach(S=>{const E=_A(S,t),_=E.metadata;(_.generates||_.changes)&&z("Mark transforms should not generate new data."),_.nomod||(c.params.mod=!0),E.params.pulse=ie(u),t.add(u=E)}),e.sort&&(u=t.add(ohe({sort:t.compareRef(e.sort),pulse:ie(u)})));const v=ie(u);(i||s)&&(s=t.add(X7({layout:t.objectProperty(e.layout),legends:t.legends,mark:y,pulse:v})),d=ie(s));const x=t.add(H7({mark:y,pulse:d||v}));h=ie(x),r&&(p&&(a=t.operators,a.pop(),s&&a.pop()),t.pushState(v,d||h,m),i?upe(e,t,g):p?lpe(e,t,g):t.parse(e),t.popState(),p&&(s&&a.push(s),a.push(x))),o&&(h=cpe(o,h,t));const b=t.add(Y7({pulse:h})),w=t.add(El({pulse:ie(b)},void 0,t.parent()));e.name!=null&&(f=e.name,t.addData(f,new el(t,l,b,w)),e.on&&e.on.forEach(S=>{(S.insert||S.remove||S.toggle)&&z("Marks only support modify triggers."),aB(S,t,f)}))}function cpe(e,t,n){const r=e.method,i=e.bound,o=e.separation,s={separation:Et(o)?n.signalRef(o.signal):o,method:Et(r)?n.signalRef(r.signal):r,pulse:t};if(e.order&&(s.sort=n.compareRef({field:e.order})),i){const a=i.tolerance;s.boundTolerance=Et(a)?n.signalRef(a.signal):+a,s.boundScale=n.scaleRef(i.scale),s.boundOrient=i.orient}return ie(n.add(Zde(s)))}function fpe(e,t){const n=t.config.legend,r=e.encode||{},i=lr(e,n),o=r.legend||{},s=o.name||void 0,a=o.interactive,u=o.style,l={};let c=0,f,d,h;xA.forEach(x=>e[x]?(l[x]=e[x],c=c||e[x]):0),c||z("Missing valid scale for legend.");const p=dpe(e,t.scaleType(c)),g={title:e.title!=null,scales:l,type:p,vgrad:p!=="symbol"&&i.isVertical()},m=ie(t.add(Mi(null,[g]))),y={enter:{x:{value:0},y:{value:0}}},v=ie(t.add(Yde(d={type:p,scale:t.scaleRef(c),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return p===t0?(h=[zhe(e,c,n,r.gradient),GO(e,n,r.labels,v)],d.count=d.count||t.signalRef(`max(2,2*floor((${Du(i.gradientLength())})/100))`)):p===sS?h=[Ihe(e,c,n,r.gradient,v),GO(e,n,r.labels,v)]:(f=Whe(e,n),h=[Uhe(e,n,r,v,Du(f.columns))],d.size=gpe(e,t,h[0].marks)),h=[pp({role:cde,from:m,encode:y,marks:h,layout:f,interactive:a})],g.title&&h.push(Khe(e,n,r.title,m)),Iv(pp({role:ude,from:m,encode:Pf(ppe(i,e,n),o,sg),marks:h,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:s,interactive:a,style:u}),t)}function dpe(e,t){let n=e.type||HO;return!e.type&&hpe(e)===1&&(e.fill||e.stroke)&&(n=b$(t)?t0:Jw(t)?sS:HO),n!==t0?n:Jw(t)?sS:t0}function hpe(e){return xA.reduce((t,n)=>t+(e[n]?1:0),0)}function ppe(e,t,n){const r={enter:{},update:{}};return Yt(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function gpe(e,t,n){const r=Du(ZO("size",e,n)),i=Du(ZO("strokeWidth",e,n)),o=Du(mpe(n[1].encode,t,og));return ho(`max(ceil(sqrt(${r})+${i}),${o})`,t)}function ZO(e,t,n){return t[e]?`scale("${t[e]}",datum)`:nB(e,n[0].encode)}function mpe(e,t,n){return nB("fontSize",e)||Phe("fontSize",t,n)}const ype=`item.orient==="${Lf}"?-90:item.orient==="${zf}"?90:0`;function vpe(e,t){e=Q(e)?{text:e}:e;const n=lr(e,t.config.title),r=e.encode||{},i=r.group||{},o=i.name||void 0,s=i.interactive,a=i.style,u=[],l={},c=ie(t.add(Mi(null,[l])));return u.push(wpe(e,n,xpe(e),c)),e.subtitle&&u.push(Epe(e,n,r.subtitle,c)),Iv(pp({role:pde,from:c,encode:bpe(n,i),marks:u,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:o,interactive:s,style:a}),t)}function xpe(e){const t=e.encode;return t&&t.title||he({name:e.name,interactive:e.interactive,style:e.style},t)}function bpe(e,t){const n={enter:{},update:{}};return Yt(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:wA},angle:{signal:ype},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),Pf(n,t,sg)}function wpe(e,t,n,r){const i={value:0},o=e.text,s={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return Yt(s,{text:o,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),_r({type:Sl,role:gde,style:Che,from:r,encode:s},n)}function Epe(e,t,n,r){const i={value:0},o=e.subtitle,s={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return Yt(s,{text:o,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),_r({type:Sl,role:mde,style:Ahe,from:r,encode:s},n)}function Spe(e,t){const n=[];e.transform&&e.transform.forEach(r=>{n.push(_A(r,t))}),e.on&&e.on.forEach(r=>{aB(r,t,e.name)}),t.addDataPipeline(e.name,_pe(e,t,n))}function _pe(e,t,n){const r=[];let i=null,o=!1,s=!1,a,u,l,c,f;for(e.values?Et(e.values)||Zm(e.format)?(r.push(eD(t,e)),r.push(i=Ja())):r.push(i=Ja({$ingest:e.values,$format:e.format})):e.url?Zm(e.url)||Zm(e.format)?(r.push(eD(t,e)),r.push(i=Ja())):r.push(i=Ja({$request:e.url,$format:e.format})):e.source&&(i=a=K(e.source).map(d=>ie(t.getData(d).output)),r.push(null)),u=0,l=n.length;u<l;++u)c=n[u],f=c.metadata,!i&&!f.source&&r.push(i=Ja()),r.push(c),f.generates&&(s=!0),f.modifies&&!s&&(o=!0),f.source?i=c:f.changes&&(i=null);return a&&(l=a.length-1,r[0]=rhe({derive:o,pulse:l?a:a[0]}),(o||l)&&r.splice(1,0,Ja())),i||r.push(Ja()),r.push(El({})),r}function Ja(e){const t=Mi({},e);return t.metadata={source:!0},t}function eD(e,t){return Xde({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const uB=e=>e===Sa||e===Ni,Bv=(e,t,n)=>Et(e)?Ape(e.signal,t,n):e===Lf||e===Ni?t:n,Nt=(e,t,n)=>Et(e)?$pe(e.signal,t,n):uB(e)?t:n,wi=(e,t,n)=>Et(e)?Cpe(e.signal,t,n):uB(e)?n:t,lB=(e,t,n)=>Et(e)?Fpe(e.signal,t,n):e===Ni?{value:t}:{value:n},kpe=(e,t,n)=>Et(e)?Tpe(e.signal,t,n):e===zf?{value:t}:{value:n},$pe=(e,t,n)=>cB(`${e} === '${Ni}' || ${e} === '${Sa}'`,t,n),Cpe=(e,t,n)=>cB(`${e} !== '${Ni}' && ${e} !== '${Sa}'`,t,n),Ape=(e,t,n)=>kA(`${e} === '${Lf}' || ${e} === '${Ni}'`,t,n),Fpe=(e,t,n)=>kA(`${e} === '${Ni}'`,t,n),Tpe=(e,t,n)=>kA(`${e} === '${zf}'`,t,n),cB=(e,t,n)=>(t=t!=null?Mt(t):t,n=n!=null?Mt(n):n,tD(t)&&tD(n)?(t=t?t.signal||G(t.value):null,n=n?n.signal||G(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[he({test:e},t)].concat(n||[])),tD=e=>e==null||Object.keys(e).length===1,kA=(e,t,n)=>({signal:`${e} ? (${dc(t)}) : (${dc(n)})`}),Mpe=(e,t,n,r,i)=>({signal:(r!=null?`${e} === '${Lf}' ? (${dc(r)}) : `:"")+(n!=null?`${e} === '${Sa}' ? (${dc(n)}) : `:"")+(i!=null?`${e} === '${zf}' ? (${dc(i)}) : `:"")+(t!=null?`${e} === '${Ni}' ? (${dc(t)}) : `:"")+"(null)"}),dc=e=>Et(e)?e.signal:e==null?null:G(e),Npe=(e,t)=>t===0?0:Et(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},Sc=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function Bl(e,t,n,r){let i;if(t&&ae(t,e))return t[e];if(ae(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r[vA][i]}else if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r[og][i]}return null}function nD(e){const t={};for(const n of e)if(n)for(const r in n)t[r]=1;return Object.keys(t)}function Ope(e,t){var n=t.config,r=n.style,i=n.axis,o=t.scaleType(e.scale)==="band"&&n.axisBand,s=e.orient,a,u,l;if(Et(s)){const f=nD([n.axisX,n.axisY]),d=nD([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);a={};for(l of f)a[l]=Nt(s,Bl(l,n.axisX,i,r),Bl(l,n.axisY,i,r));u={};for(l of d)u[l]=Mpe(s.signal,Bl(l,n.axisTop,i,r),Bl(l,n.axisBottom,i,r),Bl(l,n.axisLeft,i,r),Bl(l,n.axisRight,i,r))}else a=s===Ni||s===Sa?n.axisX:n.axisY,u=n["axis"+s[0].toUpperCase()+s.slice(1)];return a||u||o?he({},i,a,u,o):i}function Dpe(e,t,n,r){const i=lr(e,t),o=e.orient;let s,a;const u={enter:s={opacity:ke},update:a={opacity:Ir},exit:{opacity:ke}};Yt(u,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const l=rD(e,0),c=rD(e,1);return s.x=a.x=Nt(o,l,ke),s.x2=a.x2=Nt(o,c),s.y=a.y=wi(o,l,ke),s.y2=a.y2=wi(o,c),_r({type:bA,role:rde,from:r,encode:u},n)}function rD(e,t){return{scale:e.scale,range:t}}function Rpe(e,t,n,r,i){const o=lr(e,t),s=e.orient,a=e.gridScale,u=Bv(s,1,-1),l=Ppe(e.offset,u);let c,f,d;const h={enter:c={opacity:ke},update:d={opacity:Ir},exit:f={opacity:ke}};Yt(h,{stroke:o("gridColor"),strokeCap:o("gridCap"),strokeDash:o("gridDash"),strokeDashOffset:o("gridDashOffset"),strokeOpacity:o("gridOpacity"),strokeWidth:o("gridWidth")});const p={scale:e.scale,field:zr,band:i.band,extra:i.extra,offset:i.offset,round:o("tickRound")},g=Nt(s,{signal:"height"},{signal:"width"}),m=a?{scale:a,range:0,mult:u,offset:l}:{value:0,offset:l},y=a?{scale:a,range:1,mult:u,offset:l}:he(g,{mult:u,offset:l});return c.x=d.x=Nt(s,p,m),c.y=d.y=wi(s,p,m),c.x2=d.x2=wi(s,y),c.y2=d.y2=Nt(s,y),f.x=Nt(s,p),f.y=wi(s,p),_r({type:bA,role:ide,key:zr,from:r,encode:h},n)}function Ppe(e,t){if(t!==1)if(!J(e))e=Et(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=he({},e);for(;n.mult!=null;)if(J(n.mult))n=n.mult=he({},n.mult);else return n.mult=Et(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function Lpe(e,t,n,r,i,o){const s=lr(e,t),a=e.orient,u=Bv(a,-1,1);let l,c,f;const d={enter:l={opacity:ke},update:f={opacity:Ir},exit:c={opacity:ke}};Yt(d,{stroke:s("tickColor"),strokeCap:s("tickCap"),strokeDash:s("tickDash"),strokeDashOffset:s("tickDashOffset"),strokeOpacity:s("tickOpacity"),strokeWidth:s("tickWidth")});const h=Mt(i);h.mult=u;const p={scale:e.scale,field:zr,band:o.band,extra:o.extra,offset:o.offset,round:s("tickRound")};return f.y=l.y=Nt(a,ke,p),f.y2=l.y2=Nt(a,h),c.x=Nt(a,p),f.x=l.x=wi(a,ke,p),f.x2=l.x2=wi(a,h),c.y=wi(a,p),_r({type:bA,role:sde,key:zr,from:r,encode:d},n)}function ab(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function zpe(e,t,n,r,i,o){const s=lr(e,t),a=e.orient,u=e.scale,l=Bv(a,-1,1),c=Du(s("labelFlush")),f=Du(s("labelFlushOffset")),d=s("labelAlign"),h=s("labelBaseline");let p=c===0||!!c,g;const m=Mt(i);m.mult=l,m.offset=Mt(s("labelPadding")||0),m.offset.mult=l;const y={scale:u,field:zr,band:.5,offset:rB(o.offset,s("labelOffset"))},v=Nt(a,p?ab(u,c,'"left"','"right"','"center"'):{value:"center"},kpe(a,"left","right")),x=Nt(a,lB(a,"bottom","top"),p?ab(u,c,'"top"','"bottom"','"middle"'):{value:"middle"}),b=ab(u,c,`-(${f})`,f,0);p=p&&f;const w={opacity:ke,x:Nt(a,y,m),y:wi(a,y,m)},S={enter:w,update:g={opacity:Ir,text:{field:yA},x:w.x,y:w.y,align:v,baseline:x},exit:{opacity:ke,x:w.x,y:w.y}};Yt(S,{dx:!d&&p?Nt(a,b):null,dy:!h&&p?wi(a,b):null}),Yt(S,{angle:s("labelAngle"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontWeight:s("labelFontWeight"),fontStyle:s("labelFontStyle"),limit:s("labelLimit"),lineHeight:s("labelLineHeight")},{align:d,baseline:h});const E=s("labelBound");let _=s("labelOverlap");return _=_||E?{separation:s("labelSeparation"),method:_,order:"datum.index",bound:E?{scale:u,orient:a,tolerance:E}:null}:void 0,g.align!==v&&(g.align=Sc(g.align,v)),g.baseline!==x&&(g.baseline=Sc(g.baseline,x)),_r({type:Sl,role:ode,style:og,key:zr,from:r,encode:S,overlap:_},n)}function Ipe(e,t,n,r){const i=lr(e,t),o=e.orient,s=Bv(o,-1,1);let a,u;const l={enter:a={opacity:ke,anchor:Mt(i("titleAnchor",null)),align:{signal:wA}},update:u=he({},a,{opacity:Ir,text:Mt(e.title)}),exit:{opacity:ke}},c={signal:`lerp(range("${e.scale}"), ${Lv(0,1,.5)})`};return u.x=Nt(o,c),u.y=wi(o,c),a.angle=Nt(o,ke,Npe(s,90)),a.baseline=Nt(o,lB(o,Sa,Ni),{value:Sa}),u.angle=a.angle,u.baseline=a.baseline,Yt(l,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),Bpe(i,o,l,n),l.update.align=Sc(l.update.align,a.align),l.update.angle=Sc(l.update.angle,a.angle),l.update.baseline=Sc(l.update.baseline,a.baseline),_r({type:Sl,role:ade,style:vA,from:r,encode:l},n)}function Bpe(e,t,n,r){const i=(a,u)=>a!=null?(n.update[u]=Sc(Mt(a),n.update[u]),!1):!Vl(u,r),o=i(e("titleX"),"x"),s=i(e("titleY"),"y");n.enter.auto=s===o?Mt(s):Nt(t,Mt(s),Mt(o))}function jpe(e,t){const n=Ope(e,t),r=e.encode||{},i=r.axis||{},o=i.name||void 0,s=i.interactive,a=i.style,u=lr(e,n),l=Lhe(u),c={scale:e.scale,ticks:!!u("ticks"),labels:!!u("labels"),grid:!!u("grid"),domain:!!u("domain"),title:e.title!=null},f=ie(t.add(Mi({},[c]))),d=ie(t.add(Ude({scale:t.scaleRef(e.scale),extra:t.property(l.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),h=[];let p;return c.grid&&h.push(Rpe(e,n,r.grid,d,l)),c.ticks&&(p=u("tickSize"),h.push(Lpe(e,n,r.ticks,d,p,l))),c.labels&&(p=c.ticks?p:0,h.push(zpe(e,n,r.labels,d,p,l))),c.domain&&h.push(Dpe(e,n,r.domain,f)),c.title&&h.push(Ipe(e,n,r.title,f)),Iv(pp({role:nde,from:f,encode:Pf(Upe(u,e),i,sg),marks:h,aria:u("aria"),description:u("description"),zindex:u("zindex"),name:o,interactive:s,style:a}),t)}function Upe(e,t){const n={enter:{},update:{}};return Yt(n,{orient:e("orient"),offset:e("offset")||0,position:si(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function fB(e,t,n){const r=K(e.signals),i=K(e.scales);return n||r.forEach(o=>W7(o,t)),K(e.projections).forEach(o=>bhe(o,t)),i.forEach(o=>uhe(o,t)),K(e.data).forEach(o=>Spe(o,t)),i.forEach(o=>lhe(o,t)),(n||r).forEach(o=>jde(o,t)),K(e.axes).forEach(o=>jpe(o,t)),K(e.marks).forEach(o=>Iv(o,t)),K(e.legends).forEach(o=>fpe(o,t)),e.title&&vpe(e.title,t),t.parseLambdas(),t}const Wpe=e=>Pf({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function qpe(e,t){const n=t.config,r=ie(t.root=t.add(H1())),i=Hpe(e,n);i.forEach(l=>W7(l,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const o=t.add(Mi()),s=t.add(G7(U7(Wpe(e.encode),Pv,hA,e.style,t,{pulse:ie(o)}))),a=t.add(X7({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:ie(s)}));t.operators.pop(),t.pushState(ie(s),ie(a),null),fB(e,t,i),t.operators.push(a);let u=t.add(H7({mark:r,pulse:ie(a)}));return u=t.add(Y7({pulse:ie(u)})),u=t.add(El({pulse:ie(u)})),t.addData("root",new el(t,o,o,u)),t}function wd(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function Hpe(e,t){const n=s=>si(e[s],t[s]),r=[wd("background",n("background")),wd("autosize",Zfe(n("autosize"))),wd("padding",tde(n("padding"))),wd("width",n("width")||0),wd("height",n("height")||0)],i=r.reduce((s,a)=>(s[a.name]=a,s),{}),o={};return K(e.signals).forEach(s=>{ae(i,s.name)?s=he(i[s.name],s):r.push(s),o[s.name]=s}),K(t.signals).forEach(s=>{!ae(o,s.name)&&!ae(i,s.name)&&r.push(s)}),r}function dB(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function iD(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}dB.prototype=iD.prototype={parse(e){return fB(e,this)},fork(){return new iD(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof tS?ie(e):e;return this.add(nhe({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(r,i,o){let s,a;r&&(s=r.data||(r.data={}),a=s[i]||(s[i]=[]),a.push(o))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push(ie(this.add(El({pulse:e})))),this._parent.push(t),this._lookup.push(n?ie(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return _e(this._parent)},encode(){return _e(this._encode)},lookup(){return _e(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(Q(e))return dp(e,t);e.signal||z("Unsupported field reference: "+G(e));const n=e.signal;let r=this.field[n];if(!r){const i={name:this.signalRef(n)};t&&(i.as=t),this.field[n]=r=ie(this.add(Gde(i)))}return r},compareRef(e){let t=!1;const n=o=>Et(o)?(t=!0,this.signalRef(o.signal)):Mde(o)?(t=!0,this.exprRef(o.expr)):o,r=K(e.field).map(n),i=K(e.order).map(n);return t?ie(this.add(qO({fields:r,orders:i}))):UO(r,i)},keyRef(e,t){let n=!1;const r=o=>Et(o)?(n=!0,ie(i[o.signal])):o,i=this.signals;return e=K(e).map(r),n?ie(this.add(Vde({fields:e,flat:t}))):Cde(e,t)},sortRef(e){if(!e)return e;const t=Dv(e.op,e.field),n=e.order||Ade;return n.signal?ie(this.add(qO({fields:t,orders:this.signalRef(n.signal)}))):UO(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return ae(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&z("Duplicate signal name: "+G(e));const n=t instanceof tS?t:this.add(H1(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||z("Unrecognized signal name: "+G(e)),this.signals[e]},signalRef(e){return this.signals[e]?ie(this.signals[e]):(ae(this.lambdas,e)||(this.lambdas[e]=this.add(H1(null))),ie(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const r=e[t],i=ho(r,this),o=this.lambdas[r];o.params=i.$params,o.update=i.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!J(e)?e:this.signalRef(e.signal||$A(e))},exprRef(e,t){const n={expr:ho(e,this)};return t&&(n.expr.$name=t),ie(this.add(qde(n)))},addBinding(e,t){this.bindings||z("Nested signals do not support binding: "+G(e)),this.bindings.push(he({signal:e},t))},addScaleProj(e,t){ae(this.scales,e)&&z("Duplicate scale or projection name: "+G(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,ihe(t))},addProjection(e,t){this.addScaleProj(e,the(t))},getScale(e){return this.scales[e]||z("Unrecognized scale name: "+G(e)),this.scales[e]},scaleRef(e){return ie(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return ae(this.data,e)&&z("Duplicate data set name: "+G(e)),this.data[e]=t},getData(e){return this.data[e]||z("Undefined data set name: "+G(e)),this.data[e]},addDataPipeline(e,t){return ae(this.data,e)&&z("Duplicate data set name: "+G(e)),this.addData(e,el.fromEntries(this,t))}};function $A(e){return(I(e)?Gpe:Vpe)(e)}function Gpe(e){const t=e.length;let n="[";for(let r=0;r<t;++r){const i=e[r];n+=(r>0?",":"")+(J(i)?i.signal||$A(i):G(i))}return n+"]"}function Vpe(e){let t="{",n=0,r,i;for(r in e)i=e[r],t+=(++n>1?",":"")+G(r)+":"+(J(i)?i.signal||$A(i):G(i));return t+"}"}function Ype(){const e="sans-serif",r="#4c78a8",i="#000",o="#888",s="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:2},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:e,fontSize:11},trail:{fill:r,size:2},style:{"guide-label":{fill:i,font:e,fontSize:10},"guide-title":{fill:i,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:s},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:o,grid:!1,gridWidth:1,gridColor:s,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:o,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:s,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:o,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function Xpe(e,t,n){return J(e)||z("Input Vega specification must be an object."),t=_f(Ype(),t,e.config),qpe(e,new dB(t,n)).toRuntime()}var Qpe="5.25.0";he(Uc,JQ,vne,Qne,Pie,Toe,rae,Pse,oae,Aae,zae,Hae);const Kpe=Object.freeze(Object.defineProperty({__proto__:null,Bounds:gt,CanvasHandler:Qp,CanvasRenderer:i1,DATE:rr,DAY:an,DAYOFYEAR:co,Dataflow:xc,Debug:pP,Error:D_,EventStream:jy,Gradient:uz,GroupItem:cv,HOURS:wr,Handler:wa,Info:hP,Item:lv,MILLISECONDS:$i,MINUTES:Er,MONTH:dn,Marks:Sr,MultiPulse:ok,None:dP,Operator:Ue,Parameters:By,Pulse:aa,QUARTER:nr,RenderType:Hs,Renderer:bo,ResourceLoader:F$,SECONDS:Wr,SVGHandler:V$,SVGRenderer:Z$,SVGStringRenderer:eC,Scenegraph:H$,TIME_UNITS:X_,Transform:P,View:T7,WEEK:bt,Warn:R_,YEAR:Ht,accessor:ur,accessorFields:fn,accessorName:lt,array:K,ascending:Fy,bandwidthNRD:lk,bin:X6,bootstrapCI:Q6,boundClip:nI,boundContext:Gp,boundItem:oE,boundMark:Cz,boundStroke:ps,changeset:vl,clampRange:kP,codegenExpression:i7,compare:B_,constant:yn,cumulativeLogNormal:gk,cumulativeNormal:Wy,cumulativeUniform:xk,dayofyear:n6,debounce:j_,defaultLocale:ek,definition:G6,densityLogNormal:pk,densityNormal:ck,densityUniform:vk,domChild:qn,domClear:fi,domCreate:Ws,domFind:G$,dotbin:K6,error:z,expressionFunction:mt,extend:he,extent:ao,extentIndex:$P,falsy:$s,fastmap:$f,field:tr,flush:CP,font:gv,fontFamily:Xp,fontSize:xo,format:Dm,formatLocale:z0,formats:rk,hasOwnProperty:ae,id:Fp,identity:mn,inferType:R6,inferTypes:P6,ingest:Ne,inherits:V,inrange:ac,interpolate:w$,interpolateColors:av,interpolateRange:Y8,intersect:Jz,intersectBoxLine:uc,intersectPath:T$,intersectPoint:M$,intersectRule:mz,isArray:I,isBoolean:Oa,isDate:oa,isFunction:pe,isIterable:AP,isNumber:ze,isObject:J,isRegExp:FP,isString:Q,isTuple:zy,key:U_,lerp:TP,lineHeight:xa,loader:Py,locale:O6,logger:P_,lruCache:MP,markup:J$,merge:NP,mergeConfig:_f,multiLineOffset:U$,one:Sf,pad:OP,panLinear:xP,panLog:bP,panPow:wP,panSymlog:EP,parse:Xpe,parseExpression:ZC,parseSelector:Ia,path:Yy,pathCurves:$$,pathEqual:rI,pathParse:Yc,pathRectangle:fz,pathRender:ep,pathSymbols:cz,pathTrail:dz,peek:_e,point:yv,projection:xC,quantileLogNormal:mk,quantileNormal:qy,quantileUniform:bk,quantiles:ak,quantizeInterpolator:X8,quarter:SP,quartiles:uk,get random(){return qr},randomInteger:nQ,randomKDE:dk,randomLCG:tQ,randomLogNormal:Z6,randomMixture:eL,randomNormal:fk,randomUniform:tL,read:I6,regressionConstant:wk,regressionExp:rL,regressionLinear:Ek,regressionLoess:sL,regressionLog:nL,regressionPoly:oL,regressionPow:iL,regressionQuad:Sk,renderModule:vv,repeat:Dd,resetDefaultLocale:JY,resetSVGClipId:pz,resetSVGDefIds:Pte,responseType:z6,runtimeContext:y7,sampleCurve:Gy,sampleLogNormal:hk,sampleNormal:Uy,sampleUniform:yk,scale:Fe,sceneEqual:tC,sceneFromJSON:Fz,scenePickVisit:J0,sceneToJSON:Az,sceneVisit:Ci,sceneZOrder:N$,scheme:E$,serializeXML:qz,setRandom:ZX,span:Tp,splitAccessPath:yo,stringValue:G,textMetrics:bi,timeBin:x6,timeFloor:l6,timeFormatLocale:Yh,timeInterval:Ff,timeOffset:d6,timeSequence:g6,timeUnitSpecifier:t6,timeUnits:Q_,toBoolean:W_,toDate:q_,toNumber:un,toSet:ki,toString:H_,transform:V6,transforms:Uc,truncate:DP,truthy:Ur,tupleid:oe,typeParsers:Bw,utcFloor:c6,utcInterval:Tf,utcOffset:h6,utcSequence:m6,utcdayofyear:o6,utcquarter:_P,utcweek:s6,version:Qpe,visitArray:Ms,week:r6,writeConfig:kf,zero:zs,zoomLinear:L_,zoomLog:z_,zoomPow:M0,zoomSymlog:I_},Symbol.toStringTag,{value:"Module"}));function Jpe(e,t,n){let r;t.x2&&(t.x?(n&&e.x>e.x2&&(r=e.x,e.x=e.x2,e.x2=r),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(r=e.y,e.y=e.y2,e.y2=r),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var Zpe={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},ege={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},tge={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const nge=Array.prototype.slice,Za=(e,t,n)=>{const r=n?n(t[0]):t[0];return r[e].apply(r,nge.call(t,1))},rge=(e,t,n,r,i,o,s)=>new Date(e,t||0,n??1,r||0,i||0,o||0,s||0);var ige={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:rge,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return Za("join",arguments)},indexof:function(){return Za("indexOf",arguments)},lastindexof:function(){return Za("lastIndexOf",arguments)},slice:function(){return Za("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return Za("substring",arguments,String)},split:function(){return Za("split",arguments,String)},replace:function(){return Za("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const oge=["view","item","group","xy","x","y"],uS=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&uS.add(setImmediate);const sge={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:Zpe[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,r=e(t.object);n&&(e.memberDepth+=1);const i=e(t.property);if(n&&(e.memberDepth-=1),uS.has(r[i])){console.error(`Prevented interpretation of member "${i}" which could lead to insecure code execution`);return}return r[i]},CallExpression:(e,t)=>{const n=t.arguments;let r=t.callee.name;return r.startsWith("_")&&(r=r.slice(1)),r==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[r]||ige[r]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>ege[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>tge[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,r)=>{e.memberDepth+=1;const i=e(r.key);return e.memberDepth-=1,uS.has(e(r.value))?console.error(`Prevented interpretation of property "${i}" which could lead to insecure code execution`):n[i]=e(r.value),n},{})};function Ed(e,t,n,r,i,o){const s=a=>sge[a.type](s,a);return s.memberDepth=0,s.fn=Object.create(t),s.params=n,s.datum=r,s.event=i,s.item=o,oge.forEach(a=>s.fn[a]=function(){return i.vega[a](...arguments)}),s(e)}var age={operator(e,t){const n=t.ast,r=e.functions;return i=>Ed(n,r,i)},parameter(e,t){const n=t.ast,r=e.functions;return(i,o)=>Ed(n,r,o,i)},event(e,t){const n=t.ast,r=e.functions;return i=>Ed(n,r,void 0,void 0,i)},handler(e,t){const n=t.ast,r=e.functions;return(i,o)=>{const s=o.item&&o.item.datum;return Ed(n,r,i,s,o)}},encode(e,t){const{marktype:n,channels:r}=t,i=e.functions,o=n==="group"||n==="image"||n==="rect";return(s,a)=>{const u=s.datum;let l=0,c;for(const f in r)c=Ed(r[f].ast,i,a,u,void 0,s),s[f]!==c&&(s[f]=c,l=1);return n!=="rule"&&Jpe(s,r,o),l}}};const uge="vega-lite",lge='Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',cge="5.10.0",fge=["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],dge="https://vega.github.io/vega-lite/",hge="Vega-Lite is a concise high-level language for interactive visualization.",pge=["vega","chart","visualization"],gge="build/vega-lite.js",mge="build/vega-lite.min.js",yge="build/vega-lite.min.js",vge="build/src/index",xge="build/src/index.d.ts",bge={vl2pdf:"./bin/vl2pdf",vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2vg:"./bin/vl2vg"},wge=["bin","build","src","vega-lite*","tsconfig.json"],Ege={changelog:"conventional-changelog -p angular -r 2",prebuild:"yarn clean:build",build:"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.mjs","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"yarn clean:build && del-cli 'site/data/*' 'examples/compiled/*.png' && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","clean:build":"del-cli 'build/*' !build/vega-lite-schema.json",data:"rsync -r node_modules/vega-datasets/data/* site/data",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd",prettierbase:"prettier '**/*.{md,css,yml}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",jest:"NODE_OPTIONS=--experimental-vm-modules npx jest",test:"yarn jest test/ && yarn lint && yarn schema && yarn jest examples/ && yarn test:runtime","test:cover":"yarn jest --collectCoverage test/","test:inspect":"node --inspect-brk --experimental-vm-modules ./node_modules/.bin/jest --runInBand test","test:runtime":"NODE_OPTIONS=--experimental-vm-modules TZ=America/Los_Angeles npx jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime",watch:"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"yarn jest --watch test/","watch:test:runtime":"NODE_OPTIONS=--experimental-vm-modules TZ=America/Los_Angeles npx jest --watch test-runtime/ --config test-runtime/jest-config.json",release:"release-it"},Sge={type:"git",url:"https://github.com/vega/vega-lite.git"},_ge="BSD-3-Clause",kge={url:"https://github.com/vega/vega-lite/issues"},$ge={"@babel/core":"^7.21.8","@babel/plugin-proposal-class-properties":"^7.18.6","@babel/preset-env":"^7.21.5","@babel/preset-typescript":"^7.21.5","@release-it/conventional-changelog":"^5.1.1","@rollup/plugin-alias":"^5.0.0","@rollup/plugin-babel":"^6.0.3","@rollup/plugin-commonjs":"^25.0.0","@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.0.2","@rollup/plugin-terser":"^0.4.1","@types/chai":"^4.3.5","@types/d3":"^7.4.0","@types/jest":"^27.4.1","@types/pako":"^2.0.0","@typescript-eslint/eslint-plugin":"^5.59.5","@typescript-eslint/parser":"^5.59.5",ajv:"^8.12.0","ajv-formats":"^2.1.1",chai:"^4.3.7",cheerio:"^1.0.0-rc.12","conventional-changelog-cli":"^2.2.2",d3:"^7.8.4","del-cli":"^5.0.0",eslint:"^8.40.0","eslint-config-prettier":"^8.8.0","eslint-plugin-jest":"^27.2.1","eslint-plugin-prettier":"^4.2.1","highlight.js":"^11.8.0",jest:"^27.5.1","jest-dev-server":"^6.1.1",mkdirp:"^3.0.1",pako:"^2.1.0",prettier:"^2.8.8",puppeteer:"^15.0.0","release-it":"^15.10.3",rollup:"^3.21.6","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-sourcemaps":"^0.6.3",serve:"^14.2.0",terser:"^5.17.3","ts-jest":"^29.1.0","ts-json-schema-generator":"^1.2.0",typescript:"~4.9.5","vega-cli":"^5.25.0","vega-datasets":"^2.7.0","vega-embed":"^6.22.1","vega-tooltip":"^0.32.0","yaml-front-matter":"^4.1.1"},Cge={"@types/clone":"~2.1.1",clone:"~2.1.2","fast-deep-equal":"~3.1.3","fast-json-stable-stringify":"~2.1.0","json-stringify-pretty-compact":"~3.0.0",tslib:"~2.5.0","vega-event-selector":"~3.0.1","vega-expression":"~5.1.0","vega-util":"~1.17.2",yargs:"~17.7.2"},Age={vega:"^5.24.0"},Fge={node:">=16"},Tge={name:uge,author:lge,version:cge,collaborators:fge,homepage:dge,description:hge,keywords:pge,main:gge,unpkg:mge,jsdelivr:yge,module:vge,types:xge,bin:bge,files:wge,scripts:Ege,repository:Sge,license:_ge,bugs:kge,devDependencies:$ge,dependencies:Cge,peerDependencies:Age,engines:Fge};var hB={exports:{}};(function(e){var t=function(){function n(d,h){return h!=null&&d instanceof h}var r;try{r=Map}catch{r=function(){}}var i;try{i=Set}catch{i=function(){}}var o;try{o=Promise}catch{o=function(){}}function s(d,h,p,g,m){typeof h=="object"&&(p=h.depth,g=h.prototype,m=h.includeNonEnumerable,h=h.circular);var y=[],v=[],x=typeof Buffer<"u";typeof h>"u"&&(h=!0),typeof p>"u"&&(p=1/0);function b(w,S){if(w===null)return null;if(S===0)return w;var E,_;if(typeof w!="object")return w;if(n(w,r))E=new r;else if(n(w,i))E=new i;else if(n(w,o))E=new o(function(D,M){w.then(function(O){D(b(O,S-1))},function(O){M(b(O,S-1))})});else if(s.__isArray(w))E=[];else if(s.__isRegExp(w))E=new RegExp(w.source,f(w)),w.lastIndex&&(E.lastIndex=w.lastIndex);else if(s.__isDate(w))E=new Date(w.getTime());else{if(x&&Buffer.isBuffer(w))return Buffer.allocUnsafe?E=Buffer.allocUnsafe(w.length):E=new Buffer(w.length),w.copy(E),E;n(w,Error)?E=Object.create(w):typeof g>"u"?(_=Object.getPrototypeOf(w),E=Object.create(_)):(E=Object.create(g),_=g)}if(h){var $=y.indexOf(w);if($!=-1)return v[$];y.push(w),v.push(E)}n(w,r)&&w.forEach(function(D,M){var O=b(M,S-1),B=b(D,S-1);E.set(O,B)}),n(w,i)&&w.forEach(function(D){var M=b(D,S-1);E.add(M)});for(var k in w){var A;_&&(A=Object.getOwnPropertyDescriptor(_,k)),!(A&&A.set==null)&&(E[k]=b(w[k],S-1))}if(Object.getOwnPropertySymbols)for(var R=Object.getOwnPropertySymbols(w),k=0;k<R.length;k++){var C=R[k],T=Object.getOwnPropertyDescriptor(w,C);T&&!T.enumerable&&!m||(E[C]=b(w[C],S-1),T.enumerable||Object.defineProperty(E,C,{enumerable:!1}))}if(m)for(var F=Object.getOwnPropertyNames(w),k=0;k<F.length;k++){var N=F[k],T=Object.getOwnPropertyDescriptor(w,N);T&&T.enumerable||(E[N]=b(w[N],S-1),Object.defineProperty(E,N,{enumerable:!1}))}return E}return b(d,p)}s.clonePrototype=function(h){if(h===null)return null;var p=function(){};return p.prototype=h,new p};function a(d){return Object.prototype.toString.call(d)}s.__objToStr=a;function u(d){return typeof d=="object"&&a(d)==="[object Date]"}s.__isDate=u;function l(d){return typeof d=="object"&&a(d)==="[object Array]"}s.__isArray=l;function c(d){return typeof d=="object"&&a(d)==="[object RegExp]"}s.__isRegExp=c;function f(d){var h="";return d.global&&(h+="g"),d.ignoreCase&&(h+="i"),d.multiline&&(h+="m"),h}return s.__getRegExpFlags=f,s}();e.exports&&(e.exports=t)})(hB);var Mge=hB.exports;const Nge=xf(Mge);var Oge=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(o=Object.keys(t),r=o.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;i--!==0;){var s=o[i];if(!e(t[s],n[s]))return!1}return!0}return t!==t&&n!==n};const pB=xf(Oge);var Dge=function(e,t){t||(t={}),typeof t=="function"&&(t={cmp:t});var n=typeof t.cycles=="boolean"?t.cycles:!1,r=t.cmp&&function(o){return function(s){return function(a,u){var l={key:a,value:s[a]},c={key:u,value:s[u]};return o(l,c)}}}(t.cmp),i=[];return function o(s){if(s&&s.toJSON&&typeof s.toJSON=="function"&&(s=s.toJSON()),s!==void 0){if(typeof s=="number")return isFinite(s)?""+s:"null";if(typeof s!="object")return JSON.stringify(s);var a,u;if(Array.isArray(s)){for(u="[",a=0;a<s.length;a++)a&&(u+=","),u+=o(s[a])||"null";return u+"]"}if(s===null)return"null";if(i.indexOf(s)!==-1){if(n)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var l=i.push(s)-1,c=Object.keys(s).sort(r&&r(s));for(u="",a=0;a<c.length;a++){var f=c[a],d=o(s[f]);d&&(u&&(u+=","),u+=JSON.stringify(f)+":"+d)}return i.splice(l,1),"{"+u+"}"}}(e)};const CA=xf(Dge);function AA(e){return!!e.or}function FA(e){return!!e.and}function TA(e){return!!e.not}function r0(e,t){if(TA(e))r0(e.not,t);else if(FA(e))for(const n of e.and)r0(n,t);else if(AA(e))for(const n of e.or)r0(n,t);else t(e)}function _c(e,t){return TA(e)?{not:_c(e.not,t)}:FA(e)?{and:e.and.map(n=>_c(n,t))}:AA(e)?{or:e.or.map(n=>_c(n,t))}:t(e)}const Ki=pB,ce=Nge;function gB(e){throw new Error(e)}function of(e,t){const n={};for(const r of t)ae(e,r)&&(n[r]=e[r]);return n}function Jn(e,t){const n={...e};for(const r of t)delete n[r];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>CA(e)).join(",")})`};const He=CA;function be(e){if(ze(e))return e;const t=Q(e)?e:CA(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return n}function lS(e){return e===!1||e===null}function we(e,t){return e.includes(t)}function tl(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function MA(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function mB(e,...t){for(const n of t)Rge(e,n??{});return e}function Rge(e,t){for(const n of j(t))kf(e,n,t[n],!0)}function Ji(e,t){const n=[],r={};let i;for(const o of e)i=t(o),!(i in r)&&(r[i]=1,n.push(o));return n}function Pge(e,t){const n=j(e),r=j(t);if(n.length!==r.length)return!1;for(const i of n)if(e[i]!==t[i])return!1;return!0}function yB(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function NA(e,t){for(const n of e)if(t.has(n))return!0;return!1}function cS(e){const t=new Set;for(const n of e){const i=yo(n).map((s,a)=>a===0?s:`[${s}]`),o=i.map((s,a)=>i.slice(0,a+1).join(""));for(const s of o)t.add(s)}return t}function OA(e,t){return e===void 0||t===void 0?!0:NA(cS(e),cS(t))}function Be(e){return j(e).length===0}const j=Object.keys,Gt=Object.values,_a=Object.entries;function gp(e){return e===!0||e===!1}function Ze(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function _h(e,t){return TA(e)?`!(${_h(e.not,t)})`:FA(e)?`(${e.and.map(n=>_h(n,t)).join(") && (")})`:AA(e)?`(${e.or.map(n=>_h(n,t)).join(") || (")})`:t(e)}function G1(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&G1(e[n],t)&&delete e[n],Be(e)}function ag(e){return e.charAt(0).toUpperCase()+e.substr(1)}function DA(e,t="datum"){const n=yo(e),r=[];for(let i=1;i<=n.length;i++){const o=`[${n.slice(0,i).map(G).join("][")}]`;r.push(`${t}${o}`)}return r.join(" && ")}function vB(e,t="datum"){return`${t}[${G(yo(e).join("."))}]`}function Lge(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function Gr(e){return`${yo(e).map(Lge).join("\\.")}`}function nl(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function RA(e){return`${yo(e).join(".")}`}function sf(e){return e?yo(e).length:0}function ht(...e){for(const t of e)if(t!==void 0)return t}let xB=42;function bB(e){const t=++xB;return e?String(e)+t:t}function zge(){xB=42}function wB(e){return EB(e)?e:`__${e}`}function EB(e){return e.startsWith("__")}function mp(e){if(e!==void 0)return(e%360+360)%360}function jv(e){return ze(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const es="row",ts="column",Uv="facet",et="x",Dt="y",Oi="x2",So="y2",Ba="xOffset",If="yOffset",Di="radius",ys="radius2",Xr="theta",vs="theta2",Ri="latitude",Pi="longitude",Li="latitude2",Vr="longitude2",or="color",_o="fill",ko="stroke",sr="shape",xs="size",_l="angle",bs="opacity",ja="fillOpacity",Ua="strokeOpacity",Wa="strokeWidth",qa="strokeDash",ug="text",af="order",lg="detail",Wv="key",rl="tooltip",qv="href",Hv="url",Gv="description",Ige={x:1,y:1,x2:1,y2:1},SB={theta:1,theta2:1,radius:1,radius2:1};function _B(e){return e in SB}const PA={longitude:1,longitude2:1,latitude:1,latitude2:1};function kB(e){switch(e){case Ri:return"y";case Li:return"y2";case Pi:return"x";case Vr:return"x2"}}function $B(e){return e in PA}const Bge=j(PA),LA={...Ige,...SB,...PA,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function kc(e){return e===or||e===_o||e===ko}const CB={row:1,column:1,facet:1},Pr=j(CB),zA={...LA,...CB},jge=j(zA),{order:XSe,detail:QSe,tooltip:KSe,...Uge}=zA,{row:JSe,column:ZSe,facet:e_e,...Wge}=Uge;function qge(e){return!!Wge[e]}function AB(e){return!!zA[e]}const Hge=[Oi,So,Li,Vr,vs,ys];function FB(e){return kl(e)!==e}function kl(e){switch(e){case Oi:return et;case So:return Dt;case Li:return Ri;case Vr:return Pi;case vs:return Xr;case ys:return Di}return e}function ka(e){if(_B(e))switch(e){case Xr:return"startAngle";case vs:return"endAngle";case Di:return"outerRadius";case ys:return"innerRadius"}return e}function $o(e){switch(e){case et:return Oi;case Dt:return So;case Ri:return Li;case Pi:return Vr;case Xr:return vs;case Di:return ys}}function ar(e){switch(e){case et:case Oi:return"width";case Dt:case So:return"height"}}function TB(e){switch(e){case et:return"xOffset";case Dt:return"yOffset";case Oi:return"x2Offset";case So:return"y2Offset";case Xr:return"thetaOffset";case Di:return"radiusOffset";case vs:return"theta2Offset";case ys:return"radius2Offset"}}function IA(e){switch(e){case et:return"xOffset";case Dt:return"yOffset"}}function MB(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const Gge=j(LA),{x:t_e,y:n_e,x2:r_e,y2:i_e,xOffset:o_e,yOffset:s_e,latitude:a_e,longitude:u_e,latitude2:l_e,longitude2:c_e,theta:f_e,theta2:d_e,radius:h_e,radius2:p_e,...BA}=LA,Vge=j(BA),jA={x:1,y:1},Co=j(jA);function Rt(e){return e in jA}const UA={theta:1,radius:1},Yge=j(UA);function Vv(e){return e==="width"?et:Dt}const NB={xOffset:1,yOffset:1};function Bf(e){return e in NB}const{text:g_e,tooltip:m_e,href:y_e,url:v_e,description:x_e,detail:b_e,key:w_e,order:E_e,...OB}=BA,Xge=j(OB);function Qge(e){return!!BA[e]}function Kge(e){switch(e){case or:case _o:case ko:case xs:case sr:case bs:case Wa:case qa:return!0;case ja:case Ua:case _l:return!1}}const DB={...jA,...UA,...NB,...OB},Yv=j(DB);function ws(e){return!!DB[e]}function Jge(e,t){return eme(e)[t]}const RB={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:S_e,...Zge}=RB;function eme(e){switch(e){case or:case _o:case ko:case Gv:case lg:case Wv:case rl:case qv:case af:case bs:case ja:case Ua:case Wa:case Uv:case es:case ts:return RB;case et:case Dt:case Ba:case If:case Ri:case Pi:return Zge;case Oi:case So:case Li:case Vr:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case xs:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case qa:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case sr:return{point:"always",geoshape:"always"};case ug:return{text:"always"};case _l:return{point:"always",square:"always",text:"always"};case Hv:return{image:"always"};case Xr:return{text:"always",arc:"always"};case Di:return{text:"always",arc:"always"};case vs:case ys:return{arc:"always"}}}function ub(e){switch(e){case et:case Dt:case Xr:case Di:case Ba:case If:case xs:case _l:case Wa:case bs:case ja:case Ua:case Oi:case So:case vs:case ys:return;case Uv:case es:case ts:case sr:case qa:case ug:case rl:case qv:case Hv:case Gv:return"discrete";case or:case _o:case ko:return"flexible";case Ri:case Pi:case Li:case Vr:case lg:case Wv:case af:return}}const tme={argmax:1,argmin:1,average:1,count:1,distinct:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},nme={count:1,min:1,max:1};function ds(e){return!!e&&!!e.argmin}function Ha(e){return!!e&&!!e.argmax}function WA(e){return Q(e)&&!!tme[e]}const rme=new Set(["count","valid","missing","distinct"]);function PB(e){return Q(e)&&rme.has(e)}function ime(e){return Q(e)&&we(["min","max"],e)}const ome=new Set(["count","sum","distinct","valid","missing"]),sme=new Set(["mean","average","median","q1","q3","min","max"]);function LB(e){return Oa(e)&&(e=sx(e,void 0)),"bin"+j(e).map(t=>Xv(e[t])?Ze(`_${t}_${_a(e[t])}`):Ze(`_${t}_${e[t]}`)).join("")}function Ge(e){return e===!0||$l(e)&&!e.binned}function jt(e){return e==="binned"||$l(e)&&e.binned===!0}function $l(e){return J(e)}function Xv(e){return e==null?void 0:e.param}function oD(e){switch(e){case es:case ts:case xs:case or:case _o:case ko:case Wa:case bs:case ja:case Ua:case sr:return 6;case qa:return 4;default:return 10}}function jf(e){return!!(e!=null&&e.expr)}function Wn(e){const t=j(e||{}),n={};for(const r of t)n[r]=pr(e[r]);return n}function zB(e){const{anchor:t,frame:n,offset:r,orient:i,angle:o,limit:s,color:a,subtitleColor:u,subtitleFont:l,subtitleFontSize:c,subtitleFontStyle:f,subtitleFontWeight:d,subtitleLineHeight:h,subtitlePadding:p,...g}=e,m={...g,...a?{fill:a}:{}},y={...t?{anchor:t}:{},...n?{frame:n}:{},...r?{offset:r}:{},...i?{orient:i}:{},...o!==void 0?{angle:o}:{},...s!==void 0?{limit:s}:{}},v={...u?{subtitleColor:u}:{},...l?{subtitleFont:l}:{},...c?{subtitleFontSize:c}:{},...f?{subtitleFontStyle:f}:{},...d?{subtitleFontWeight:d}:{},...h?{subtitleLineHeight:h}:{},...p?{subtitlePadding:p}:{}},x=of(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:m,subtitleMarkConfig:x,nonMarkTitleProperties:y,subtitle:v}}function Rs(e){return Q(e)||I(e)&&Q(e[0])}function re(e){return!!(e!=null&&e.signal)}function Ga(e){return!!e.step}function ame(e){return I(e)?!1:"fields"in e&&!("data"in e)}function ume(e){return I(e)?!1:"fields"in e&&"data"in e}function Yo(e){return I(e)?!1:"field"in e&&"data"in e}const lme={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},cme=j(lme),fme={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},fS=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function IB(e){const t=I(e.condition)?e.condition.map(sD):sD(e.condition);return{...pr(e),condition:t}}function pr(e){if(jf(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function sD(e){if(jf(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function Xe(e){if(jf(e)){const{expr:t,...n}=e;return{signal:t,...n}}return re(e)?e:e!==void 0?{value:e}:void 0}function dme(e){return re(e)?e.signal:G(e)}function aD(e){return re(e)?e.signal:G(e.value)}function ns(e){return re(e)?e.signal:e==null?null:G(e)}function hme(e,t,n){for(const r of n){const i=il(r,t.markDef,t.config);i!==void 0&&(e[r]=Xe(i))}return e}function BB(e){return[].concat(e.type,e.style??[])}function Re(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:o}=r;return i&&t[i]!==void 0?t[i]:t[e]!==void 0?t[e]:o&&(!i||i===e)?void 0:il(e,t,n,r)}function il(e,t,n,{vgChannel:r}={}){return ht(r?V1(e,t,n.style):void 0,V1(e,t,n.style),r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function V1(e,t,n){return jB(e,BB(t),n)}function jB(e,t,n){t=K(t);let r;for(const i of t){const o=n[i];o&&o[e]!==void 0&&(r=o[e])}return r}function UB(e,t){return K(e).reduce((n,r)=>(n.field.push(Y(r,t)),n.order.push(r.sort??"ascending"),n),{field:[],order:[]})}function WB(e,t){const n=[...e];return t.forEach(r=>{for(const i of n)if(Ki(i,r))return;n.push(r)}),n}function qB(e,t){return Ki(e,t)||!t?e:e?[...K(e),...K(t)].join(", "):t}function HB(e,t){const n=e.value,r=t.value;if(n==null||r===null)return{explicit:e.explicit,value:null};if((Rs(n)||re(n))&&(Rs(r)||re(r)))return{explicit:e.explicit,value:qB(n,r)};if(Rs(n)||re(n))return{explicit:e.explicit,value:n};if(Rs(r)||re(r))return{explicit:e.explicit,value:r};if(!Rs(n)&&!re(n)&&!Rs(r)&&!re(r))return{explicit:e.explicit,value:WB(n,r)};throw new Error("It should never reach here")}function qA(e){return`Invalid specification ${He(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const pme='Autosize "fit" only works for single views and layered views.';function uD(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function lD(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function cD(e){return e?`Dropping "fit-${e}" because spec has discrete ${ar(e)}.`:'Dropping "fit" because spec has discrete size.'}function HA(e){return`Unknown field for ${e}. Cannot calculate view size.`}function fD(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function gme(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function mme(e){return`The "nearest" transform is not supported for ${e} marks.`}function GB(e){return`Selection not supported for ${e} yet.`}function yme(e){return`Cannot find a selection named "${e}".`}const vme="Scale bindings are currently only supported for scales with unbinned, continuous domains.",xme="Legend bindings are only supported for selections over an individual field or encoding channel.";function bme(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function wme(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const Eme="The same selection must be used to override scale domains in a layered view.",Sme='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function _me(e){return`Unknown repeated value "${e}".`}function dD(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const kme="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function $me(e){return`Unrecognized parse "${e}".`}function hD(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const Cme="Attempt to add the same child twice.";function Ame(e){return`Ignoring an invalid transform: ${He(e)}.`}const Fme='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function pD(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function Tme(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${He(t)} is overridden by a child projection ${He(n)}.`}const Mme="Arc marks uses theta channel rather than angle, replacing angle with theta.";function Nme(e){return`${e}Offset dropped because ${e} is continuous`}function Ome(e){return`There is no ${e} encoding. Replacing ${e}Offset encoding as ${e}.`}function Dme(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${He(n)}}.`}function VB(e){return`Invalid field type "${e}".`}function Rme(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function Pme(e){return`Invalid aggregation operator "${e}".`}function YB(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function Lme(e){return`Position range does not support relative band size for ${e}.`}function dS(e,t){return`Dropping ${He(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const zme="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function Qv(e,t,n){return`${e} dropped as it is incompatible with "${t}"${n?` when ${n}`:""}.`}function Ime(e){return`${e} encoding has no scale, so specified scale is ignored.`}function Bme(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function jme(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function Ume(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function Wme(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function lb(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function qme(e){return`The ${e} for range marks cannot be an expression`}function Hme(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function Gme(e,t){return`Specified orient "${e}" overridden with "${t}".`}function Vme(e){return`Cannot use the scale property "${e}" with non-color channel.`}function Yme(e){return`Cannot use the relative band size with ${e} scale.`}function Xme(e){return`Using unaggregated domain with raw field has no effect (${He(e)}).`}function Qme(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function Kme(e){return`Unaggregated domain is currently unsupported for log scale (${He(e)}).`}function Jme(e){return`Cannot apply size to non-oriented mark "${e}".`}function Zme(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function e0e(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function XB(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function QB(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function t0e(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${He(n)} and ${He(r)}). Using ${He(n)}.`}function n0e(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${He(n)} and ${He(r)}). Using the union of the two domains.`}function r0e(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function i0e(e){return`Dropping sort property ${He(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const gD="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",o0e="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",s0e="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",a0e="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function u0e(e){return`Cannot stack "${e}" if there is already "${e}2".`}function l0e(e){return`Cannot stack non-linear scale (${e}).`}function c0e(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function Y1(e,t){return`Invalid ${e}: ${He(t)}.`}function f0e(e){return`Dropping day from datetime ${He(e)} as day cannot be combined with other units.`}function d0e(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function h0e(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function p0e(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function mD(e){return`1D error band does not support ${e}.`}function KB(e){return`Channel ${e} is required for "binned" bin.`}function g0e(e){return`Channel ${e} should not be used with "binned" bin.`}function m0e(e){return`Domain for ${e} is required for threshold scale.`}globalThis&&globalThis.__classPrivateFieldSet;globalThis&&globalThis.__classPrivateFieldGet;const JB=P_(R_);let uf=JB;function y0e(e){return uf=e,uf}function v0e(){return uf=JB,uf}function U(...e){uf.warn(...e)}function x0e(...e){uf.debug(...e)}function Cl(e){if(e&&J(e)){for(const t of VA)if(t in e)return!0}return!1}const ZB=["january","february","march","april","may","june","july","august","september","october","november","december"],b0e=ZB.map(e=>e.substr(0,3)),ej=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],w0e=ej.map(e=>e.substr(0,3));function E0e(e){if(jv(e)&&(e=+e),ze(e))return e>4&&U(Y1("quarter",e)),e-1;throw new Error(Y1("quarter",e))}function S0e(e){if(jv(e)&&(e=+e),ze(e))return e-1;{const t=e.toLowerCase(),n=ZB.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=b0e.indexOf(r);if(i!==-1)return i;throw new Error(Y1("month",e))}}function _0e(e){if(jv(e)&&(e=+e),ze(e))return e%7;{const t=e.toLowerCase(),n=ej.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=w0e.indexOf(r);if(i!==-1)return i;throw new Error(Y1("day",e))}}function GA(e,t){const n=[];if(t&&e.day!==void 0&&j(e).length>1&&(U(f0e(e)),e=ce(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const r=t?S0e(e.month):e.month;n.push(r)}else if(e.quarter!==void 0){const r=t?E0e(e.quarter):e.quarter;n.push(ze(r)?r*3:`${r}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const r=t?_0e(e.day):e.day;n.push(ze(r)?r+1:`${r}+1`)}else n.push(1);for(const r of["hours","minutes","seconds","milliseconds"]){const i=e[r];n.push(typeof i>"u"?0:i)}return n}function ol(e){const n=GA(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function k0e(e){const n=GA(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function $0e(e){const t=GA(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const tj={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},VA=j(tj);function C0e(e){return!!tj[e]}function YA(e){return e.startsWith("utc")}function A0e(e){return e.substr(3)}const F0e={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function Kv(e){return VA.filter(t=>nj(e,t))}function T0e(e){const t=Kv(e);return t[t.length-1]}function nj(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function M0e(e,t,{end:n}={end:!1}){const r=DA(t),i=YA(e)?"utc":"";function o(u){return u==="quarter"?`(${i}quarter(${r})-1)`:`${i}${u}(${r})`}let s;const a={};for(const u of VA)nj(e,u)&&(a[u]=o(u),s=u);return n&&(a[s]+="+1"),k0e(a)}function rj(e){if(!e)return;const t=Kv(e);return`timeUnitSpecifier(${He(t)}, ${He(F0e)})`}function N0e(e,t,n){if(!e)return;const r=rj(e);return`${n||YA(e)?"utc":"time"}Format(${t}, ${r})`}function Xt(e){if(!e)return;let t;return Q(e)?t={unit:e}:J(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),YA(t.unit)&&(t.utc=!0,t.unit=A0e(t.unit)),t}function O0e(e){const{utc:t,...n}=Xt(e);return n.unit?(t?"utc":"")+j(n).map(r=>Ze(`${r==="unit"?"":`_${r}_`}${n[r]}`)).join(""):(t?"utc":"")+"timeunit"+j(n).map(r=>Ze(`_${r}_${n[r]}`)).join("")}function ij(e,t=n=>n){const n=Xt(e),r=T0e(n.unit);if(r&&r!=="day"){const i={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},o=n.step||1,s={...i,...r==="quarter"?{month:+i.month+o*3}:r==="week"?{date:+i.date+o*7}:{[r]:+i[r]+o}};return`${t(ol(s))} - ${t(ol(i))}`}}function D0e(e){return e==null?void 0:e.param}function XA(e){return!!(e!=null&&e.field)&&e.equal!==void 0}function QA(e){return!!(e!=null&&e.field)&&e.lt!==void 0}function KA(e){return!!(e!=null&&e.field)&&e.lte!==void 0}function JA(e){return!!(e!=null&&e.field)&&e.gt!==void 0}function ZA(e){return!!(e!=null&&e.field)&&e.gte!==void 0}function e3(e){if(e!=null&&e.field){if(I(e.range)&&e.range.length===2)return!0;if(re(e.range))return!0}return!1}function t3(e){return!!(e!=null&&e.field)&&(I(e.oneOf)||I(e.in))}function R0e(e){return!!(e!=null&&e.field)&&e.valid!==void 0}function oj(e){return t3(e)||XA(e)||e3(e)||QA(e)||JA(e)||KA(e)||ZA(e)}function ji(e,t){return ax(e,{timeUnit:t,wrapTime:!0})}function P0e(e,t){return e.map(n=>ji(n,t))}function sj(e,t=!0){var o;const{field:n}=e,r=(o=Xt(e.timeUnit))==null?void 0:o.unit,i=r?`time(${M0e(r,n)})`:Y(e,{expr:"datum"});if(XA(e))return`${i}===${ji(e.equal,r)}`;if(QA(e)){const s=e.lt;return`${i}<${ji(s,r)}`}else if(JA(e)){const s=e.gt;return`${i}>${ji(s,r)}`}else if(KA(e)){const s=e.lte;return`${i}<=${ji(s,r)}`}else if(ZA(e)){const s=e.gte;return`${i}>=${ji(s,r)}`}else{if(t3(e))return`indexof([${P0e(e.oneOf,r).join(",")}], ${i}) !== -1`;if(R0e(e))return n3(i,e.valid);if(e3(e)){const{range:s}=e,a=re(s)?{signal:`${s.signal}[0]`}:s[0],u=re(s)?{signal:`${s.signal}[1]`}:s[1];if(a!==null&&u!==null&&t)return"inrange("+i+", ["+ji(a,r)+", "+ji(u,r)+"])";const l=[];return a!==null&&l.push(`${i} >= ${ji(a,r)}`),u!==null&&l.push(`${i} <= ${ji(u,r)}`),l.length>0?l.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${He(e)}`)}function n3(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function L0e(e){var t;return oj(e)&&e.timeUnit?{...e,timeUnit:(t=Xt(e.timeUnit))==null?void 0:t.unit}:e}const cg={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function z0e(e){return e==="quantitative"||e==="temporal"}function aj(e){return e==="ordinal"||e==="nominal"}const sl=cg.quantitative,r3=cg.ordinal,lf=cg.temporal,i3=cg.nominal,Uf=cg.geojson;function I0e(e){if(e)switch(e=e.toLowerCase(),e){case"q":case sl:return"quantitative";case"t":case lf:return"temporal";case"o":case r3:return"ordinal";case"n":case i3:return"nominal";case Uf:return"geojson"}}const Zn={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},hS={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function B0e(e,t){const n=hS[e],r=hS[t];return n===r||n==="ordinal-position"&&r==="time"||r==="ordinal-position"&&n==="time"}const j0e={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function yD(e){return j0e[e]}const uj=new Set(["linear","log","pow","sqrt","symlog"]),lj=new Set([...uj,"time","utc"]);function cj(e){return uj.has(e)}const fj=new Set(["quantile","quantize","threshold"]),U0e=new Set([...lj,...fj,"sequential","identity"]),W0e=new Set(["ordinal","bin-ordinal","point","band"]);function Pt(e){return W0e.has(e)}function kr(e){return U0e.has(e)}function mi(e){return lj.has(e)}function cf(e){return fj.has(e)}const q0e={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0};function H0e(e){return!Q(e)&&!!e.name}function dj(e){return e==null?void 0:e.param}function G0e(e){return e==null?void 0:e.unionWith}function V0e(e){return J(e)&&"field"in e}const Y0e={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:__e,domain:k_e,range:$_e,rangeMax:C_e,rangeMin:A_e,scheme:F_e,...X0e}=Y0e,Q0e=j(X0e);function pS(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return mi(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return mi(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"clamp":return mi(e);case"nice":return mi(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return kr(e)&&!we(["log","time","utc","threshold","quantile"],e)}}function hj(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return kc(e)?void 0:Vme(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function K0e(e,t){return we([r3,i3],t)?e===void 0||Pt(e):t===lf?we([Zn.TIME,Zn.UTC,void 0],e):t===sl?cj(e)||cf(e)||e===void 0:!0}function J0e(e,t,n=!1){if(!ws(e))return!1;switch(e){case et:case Dt:case Ba:case If:case Xr:case Di:return mi(t)||t==="band"?!0:t==="point"?!n:!1;case xs:case Wa:case bs:case ja:case Ua:case _l:return mi(t)||cf(t)||we(["band","point","ordinal"],t);case or:case _o:case ko:return t!=="band";case qa:case sr:return t==="ordinal"||cf(t)}}const zn={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},pj=zn.arc,Jv=zn.area,Zv=zn.bar,Z0e=zn.image,ex=zn.line,tx=zn.point,e1e=zn.rect,X1=zn.rule,gj=zn.text,o3=zn.tick,t1e=zn.trail,s3=zn.circle,a3=zn.square,mj=zn.geoshape;function Va(e){return["line","area","trail"].includes(e)}function yj(e){return["rect","bar","image","arc"].includes(e)}const n1e=new Set(j(zn));function po(e){return e.type}const r1e=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],i1e=["fill","fillOpacity"],o1e=[...r1e,...i1e],s1e={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},vD=j(s1e),a1e={area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize"],line:["point"],tick:["bandSize","thickness"]},u1e={color:"#4c78a8",invalid:"filter",timeUnitBandSize:1},l1e={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},vj=j(l1e);function al(e){return e&&e.band!=null}const c1e={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},xj=5,f1e={binSpacing:1,continuousBandSize:xj,timeUnitBandPosition:.5},d1e={binSpacing:0,continuousBandSize:xj,timeUnitBandPosition:.5},h1e={thickness:1};function p1e(e){return po(e)?e.type:e}function u3(e){const{channel:t,channelDef:n,markDef:r,scale:i,config:o}=e,s=c3(e);return W(n)&&!PB(n.aggregate)&&i&&mi(i.get("type"))?g1e({fieldDef:n,channel:t,markDef:r,ref:s,config:o}):s}function g1e({fieldDef:e,channel:t,markDef:n,ref:r,config:i}){return Va(n.type)?r:Re("invalid",n,i)===null?[m1e(e,t),r]:r}function m1e(e,t){const n=l3(e,!0),i=kl(t)==="y"?{field:{group:"height"}}:{value:0};return{test:n,...i}}function l3(e,t=!0){return n3(Q(e)?e:Y(e,{expr:"datum"}),!t)}function y1e(e){const{datum:t}=e;return Cl(t)?ol(t):`${He(t)}`}function Ru(e,t,n,r){const i={};if(t&&(i.scale=t),Ao(e)){const{datum:o}=e;Cl(o)?i.signal=ol(o):re(o)?i.signal=o.signal:jf(o)?i.signal=o.expr:i.value=o}else i.field=Y(e,n);if(r){const{offset:o,band:s}=r;o&&(i.offset=o),s&&(i.band=s)}return i}function Q1({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,bandPosition:o=.5}){const s=0<o&&o<1?"datum":void 0,a=Y(t,{expr:s,suffix:i}),u=n!==void 0?Y(n,{expr:s}):Y(t,{suffix:"end",expr:s}),l={};if(o===0||o===1){l.scale=e;const c=o===0?a:u;l.field=c}else{const c=re(o)?`${o.signal} * ${a} + (1-${o.signal}) * ${u}`:`${o} * ${a} + ${1-o} * ${u}`;l.signal=`scale("${e}", ${c})`}return r&&(l.offset=r),l}function c3({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:o,scale:s,stack:a,offset:u,defaultRef:l,bandPosition:c}){if(t){if(fe(t)){const f=s==null?void 0:s.get("type");if(Dn(t)){c??(c=Cj({fieldDef:t,fieldDef2:n,markDef:r,config:i}));const{bin:d,timeUnit:h,type:p}=t;if(Ge(d)||c&&h&&p===lf)return a!=null&&a.impute?Ru(t,o,{binSuffix:"mid"},{offset:u}):c&&!Pt(f)?Q1({scaleName:o,fieldOrDatumDef:t,bandPosition:c,offset:u}):Ru(t,o,pg(t,e)?{binSuffix:"range"}:{},{offset:u});if(jt(d)){if(W(n))return Q1({scaleName:o,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:c,offset:u});U(KB(e===et?Oi:So))}}return Ru(t,o,Pt(f)?{binSuffix:"range"}:{},{offset:u,band:f==="band"?c??t.bandPosition??.5:void 0})}else if(Ai(t)){const f=t.value,d=u?{offset:u}:{};return{...kh(e,f),...d}}}return pe(l)&&(l=l()),l&&{...l,...u?{offset:u}:{}}}function kh(e,t){return we(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:we(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:Xe(t)}function ul(e){return e&&e!=="number"&&e!=="time"}function bj(e,t,n){return`${e}(${t}${n?`, ${He(n)}`:""})`}const v1e=" – ";function f3({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:o}){var u,l;if(ul(n))return yi({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:o});const s=wj(e,r,i),a=ff(e);if(t===void 0&&n===void 0&&o.customFormatTypes){if(a==="quantitative"){if(i&&o.normalizedNumberFormatType)return yi({fieldOrDatumDef:e,format:o.normalizedNumberFormat,formatType:o.normalizedNumberFormatType,expr:r,config:o});if(o.numberFormatType)return yi({fieldOrDatumDef:e,format:o.numberFormat,formatType:o.numberFormatType,expr:r,config:o})}if(a==="temporal"&&o.timeFormatType&&W(e)&&e.timeUnit===void 0)return yi({fieldOrDatumDef:e,format:o.timeFormat,formatType:o.timeFormatType,expr:r,config:o})}if(hf(e)){const c=b1e({field:s,timeUnit:W(e)?(u=Xt(e.timeUnit))==null?void 0:u.unit:void 0,format:t,formatType:o.timeFormatType,rawTimeFormat:o.timeFormat,isUTCScale:Al(e)&&((l=e.scale)==null?void 0:l.type)===Zn.UTC});return c?{signal:c}:void 0}if(t=gS({type:a,specifiedFormat:t,config:o,normalizeStack:i}),W(e)&&Ge(e.bin)){const c=Y(e,{expr:r,binSuffix:"end"});return{signal:fg(s,c,t,n,o)}}else return t||ff(e)==="quantitative"?{signal:`${_j(s,t)}`}:{signal:`isValid(${s}) ? ${s} : ""+${s}`}}function wj(e,t,n){return W(e)?n?`${Y(e,{expr:t,suffix:"end"})}-${Y(e,{expr:t,suffix:"start"})}`:Y(e,{expr:t}):y1e(e)}function yi({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:o,field:s}){if(s??(s=wj(e,r,i)),s!=="datum.value"&&W(e)&&Ge(e.bin)){const a=Y(e,{expr:r,binSuffix:"end"});return{signal:fg(s,a,t,n,o)}}return{signal:bj(n,s,t)}}function Ej(e,t,n,r,i,o){var s;if(!(Q(r)&&ul(r))&&!(n===void 0&&r===void 0&&i.customFormatTypes&&ff(e)==="quantitative"&&(i.normalizedNumberFormatType&&df(e)&&e.stack==="normalize"||i.numberFormatType))){if(df(e)&&e.stack==="normalize"&&i.normalizedNumberFormat)return gS({type:"quantitative",config:i,normalizeStack:!0});if(hf(e)){const a=W(e)?(s=Xt(e.timeUnit))==null?void 0:s.unit:void 0;return a===void 0&&i.customFormatTypes&&i.timeFormatType?void 0:x1e({specifiedFormat:n,timeUnit:a,config:i,omitTimeFormatConfig:o})}return gS({type:t,specifiedFormat:n,config:i})}}function Sj(e,t,n){var r;if(e&&(re(e)||e==="number"||e==="time"))return e;if(hf(t)&&n!=="time"&&n!=="utc")return W(t)&&((r=Xt(t==null?void 0:t.timeUnit))!=null&&r.utc)?"utc":"time"}function gS({type:e,specifiedFormat:t,config:n,normalizeStack:r}){if(Q(t))return t;if(e===sl)return r?n.normalizedNumberFormat:n.numberFormat}function x1e({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:r}){return e||(t?{signal:rj(t)}:r?void 0:n.timeFormat)}function _j(e,t){return`format(${e}, "${t||""}")`}function xD(e,t,n,r){return ul(n)?bj(n,e,t):_j(e,(Q(t)?t:void 0)??r.numberFormat)}function fg(e,t,n,r,i){if(n===void 0&&r===void 0&&i.customFormatTypes&&i.numberFormatType)return fg(e,t,i.numberFormat,i.numberFormatType,i);const o=xD(e,n,r,i),s=xD(t,n,r,i);return`${n3(e,!1)} ? "null" : ${o} + "${v1e}" + ${s}`}function b1e({field:e,timeUnit:t,format:n,formatType:r,rawTimeFormat:i,isUTCScale:o}){return!t||n?!t&&r?`${r}(${e}, '${n}')`:(n=Q(n)?n:i,`${o?"utc":"time"}Format(${e}, '${n}')`):N0e(t,e,o)}const nx="min",w1e={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function bD(e){return e in w1e}function kj(e){return!!(e!=null&&e.encoding)}function io(e){return e&&(e.op==="count"||!!e.field)}function $j(e){return e&&I(e)}function dg(e){return"row"in e||"column"in e}function d3(e){return!!e&&"header"in e}function rx(e){return"facet"in e}function E1e(e){return e.param}function S1e(e){return e&&!Q(e)&&"repeat"in e}function wD(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return{...n?{timeUnit:n}:{},...r?{bin:r}:{},...i?{aggregate:i}:{},field:t}}function h3(e){return"sort"in e}function Cj({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(fe(e)&&e.bandPosition!==void 0)return e.bandPosition;if(W(e)){const{timeUnit:i,bin:o}=e;if(i&&!t)return yj(n.type)?0:il("timeUnitBandPosition",n,r);if(Ge(o))return .5}}function Aj({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:o,useVlSizeChannel:s}){var l,c,f;const a=ar(e),u=Re(s?"size":a,r,i,{vgChannel:a});if(u!==void 0)return u;if(W(t)){const{timeUnit:d,bin:h}=t;if(d&&!n)return{band:il("timeUnitBandSize",r,i)};if(Ge(h)&&!Pt(o))return{band:1}}if(yj(r.type))return o?Pt(o)?((l=i[r.type])==null?void 0:l.discreteBandSize)||{band:1}:(c=i[r.type])==null?void 0:c.continuousBandSize:(f=i[r.type])==null?void 0:f.discreteBandSize}function Fj(e,t,n,r){return Ge(e.bin)||e.timeUnit&&Dn(e)&&e.type==="temporal"?Cj({fieldDef:e,fieldDef2:t,markDef:n,config:r})!==void 0:!1}function Tj(e){return e&&!!e.sort&&!e.field}function ix(e){return e&&"condition"in e}function ox(e){const t=e==null?void 0:e.condition;return!!t&&!I(t)&&W(t)}function hg(e){const t=e==null?void 0:e.condition;return!!t&&!I(t)&&fe(t)}function _1e(e){const t=e==null?void 0:e.condition;return!!t&&(I(t)||Ai(t))}function W(e){return e&&(!!e.field||e.aggregate==="count")}function ff(e){return e==null?void 0:e.type}function Ao(e){return e&&"datum"in e}function Qs(e){return Dn(e)&&!J1(e)||K1(e)}function ED(e){return Dn(e)&&e.type==="quantitative"&&!e.bin||K1(e)}function K1(e){return Ao(e)&&ze(e.datum)}function fe(e){return W(e)||Ao(e)}function Dn(e){return e&&("field"in e||e.aggregate==="count")&&"type"in e}function Ai(e){return e&&"value"in e&&"value"in e}function Al(e){return e&&("scale"in e||"sort"in e)}function df(e){return e&&("axis"in e||"stack"in e||"impute"in e)}function Mj(e){return e&&"legend"in e}function Nj(e){return e&&("format"in e||"formatType"in e)}function k1e(e){return Jn(e,["legend","axis","header","scale"])}function $1e(e){return"op"in e}function Y(e,t={}){let n=e.field;const r=t.prefix;let i=t.suffix,o="";if(A1e(e))n=wB("count");else{let s;if(!t.nofn)if($1e(e))s=e.op;else{const{bin:a,aggregate:u,timeUnit:l}=e;Ge(a)?(s=LB(a),i=(t.binSuffix??"")+(t.suffix??"")):u?Ha(u)?(o=`["${n}"]`,n=`argmax_${u.argmax}`):ds(u)?(o=`["${n}"]`,n=`argmin_${u.argmin}`):s=String(u):l&&(s=O0e(l),i=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}s&&(n=n?`${s}_${n}`:s)}return i&&(n=`${n}_${i}`),r&&(n=`${r}_${n}`),t.forAs?RA(n):t.expr?vB(n,t.expr)+o:Gr(n)+o}function J1(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return W(e)&&!!e.bin;case"temporal":return!1}throw new Error(VB(e.type))}function C1e(e){var t;return Al(e)&&cf((t=e.scale)==null?void 0:t.type)}function A1e(e){return e.aggregate==="count"}function F1e(e,t){var s;const{field:n,bin:r,timeUnit:i,aggregate:o}=e;if(o==="count")return t.countTitle;if(Ge(r))return`${n} (binned)`;if(i){const a=(s=Xt(i))==null?void 0:s.unit;if(a)return`${n} (${Kv(a).join("-")})`}else if(o)return Ha(o)?`${n} for max ${o.argmax}`:ds(o)?`${n} for min ${o.argmin}`:`${ag(o)} of ${n}`;return n}function T1e(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(Ha(t))return`${i} for argmax(${t.argmax})`;if(ds(t))return`${i} for argmin(${t.argmin})`;const o=Xt(r),s=t||(o==null?void 0:o.unit)||(o==null?void 0:o.maxbins)&&"timeunit"||Ge(n)&&"bin";return s?`${s.toUpperCase()}(${i})`:i}const Oj=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return T1e(e);default:return F1e(e,t)}};let Dj=Oj;function Rj(e){Dj=e}function M1e(){Rj(Oj)}function $c(e,t,{allowDisabling:n,includeDefault:r=!0}){var a;const i=(a=p3(e))==null?void 0:a.title;if(!W(e))return i??e.title;const o=e,s=r?g3(o,t):void 0;return n?ht(i,o.title,s):i??o.title??s}function p3(e){if(df(e)&&e.axis)return e.axis;if(Mj(e)&&e.legend)return e.legend;if(d3(e)&&e.header)return e.header}function g3(e,t){return Dj(e,t)}function Z1(e){if(Nj(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=p3(e)??{},{format:n,formatType:r}=t;return{format:n,formatType:r}}}function N1e(e,t){var o;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(h3(e)&&I(e.sort))return"ordinal";const{aggregate:n,bin:r,timeUnit:i}=e;if(i)return"temporal";if(r||n&&!Ha(n)&&!ds(n))return"quantitative";if(Al(e)&&((o=e.scale)!=null&&o.type))switch(hS[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function go(e){if(W(e))return e;if(ox(e))return e.condition}function wt(e){if(fe(e))return e;if(hg(e))return e.condition}function Pj(e,t,n,r={}){if(Q(e)||ze(e)||Oa(e)){const i=Q(e)?"string":ze(e)?"number":"boolean";return U(Dme(t,i,e)),{value:e}}return fe(e)?ey(e,t,n,r):hg(e)?{...e,condition:ey(e.condition,t,n,r)}:e}function ey(e,t,n,r){if(Nj(e)){const{format:i,formatType:o,...s}=e;if(ul(o)&&!n.customFormatTypes)return U(pD(t)),ey(s,t,n,r)}else{const i=df(e)?"axis":Mj(e)?"legend":d3(e)?"header":null;if(i&&e[i]){const{format:o,formatType:s,...a}=e[i];if(ul(s)&&!n.customFormatTypes)return U(pD(t)),ey({...e,[i]:a},t,n,r)}}return W(e)?m3(e,t,r):O1e(e)}function O1e(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=ze(n)?"quantitative":Q(n)?"nominal":Cl(n)?"temporal":void 0,{...e,type:t}}function m3(e,t,{compositeMark:n=!1}={}){const{aggregate:r,timeUnit:i,bin:o,field:s}=e,a={...e};if(!n&&r&&!WA(r)&&!Ha(r)&&!ds(r)&&(U(Pme(r)),delete a.aggregate),i&&(a.timeUnit=Xt(i)),s&&(a.field=`${s}`),Ge(o)&&(a.bin=sx(o,t)),jt(o)&&!Rt(t)&&U(g0e(t)),Dn(a)){const{type:u}=a,l=I0e(u);u!==l&&(a.type=l),u!=="quantitative"&&PB(r)&&(U(Rme(u,r)),a.type="quantitative")}else if(!FB(t)){const u=N1e(a,t);a.type=u}if(Dn(a)){const{compatible:u,warning:l}=D1e(a,t)||{};u===!1&&U(l)}if(h3(a)&&Q(a.sort)){const{sort:u}=a;if(bD(u))return{...a,sort:{encoding:u}};const l=u.substr(1);if(u.charAt(0)==="-"&&bD(l))return{...a,sort:{encoding:l,order:"descending"}}}if(d3(a)){const{header:u}=a;if(u){const{orient:l,...c}=u;if(l)return{...a,header:{...c,labelOrient:u.labelOrient||l,titleOrient:u.titleOrient||l}}}}return a}function sx(e,t){return Oa(e)?{maxbins:oD(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:oD(t)}:e}const jl={compatible:!0};function D1e(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case es:case ts:case Uv:return J1(e)?jl:{compatible:!1,warning:jme(t)};case et:case Dt:case Ba:case If:case or:case _o:case ko:case ug:case lg:case Wv:case rl:case qv:case Hv:case _l:case Xr:case Di:case Gv:return jl;case Pi:case Vr:case Ri:case Li:return n!==sl?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:jl;case bs:case ja:case Ua:case Wa:case xs:case vs:case ys:case Oi:case So:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:jl;case sr:case qa:return!J1(e)&&!C1e(e)?{compatible:!1,warning:Ume(t)}:jl;case af:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:jl}}function hf(e){const{formatType:t}=Z1(e);return t==="time"||!t&&R1e(e)}function R1e(e){return e&&(e.type==="temporal"||W(e)&&!!e.timeUnit)}function ax(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){var u;const o=t&&((u=Xt(t))==null?void 0:u.unit);let s=o||n==="temporal",a;return jf(e)?a=e.expr:re(e)?a=e.signal:Cl(e)?(s=!0,a=ol(e)):(Q(e)||ze(e))&&s&&(a=`datetime(${He(e)})`,C0e(o)&&(ze(e)&&e<1e4||Q(e)&&isNaN(Date.parse(e)))&&(a=ol({[o]:e}))),a?r&&s?`time(${a})`:a:i?void 0:He(e)}function Lj(e,t){const{type:n}=e;return t.map(r=>{const i=ax(r,{timeUnit:W(e)?e.timeUnit:void 0,type:n,undefinedIfExprNotRequired:!0});return i!==void 0?{signal:i}:r})}function pg(e,t){return Ge(e.bin)?ws(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const SD={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function gg(e){return e==null?void 0:e.condition}const zj=["domain","grid","labels","ticks","title"],P1e={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},Ij={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},L1e={...Ij,style:1,labelExpr:1,encoding:1};function _D(e){return!!L1e[e]}const z1e={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},Bj=j(z1e);function Es(e){return"mark"in e}class ux{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return Es(t)?p1e(t.mark)===this.name:!1}}function Pu(e,t){const n=e&&e[t];return n?I(n)?tl(n,r=>!!r.field):W(n)||ox(n):!1}function jj(e,t){const n=e&&e[t];return n?I(n)?tl(n,r=>!!r.field):W(n)||Ao(n)||hg(n):!1}function mS(e,t){if(Rt(t)){const n=e[t];if((W(n)||Ao(n))&&(aj(n.type)||W(n)&&n.timeUnit)){const r=IA(t);return jj(e,r)}}return!1}function y3(e){return tl(jge,t=>{if(Pu(e,t)){const n=e[t];if(I(n))return tl(n,r=>!!r.aggregate);{const r=go(n);return r&&!!r.aggregate}}return!1})}function Uj(e,t){const n=[],r=[],i=[],o=[],s={};return v3(e,(a,u)=>{if(W(a)){const{field:l,aggregate:c,bin:f,timeUnit:d,...h}=a;if(c||d||f){const p=p3(a),g=p==null?void 0:p.title;let m=Y(a,{forAs:!0});const y={...g?[]:{title:$c(a,t,{allowDisabling:!0})},...h,field:m};if(c){let v;if(Ha(c)?(v="argmax",m=Y({op:"argmax",field:c.argmax},{forAs:!0}),y.field=`${m}.${l}`):ds(c)?(v="argmin",m=Y({op:"argmin",field:c.argmin},{forAs:!0}),y.field=`${m}.${l}`):c!=="boxplot"&&c!=="errorbar"&&c!=="errorband"&&(v=c),v){const x={op:v,as:m};l&&(x.field=l),o.push(x)}}else if(n.push(m),Dn(a)&&Ge(f)){if(r.push({bin:f,field:l,as:m}),n.push(Y(a,{binSuffix:"end"})),pg(a,u)&&n.push(Y(a,{binSuffix:"range"})),Rt(u)){const v={field:`${m}_end`};s[`${u}2`]=v}y.bin="binned",FB(u)||(y.type=sl)}else if(d){i.push({timeUnit:d,field:l,as:m});const v=Dn(a)&&a.type!==lf&&"time";v&&(u===ug||u===rl?y.formatType=v:Qge(u)?y.legend={formatType:v,...y.legend}:Rt(u)&&(y.axis={formatType:v,...y.axis}))}s[u]=y}else n.push(l),s[u]=e[u]}else s[u]=e[u]}),{bins:r,timeUnits:i,aggregate:o,groupby:n,encoding:s}}function I1e(e,t,n){const r=Jge(t,n);if(r){if(r==="binned"){const i=e[t===Oi?et:Dt];return!!(W(i)&&W(e[t])&&jt(i.bin))}}else return!1;return!0}function B1e(e,t,n,r){const i={};for(const o of j(e))AB(o)||U(Bme(o));for(let o of Gge){if(!e[o])continue;const s=e[o];if(Bf(o)){const a=MB(o),u=i[a];if(W(u)){if(z0e(u.type)&&W(s)&&!u.timeUnit){U(Nme(a));continue}}else o=a,U(Ome(a))}if(o==="angle"&&t==="arc"&&!e.theta&&(U(Mme),o=Xr),!I1e(e,o,t)){U(Qv(o,t));continue}if(o===xs&&t==="line"){const a=go(e[o]);if(a!=null&&a.aggregate){U(zme);continue}}if(o===or&&(n?"fill"in e:"stroke"in e)){U(YB("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(o===lg||o===af&&!I(s)&&!Ai(s)||o===rl&&I(s)){if(s){if(o===af){const a=e[o];if(Tj(a)){i[o]=a;continue}}i[o]=K(s).reduce((a,u)=>(W(u)?a.push(m3(u,o)):U(dS(u,o)),a),[])}}else{if(o===rl&&s===null)i[o]=null;else if(!W(s)&&!Ao(s)&&!Ai(s)&&!ix(s)&&!re(s)){U(dS(s,o));continue}i[o]=Pj(s,o,r)}}return i}function lx(e,t){const n={};for(const r of j(e)){const i=Pj(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function j1e(e){const t=[];for(const n of j(e))if(Pu(e,n)){const r=e[n],i=K(r);for(const o of i)W(o)?t.push(o):ox(o)&&t.push(o.condition)}return t}function v3(e,t,n){if(e)for(const r of j(e)){const i=e[r];if(I(i))for(const o of i)t.call(n,o,r);else t.call(n,i,r)}}function U1e(e,t,n,r){return e?j(e).reduce((i,o)=>{const s=e[o];return I(s)?s.reduce((a,u)=>t.call(r,a,u,o),i):t.call(r,i,s,o)},n):n}function Wj(e,t){return j(t).reduce((n,r)=>{switch(r){case et:case Dt:case qv:case Gv:case Hv:case Oi:case So:case Ba:case If:case Xr:case vs:case Di:case ys:case Ri:case Pi:case Li:case Vr:case ug:case sr:case _l:case rl:return n;case af:if(e==="line"||e==="trail")return n;case lg:case Wv:{const i=t[r];if(I(i)||W(i))for(const o of K(i))o.aggregate||n.push(Y(o,{}));return n}case xs:if(e==="trail")return n;case or:case _o:case ko:case bs:case ja:case Ua:case qa:case Wa:{const i=go(t[r]);return i&&!i.aggregate&&n.push(Y(i,{})),n}}},[])}function W1e(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let r,i;if(I(t)){for(const o of t)o.aggregate?(r||(r=[]),r.push(o)):(i||(i=[]),i.push(o));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return I(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function yS(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};const i=e.map(({fieldPrefix:s,titlePrefix:a})=>{const u=r?` of ${x3(t)}`:"";return{field:s+t.field,type:t.type,title:re(a)?{signal:`${a}"${escape(u)}"`}:a+u}}),o=j1e(n).map(k1e);return{tooltip:[...i,...Ji(o,be)]}}function x3(e){const{title:t,field:n}=e;return ht(t,n)}function b3(e,t,n,r,i){const{scale:o,axis:s}=n;return({partName:a,mark:u,positionPrefix:l,endPositionPrefix:c=void 0,extraEncoding:f={}})=>{const d=x3(n);return qj(e,a,i,{mark:u,encoding:{[t]:{field:`${l}_${n.field}`,type:n.type,...d!==void 0?{title:d}:{},...o!==void 0?{scale:o}:{},...s!==void 0?{axis:s}:{}},...Q(c)?{[`${t}2`]:{field:`${c}_${n.field}`}}:{},...r,...f}})}}function qj(e,t,n,r){const{clip:i,color:o,opacity:s}=e,a=e.type;return e[t]||e[t]===void 0&&n[t]?[{...r,mark:{...n[t],...i?{clip:i}:{},...o?{color:o}:{},...s?{opacity:s}:{},...po(r.mark)?r.mark:{type:r.mark},style:`${a}-${String(t)}`,...Oa(e[t])?{}:e[t]}}]:[]}function Hj(e,t,n){const{encoding:r}=e,i=t==="vertical"?"y":"x",o=r[i],s=r[`${i}2`],a=r[`${i}Error`],u=r[`${i}Error2`];return{continuousAxisChannelDef:fm(o,n),continuousAxisChannelDef2:fm(s,n),continuousAxisChannelDefError:fm(a,n),continuousAxisChannelDefError2:fm(u,n),continuousAxis:i}}function fm(e,t){if(e!=null&&e.aggregate){const{aggregate:n,...r}=e;return n!==t&&U(p0e(n,t)),r}else return e}function Gj(e,t){const{mark:n,encoding:r}=e,{x:i,y:o}=r;if(po(n)&&n.orient)return n.orient;if(Qs(i)){if(Qs(o)){const s=W(i)&&i.aggregate,a=W(o)&&o.aggregate;if(!s&&a===t)return"vertical";if(!a&&s===t)return"horizontal";if(s===t&&a===t)throw new Error("Both x and y cannot have aggregate");return hf(o)&&!hf(i)?"horizontal":"vertical"}return"horizontal"}else{if(Qs(o))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const ty="boxplot",q1e=["box","median","outliers","rule","ticks"],H1e=new ux(ty,Yj);function Vj(e){return ze(e)?"tukey":e}function Yj(e,{config:t}){e={...e,encoding:lx(e.encoding,t)};const{mark:n,encoding:r,params:i,projection:o,...s}=e,a=po(n)?n:{type:n};i&&U(GB("boxplot"));const u=a.extent??t.boxplot.extent,l=Re("size",a,t),c=a.invalid,f=Vj(u),{bins:d,timeUnits:h,transform:p,continuousAxisChannelDef:g,continuousAxis:m,groupby:y,aggregate:v,encodingWithoutContinuousAxis:x,ticksOrient:b,boxOrient:w,customTooltipWithoutAggregatedField:S}=G1e(e,u,t),{color:E,size:_,...$}=x,k=vn=>b3(a,m,g,vn,t.boxplot),A=k($),R=k(x),C=k({...$,..._?{size:_}:{}}),T=yS([{fieldPrefix:f==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:f==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],g,x),F={type:"tick",color:"black",opacity:1,orient:b,invalid:c,aria:!1},N=f==="min-max"?T:yS([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],g,x),D=[...A({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:N}),...A({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:N}),...A({partName:"ticks",mark:F,positionPrefix:"lower_whisker",extraEncoding:N}),...A({partName:"ticks",mark:F,positionPrefix:"upper_whisker",extraEncoding:N})],M=[...f!=="tukey"?D:[],...R({partName:"box",mark:{type:"bar",...l?{size:l}:{},orient:w,invalid:c,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:T}),...C({partName:"median",mark:{type:"tick",invalid:c,...J(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...l?{size:l}:{},orient:b,aria:!1},positionPrefix:"mid_box",extraEncoding:T})];if(f==="min-max")return{...s,transform:(s.transform??[]).concat(p),layer:M};const O=`datum["lower_box_${g.field}"]`,B=`datum["upper_box_${g.field}"]`,X=`(${B} - ${O})`,te=`${O} - ${u} * ${X}`,xe=`${B} + ${u} * ${X}`,de=`datum["${g.field}"]`,Oe={joinaggregate:Xj(g.field),groupby:y},zt={transform:[{filter:`(${te} <= ${de}) && (${de} <= ${xe})`},{aggregate:[{op:"min",field:g.field,as:`lower_whisker_${g.field}`},{op:"max",field:g.field,as:`upper_whisker_${g.field}`},{op:"min",field:`lower_box_${g.field}`,as:`lower_box_${g.field}`},{op:"max",field:`upper_box_${g.field}`,as:`upper_box_${g.field}`},...v],groupby:y}],layer:D},{tooltip:Kr,...Ya}=$,{scale:Z,axis:ge}=g,ye=x3(g),q=Jn(ge,["title"]),It=qj(a,"outliers",t.boxplot,{transform:[{filter:`(${de} < ${te}) || (${de} > ${xe})`}],mark:"point",encoding:{[m]:{field:g.field,type:g.type,...ye!==void 0?{title:ye}:{},...Z!==void 0?{scale:Z}:{},...Be(q)?{}:{axis:q}},...Ya,...E?{color:E}:{},...S?{tooltip:S}:{}}})[0];let Me;const Kt=[...d,...h,Oe];return It?Me={transform:Kt,layer:[It,zt]}:(Me=zt,Me.transform.unshift(...Kt)),{...s,layer:[Me,{transform:p,layer:M}]}}function Xj(e){return[{op:"q1",field:e,as:`lower_box_${e}`},{op:"q3",field:e,as:`upper_box_${e}`}]}function G1e(e,t,n){const r=Gj(e,ty),{continuousAxisChannelDef:i,continuousAxis:o}=Hj(e,r,ty),s=i.field,a=Vj(t),u=[...Xj(s),{op:"median",field:s,as:`mid_box_${s}`},{op:"min",field:s,as:(a==="min-max"?"lower_whisker_":"min_")+s},{op:"max",field:s,as:(a==="min-max"?"upper_whisker_":"max_")+s}],l=a==="min-max"||a==="tukey"?[]:[{calculate:`datum["upper_box_${s}"] - datum["lower_box_${s}"]`,as:`iqr_${s}`},{calculate:`min(datum["upper_box_${s}"] + datum["iqr_${s}"] * ${t}, datum["max_${s}"])`,as:`upper_whisker_${s}`},{calculate:`max(datum["lower_box_${s}"] - datum["iqr_${s}"] * ${t}, datum["min_${s}"])`,as:`lower_whisker_${s}`}],{[o]:c,...f}=e.encoding,{customTooltipWithoutAggregatedField:d,filteredEncoding:h}=W1e(f),{bins:p,timeUnits:g,aggregate:m,groupby:y,encoding:v}=Uj(h,n),x=r==="vertical"?"horizontal":"vertical",b=r,w=[...p,...g,{aggregate:[...m,...u],groupby:y},...l];return{bins:p,timeUnits:g,transform:w,groupby:y,aggregate:m,continuousAxisChannelDef:i,continuousAxis:o,encodingWithoutContinuousAxis:v,ticksOrient:x,boxOrient:b,customTooltipWithoutAggregatedField:d}}const w3="errorbar",V1e=["ticks","rule"],Y1e=new ux(w3,Qj);function Qj(e,{config:t}){e={...e,encoding:lx(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:o,ticksOrient:s,markDef:a,outerSpec:u,tooltipEncoding:l}=Kj(e,w3,t);delete o.size;const c=b3(a,i,r,o,t.errorbar),f=a.thickness,d=a.size,h={type:"tick",orient:s,aria:!1,...f!==void 0?{thickness:f}:{},...d!==void 0?{size:d}:{}},p=[...c({partName:"ticks",mark:h,positionPrefix:"lower",extraEncoding:l}),...c({partName:"ticks",mark:h,positionPrefix:"upper",extraEncoding:l}),...c({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...f!==void 0?{size:f}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l})];return{...u,transform:n,...p.length>1?{layer:p}:{...p[0]}}}function X1e(e,t){const{encoding:n}=e;if(Q1e(n))return{orient:Gj(e,t),inputType:"raw"};const r=K1e(n),i=J1e(n),o=n.x,s=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const a=n.x2,u=n.y2;if(fe(a)&&fe(u))throw new Error(`${t} cannot have both x2 and y2`);if(fe(a)){if(Qs(o))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(fe(u)){if(Qs(s))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const a=n.xError,u=n.xError2,l=n.yError,c=n.yError2;if(fe(u)&&!fe(a))throw new Error(`${t} cannot have xError2 without xError`);if(fe(c)&&!fe(l))throw new Error(`${t} cannot have yError2 without yError`);if(fe(a)&&fe(l))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(fe(a)){if(Qs(o))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(fe(l)){if(Qs(s))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function Q1e(e){return(fe(e.x)||fe(e.y))&&!fe(e.x2)&&!fe(e.y2)&&!fe(e.xError)&&!fe(e.xError2)&&!fe(e.yError)&&!fe(e.yError2)}function K1e(e){return fe(e.x2)||fe(e.y2)}function J1e(e){return fe(e.xError)||fe(e.xError2)||fe(e.yError)||fe(e.yError2)}function Kj(e,t,n){const{mark:r,encoding:i,params:o,projection:s,...a}=e,u=po(r)?r:{type:r};o&&U(GB(t));const{orient:l,inputType:c}=X1e(e,t),{continuousAxisChannelDef:f,continuousAxisChannelDef2:d,continuousAxisChannelDefError:h,continuousAxisChannelDefError2:p,continuousAxis:g}=Hj(e,l,t),{errorBarSpecificAggregate:m,postAggregateCalculates:y,tooltipSummary:v,tooltipTitleWithFieldName:x}=Z1e(u,f,d,h,p,c,t,n),{[g]:b,[g==="x"?"x2":"y2"]:w,[g==="x"?"xError":"yError"]:S,[g==="x"?"xError2":"yError2"]:E,..._}=i,{bins:$,timeUnits:k,aggregate:A,groupby:R,encoding:C}=Uj(_,n),T=[...A,...m],F=c!=="raw"?[]:R,N=yS(v,f,C,x);return{transform:[...a.transform??[],...$,...k,...T.length===0?[]:[{aggregate:T,groupby:F}],...y],groupby:F,continuousAxisChannelDef:f,continuousAxis:g,encodingWithoutContinuousAxis:C,ticksOrient:l==="vertical"?"horizontal":"vertical",markDef:u,outerSpec:a,tooltipEncoding:N}}function Z1e(e,t,n,r,i,o,s,a){let u=[],l=[];const c=t.field;let f,d=!1;if(o==="raw"){const h=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":a.errorbar.center,p=e.extent?e.extent:h==="mean"?"stderr":"iqr";if(h==="median"!=(p==="iqr")&&U(h0e(h,p,s)),p==="stderr"||p==="stdev")u=[{op:p,field:c,as:`extent_${c}`},{op:h,field:c,as:`center_${c}`}],l=[{calculate:`datum["center_${c}"] + datum["extent_${c}"]`,as:`upper_${c}`},{calculate:`datum["center_${c}"] - datum["extent_${c}"]`,as:`lower_${c}`}],f=[{fieldPrefix:"center_",titlePrefix:ag(h)},{fieldPrefix:"upper_",titlePrefix:kD(h,p,"+")},{fieldPrefix:"lower_",titlePrefix:kD(h,p,"-")}],d=!0;else{let g,m,y;p==="ci"?(g="mean",m="ci0",y="ci1"):(g="median",m="q1",y="q3"),u=[{op:m,field:c,as:`lower_${c}`},{op:y,field:c,as:`upper_${c}`},{op:g,field:c,as:`center_${c}`}],f=[{fieldPrefix:"upper_",titlePrefix:$c({field:c,aggregate:y,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:$c({field:c,aggregate:m,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:$c({field:c,aggregate:g,type:"quantitative"},a,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&U(d0e(e.center,e.extent)),o==="aggregated-upper-lower"?(f=[],l=[{calculate:`datum["${n.field}"]`,as:`upper_${c}`},{calculate:`datum["${c}"]`,as:`lower_${c}`}]):o==="aggregated-error"&&(f=[{fieldPrefix:"",titlePrefix:c}],l=[{calculate:`datum["${c}"] + datum["${r.field}"]`,as:`upper_${c}`}],i?l.push({calculate:`datum["${c}"] + datum["${i.field}"]`,as:`lower_${c}`}):l.push({calculate:`datum["${c}"] - datum["${r.field}"]`,as:`lower_${c}`}));for(const h of l)f.push({fieldPrefix:h.as.substring(0,6),titlePrefix:nl(nl(h.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:l,errorBarSpecificAggregate:u,tooltipSummary:f,tooltipTitleWithFieldName:d}}function kD(e,t,n){return`${ag(e)} ${n} ${t}`}const E3="errorband",eye=["band","borders"],tye=new ux(E3,Jj);function Jj(e,{config:t}){e={...e,encoding:lx(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:o,markDef:s,outerSpec:a,tooltipEncoding:u}=Kj(e,E3,t),l=s,c=b3(l,i,r,o,t.errorband),f=e.encoding.x!==void 0&&e.encoding.y!==void 0;let d={type:f?"area":"rect"},h={type:f?"line":"rule"};const p={...l.interpolate?{interpolate:l.interpolate}:{},...l.tension&&l.interpolate?{tension:l.tension}:{}};return f?(d={...d,...p,ariaRoleDescription:"errorband"},h={...h,...p,aria:!1}):l.interpolate?U(mD("interpolate")):l.tension&&U(mD("tension")),{...a,transform:n,layer:[...c({partName:"band",mark:d,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"lower",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"upper",extraEncoding:u})]}}const Zj={};function S3(e,t,n){const r=new ux(e,t);Zj[e]={normalizer:r,parts:n}}function nye(){return j(Zj)}S3(ty,Yj,q1e);S3(w3,Qj,V1e);S3(E3,Jj,eye);const rye=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],eU={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},tU={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},iye=j(eU),oye=j(tU),sye={header:1,headerRow:1,headerColumn:1,headerFacet:1},nU=j(sye),rU=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],aye={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},uye={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},Fi="_vgsid_",lye={point:{on:"click",fields:[Fi],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[mousedown, window:mouseup] > window:mousemove!",encodings:["x","y"],translate:"[mousedown, window:mouseup] > window:mousemove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function _3(e){return e==="legend"||!!(e!=null&&e.legend)}function cb(e){return _3(e)&&J(e)}function k3(e){return!!(e!=null&&e.select)}function iU(e){const t=[];for(const n of e||[]){if(k3(n))continue;const{expr:r,bind:i,...o}=n;if(i&&r){const s={...o,bind:i,init:r};t.push(s)}else{const s={...o,...r?{update:r}:{},...i?{bind:i}:{}};t.push(s)}}return t}function cye(e){return cx(e)||C3(e)||$3(e)}function $3(e){return"concat"in e}function cx(e){return"vconcat"in e}function C3(e){return"hconcat"in e}function oU({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function mo(e){return J(e)&&e.step!==void 0}function $D(e){return e.view||e.width||e.height}const CD=20,fye={align:1,bounds:1,center:1,columns:1,spacing:1},dye=j(fye);function hye(e,t,n){const r=n[t],i={},{spacing:o,columns:s}=r;o!==void 0&&(i.spacing=o),s!==void 0&&(rx(e)&&!dg(e.facet)||$3(e))&&(i.columns=s),cx(e)&&(i.columns=1);for(const a of dye)if(e[a]!==void 0)if(a==="spacing"){const u=e[a];i[a]=ze(u)?u:{row:u.row??o,column:u.column??o}}else i[a]=e[a];return i}function vS(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function ny(e,t){const n=ry(e,t);return mo(n)?n.step:sU}function ry(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return ht(n,{step:e.step})}const sU=20,pye={continuousWidth:200,continuousHeight:200,step:sU},gye={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:pye,mark:u1e,arc:{},area:{},bar:f1e,circle:{},geoshape:{},image:{},line:{},point:{},rect:d1e,rule:{color:"black"},square:{},text:{color:"black"},tick:h1e,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:q0e,projection:{},legend:aye,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:lye,style:{},title:{},facet:{spacing:CD},concat:{spacing:CD},normalizedNumberFormat:".0%"},No=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],AD={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},FD={blue:No[0],orange:No[1],red:No[2],teal:No[3],green:No[4],yellow:No[5],purple:No[6],pink:No[7],brown:No[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function mye(e={}){return{signals:[{name:"color",value:J(e)?{...FD,...e}:FD}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function yye(e){return{signals:[{name:"fontSize",value:J(e)?{...AD,...e}:AD}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function vye(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function aU(e){const t=j(e||{}),n={};for(const r of t){const i=e[r];n[r]=gg(i)?IB(i):pr(i)}return n}function xye(e){const t=j(e),n={};for(const r of t)n[r]=aU(e[r]);return n}const bye=[...vj,...Bj,...nU,"background","padding","legend","lineBreak","scale","style","title","view"];function uU(e={}){const{color:t,font:n,fontSize:r,selection:i,...o}=e,s=_f({},ce(gye),n?vye(n):{},t?mye(t):{},r?yye(r):{},o||{});i&&kf(s,"selection",i,!0);const a=Jn(s,bye);for(const u of["background","lineBreak","padding"])s[u]&&(a[u]=pr(s[u]));for(const u of vj)s[u]&&(a[u]=Wn(s[u]));for(const u of Bj)s[u]&&(a[u]=aU(s[u]));for(const u of nU)s[u]&&(a[u]=Wn(s[u]));return s.legend&&(a.legend=Wn(s.legend)),s.scale&&(a.scale=Wn(s.scale)),s.style&&(a.style=xye(s.style)),s.title&&(a.title=Wn(s.title)),s.view&&(a.view=Wn(s.view)),a}const wye=new Set(["view",...n1e]),Eye=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],Sye={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...a1e};function _ye(e){e=ce(e);for(const t of Eye)delete e[t];if(e.axis)for(const t in e.axis)gg(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of rye)delete e.legend[t];if(e.mark){for(const t of vD)delete e.mark[t];e.mark.tooltip&&J(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(iU(e.params)),delete e.params);for(const t of wye){for(const r of vD)delete e[t][r];const n=Sye[t];if(n)for(const r of n)delete e[t][r];$ye(e,t)}for(const t of nye())delete e[t];kye(e);for(const t in e)J(e[t])&&Be(e[t])&&delete e[t];return Be(e)?void 0:e}function kye(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=zB(e.title);Be(t)||(e.style["group-title"]={...e.style["group-title"],...t}),Be(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),Be(r)?delete e.title:e.title=r}function $ye(e,t,n,r){const i=r?e[t][r]:e[t];t==="view"&&(n="cell");const o={...i,...e.style[n??t]};Be(o)||(e.style[n??t]=o),r||delete e[t]}function fx(e){return"layer"in e}function Cye(e){return"repeat"in e}function Aye(e){return!I(e.repeat)&&e.repeat.layer}class A3{map(t,n){return rx(t)?this.mapFacet(t,n):Cye(t)?this.mapRepeat(t,n):C3(t)?this.mapHConcat(t,n):cx(t)?this.mapVConcat(t,n):$3(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(fx(t))return this.mapLayer(t,n);if(Es(t))return this.mapUnit(t,n);throw new Error(qA(t))}mapLayer(t,n){return{...t,layer:t.layer.map(r=>this.mapLayerOrUnit(r,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(r=>this.map(r,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(r=>this.map(r,n))}}mapConcat(t,n){const{concat:r,...i}=t;return{...i,concat:r.map(o=>this.map(o,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const Fye={zero:1,center:1,normalize:1};function Tye(e){return e in Fye}const Mye=new Set([pj,Zv,Jv,X1,tx,s3,a3,ex,gj,o3]),Nye=new Set([Zv,Jv,pj]);function Ul(e){return W(e)&&ff(e)==="quantitative"&&!e.bin}function TD(e,t,{orient:n,type:r}){const i=t==="x"?"y":"radius",o=t==="x",s=e[t],a=e[i];if(W(s)&&W(a))if(Ul(s)&&Ul(a)){if(s.stack)return t;if(a.stack)return i;const u=W(s)&&!!s.aggregate,l=W(a)&&!!a.aggregate;if(u!==l)return u?t:i;if(o&&r==="bar"){if(n==="vertical")return i;if(n==="horizontal")return t}}else{if(Ul(s))return t;if(Ul(a))return i}else{if(Ul(s))return t;if(Ul(a))return i}}function Oye(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function lU(e,t){var d,h;const n=po(e)?e:{type:e},r=n.type;if(!Mye.has(r))return null;const i=TD(t,"x",n)||TD(t,"theta",n);if(!i)return null;const o=t[i],s=W(o)?Y(o,{}):void 0,a=Oye(i),u=[],l=new Set;if(t[a]){const p=t[a],g=W(p)?Y(p,{}):void 0;g&&g!==s&&(u.push(a),l.add(g));const m=a==="x"?"xOffset":"yOffset",y=t[m],v=W(y)?Y(y,{}):void 0;v&&v!==s&&(u.push(m),l.add(v))}const c=Vge.reduce((p,g)=>{if(g!=="tooltip"&&Pu(t,g)){const m=t[g];for(const y of K(m)){const v=go(y);if(v.aggregate)continue;const x=Y(v,{});(!x||!l.has(x))&&p.push({channel:g,fieldDef:v})}}return p},[]);let f;return o.stack!==void 0?Oa(o.stack)?f=o.stack?"zero":null:f=o.stack:Nye.has(r)&&(f="zero"),!f||!Tye(f)||y3(t)&&c.length===0?null:(d=o==null?void 0:o.scale)!=null&&d.type&&((h=o==null?void 0:o.scale)==null?void 0:h.type)!==Zn.LINEAR?(o!=null&&o.stack&&U(l0e(o.scale.type)),null):fe(t[$o(i)])?(o.stack!==void 0&&U(u0e(i)),null):(W(o)&&o.aggregate&&!ome.has(o.aggregate)&&U(c0e(o.aggregate)),{groupbyChannels:u,groupbyFields:l,fieldChannel:i,impute:o.impute===null?!1:Va(r),stackBy:c,offset:f})}function Dye(e){const{point:t,line:n,...r}=e;return j(r).length>1?r:r.type}function Rye(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:Jn(e[t],["point","line"])});return e}function fb(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?J(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?J(t.point)?t.point:{}:void 0}function MD(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class Pye{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(Es(t)){const{mark:r,encoding:i}=t,o=po(r)?r:{type:r};switch(o.type){case"line":case"rule":case"trail":return!!fb(o,n[o.type],i);case"area":return!!fb(o,n[o.type],i)||!!MD(o,n[o.type])}}return!1}run(t,n,r){const{config:i}=n,{params:o,projection:s,mark:a,name:u,encoding:l,...c}=t,f=lx(l,i),d=po(a)?a:{type:a},h=fb(d,i[d.type],f),p=d.type==="area"&&MD(d,i[d.type]),g=[{name:u,...o?{params:o}:{},mark:Dye({...d.type==="area"&&d.opacity===void 0&&d.fillOpacity===void 0?{opacity:.7}:{},...d}),encoding:Jn(f,["shape"])}],m=lU(d,f);let y=f;if(m){const{fieldChannel:v,offset:x}=m;y={...f,[v]:{...f[v],...x?{stack:x}:{}}}}return y=Jn(y,["y2","x2"]),p&&g.push({...s?{projection:s}:{},mark:{type:"line",...of(d,["clip","interpolate","tension","tooltip"]),...p},encoding:y}),h&&g.push({...s?{projection:s}:{},mark:{type:"point",opacity:1,filled:!0,...of(d,["clip","tooltip"]),...h},encoding:y}),r({...c,layer:g},{...n,config:Rye(i)})}}function Lye(e,t){return t?dg(e)?fU(e,t):cU(e,t):e}function db(e,t){return t?fU(e,t):e}function xS(e,t,n){const r=t[e];if(S1e(r)){if(r.repeat in n)return{...t,[e]:n[r.repeat]};U(_me(r.repeat));return}return t}function cU(e,t){if(e=xS("field",e,t),e!==void 0){if(e===null)return null;if(h3(e)&&io(e.sort)){const n=xS("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function ND(e,t){if(W(e))return cU(e,t);{const n=xS("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function OD(e,t){if(fe(e)){const n=ND(e,t);if(n)return n;if(ix(e))return{condition:e.condition}}else{if(hg(e)){const n=ND(e.condition,t);if(n)return{...e,condition:n};{const{condition:r,...i}=e;return i}}return e}}function fU(e,t){const n={};for(const r in e)if(ae(e,r)){const i=e[r];if(I(i))n[r]=i.map(o=>OD(o,t)).filter(o=>o);else{const o=OD(i,t);o!==void 0&&(n[r]=o)}}return n}class zye{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(Es(t)){const{encoding:n,mark:r}=t;if(r==="line"||po(r)&&r.type==="line")for(const i of Hge){const o=kl(i),s=n[o];if(n[i]&&(W(s)&&!jt(s.bin)||Ao(s)))return!0}}return!1}run(t,n,r){const{encoding:i,mark:o}=t;return U(Hme(!!i.x2,!!i.y2)),r({...t,mark:J(o)?{...o,type:"rule"}:"rule"},n)}}class Iye extends A3{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[H1e,Y1e,tye,new Pye,new zye]}map(t,n){if(Es(t)){const r=Pu(t.encoding,es),i=Pu(t.encoding,ts),o=Pu(t.encoding,Uv);if(r||i||o)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:r,parentProjection:i}=n,o=db(t.encoding,n.repeater),s={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(u=>u).join("_")}:{},...o?{encoding:o}:{}};if(r||i)return this.mapUnitWithParentEncodingOrProjection(s,n);const a=this.mapLayerOrUnit.bind(this);for(const u of this.nonFacetUnitNormalizers)if(u.hasMatchingType(s,n.config))return u.run(s,n,a);return s}mapRepeat(t,n){return Aye(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:r,spec:i,...o}=t,{row:s,column:a,layer:u}=r,{repeater:l={},repeaterPrefix:c=""}=n;return s||a?this.mapRepeat({...t,repeat:{...s?{row:s}:{},...a?{column:a}:{}},spec:{repeat:{layer:u},spec:i}},n):{...o,layer:u.map(f=>{const d={...l,layer:f},h=`${(i.name?`${i.name}_`:"")+c}child__layer_${Ze(f)}`,p=this.mapLayerOrUnit(i,{...n,repeater:d,repeaterPrefix:h});return p.name=h,p})}}mapNonLayerRepeat(t,n){const{repeat:r,spec:i,data:o,...s}=t;!I(r)&&t.columns&&(t=Jn(t,["columns"]),U(dD("repeat")));const a=[],{repeater:u={},repeaterPrefix:l=""}=n,c=!I(r)&&r.row||[u?u.row:null],f=!I(r)&&r.column||[u?u.column:null],d=I(r)&&r||[u?u.repeat:null];for(const p of d)for(const g of c)for(const m of f){const y={repeat:p,row:g,column:m,layer:u.layer},v=(i.name?`${i.name}_`:"")+l+"child__"+(I(r)?`${Ze(p)}`:(r.row?`row_${Ze(g)}`:"")+(r.column?`column_${Ze(m)}`:"")),x=this.map(i,{...n,repeater:y,repeaterPrefix:v});x.name=v,a.push(Jn(x,["data"]))}const h=I(r)?t.columns:r.column?r.column.length:1;return{data:i.data??o,align:"all",...s,columns:h,concat:a}}mapFacet(t,n){const{facet:r}=t;return dg(r)&&t.columns&&(t=Jn(t,["columns"]),U(dD("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:r,projection:i}=t,{parentEncoding:o,parentProjection:s,config:a}=n,u=RD({parentProjection:s,projection:i}),l=DD({parentEncoding:o,encoding:db(r,n.repeater)});return this.mapUnit({...t,...u?{projection:u}:{},...l?{encoding:l}:{}},{config:a})}mapFacetedUnit(t,n){const{row:r,column:i,facet:o,...s}=t.encoding,{mark:a,width:u,projection:l,height:c,view:f,params:d,encoding:h,...p}=t,{facetMapping:g,layout:m}=this.getFacetMappingAndLayout({row:r,column:i,facet:o},n),y=db(s,n.repeater);return this.mapFacet({...p,...m,facet:g,spec:{...u?{width:u}:{},...c?{height:c}:{},...f?{view:f}:{},...l?{projection:l}:{},mark:a,encoding:y,...d?{params:d}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:r,column:i,facet:o}=t;if(r||i){o&&U(Wme([...r?[es]:[],...i?[ts]:[]]));const s={},a={};for(const u of[es,ts]){const l=t[u];if(l){const{align:c,center:f,spacing:d,columns:h,...p}=l;s[u]=p;for(const g of["align","center","spacing"])l[g]!==void 0&&(a[g]??(a[g]={}),a[g][u]=l[g])}}return{facetMapping:s,layout:a}}else{const{align:s,center:a,spacing:u,columns:l,...c}=o;return{facetMapping:Lye(c,n.repeater),layout:{...s?{align:s}:{},...a?{center:a}:{},...u?{spacing:u}:{},...l?{columns:l}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:r,...i}){const{encoding:o,projection:s,...a}=t,u={...i,parentEncoding:DD({parentEncoding:n,encoding:o,layer:!0}),parentProjection:RD({parentProjection:r,projection:s})};return super.mapLayer({...a,...t.name?{name:[u.repeaterPrefix,t.name].filter(l=>l).join("_")}:{}},u)}}function DD({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){const i=new Set([...j(e),...j(t)]);for(const o of i){const s=t[o],a=e[o];if(fe(s)){const u={...a,...s};r[o]=u}else hg(s)?r[o]={...s,condition:{...a,...s.condition}}:s||s===null?r[o]=s:(n||Ai(a)||re(a)||fe(a)||I(a))&&(r[o]=a)}}else r=t;return!r||Be(r)?void 0:r}function RD(e){const{parentProjection:t,projection:n}=e;return t&&n&&U(Tme({parentProjection:t,projection:n})),n??t}function F3(e){return"filter"in e}function Bye(e){return(e==null?void 0:e.stop)!==void 0}function dU(e){return"lookup"in e}function jye(e){return"data"in e}function Uye(e){return"param"in e}function Wye(e){return"pivot"in e}function qye(e){return"density"in e}function Hye(e){return"quantile"in e}function Gye(e){return"regression"in e}function Vye(e){return"loess"in e}function Yye(e){return"sample"in e}function Xye(e){return"window"in e}function Qye(e){return"joinaggregate"in e}function Kye(e){return"flatten"in e}function Jye(e){return"calculate"in e}function hU(e){return"bin"in e}function Zye(e){return"impute"in e}function eve(e){return"timeUnit"in e}function tve(e){return"aggregate"in e}function nve(e){return"stack"in e}function rve(e){return"fold"in e}function ive(e){return"extent"in e&&!("density"in e)}function ove(e){return e.map(t=>F3(t)?{filter:_c(t.filter,L0e)}:t)}class sve extends A3{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=PD(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=PD(t,n),t.encoding){const r={};for(const[i,o]of _a(t.encoding))r[i]=pU(o,n);t={...t,encoding:r}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:r,...i}=t;return r?{...i,params:_a(r).map(([o,s])=>{const{init:a,bind:u,empty:l,...c}=s;c.type==="single"?(c.type="point",c.toggle=!1):c.type==="multi"&&(c.type="point"),n.emptySelections[o]=l!=="none";for(const f of Gt(n.selectionPredicates[o]??{}))f.empty=l!=="none";return{name:o,value:a,select:c,bind:u}})}:t}}function PD(e,t){const{transform:n,...r}=e;if(n){const i=n.map(o=>{if(F3(o))return{filter:bS(o,t)};if(hU(o)&&$l(o.bin))return{...o,bin:gU(o.bin)};if(dU(o)){const{selection:s,...a}=o.from;return s?{...o,from:{param:s,...a}}:o}return o});return{...r,transform:i}}return e}function pU(e,t){var r,i;const n=ce(e);if(W(n)&&$l(n.bin)&&(n.bin=gU(n.bin)),Al(n)&&((i=(r=n.scale)==null?void 0:r.domain)!=null&&i.selection)){const{selection:o,...s}=n.scale.domain;n.scale.domain={...s,...o?{param:o}:{}}}if(ix(n))if(I(n.condition))n.condition=n.condition.map(o=>{const{selection:s,param:a,test:u,...l}=o;return a?o:{...l,test:bS(o,t)}});else{const{selection:o,param:s,test:a,...u}=pU(n.condition,t);n.condition=s?n.condition:{...u,test:bS(n.condition,t)}}return n}function gU(e){const t=e.extent;if(t!=null&&t.selection){const{selection:n,...r}=t;return{...e,extent:{...r,param:n}}}return e}function bS(e,t){const n=r=>_c(r,i=>{var o;const s=t.emptySelections[i]??!0,a={param:i,empty:s};return(o=t.selectionPredicates)[i]??(o[i]=[]),t.selectionPredicates[i].push(a),a});return e.selection?n(e.selection):_c(e.test||e.filter,r=>r.selection?n(r.selection):r)}class wS extends A3{map(t,n){const r=n.selections??[];if(t.params&&!Es(t)){const i=[];for(const o of t.params)k3(o)?r.push(o):i.push(o);t.params=i}return n.selections=r,super.map(t,n)}mapUnit(t,n){const r=n.selections;if(!r||!r.length)return t;const i=(n.path??[]).concat(t.name),o=[];for(const s of r)if(!s.views||!s.views.length)o.push(s);else for(const a of s.views)(Q(a)&&(a===t.name||i.includes(a))||I(a)&&a.map(u=>i.indexOf(u)).every((u,l,c)=>u!==-1&&(l===0||u>c[l-1])))&&o.push(s);return o.length&&(t.params=o),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=wS.prototype[e];wS.prototype[e]=function(n,r){return t.call(this,n,ave(n,r))}}function ave(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function mU(e,t){t===void 0&&(t=uU(e.config));const n=fve(e,t),{width:r,height:i}=e,o=dve(n,{width:r,height:i,autosize:e.autosize},t);return{...n,...o?{autosize:o}:{}}}const uve=new Iye,lve=new sve,cve=new wS;function fve(e,t={}){const n={config:t};return cve.map(uve.map(lve.map(e,n),n),n)}function LD(e){return Q(e)?{type:e}:e??{}}function dve(e,t,n){let{width:r,height:i}=t;const o=Es(e)||fx(e),s={};o?r=="container"&&i=="container"?(s.type="fit",s.contains="padding"):r=="container"?(s.type="fit-x",s.contains="padding"):i=="container"&&(s.type="fit-y",s.contains="padding"):(r=="container"&&(U(uD("width")),r=void 0),i=="container"&&(U(uD("height")),i=void 0));const a={type:"pad",...s,...n?LD(n.autosize):{},...LD(e.autosize)};if(a.type==="fit"&&!o&&(U(pme),a.type="pad"),r=="container"&&!(a.type=="fit"||a.type=="fit-x")&&U(lD("width")),i=="container"&&!(a.type=="fit"||a.type=="fit-y")&&U(lD("height")),!Ki(a,{type:"pad"}))return a}function hve(e){return e==="fit"||e==="fit-x"||e==="fit-y"}function pve(e){return e?`fit-${Vv(e)}`:"fit"}const gve=["background","padding"];function zD(e,t){const n={};for(const r of gve)e&&e[r]!==void 0&&(n[r]=pr(e[r]));return t&&(n.params=e.params),n}class Ss{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new Ss(ce(this.explicit),ce(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return ht(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:r}){n!==void 0&&this.set(t,n,r)}set(t,n,r){return delete this[r?"implicit":"explicit"][t],this[r?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:r}){n[t]!==void 0?this.set(t,n[t],!0):r[t]!==void 0&&this.set(t,r[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of j(t.combine())){const r=t.getWithExplicit(n);this.setWithExplicit(n,r)}}}function Hi(e){return{explicit:!0,value:e}}function cr(e){return{explicit:!1,value:e}}function yU(e){return(t,n,r,i)=>{const o=e(t.value,n.value);return o>0?t:o<0?n:dx(t,n,r,i)}}function dx(e,t,n,r){return e.explicit&&t.explicit&&U(t0e(n,r,e.value,t.value)),e}function $a(e,t,n,r,i=dx){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:Ki(e.value,t.value)?e:i(e,t,n,r)}class mve extends Ss{constructor(t={},n={},r=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=r}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function pf(e){return"url"in e}function yp(e){return"values"in e}function vU(e){return"name"in e&&!pf(e)&&!yp(e)&&!ca(e)}function ca(e){return e&&(xU(e)||bU(e)||T3(e))}function xU(e){return"sequence"in e}function bU(e){return"sphere"in e}function T3(e){return"graticule"in e}var We;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup"})(We||(We={}));function wU(e){const{signals:t,hasLegend:n,index:r,...i}=e;return i.field=Gr(i.field),i}function ll(e,t=!0,n=mn){if(I(e)){const r=e.map(i=>ll(i,t,n));return t?`[${r.join(", ")}]`:r}else if(Cl(e))return n(t?ol(e):$0e(e));return t?n(He(e)):e}function yve(e,t){for(const n of Gt(e.component.selection??{})){const r=n.name;let i=`${r}${Aa}, ${n.resolve==="global"?"true":`{unit: ${Lu(e)}}`}`;for(const o of px)o.defined(n)&&(o.signals&&(t=o.signals(e,n,t)),o.modifyExpr&&(i=o.modifyExpr(e,n,i)));t.push({name:r+Xve,on:[{events:{signal:n.name+Aa},update:`modify(${G(n.name+cl)}, ${i})`}]})}return M3(t)}function vve(e,t){if(e.component.selection&&j(e.component.selection).length){const n=G(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:Ia("mousemove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return M3(t)}function xve(e,t){let n=!1;for(const r of Gt(e.component.selection??{})){const i=r.name,o=G(i+cl);if(t.filter(a=>a.name===i).length===0){const a=r.resolve==="global"?"union":r.resolve,u=r.type==="point"?", true, true)":")";t.push({name:r.name,update:`${zU}(${o}, ${G(a)}${u}`})}n=!0;for(const a of px)a.defined(r)&&a.topLevelSignals&&(t=a.topLevelSignals(e,r,t))}return n&&t.filter(i=>i.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"mousemove",update:"isTuple(group()) ? group() : unit"}]}),M3(t)}function bve(e,t){const n=[...t],r=Lu(e,{escape:!1});for(const i of Gt(e.component.selection??{})){const o={name:i.name+cl};if(i.project.hasSelectionId&&(o.transform=[{type:"collect",sort:{field:Fi}}]),i.init){const a=i.project.items.map(wU);o.values=i.project.hasSelectionId?i.init.map(u=>({unit:r,[Fi]:ll(u,!1)[0]})):i.init.map(u=>({unit:r,fields:a,values:ll(u,!1)}))}n.filter(a=>a.name===i.name+cl).length||n.push(o)}return n}function EU(e,t){for(const n of Gt(e.component.selection??{}))for(const r of px)r.defined(n)&&r.marks&&(t=r.marks(e,n,t));return t}function wve(e,t){for(const n of e.children)dt(n)&&(t=EU(n,t));return t}function Eve(e,t,n,r){const i=WU(e,t.param,t);return{signal:kr(n.get("type"))&&I(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}function M3(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}class Ie{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){U(Cme);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const i of this._children)i.parent=t;this._children=[],t.removeChild(this);const r=t.parent.removeChild(t);this._parent=n,n.addChild(this,r),t.parent=this}}class Mn extends Ie{clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,r,i){super(t,n),this.type=r,this.refCounts=i,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${bB()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}class oo extends Ie{clone(){return new oo(null,ce(this.formula))}constructor(t,n){super(t),this.formula=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,o)=>{const{field:s,timeUnit:a}=o;if(a){const u=Y(o,{forAs:!0});i[be({as:u,field:s,timeUnit:a})]={as:u,field:s,timeUnit:a}}return i},{});return Be(r)?null:new oo(t,r)}static makeFromTransform(t,n){const{timeUnit:r,...i}={...n},o=Xt(r),s={...i,timeUnit:o};return new oo(t,{[be(s)]:s})}merge(t){this.formula={...this.formula};for(const n in t.formula)this.formula[n]||(this.formula[n]=t.formula[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[r,i]of _a(this.formula))t.has(i.as)||(n[r]=i);this.formula=n}producedFields(){return new Set(Gt(this.formula).map(t=>t.as))}dependentFields(){return new Set(Gt(this.formula).map(t=>t.field))}hash(){return`TimeUnit ${be(this.formula)}`}assemble(){const t=[];for(const n of Gt(this.formula)){const{field:r,as:i,timeUnit:o}=n,{unit:s,utc:a,...u}=Xt(o);t.push({field:Gr(r),type:"timeunit",...s?{units:Kv(s)}:{},...a?{timezone:"utc"}:{},...u,as:[i,`${i}_end`]})}return t}}const mg="_tuple_fields";class Sve{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const _ve={defined:()=>!0,parse:(e,t,n)=>{const r=t.name,i=t.project??(t.project=new Sve),o={},s={},a=new Set,u=(p,g)=>{const m=g==="visual"?p.channel:p.field;let y=Ze(`${r}_${m}`);for(let v=1;a.has(y);v++)y=Ze(`${r}_${m}_${v}`);return a.add(y),{[g]:y}},l=t.type,c=e.config.selection[l],f=n.value!==void 0?K(n.value):null;let{fields:d,encodings:h}=J(n.select)?n.select:{};if(!d&&!h&&f){for(const p of f)if(J(p))for(const g of j(p))qge(g)?(h||(h=[])).push(g):l==="interval"?(U(Sme),h=c.encodings):(d??(d=[])).push(g)}!d&&!h&&(h=c.encodings,"fields"in c&&(d=c.fields));for(const p of h??[]){const g=e.fieldDef(p);if(g){let m=g.field;if(g.aggregate){U(gme(p,g.aggregate));continue}else if(!m){U(fD(p));continue}if(g.timeUnit){m=e.vgField(p);const y={timeUnit:g.timeUnit,as:m,field:g.field};s[be(y)]=y}if(!o[m]){const y=l==="interval"&&ws(p)&&kr(e.getScaleComponent(p).get("type"))?"R":g.bin?"R-RE":"E",v={field:m,channel:p,type:y,index:i.items.length};v.signals={...u(v,"data"),...u(v,"visual")},i.items.push(o[m]=v),i.hasField[m]=o[m],i.hasSelectionId=i.hasSelectionId||m===Fi,$B(p)?(v.geoChannel=p,v.channel=kB(p),i.hasChannel[v.channel]=o[m]):i.hasChannel[p]=o[m]}}else U(fD(p))}for(const p of d??[]){if(i.hasField[p])continue;const g={type:"E",field:p,index:i.items.length};g.signals={...u(g,"data")},i.items.push(g),i.hasField[p]=g,i.hasSelectionId=i.hasSelectionId||p===Fi}f&&(t.init=f.map(p=>i.items.map(g=>J(p)?p[g.geoChannel||g.channel]!==void 0?p[g.geoChannel||g.channel]:p[g.field]:p))),Be(s)||(i.timeUnit=new oo(null,s))},signals:(e,t,n)=>{const r=t.name+mg;return n.filter(o=>o.name===r).length>0||t.project.hasSelectionId?n:n.concat({name:r,value:t.project.items.map(wU)})}},rs={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!ws(i))continue;const o=e.getScaleComponent(i),s=o?o.get("type"):void 0;if(!o||!kr(s)){U(vme);continue}o.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter(s=>n.filter(a=>a.name===s.signals.data).length===0);if(!e.parent||ID(e)||r.length===0)return n;const i=n.filter(s=>s.name===t.name)[0];let o=i.update;if(o.indexOf(zU)>=0)i.update=`{${r.map(s=>`${G(Gr(s.field))}: ${s.signals.data}`).join(", ")}}`;else{for(const s of r){const a=`${G(Gr(s.field))}: ${s.signals.data}`;o.includes(a)||(o=`${o.substring(0,o.length-1)}, ${a}}`)}i.update=o}return n.concat(r.map(s=>({name:s.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!ID(e))for(const r of t.scales){const i=n.filter(o=>o.name===r.signals.data)[0];i.push="outer",delete i.value,delete i.update}return n}};function ES(e,t){return`domain(${G(e.scaleName(t))})`}function ID(e){return e.parent&&Vf(e.parent)&&!e.parent.parent}const Cc="_brush",SU="_scale_trigger",Sd="geo_interval_init_tick",_U="_init",kve="_center",$ve={defined:e=>e.type==="interval",parse:(e,t,n)=>{var r;if(e.hasProjection){const i={...J(n.select)?n.select:{}};i.fields=[Fi],i.encodings||(i.encodings=n.value?j(n.value):[Pi,Ri]),n.select={type:"interval",...i}}if(t.translate&&!rs.defined(t)){const i=`!event.item || event.item.mark.name !== ${G(t.name+Cc)}`;for(const o of t.events){if(!o.between){U(`${o} is not an ordered event stream for interval selections.`);continue}const s=K((r=o.between[0]).filter??(r.filter=[]));s.indexOf(i)<0&&s.push(i)}}},signals:(e,t,n)=>{const r=t.name,i=r+Aa,o=Gt(t.project.hasChannel).filter(a=>a.channel===et||a.channel===Dt),s=t.init?t.init[0]:null;if(n.push(...o.reduce((a,u)=>a.concat(Cve(e,t,u,s&&s[u.index])),[])),e.hasProjection){const a=G(e.projectionName()),u=e.projectionName()+kve,{x:l,y:c}=t.project.hasChannel,f=l&&l.signals.visual,d=c&&c.signals.visual,h=l?s&&s[l.index]:`${u}[0]`,p=c?s&&s[c.index]:`${u}[1]`,g=w=>e.getSizeSignalRef(w).signal,m=`[[${f?f+"[0]":"0"}, ${d?d+"[0]":"0"}],[${f?f+"[1]":g("width")}, ${d?d+"[1]":g("height")}]]`;s&&(n.unshift({name:r+_U,init:`[scale(${a}, [${l?h[0]:h}, ${c?p[0]:p}]), scale(${a}, [${l?h[1]:h}, ${c?p[1]:p}])]`}),(!l||!c)&&(n.find(S=>S.name===u)||n.unshift({name:u,update:`invert(${a}, [${g("width")}/2, ${g("height")}/2])`})));const y=`intersect(${m}, {markname: ${G(e.getName("marks"))}}, unit.mark)`,v=`{unit: ${Lu(e)}}`,x=`vlSelectionTuples(${y}, ${v})`,b=o.map(w=>w.signals.visual);return n.concat({name:i,on:[{events:[...b.length?[{signal:b.join(" || ")}]:[],...s?[{signal:Sd}]:[]],update:x}]})}else{if(!rs.defined(t)){const l=r+SU,c=o.map(f=>{const d=f.channel,{data:h,visual:p}=f.signals,g=G(e.scaleName(d)),m=e.getScaleComponent(d).get("type"),y=kr(m)?"+":"";return`(!isArray(${h}) || (${y}invert(${g}, ${p})[0] === ${y}${h}[0] && ${y}invert(${g}, ${p})[1] === ${y}${h}[1]))`});c.length&&n.push({name:l,value:{},on:[{events:o.map(f=>({scale:e.scaleName(f.channel)})),update:c.join(" && ")+` ? ${l} : {}`}]})}const a=o.map(l=>l.signals.data),u=`unit: ${Lu(e)}, fields: ${r+mg}, values`;return n.concat({name:i,...s?{init:`{${u}: ${ll(s)}}`}:{},...a.length?{on:[{events:[{signal:a.join(" || ")}],update:`${a.join(" && ")} ? {${u}: [${a}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(dt(e)&&e.hasProjection&&t.init&&(n.filter(i=>i.name===Sd).length||n.unshift({name:Sd,value:null,on:[{events:"timer{1}",update:`${Sd} === null ? {} : ${Sd}`}]})),n),marks:(e,t,n)=>{const r=t.name,{x:i,y:o}=t.project.hasChannel,s=i==null?void 0:i.signals.visual,a=o==null?void 0:o.signals.visual,u=`data(${G(t.name+cl)})`;if(rs.defined(t)||!i&&!o)return n;const l={x:i!==void 0?{signal:`${s}[0]`}:{value:0},y:o!==void 0?{signal:`${a}[0]`}:{value:0},x2:i!==void 0?{signal:`${s}[1]`}:{field:{group:"width"}},y2:o!==void 0?{signal:`${a}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const g of j(l))l[g]=[{test:`${u}.length && ${u}[0].unit === ${Lu(e)}`,...l[g]},{value:0}];const{fill:c,fillOpacity:f,cursor:d,...h}=t.mark,p=j(h).reduce((g,m)=>(g[m]=[{test:[i!==void 0&&`${s}[0] !== ${s}[1]`,o!==void 0&&`${a}[0] !== ${a}[1]`].filter(y=>y).join(" && "),value:h[m]},{value:null}],g),{});return[{name:`${r+Cc}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:c},fillOpacity:{value:f}},update:l}},...n,{name:r+Cc,type:"rect",clip:!0,encode:{enter:{...d?{cursor:{value:d}}:{},fill:{value:"transparent"}},update:{...l,...p}}}]}};function Cve(e,t,n,r){const i=!e.hasProjection,o=n.channel,s=n.signals.visual,a=G(i?e.scaleName(o):e.projectionName()),u=d=>`scale(${a}, ${d})`,l=e.getSizeSignalRef(o===et?"width":"height").signal,c=`${o}(unit)`,f=t.events.reduce((d,h)=>[...d,{events:h.between[0],update:`[${c}, ${c}]`},{events:h,update:`[${s}[0], clamp(${c}, 0, ${l})]`}],[]);if(i){const d=n.signals.data,h=rs.defined(t),p=e.getScaleComponent(o),g=p?p.get("type"):void 0,m=r?{init:ll(r,!0,u)}:{value:[]};return f.push({events:{signal:t.name+SU},update:kr(g)?`[${u(`${d}[0]`)}, ${u(`${d}[1]`)}]`:"[0, 0]"}),h?[{name:d,on:[]}]:[{name:s,...m,on:f},{name:d,...r?{init:ll(r)}:{},on:[{events:{signal:s},update:`${s}[0] === ${s}[1] ? null : invert(${a}, ${s})`}]}]}else{const d=o===et?0:1,h=t.name+_U,p=r?{init:`[${h}[0][${d}], ${h}[1][${d}]]`}:{value:[]};return[{name:s,...p,on:f}]}}const Ave={defined:e=>e.type==="point",signals:(e,t,n)=>{const r=t.name,i=r+mg,o=t.project,s="(item().isVoronoi ? datum.datum : datum)",a=Gt(e.component.selection??{}).reduce((f,d)=>d.type==="interval"?f.concat(d.name+Cc):f,[]).map(f=>`indexof(item().mark.name, '${f}') < 0`).join(" && "),u=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${a?` && ${a}`:""}`;let l=`unit: ${Lu(e)}, `;if(t.project.hasSelectionId)l+=`${Fi}: ${s}[${G(Fi)}]`;else{const f=o.items.map(d=>{const h=e.fieldDef(d.channel);return h!=null&&h.bin?`[${s}[${G(e.vgField(d.channel,{}))}], ${s}[${G(e.vgField(d.channel,{binSuffix:"end"}))}]]`:`${s}[${G(d.field)}]`}).join(", ");l+=`fields: ${i}, values: [${f}]`}const c=t.events;return n.concat([{name:r+Aa,on:c?[{events:c,update:`${u} ? {${l}} : null`,force:!0}]:[]}])}};function Wf(e,t,n,r){const i=ix(t)&&t.condition,o=r(t);if(i){const a=K(i).map(u=>{const l=r(u);if(E1e(u)){const{param:c,empty:f}=u;return{test:UU(e,{param:c,empty:f}),...l}}else return{test:sy(e,u.test),...l}});return{[n]:[...a,...o!==void 0?[o]:[]]}}else return o!==void 0?{[n]:o}:{}}function N3(e,t="text"){const n=e.encoding[t];return Wf(e,n,t,r=>hx(r,e.config))}function hx(e,t,n="datum"){if(e){if(Ai(e))return Xe(e.value);if(fe(e)){const{format:r,formatType:i}=Z1(e);return f3({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function kU(e,t={}){const{encoding:n,markDef:r,config:i,stack:o}=e,s=n.tooltip;if(I(s))return{tooltip:BD({tooltip:s},o,i,t)};{const a=t.reactiveGeom?"datum.datum":"datum";return Wf(e,s,"tooltip",u=>{const l=hx(u,i,a);if(l)return l;if(u===null)return;let c=Re("tooltip",r,i);if(c===!0&&(c={content:"encoding"}),Q(c))return{value:c};if(J(c))return re(c)?c:c.content==="encoding"?BD(n,o,i,t):{signal:a}})}}function $U(e,t,n,{reactiveGeom:r}={}){const i={...n,...n.tooltipFormat},o={},s=r?"datum.datum":"datum",a=[];function u(c,f){const d=kl(f),h=Dn(c)?c:{...c,type:e[d].type},p=h.title||g3(h,i),g=K(p).join(", ");let m;if(Rt(f)){const y=f==="x"?"x2":"y2",v=go(e[y]);if(jt(h.bin)&&v){const x=Y(h,{expr:s}),b=Y(v,{expr:s}),{format:w,formatType:S}=Z1(h);m=fg(x,b,w,S,i),o[y]=!0}}if((Rt(f)||f===Xr||f===Di)&&t&&t.fieldChannel===f&&t.offset==="normalize"){const{format:y,formatType:v}=Z1(h);m=f3({fieldOrDatumDef:h,format:y,formatType:v,expr:s,config:i,normalizeStack:!0}).signal}m??(m=hx(h,i,s).signal),a.push({channel:f,key:g,value:m})}v3(e,(c,f)=>{W(c)?u(c,f):ox(c)&&u(c.condition,f)});const l={};for(const{channel:c,key:f,value:d}of a)!o[c]&&!l[f]&&(l[f]=d);return l}function BD(e,t,n,{reactiveGeom:r}={}){const i=$U(e,t,n,{reactiveGeom:r}),o=_a(i).map(([s,a])=>`"${s}": ${a}`);return o.length>0?{signal:`{${o.join(", ")}}`}:void 0}function Fve(e){const{markDef:t,config:n}=e,r=Re("aria",t,n);return r===!1?{}:{...r?{aria:r}:{},...Tve(e),...Mve(e)}}function Tve(e){const{mark:t,markDef:n,config:r}=e;if(r.aria===!1)return{};const i=Re("ariaRoleDescription",n,r);return i!=null?{ariaRoleDescription:{value:i}}:t in fme?{}:{ariaRoleDescription:{value:t}}}function Mve(e){const{encoding:t,markDef:n,config:r,stack:i}=e,o=t.description;if(o)return Wf(e,o,"description",u=>hx(u,e.config));const s=Re("description",n,r);if(s!=null)return{description:Xe(s)};if(r.aria===!1)return{};const a=$U(t,i,r);if(!Be(a))return{description:{signal:_a(a).map(([u,l],c)=>`"${c>0?"; ":""}${u}: " + (${l})`).join(" + ")}}}function Ct(e,t,n={}){const{markDef:r,encoding:i,config:o}=t,{vgChannel:s}=n;let{defaultRef:a,defaultValue:u}=n;a===void 0&&(u??(u=Re(e,r,o,{vgChannel:s,ignoreVgConfig:!0})),u!==void 0&&(a=Xe(u)));const l=i[e];return Wf(t,l,s??e,c=>c3({channel:e,channelDef:c,markDef:r,config:o,scaleName:t.scaleName(e),scale:t.getScaleComponent(e),stack:null,defaultRef:a}))}function CU(e,t={filled:void 0}){const{markDef:n,encoding:r,config:i}=e,{type:o}=n,s=t.filled??Re("filled",n,i),a=we(["bar","point","circle","square","geoshape"],o)?"transparent":void 0,u=Re(s===!0?"color":void 0,n,i,{vgChannel:"fill"})??i.mark[s===!0&&"color"]??a,l=Re(s===!1?"color":void 0,n,i,{vgChannel:"stroke"})??i.mark[s===!1&&"color"],c=s?"fill":"stroke",f={...u?{fill:Xe(u)}:{},...l?{stroke:Xe(l)}:{}};return n.color&&(s?n.fill:n.stroke)&&U(YB("property",{fill:"fill"in n,stroke:"stroke"in n})),{...f,...Ct("color",e,{vgChannel:c,defaultValue:s?u:l}),...Ct("fill",e,{defaultValue:r.fill?u:void 0}),...Ct("stroke",e,{defaultValue:r.stroke?l:void 0})}}function Nve(e){const{encoding:t,mark:n}=e,r=t.order;return!Va(n)&&Ai(r)?Wf(e,r,"zindex",i=>Xe(i.value)):{}}function gf({channel:e,markDef:t,encoding:n={},model:r,bandPosition:i}){const o=`${e}Offset`,s=t[o],a=n[o];if((o==="xOffset"||o==="yOffset")&&a)return{offsetType:"encoding",offset:c3({channel:o,channelDef:a,markDef:t,config:r==null?void 0:r.config,scaleName:r.scaleName(o),scale:r.getScaleComponent(o),stack:null,defaultRef:Xe(s),bandPosition:i})};const u=t[o];return u?{offsetType:"visual",offset:u}:{}}function ln(e,t,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:o,config:s,stack:a}=t,u=i[e],l=i[$o(e)],c=t.scaleName(e),f=t.getScaleComponent(e),{offset:d,offsetType:h}=gf({channel:e,markDef:o,encoding:i,model:t,bandPosition:.5}),p=O3({model:t,defaultPos:n,channel:e,scaleName:c,scale:f}),g=!u&&Rt(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:Ove({channel:e,channelDef:u,channel2Def:l,markDef:o,config:s,scaleName:c,scale:f,stack:a,offset:d,defaultRef:p,bandPosition:h==="encoding"?0:void 0});return g?{[r||e]:g}:void 0}function Ove(e){const{channel:t,channelDef:n,scaleName:r,stack:i,offset:o,markDef:s}=e;if(fe(n)&&i&&t===i.fieldChannel){if(W(n)){let a=n.bandPosition;if(a===void 0&&s.type==="text"&&(t==="radius"||t==="theta")&&(a=.5),a!==void 0)return Q1({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:a,offset:o})}return Ru(n,r,{suffix:"end"},{offset:o})}return u3(e)}function O3({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:o,config:s}=e;return()=>{const a=kl(n),u=ka(n),l=Re(n,o,s,{vgChannel:u});if(l!==void 0)return kh(n,l);switch(t){case"zeroOrMin":case"zeroOrMax":if(r){const c=i.get("type");if(!we([Zn.LOG,Zn.TIME,Zn.UTC],c)){if(i.domainDefinitelyIncludesZero())return{scale:r,value:0}}}if(t==="zeroOrMin")return a==="y"?{field:{group:"height"}}:{value:0};switch(a){case"radius":return{signal:`min(${e.width.signal},${e.height.signal})/2`};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":return{...e[ar(n)],mult:.5}}}}const Dve={left:"x",center:"xc",right:"x2"},Rve={top:"y",middle:"yc",bottom:"y2"};function AU(e,t,n,r="middle"){if(e==="radius"||e==="theta")return ka(e);const i=e==="x"?"align":"baseline",o=Re(i,t,n);let s;return re(o)?(U(qme(i)),s=void 0):s=o,e==="x"?Dve[s||(r==="top"?"left":"center")]:Rve[s||r]}function iy(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?FU(e,t,{defaultPos:n,defaultPos2:r}):ln(e,t,{defaultPos:n})}function FU(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:o}=t,s=$o(e),a=ar(e),u=Pve(t,r,s),l=u[a]?AU(e,i,o):ka(e);return{...ln(e,t,{defaultPos:n,vgChannel:l}),...u}}function Pve(e,t,n){const{encoding:r,mark:i,markDef:o,stack:s,config:a}=e,u=kl(n),l=ar(n),c=ka(n),f=r[u],d=e.scaleName(u),h=e.getScaleComponent(u),{offset:p}=n in r||n in o?gf({channel:n,markDef:o,encoding:r,model:e}):gf({channel:u,markDef:o,encoding:r,model:e});if(!f&&(n==="x2"||n==="y2")&&(r.latitude||r.longitude)){const m=ar(n),y=e.markDef[m];return y!=null?{[m]:{value:y}}:{[c]:{field:e.getName(n)}}}const g=Lve({channel:n,channelDef:f,channel2Def:r[n],markDef:o,config:a,scaleName:d,scale:h,stack:s,offset:p,defaultRef:void 0});return g!==void 0?{[c]:g}:dm(n,o)||dm(n,{[n]:V1(n,o,a.style),[l]:V1(l,o,a.style)})||dm(n,a[i])||dm(n,a.mark)||{[c]:O3({model:e,defaultPos:t,channel:n,scaleName:d,scale:h})()}}function Lve({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:o,scale:s,stack:a,offset:u,defaultRef:l}){return fe(t)&&a&&e.charAt(0)===a.fieldChannel.charAt(0)?Ru(t,o,{suffix:"start"},{offset:u}):u3({channel:e,channelDef:n,scaleName:o,scale:s,stack:a,markDef:r,config:i,offset:u,defaultRef:l})}function dm(e,t){const n=ar(e),r=ka(e);if(t[r]!==void 0)return{[r]:kh(e,t[r])};if(t[e]!==void 0)return{[r]:kh(e,t[e])};if(t[n]){const i=t[n];if(al(i))U(Lme(n));else return{[n]:kh(e,i)}}}function Ca(e,t){const{config:n,encoding:r,markDef:i}=e,o=i.type,s=$o(t),a=ar(t),u=r[t],l=r[s],c=e.getScaleComponent(t),f=c?c.get("type"):void 0,d=i.orient,h=r[a]??r.size??Re("size",i,n,{vgChannel:a}),p=TB(t),g=o==="bar"&&(t==="x"?d==="vertical":d==="horizontal");return W(u)&&(Ge(u.bin)||jt(u.bin)||u.timeUnit&&!l)&&!(h&&!al(h))&&!r[p]&&!Pt(f)?Bve({fieldDef:u,fieldDef2:l,channel:t,model:e}):(fe(u)&&Pt(f)||g)&&!l?Ive(u,t,e):FU(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function zve(e,t,n,r,i,o,s){if(al(i))if(n){const u=n.get("type");if(u==="band"){let l=`bandwidth('${t}')`;return i.band!==1&&(l=`${i.band} * ${l}`),{signal:`max(0.25, ${l})`}}else i.band!==1&&(U(Yme(u)),i=void 0)}else return{mult:i.band,field:{group:e}};else{if(re(i))return i;if(i)return{value:i}}if(n){const u=n.get("range");if(Ga(u)&&ze(u.step))return{value:u.step-2}}if(!o){const{bandPaddingInner:u,barBandPaddingInner:l,rectBandPaddingInner:c}=r.scale,f=ht(u,s==="bar"?l:c);if(re(f))return{signal:`(1 - (${f.signal})) * ${e}`};if(ze(f))return{signal:`${1-f} * ${e}`};if(jf(f))return{signal:`(1 - (${f.expr})) * ${e}`}}return{value:ny(r.view,e)-2}}function Ive(e,t,n){const{markDef:r,encoding:i,config:o,stack:s}=n,a=r.orient,u=n.scaleName(t),l=n.getScaleComponent(t),c=ar(t),f=$o(t),d=TB(t),h=n.scaleName(d),p=n.getScaleComponent(IA(t)),g=a==="horizontal"&&t==="y"||a==="vertical"&&t==="x";let m;(i.size||r.size)&&(g?m=Ct("size",n,{vgChannel:c,defaultRef:Xe(r.size)}):U(Jme(r.type)));const y=!!m,v=Aj({channel:t,fieldDef:e,markDef:r,config:o,scaleType:l==null?void 0:l.get("type"),useVlSizeChannel:g});m=m||{[c]:zve(c,h||u,p||l,o,v,!!e,r.type)};const x=(l==null?void 0:l.get("type"))==="band"&&al(v)&&!y?"top":"middle",b=AU(t,r,o,x),w=b==="xc"||b==="yc",{offset:S,offsetType:E}=gf({channel:t,markDef:r,encoding:i,model:n,bandPosition:w?.5:0}),_=u3({channel:t,channelDef:e,markDef:r,config:o,scaleName:u,scale:l,stack:s,offset:S,defaultRef:O3({model:n,defaultPos:"mid",channel:t,scaleName:u,scale:l}),bandPosition:w?E==="encoding"?0:.5:re(v)?{signal:`(1-${v})/2`}:al(v)?(1-v.band)/2:0});if(c)return{[b]:_,...m};{const $=ka(f),k=m[c],A=S?{...k,offset:S}:k;return{[b]:_,[$]:I(_)?[_[0],{..._[1],offset:A}]:{..._,offset:A}}}}function _d(e,t,n,r,i){if(_B(e))return 0;const o=e==="x"||e==="y2"?-t/2:t/2;if(re(n)||re(i)||re(r)){const s=ns(n),a=ns(i),u=ns(r),l=u?`${u} + `:"",c=s?`(${s} ? -1 : 1) * `:"",f=a?`(${a} + ${o})`:o;return{signal:l+c+f}}else return i=i||0,r+(n?-i-o:+i+o)}function Bve({fieldDef:e,fieldDef2:t,channel:n,model:r}){var w;const{config:i,markDef:o,encoding:s}=r,a=r.getScaleComponent(n),u=r.scaleName(n),l=a?a.get("type"):void 0,c=a.get("reverse"),f=Aj({channel:n,fieldDef:e,markDef:o,config:i,scaleType:l}),d=(w=r.component.axes[n])==null?void 0:w[0],h=(d==null?void 0:d.get("translate"))??.5,p=Rt(n)?Re("binSpacing",o,i)??0:0,g=$o(n),m=ka(n),y=ka(g),{offset:v}=gf({channel:n,markDef:o,encoding:s,model:r,bandPosition:0}),{offset:x}=gf({channel:g,markDef:o,encoding:s,model:r,bandPosition:0}),b=re(f)?{signal:`(1-${f.signal})/2`}:al(f)?(1-f.band)/2:.5;if(Ge(e.bin)||e.timeUnit)return{[y]:jD({fieldDef:e,scaleName:u,bandPosition:b,offset:_d(g,p,c,h,x??v)}),[m]:jD({fieldDef:e,scaleName:u,bandPosition:re(b)?{signal:`1-${b.signal}`}:1-b,offset:_d(n,p,c,h,v)})};if(jt(e.bin)){const S=Ru(e,u,{},{offset:_d(g,p,c,h,v)});if(W(t))return{[y]:S,[m]:Ru(t,u,{},{offset:_d(n,p,c,h,v)})};if($l(e.bin)&&e.bin.step)return{[y]:S,[m]:{signal:`scale("${u}", ${Y(e,{expr:"datum"})} + ${e.bin.step})`,offset:_d(n,p,c,h,v)}}}U(KB(g))}function jD({fieldDef:e,scaleName:t,bandPosition:n,offset:r}){return Q1({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:r})}const jve=new Set(["aria","width","height"]);function Qr(e,t){const{fill:n=void 0,stroke:r=void 0}=t.color==="include"?CU(e):{};return{...Uve(e.markDef,t),...UD(e,"fill",n),...UD(e,"stroke",r),...Ct("opacity",e),...Ct("fillOpacity",e),...Ct("strokeOpacity",e),...Ct("strokeWidth",e),...Ct("strokeDash",e),...Nve(e),...kU(e),...N3(e,"href"),...Fve(e)}}function UD(e,t,n){const{config:r,mark:i,markDef:o}=e;if(Re("invalid",o,r)==="hide"&&n&&!Va(i)){const a=Wve(e,{invalid:!0,channels:Yv});if(a)return{[t]:[{test:a,value:null},...K(n)]}}return n?{[t]:n}:{}}function Uve(e,t){return cme.reduce((n,r)=>(!jve.has(r)&&e[r]!==void 0&&t[r]!=="ignore"&&(n[r]=Xe(e[r])),n),{})}function Wve(e,{invalid:t=!1,channels:n}){const r=n.reduce((o,s)=>{const a=e.getScaleComponent(s);if(a){const u=a.get("type"),l=e.vgField(s,{expr:"datum"});l&&kr(u)&&(o[l]=!0)}return o},{}),i=j(r);if(i.length>0){const o=t?"||":"&&";return i.map(s=>l3(s,t)).join(` ${o} `)}}function D3(e){const{config:t,markDef:n}=e;if(Re("invalid",n,t)){const i=qve(e,{channels:Co});if(i)return{defined:{signal:i}}}return{}}function qve(e,{invalid:t=!1,channels:n}){const r=n.reduce((o,s)=>{var u;const a=e.getScaleComponent(s);if(a){const l=a.get("type"),c=e.vgField(s,{expr:"datum",binSuffix:(u=e.stack)!=null&&u.impute?"mid":void 0});c&&kr(l)&&(o[c]=!0)}return o},{}),i=j(r);if(i.length>0){const o=t?"||":"&&";return i.map(s=>l3(s,t)).join(` ${o} `)}}function WD(e,t){if(t!==void 0)return{[e]:Xe(t)}}const hb="voronoi",TU={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(hb)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,o=e.mark;if(Va(o))return U(mme(o)),n;const s={name:e.getName(hb),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...kU(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let a=0,u=!1;return n.forEach((l,c)=>{const f=l.name??"";f===e.component.mark[0].name?a=c:f.indexOf(hb)>=0&&(u=!0)}),u||n.splice(a+1,0,s),n}},MU={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!_3(e.bind),parse:(e,t,n)=>IU(t,n),topLevelSignals:(e,t,n)=>{const r=t.name,i=t.project,o=t.bind,s=t.init&&t.init[0],a=TU.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((u,l)=>{const c=Ze(`${r}_${u.field}`);n.filter(d=>d.name===c).length||n.unshift({name:c,...s?{init:ll(s[l])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${a}[${G(u.field)}] : null`}]:[],bind:o[u.field]??o[u.channel]??o})}),n},signals:(e,t,n)=>{const r=t.name,i=t.project,o=n.filter(l=>l.name===r+Aa)[0],s=r+mg,a=i.items.map(l=>Ze(`${r}_${l.field}`)),u=a.map(l=>`${l} !== null`).join(" && ");return a.length&&(o.update=`${u} ? {fields: ${s}, values: [${a.join(", ")}]} : null`),delete o.value,delete o.on,n}},oy="_toggle",NU={defined:e=>e.type==="point"&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+oy,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+Aa,r=t.name+oy;return`${r} ? null : ${n}, `+(t.resolve==="global"?`${r} ? null : true, `:`${r} ? null : {unit: ${Lu(e)}}, `)+`${r} ? ${n} : null`}},Hve={defined:e=>e.clear!==void 0&&e.clear!==!1,parse:(e,t)=>{t.clear&&(t.clear=Q(t.clear)?Ia(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(MU.defined(t))for(const r of t.project.items){const i=n.findIndex(o=>o.name===Ze(`${t.name}_${r.field}`));i!==-1&&n[i].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(i,o){i!==-1&&n[i].on&&n[i].on.push({events:t.clear,update:o})}if(t.type==="interval")for(const i of t.project.items){const o=n.findIndex(s=>s.name===i.signals.visual);if(r(o,"[0, 0]"),o===-1){const s=n.findIndex(a=>a.name===i.signals.data);r(s,"null")}}else{let i=n.findIndex(o=>o.name===t.name+Aa);r(i,"null"),NU.defined(t)&&(i=n.findIndex(o=>o.name===t.name+oy),r(i,"false"))}return n}},OU={defined:e=>{const t=e.resolve==="global"&&e.bind&&_3(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==Fi;return t&&!n&&U(xme),t&&n},parse:(e,t,n)=>{const r=ce(n);if(r.select=Q(r.select)?{type:r.select,toggle:t.toggle}:{...r.select,toggle:t.toggle},IU(t,r),J(n.select)&&(n.select.on||n.select.clear)){const s='event.item && indexof(event.item.mark.role, "legend") < 0';for(const a of t.events)a.filter=K(a.filter??[]),a.filter.includes(s)||a.filter.push(s)}const i=cb(t.bind)?t.bind.legend:"click",o=Q(i)?Ia(i,"view"):K(i);t.bind={legend:{merge:o}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=cb(t.bind)&&t.bind.legend,o=s=>a=>{const u=ce(a);return u.markname=s,u};for(const s of t.project.items){if(!s.hasLegend)continue;const a=`${Ze(s.field)}_legend`,u=`${r}_${a}`;if(n.filter(c=>c.name===u).length===0){const c=i.merge.map(o(`${a}_symbols`)).concat(i.merge.map(o(`${a}_labels`))).concat(i.merge.map(o(`${a}_entries`)));n.unshift({name:u,...t.init?{}:{value:null},on:[{events:c,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${u}`,force:!0}]})}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,o=n.find(d=>d.name===r+Aa),s=r+mg,a=i.items.filter(d=>d.hasLegend).map(d=>Ze(`${r}_${Ze(d.field)}_legend`)),l=`${a.map(d=>`${d} !== null`).join(" && ")} ? {fields: ${s}, values: [${a.join(", ")}]} : null`;t.events&&a.length>0?o.on.push({events:a.map(d=>({signal:d})),update:l}):a.length>0&&(o.update=l,delete o.value,delete o.on);const c=n.find(d=>d.name===r+oy),f=cb(t.bind)&&t.bind.legend;return c&&(t.events?c.on.push({...c.on[0],events:f}):c.on[0].events=f),n}};function Gve(e,t,n){var i;const r=(i=e.fieldDef(t))==null?void 0:i.field;for(const o of Gt(e.component.selection??{})){const s=o.project.hasField[r]??o.project.hasChannel[t];if(s&&OU.defined(o)){const a=n.get("selections")??[];a.push(o.name),n.set("selections",a,!1),s.hasLegend=!0}}}const DU="_translate_anchor",RU="_translate_delta",Vve={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const r=t.name,i=rs.defined(t),o=r+DU,{x:s,y:a}=t.project.hasChannel;let u=Ia(t.translate,"scope");return i||(u=u.map(l=>(l.between[0].markname=r+Cc,l))),n.push({name:o,value:{},on:[{events:u.map(l=>l.between[0]),update:"{x: x(unit), y: y(unit)"+(s!==void 0?`, extent_x: ${i?ES(e,et):`slice(${s.signals.visual})`}`:"")+(a!==void 0?`, extent_y: ${i?ES(e,Dt):`slice(${a.signals.visual})`}`:"")+"}"}]},{name:r+RU,value:{},on:[{events:u,update:`{x: ${o}.x - x(unit), y: ${o}.y - y(unit)}`}]}),s!==void 0&&qD(e,t,s,"width",n),a!==void 0&&qD(e,t,a,"height",n),n}};function qD(e,t,n,r,i){const o=t.name,s=o+DU,a=o+RU,u=n.channel,l=rs.defined(t),c=i.filter(w=>w.name===n.signals[l?"data":"visual"])[0],f=e.getSizeSignalRef(r).signal,d=e.getScaleComponent(u),h=d&&d.get("type"),p=d&&d.get("reverse"),g=l?u===et?p?"":"-":p?"-":"":"",m=`${s}.extent_${u}`,y=`${g}${a}.${u} / ${l?`${f}`:`span(${m})`}`,v=!l||!d?"panLinear":h==="log"?"panLog":h==="symlog"?"panSymlog":h==="pow"?"panPow":"panLinear",x=l?h==="pow"?`, ${d.get("exponent")??1}`:h==="symlog"?`, ${d.get("constant")??1}`:"":"",b=`${v}(${m}, ${y}${x})`;c.on.push({events:{signal:a},update:l?b:`clampRange(${b}, 0, ${f})`})}const PU="_zoom_anchor",LU="_zoom_delta",Yve={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=rs.defined(t),o=r+LU,{x:s,y:a}=t.project.hasChannel,u=G(e.scaleName(et)),l=G(e.scaleName(Dt));let c=Ia(t.zoom,"scope");return i||(c=c.map(f=>(f.markname=r+Cc,f))),n.push({name:r+PU,on:[{events:c,update:i?"{"+[u?`x: invert(${u}, x(unit))`:"",l?`y: invert(${l}, y(unit))`:""].filter(f=>f).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:o,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),s!==void 0&&HD(e,t,s,"width",n),a!==void 0&&HD(e,t,a,"height",n),n}};function HD(e,t,n,r,i){const o=t.name,s=n.channel,a=rs.defined(t),u=i.filter(v=>v.name===n.signals[a?"data":"visual"])[0],l=e.getSizeSignalRef(r).signal,c=e.getScaleComponent(s),f=c&&c.get("type"),d=a?ES(e,s):u.name,h=o+LU,p=`${o}${PU}.${s}`,g=!a||!c?"zoomLinear":f==="log"?"zoomLog":f==="symlog"?"zoomSymlog":f==="pow"?"zoomPow":"zoomLinear",m=a?f==="pow"?`, ${c.get("exponent")??1}`:f==="symlog"?`, ${c.get("constant")??1}`:"":"",y=`${g}(${d}, ${p}, ${h}${m})`;u.on.push({events:{signal:h},update:a?y:`clampRange(${y}, 0, ${l})`})}const cl="_store",Aa="_tuple",Xve="_modify",zU="vlSelectionResolve",px=[Ave,$ve,_ve,NU,MU,rs,OU,Hve,Vve,Yve,TU];function Qve(e){let t=e.parent;for(;t&&!Si(t);)t=t.parent;return t}function Lu(e,{escape:t}={escape:!0}){let n=t?G(e.name):e.name;const r=Qve(e);if(r){const{facet:i}=r;for(const o of Pr)i[o]&&(n+=` + '__facet_${o}_' + (facet[${G(r.vgField(o))}])`)}return n}function R3(e){return Gt(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function IU(e,t){(Q(t.select)||!t.select.on)&&delete e.events,(Q(t.select)||!t.select.clear)&&delete e.clear,(Q(t.select)||!t.select.toggle)&&delete e.toggle}function SS(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...SS(e.object)),t.push(...SS(e.property))),t)}function BU(e){return e.object.type==="MemberExpression"?BU(e.object):e.object.name==="datum"}function jU(e){const t=ZC(e),n=new Set;return t.visit(r=>{r.type==="MemberExpression"&&BU(r)&&n.add(SS(r).slice(1).join("."))}),n}class qf extends Ie{clone(){return new qf(null,this.model,ce(this.filter))}constructor(t,n,r){super(t),this.model=n,this.filter=r,this.expr=sy(this.model,this.filter,this),this._dependentFields=jU(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function Kve(e,t){const n={},r=e.config.selection;if(!t||!t.length)return n;for(const i of t){const o=Ze(i.name),s=i.select,a=Q(s)?s:s.type,u=J(s)?ce(s):{type:a},l=r[a];for(const d in l)d==="fields"||d==="encodings"||(d==="mark"&&(u[d]={...l[d],...u[d]}),(u[d]===void 0||u[d]===!0)&&(u[d]=ce(l[d]??u[d])));const c=n[o]={...u,name:o,type:a,init:i.value,bind:i.bind,events:Q(u.on)?Ia(u.on,"scope"):K(ce(u.on))},f=ce(i);for(const d of px)d.defined(c)&&d.parse&&d.parse(e,c,f)}return n}function UU(e,t,n,r="datum"){const i=Q(t)?t:t.param,o=Ze(i),s=G(o+cl);let a;try{a=e.getSelectionComponent(o,i)}catch{return`!!${o}`}if(a.project.timeUnit){const d=n??e.component.data.raw,h=a.project.timeUnit.clone();d.parent?h.insertAsParentOf(d):d.parent=h}const u=a.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",l=a.resolve==="global"?")":`, ${G(a.resolve)})`,c=`${u}${s}, ${r}${l}`,f=`length(data(${s}))`;return t.empty===!1?`${f} && ${c}`:`!${f} || ${c}`}function WU(e,t,n){const r=Ze(t),i=n.encoding;let o=n.field,s;try{s=e.getSelectionComponent(r,t)}catch{return r}if(!i&&!o)o=s.project.items[0].field,s.project.items.length>1&&U(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${G(o)}.`);else if(i&&!o){const a=s.project.items.filter(u=>u.channel===i);!a.length||a.length>1?(o=s.project.items[0].field,U((a.length?"Multiple ":"No ")+`matching ${G(i)} encoding found for selection ${G(n.param)}. Using "field": ${G(o)}.`)):o=a[0].field}return`${s.name}[${G(Gr(o))}]`}function Jve(e,t){for(const[n,r]of _a(e.component.selection??{})){const i=e.getName(`lookup_${n}`);e.component.data.outputNodes[i]=r.materialized=new Mn(new qf(t,e,{param:n}),i,We.Lookup,e.component.data.outputNodeRefCounts)}}function sy(e,t,n){return _h(t,r=>Q(r)?r:D0e(r)?UU(e,r,n):sj(r))}function Zve(e,t){if(e)return I(e)&&!Rs(e)?e.map(n=>g3(n,t)).join(", "):e}function pb(e,t,n,r){var i,o;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(o=e.encode[t]).update??(o.update={}),e.encode[t].update[n]=r}function eh(e,t,n,r={header:!1}){var f,d;const{disable:i,orient:o,scale:s,labelExpr:a,title:u,zindex:l,...c}=e.combine();if(!i){for(const h in c){const p=P1e[h],g=c[h];if(p&&p!==t&&p!=="both")delete c[h];else if(gg(g)){const{condition:m,...y}=g,v=K(m),x=SD[h];if(x){const{vgProp:b,part:w}=x,S=[...v.map(E=>{const{test:_,...$}=E;return{test:sy(null,_),...$}}),y];pb(c,w,b,S),delete c[h]}else if(x===null){const b={signal:v.map(w=>{const{test:S,...E}=w;return`${sy(null,S)} ? ${aD(E)} : `}).join("")+aD(y)};c[h]=b}}else if(re(g)){const m=SD[h];if(m){const{vgProp:y,part:v}=m;pb(c,v,y,g),delete c[h]}}we(["labelAlign","labelBaseline"],h)&&c[h]===null&&delete c[h]}if(t==="grid"){if(!c.grid)return;if(c.encode){const{grid:h}=c.encode;c.encode={...h?{grid:h}:{}},Be(c.encode)&&delete c.encode}return{scale:s,orient:o,...c,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:ht(l,0)}}else{if(!r.header&&e.mainExtracted)return;if(a!==void 0){let p=a;(d=(f=c.encode)==null?void 0:f.labels)!=null&&d.update&&re(c.encode.labels.update.text)&&(p=nl(a,"datum.label",c.encode.labels.update.text.signal)),pb(c,"labels","text",{signal:p})}if(c.labelAlign===null&&delete c.labelAlign,c.encode){for(const p of zj)e.hasAxisPart(p)||delete c.encode[p];Be(c.encode)&&delete c.encode}const h=Zve(u,n);return{scale:s,orient:o,grid:!1,...h?{title:h}:{},...c,...n.aria===!1?{aria:!1}:{},zindex:ht(l,0)}}}}function qU(e){const{axes:t}=e.component,n=[];for(const r of Co)if(t[r]){for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const o=r==="x"?"height":"width",s=e.getSizeSignalRef(o).signal;o!==s&&n.push({name:o,update:s})}}return n}function exe(e,t){const{x:n=[],y:r=[]}=e;return[...n.map(i=>eh(i,"grid",t)),...r.map(i=>eh(i,"grid",t)),...n.map(i=>eh(i,"main",t)),...r.map(i=>eh(i,"main",t))].filter(i=>i)}function GD(e,t,n,r){return Object.assign.apply(null,[{},...e.map(i=>{if(i==="axisOrient"){const o=n==="x"?"bottom":"left",s=t[n==="x"?"axisBottom":"axisLeft"]||{},a=t[n==="x"?"axisTop":"axisRight"]||{},u=new Set([...j(s),...j(a)]),l={};for(const c of u.values())l[c]={signal:`${r.signal} === "${o}" ? ${ns(s[c])} : ${ns(a[c])}`};return l}return t[i]})])}function txe(e,t,n,r){const i=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:cj(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],o=e==="x"?"axisX":"axisY",s=re(n)?"axisOrient":`axis${ag(n)}`,a=[...i,...i.map(l=>o+l.substr(4))],u=["axis",s,o];return{vlOnlyAxisConfig:GD(a,r,e,n),vgAxisConfig:GD(u,r,e,n),axisConfigStyle:nxe([...u,...a],r)}}function nxe(e,t){var r;const n=[{}];for(const i of e){let o=(r=t[i])==null?void 0:r.style;if(o){o=K(o);for(const s of o)n.push(t.style[s])}}return Object.assign.apply(null,n)}function _S(e,t,n,r={}){var o;const i=jB(e,n,t);if(i!==void 0)return{configFrom:"style",configValue:i};for(const s of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((o=r[s])==null?void 0:o[e])!==void 0)return{configFrom:s,configValue:r[s][e]};return{}}const VD={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??rxe(n,e),gridScale:({model:e,channel:t})=>ixe(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||GU(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||HU(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??sxe(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??axe(t.type,n,W(t)&&!!t.timeUnit,W(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{const o=e==="x"?"width":e==="y"?"height":void 0,s=o?t.getSizeSignalRef(o):void 0;return n.tickCount??lxe({fieldOrDatumDef:r,scaleType:i,size:s,values:n.values})},tickMinStep:cxe,title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const r=VU(t,n);if(r!==void 0)return r;const i=t.typedFieldDef(n),o=n==="x"?"x2":"y2",s=t.fieldDef(o);return WB(i?[wD(i)]:[],W(s)?[wD(s)]:[])},values:({axis:e,fieldOrDatumDef:t})=>fxe(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??dxe(n,t)};function rxe(e,t){return!Pt(e)&&W(t)&&!Ge(t==null?void 0:t.bin)&&!jt(t==null?void 0:t.bin)}function ixe(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function oxe(e,t,n,r,i){const o=t==null?void 0:t.labelAngle;if(o!==void 0)return re(o)?o:mp(o);{const{configValue:s}=_S("labelAngle",r,t==null?void 0:t.style,i);return s!==void 0?mp(s):n===et&&we([i3,r3],e.type)&&!(W(e)&&e.timeUnit)?270:void 0}}function kS(e){return`(((${e.signal} % 360) + 360) % 360)`}function HU(e,t,n,r){if(e!==void 0)if(n==="x"){if(re(e)){const i=kS(e),o=re(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${o} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(re(t)){const i=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${i} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(re(e)){const i=kS(e),o=re(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${o} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(re(t)){const i=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function GU(e,t,n){if(e===void 0)return;const r=n==="x",i=r?0:90,o=r?"bottom":"left";if(re(e)){const s=kS(e),a=re(t)?`(${t.signal} === "${o}")`:t===o;return{signal:`(${i?`(${s} + 90)`:s} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${s} && ${s} < ${180+i}) === ${a} ? "left" : "right"`}}if((e+i)%180===0)return r?null:"center";if(re(t)){const s=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${s} "${o}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===o)?"left":"right"}function sxe(e,t){if(t==="x"&&we(["quantitative","temporal"],e))return!0}function axe(e,t,n,r){if(n&&!J(r)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function uxe(e){return e==="x"?"bottom":"left"}function lxe({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){var i;if(!r&&!Pt(t)&&t!=="log"){if(W(e)){if(Ge(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&we(["month","hours","day","quarter"],(i=Xt(e.timeUnit))==null?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function cxe({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(W(t)){const{timeUnit:n}=t;if(n){const r=ij(n);if(r)return{signal:r}}}}function VU(e,t){const n=t==="x"?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),o=r?r.title:void 0,s=i?i.title:void 0;if(o&&s)return qB(o,s);if(o)return o;if(s)return s;if(o!==void 0)return o;if(s!==void 0)return s}function fxe(e,t){const n=e.values;if(I(n))return Lj(t,n);if(re(n))return n}function dxe(e,t){return e==="rect"&&J1(t)?1:0}class mf extends Ie{clone(){return new mf(null,ce(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=jU(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((r,i)=>{if(Al(r)&&$j(r.sort)){const{field:o,timeUnit:s}=r,a=r.sort,u=a.map((l,c)=>`${sj({field:o,timeUnit:s,equal:l})} ? ${c} : `).join("")+a.length;t=new mf(t,{calculate:u,as:yf(r,i,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${be(this.transform)}`}}function yf(e,t,n){return Y(e,{prefix:t,suffix:"sort_index",...n??{}})}function gx(e,t){return we(["top","bottom"],t)?"column":we(["left","right"],t)||e==="row"?"row":"column"}function vf(e,t,n,r){const i=r==="row"?n.headerRow:r==="column"?n.headerColumn:n.headerFacet;return ht((t||{})[e],i[e],n.header[e])}function mx(e,t,n,r){const i={};for(const o of e){const s=vf(o,t||{},n,r);s!==void 0&&(i[o]=s)}return i}const P3=["row","column"],L3=["header","footer"];function hxe(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:o,titleAngle:s,titleOrient:a}=mx(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),u=gx(t,a),l=mp(s);return{name:`${t}-title`,type:"group",role:`${u}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...XU(l,u),...YU(u,l,o),...QU(r,i,t,iye,eU)}}}function YU(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=GU(t,e==="row"?"left":"top",e==="row"?"y":"x");return r?{align:r}:{}}function XU(e,t){const n=HU(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function pxe(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of L3)if(n[i])for(const o of n[i]){const s=mxe(e,t,i,n,o);s!=null&&r.push(s)}return r}function gxe(e,t){const{sort:n}=e;return io(n)?{field:Y(n,{expr:"datum"}),order:n.order??"ascending"}:I(n)?{field:yf(e,t,{expr:"datum"}),order:"ascending"}:{field:Y(e,{expr:"datum"}),order:n??"ascending"}}function $S(e,t,n){const{format:r,formatType:i,labelAngle:o,labelAnchor:s,labelOrient:a,labelExpr:u}=mx(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),l=f3({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,c=gx(t,a);return{text:{signal:u?nl(nl(u,"datum.label",l),"datum.value",Y(e,{expr:"parent"})):l},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...XU(o,c),...YU(c,o,s),...QU(n,e,t,oye,tU)}}function mxe(e,t,n,r,i){if(i){let o=null;const{facetFieldDef:s}=r,a=e.config?e.config:void 0;if(s&&i.labels){const{labelOrient:f}=mx(["labelOrient"],s.header,a,t);(t==="row"&&!we(["top","bottom"],f)||t==="column"&&!we(["left","right"],f))&&(o=$S(s,t,a))}const u=Si(e)&&!dg(e.facet),l=i.axes,c=(l==null?void 0:l.length)>0;if(o||c){const f=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:gxe(s,t)}:{},...c&&u?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...o?{title:o}:{},...i.sizeSignal?{encode:{update:{[f]:i.sizeSignal}}}:{},...c?{axes:l}:{}}}}return null}const yxe={column:{start:0,end:1},row:{start:1,end:0}};function vxe(e,t){return yxe[t][e]}function xxe(e,t){const n={};for(const r of Pr){const i=e[r];if(i!=null&&i.facetFieldDef){const{titleAnchor:o,titleOrient:s}=mx(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),a=gx(r,s),u=vxe(o,a);u!==void 0&&(n[a]=u)}}return Be(n)?void 0:n}function QU(e,t,n,r,i){const o={};for(const s of r){if(!i[s])continue;const a=vf(s,t==null?void 0:t.header,e,n);a!==void 0&&(o[i[s]]=a)}return o}function z3(e){return[...hm(e,"width"),...hm(e,"height"),...hm(e,"childWidth"),...hm(e,"childHeight")]}function hm(e,t){const n=t==="width"?"x":"y",r=e.component.layoutSize.get(t);if(!r||r==="merged")return[];const i=e.getSizeSignalRef(t).signal;if(r==="step"){const o=e.getScaleComponent(n);if(o){const s=o.get("type"),a=o.get("range");if(Pt(s)&&Ga(a)){const u=e.scaleName(n);return Si(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[YD(u,a)]:[YD(u,a),{name:i,update:KU(u,o,`domain('${u}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(r=="container"){const o=i.endsWith("width"),s=o?"containerSize()[0]":"containerSize()[1]",a=vS(e.config.view,o?"width":"height"),u=`isFinite(${s}) ? ${s} : ${a}`;return[{name:i,init:u,on:[{update:u,events:"window:resize"}]}]}else return[{name:i,value:r}]}function YD(e,t){const n=`${e}_step`;return re(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function KU(e,t,n){const r=t.get("type"),i=t.get("padding"),o=ht(t.get("paddingOuter"),i);let s=t.get("paddingInner");return s=r==="band"?s!==void 0?s:i:1,`bandspace(${n}, ${ns(s)}, ${ns(o)}) * ${e}_step`}function JU(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function ZU(e,t){return j(e).reduce((n,r)=>{const i=e[r];return{...n,...Wf(t,i,r,o=>Xe(o.value))}},{})}function eW(e,t){if(Si(t))return e==="theta"?"independent":"shared";if(Vf(t))return"shared";if(H3(t))return Rt(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function I3(e,t){const n=e.scale[t],r=Rt(t)?"axis":"legend";return n==="independent"?(e[r][t]==="shared"&&U(r0e(t)),"independent"):e[r][t]||"shared"}const bxe={...uye,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},tW=j(bxe);class wxe extends Ss{}const XD={symbols:Exe,gradient:Sxe,labels:_xe,entries:kxe};function Exe(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:o}){if(o!=="symbol")return;const{markDef:s,encoding:a,config:u,mark:l}=n,c=s.filled&&l!=="trail";let f={...hme({},n,o1e),...CU(n,{filled:c})};const d=i.get("symbolOpacity")??u.legend.symbolOpacity,h=i.get("symbolFillColor")??u.legend.symbolFillColor,p=i.get("symbolStrokeColor")??u.legend.symbolStrokeColor,g=d===void 0?nW(a.opacity)??s.opacity:void 0;if(f.fill){if(r==="fill"||c&&r===or)delete f.fill;else if(f.fill.field)h?delete f.fill:(f.fill=Xe(u.legend.symbolBaseFillColor??"black"),f.fillOpacity=Xe(g??1));else if(I(f.fill)){const m=CS(a.fill??a.color)??s.fill??(c&&s.color);m&&(f.fill=Xe(m))}}if(f.stroke){if(r==="stroke"||!c&&r===or)delete f.stroke;else if(f.stroke.field||p)delete f.stroke;else if(I(f.stroke)){const m=ht(CS(a.stroke||a.color),s.stroke,c?s.color:void 0);m&&(f.stroke={value:m})}}if(r!==bs){const m=W(t)&&iW(n,i,t);m?f.opacity=[{test:m,...Xe(g??1)},Xe(u.legend.unselectedOpacity)]:g&&(f.opacity=Xe(g))}return f={...f,...e},Be(f)?void 0:f}function Sxe(e,{model:t,legendType:n,legendCmpt:r}){if(n!=="gradient")return;const{config:i,markDef:o,encoding:s}=t;let a={};const l=(r.get("gradientOpacity")??i.legend.gradientOpacity)===void 0?nW(s.opacity)||o.opacity:void 0;return l&&(a.opacity=Xe(l)),a={...a,...e},Be(a)?void 0:a}function _xe(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const o=n.legend(r)||{},s=n.config,a=W(t)?iW(n,i,t):void 0,u=a?[{test:a,value:1},{value:s.legend.unselectedOpacity}]:void 0,{format:l,formatType:c}=o;let f;ul(c)?f=yi({fieldOrDatumDef:t,field:"datum.value",format:l,formatType:c,config:s}):l===void 0&&c===void 0&&s.customFormatTypes&&(t.type==="quantitative"&&s.numberFormatType?f=yi({fieldOrDatumDef:t,field:"datum.value",format:s.numberFormat,formatType:s.numberFormatType,config:s}):t.type==="temporal"&&s.timeFormatType&&W(t)&&t.timeUnit===void 0&&(f=yi({fieldOrDatumDef:t,field:"datum.value",format:s.timeFormat,formatType:s.timeFormatType,config:s})));const d={...u?{opacity:u}:{},...f?{text:f}:{},...e};return Be(d)?void 0:d}function kxe(e,{legendCmpt:t}){const n=t.get("selections");return n!=null&&n.length?{...e,fill:{value:"transparent"}}:e}function nW(e){return rW(e,(t,n)=>Math.max(t,n.value))}function CS(e){return rW(e,(t,n)=>ht(t,n.value))}function rW(e,t){if(_1e(e))return K(e.condition).reduce(t,e.value);if(Ai(e))return e.value}function iW(e,t,n){const r=t.get("selections");if(!(r!=null&&r.length))return;const i=G(n.field);return r.map(o=>`(!length(data(${G(Ze(o)+cl)})) || (${o}[${i}] && indexof(${o}[${i}], datum.value) >= 0))`).join(" || ")}const QD={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return Ej(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return Sj(r,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??Nxe(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??Oxe(n),symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>e.symbolType??Cxe(t.type,n,r.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>$c(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(kc(n)&&mi(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>$xe(t,e)};function $xe(e,t){const n=e.values;if(I(n))return Lj(t,n);if(re(n))return n}function Cxe(e,t,n,r){if(t!=="shape"){const i=CS(n)??r;if(i)return i}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function Axe(e){const{legend:t}=e;return ht(t.type,Fxe(e))}function Fxe({channel:e,timeUnit:t,scaleType:n}){if(kc(e)){if(we(["quarter","month","day"],t))return"symbol";if(mi(n))return"gradient"}return"symbol"}function Txe({legendConfig:e,legendType:t,orient:n,legend:r}){return r.direction??e[t?"gradientDirection":"symbolDirection"]??Mxe(n,t)}function Mxe(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function Nxe({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:o,gradientHorizontalMinLength:s,gradientVerticalMaxLength:a,gradientVerticalMinLength:u}=e;if(mi(i))return n==="horizontal"?r==="top"||r==="bottom"?KD(t,"width",s,o):s:KD(t,"height",u,a)}function KD(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function Oxe(e){if(we(["quantile","threshold","log","symlog"],e))return"greedy"}function oW(e){const t=dt(e)?Dxe(e):zxe(e);return e.component.legends=t,t}function Dxe(e){const{encoding:t}=e,n={};for(const r of[or,...rU]){const i=wt(t[r]);!i||!e.getScaleComponent(r)||r===sr&&W(i)&&i.type===Uf||(n[r]=Lxe(e,r))}return n}function Rxe(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function Pxe(e,t,n,r){switch(t){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(t==="title"&&e===(r==null?void 0:r.title))return!0}return e===(n||{})[t]}function Lxe(e,t){var b;let n=e.legend(t);const{markDef:r,encoding:i,config:o}=e,s=o.legend,a=new wxe({},Rxe(e,t));Gve(e,t,a);const u=n!==void 0?!n:s.disable;if(a.set("disable",u,n!==void 0),u)return a;n=n||{};const l=e.getScaleComponent(t).get("type"),c=wt(i[t]),f=W(c)?(b=Xt(c.timeUnit))==null?void 0:b.unit:void 0,d=n.orient||o.legend.orient||"right",h=Axe({legend:n,channel:t,timeUnit:f,scaleType:l}),p=Txe({legend:n,legendType:h,orient:d,legendConfig:s}),g={legend:n,channel:t,model:e,markDef:r,encoding:i,fieldOrDatumDef:c,legendConfig:s,config:o,scaleType:l,orient:d,legendType:h,direction:p};for(const w of tW){if(h==="gradient"&&w.startsWith("symbol")||h==="symbol"&&w.startsWith("gradient"))continue;const S=w in QD?QD[w](g):n[w];if(S!==void 0){const E=Pxe(S,w,n,e.fieldDef(t));(E||o.legend[w]===void 0)&&a.set(w,S,E)}}const m=(n==null?void 0:n.encoding)??{},y=a.get("selections"),v={},x={fieldOrDatumDef:c,model:e,channel:t,legendCmpt:a,legendType:h};for(const w of["labels","legend","title","symbols","gradient","entries"]){const S=ZU(m[w]??{},e),E=w in XD?XD[w](S,x):S;E!==void 0&&!Be(E)&&(v[w]={...y!=null&&y.length&&W(c)?{name:`${Ze(c.field)}_legend_${w}`}:{},...y!=null&&y.length?{interactive:!!y}:{},update:E})}return Be(v)||a.set("encode",v,!!(n!=null&&n.encoding)),a}function zxe(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){oW(r);for(const i of j(r.component.legends))n.legend[i]=I3(e.component.resolve,i),n.legend[i]==="shared"&&(t[i]=sW(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of j(t))for(const i of e.children)i.component.legends[r]&&n.legend[r]==="shared"&&delete i.component.legends[r];return t}function sW(e,t){var o,s,a,u;if(!e)return t.clone();const n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(n.explicit&&r.explicit&&n.value!==r.value)return;let i=!1;for(const l of tW){const c=$a(e.getWithExplicit(l),t.getWithExplicit(l),l,"legend",(f,d)=>{switch(l){case"symbolType":return Ixe(f,d);case"title":return HB(f,d);case"type":return i=!0,cr("symbol")}return dx(f,d,l,"legend")});e.setWithExplicit(l,c)}return i&&((s=(o=e.implicit)==null?void 0:o.encode)!=null&&s.gradient&&G1(e.implicit,["encode","gradient"]),(u=(a=e.explicit)==null?void 0:a.encode)!=null&&u.gradient&&G1(e.explicit,["encode","gradient"])),e}function Ixe(e,t){return t.value==="circle"?t:e}function Bxe(e,t,n,r){var i,o;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(o=e.encode[t]).update??(o.update={}),e.encode[t].update[n]=r}function aW(e){const t=e.component.legends,n={};for(const i of j(t)){const o=e.getScaleComponent(i),s=He(o.get("domains"));if(n[s])for(const a of n[s])sW(a,t[i])||n[s].push(t[i]);else n[s]=[t[i].clone()]}return Gt(n).flat().map(i=>jxe(i,e.config)).filter(i=>i!==void 0)}function jxe(e,t){var s,a,u;const{disable:n,labelExpr:r,selections:i,...o}=e.combine();if(!n){if(t.aria===!1&&o.aria==null&&(o.aria=!1),(s=o.encode)!=null&&s.symbols){const l=o.encode.symbols.update;l.fill&&l.fill.value!=="transparent"&&!l.stroke&&!o.stroke&&(l.stroke={value:"transparent"});for(const c of rU)o[c]&&delete l[c]}if(o.title||delete o.title,r!==void 0){let l=r;(u=(a=o.encode)==null?void 0:a.labels)!=null&&u.update&&re(o.encode.labels.update.text)&&(l=nl(r,"datum.label",o.encode.labels.update.text.signal)),Bxe(o,"labels","text",{signal:l})}return o}}function Uxe(e){return Vf(e)||H3(e)?Wxe(e):uW(e)}function Wxe(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),uW(e))}function uW(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map(s=>s.signal).join(", ")}]`},o=t.data.reduce((s,a)=>{const u=re(a)?a.signal:`data('${e.lookupDataSource(a)}')`;return we(s,u)||s.push(u),s},[]);if(o.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:r,size:i,fit:{signal:o.length>1?`[${o.join(", ")}]`:o[0]},...n}]}else return[{name:r,translate:{signal:"[width / 2, height / 2]"},...n}]}const qxe=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class lW extends Ss{constructor(t,n,r,i){super({...n},{name:t}),this.specifiedProjection=n,this.size=r,this.data=i,this.merged=!1}get isFit(){return!!this.data}}function cW(e){e.component.projection=dt(e)?Hxe(e):Yxe(e)}function Hxe(e){if(e.hasProjection){const t=Wn(e.specifiedProjection),n=!(t&&(t.scale!=null||t.translate!=null)),r=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=n?Gxe(e):void 0,o=new lW(e.projectionName(!0),{...Wn(e.config.projection)??{},...t??{}},r,i);return o.get("type")||o.set("type","equalEarth",!1),o}}function Gxe(e){const t=[],{encoding:n}=e;for(const r of[[Pi,Ri],[Vr,Li]])(wt(n[r[0]])||wt(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(sr)&&e.typedFieldDef(sr).type===Uf&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(We.Main)),t}function Vxe(e,t){const n=MA(qxe,i=>!!(!ae(e.explicit,i)&&!ae(t.explicit,i)||ae(e.explicit,i)&&ae(t.explicit,i)&&Ki(e.get(i),t.get(i))));if(Ki(e.size,t.size)){if(n)return e;if(Ki(e.explicit,{}))return t;if(Ki(t.explicit,{}))return e}return null}function Yxe(e){if(e.children.length===0)return;let t;for(const r of e.children)cW(r);const n=MA(e.children,r=>{const i=r.component.projection;if(i)if(t){const o=Vxe(t,i);return o&&(t=o),!!o}else return t=i,!0;else return!0});if(t&&n){const r=e.projectionName(!0),i=new lW(r,t.specifiedProjection,t.size,ce(t.data));for(const o of e.children){const s=o.component.projection;s&&(s.isFit&&i.data.push(...o.component.projection.data),o.renameProjection(s.get("name"),r),s.merged=!0)}return i}}function Xxe(e,t,n,r){if(pg(t,n)){const i=dt(e)?e.axis(n)??e.legend(n)??{}:{},o=Y(t,{expr:"datum"}),s=Y(t,{expr:"datum",binSuffix:"end"});return{formulaAs:Y(t,{binSuffix:"range",forAs:!0}),formula:fg(o,s,i.format,i.formatType,r)}}return{}}function fW(e,t){return`${LB(e)}_${t}`}function Qxe(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function B3(e,t,n){const r=sx(n,void 0)??{},i=fW(r,t);return e.getName(`${i}_bins`)}function Kxe(e){return"as"in e}function JD(e,t,n){let r,i;Kxe(e)?r=Q(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:r=[Y(e,{forAs:!0}),Y(e,{binSuffix:"end",forAs:!0})];const o={...sx(t,void 0)},s=fW(o,e.field),{signal:a,extentSignal:u}=Qxe(n,s);if(Xv(o.extent)){const c=o.extent;i=WU(n,c.param,c),delete o.extent}const l={bin:o,field:e.field,as:[r],...a?{signal:a}:{},...u?{extentSignal:u}:{},...i?{span:i}:{}};return{key:s,binComponent:l}}class so extends Ie{clone(){return new so(null,ce(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,o,s)=>{if(Dn(o)&&Ge(o.bin)){const{key:a,binComponent:u}=JD(o,o.bin,n);i[a]={...u,...i[a],...Xxe(n,o,s,n.config)}}return i},{});return Be(r)?null:new so(t,r)}static makeFromTransform(t,n,r){const{key:i,binComponent:o}=JD(n,n.bin,r);return new so(t,{[i]:o})}merge(t,n){for(const r of j(t.bins))r in this.bins?(n(t.bins[r].signal,this.bins[r].signal),this.bins[r].as=Ji([...this.bins[r].as,...t.bins[r].as],be)):this.bins[r]=t.bins[r];for(const r of t.children)t.removeChild(r),r.parent=this;t.remove()}producedFields(){return new Set(Gt(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(Gt(this.bins).map(t=>t.field))}hash(){return`Bin ${be(this.bins)}`}assemble(){return Gt(this.bins).flatMap(t=>{const n=[],[r,...i]=t.as,{extent:o,...s}=t.bin,a={type:"bin",field:Gr(t.field),as:r,signal:t.signal,...Xv(o)?{extent:null}:{extent:o},...t.span?{span:{signal:`span(${t.span})`}}:{},...s};!o&&t.extentSignal&&(n.push({type:"extent",field:Gr(t.field),signal:t.extentSignal}),a.extent={signal:t.extentSignal}),n.push(a);for(const u of i)for(let l=0;l<2;l++)n.push({type:"formula",expr:Y({field:r[l]},{expr:"datum"}),as:u[l]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function Jxe(e,t,n,r){var o;const i=dt(r)?r.encoding[$o(t)]:void 0;if(Dn(n)&&dt(r)&&Fj(n,i,r.markDef,r.config))e.add(Y(n,{})),e.add(Y(n,{suffix:"end"})),n.bin&&pg(n,t)&&e.add(Y(n,{binSuffix:"range"}));else if($B(t)){const s=kB(t);e.add(r.getName(s))}else e.add(Y(n));return Al(n)&&V0e((o=n.scale)==null?void 0:o.range)&&e.add(n.scale.range.field),e}function Zxe(e,t){for(const n of j(t)){const r=t[n];for(const i of j(r))n in e?e[n][i]=new Set([...e[n][i]??[],...r[i]]):e[n]={[i]:r[i]}}}class Ei extends Ie{clone(){return new Ei(null,new Set(this.dimensions),ce(this.measures))}constructor(t,n,r){super(t),this.dimensions=n,this.measures=r}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let r=!1;n.forEachFieldDef(s=>{s.aggregate&&(r=!0)});const i={},o=new Set;return!r||(n.forEachFieldDef((s,a)=>{const{aggregate:u,field:l}=s;if(u)if(u==="count")i["*"]??(i["*"]={}),i["*"].count=new Set([Y(s,{forAs:!0})]);else{if(ds(u)||Ha(u)){const c=ds(u)?"argmin":"argmax",f=u[c];i[f]??(i[f]={}),i[f][c]=new Set([Y({op:c,field:f},{forAs:!0})])}else i[l]??(i[l]={}),i[l][u]=new Set([Y(s,{forAs:!0})]);ws(a)&&n.scaleDomain(a)==="unaggregated"&&(i[l]??(i[l]={}),i[l].min=new Set([Y({field:l,aggregate:"min"},{forAs:!0})]),i[l].max=new Set([Y({field:l,aggregate:"max"},{forAs:!0})]))}else Jxe(o,a,s,n)}),o.size+j(i).length===0)?null:new Ei(t,o,i)}static makeFromTransform(t,n){const r=new Set,i={};for(const o of n.aggregate){const{op:s,field:a,as:u}=o;s&&(s==="count"?(i["*"]??(i["*"]={}),i["*"].count=new Set([u||Y(o,{forAs:!0})])):(i[a]??(i[a]={}),i[a][s]=new Set([u||Y(o,{forAs:!0})])))}for(const o of n.groupby??[])r.add(o);return r.size+j(i).length===0?null:new Ei(t,r,i)}merge(t){return yB(this.dimensions,t.dimensions)?(Zxe(this.measures,t.measures),!0):(x0e("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...j(this.measures)])}producedFields(){const t=new Set;for(const n of j(this.measures))for(const r of j(this.measures[n])){const i=this.measures[n][r];i.size===0?t.add(`${r}_${n}`):i.forEach(t.add,t)}return t}hash(){return`Aggregate ${be({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],r=[];for(const o of j(this.measures))for(const s of j(this.measures[o]))for(const a of this.measures[o][s])r.push(a),t.push(s),n.push(o==="*"?null:Gr(o));return{type:"aggregate",groupby:[...this.dimensions].map(Gr),ops:t,fields:n,as:r}}}class Hf extends Ie{constructor(t,n,r,i){super(t),this.model=n,this.name=r,this.data=i;for(const o of Pr){const s=n.facet[o];if(s){const{bin:a,sort:u}=s;this[o]={name:n.getName(`${o}_domain`),fields:[Y(s),...Ge(a)?[Y(s,{binSuffix:"end"})]:[]],...io(u)?{sortField:u}:I(u)?{sortIndexField:yf(s,o)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of Pr)this[n]&&(t+=` ${n.charAt(0)}:${be(this[n])}`);return t}get fields(){var n;const t=[];for(const r of Pr)(n=this[r])!=null&&n.fields&&t.push(...this[r].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of Pr)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of Co){const r=this.childModel.component.scales[n];if(r&&!r.merged){const i=r.get("type"),o=r.get("range");if(Pt(i)&&Ga(o)){const s=yx(this.childModel,n),a=q3(s);a?t[n]=a:U(HA(n))}}}return t}assembleRowColumnHeaderData(t,n,r){const i={row:"y",column:"x",facet:void 0}[t],o=[],s=[],a=[];i&&r&&r[i]&&(n?(o.push(`distinct_${r[i]}`),s.push("max")):(o.push(r[i]),s.push("distinct")),a.push(`distinct_${r[i]}`));const{sortField:u,sortIndexField:l}=this[t];if(u){const{op:c=nx,field:f}=u;o.push(f),s.push(c),a.push(Y(u,{forAs:!0}))}else l&&(o.push(l),s.push("max"),a.push(l));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...o.length?{fields:o,ops:s,as:a}:{}}]}}assembleFacetHeaderData(t){var u;const{columns:n}=this.model.layout,{layoutHeaders:r}=this.model.component,i=[],o={};for(const l of P3){for(const c of L3){const f=(r[l]&&r[l][c])??[];for(const d of f)if(((u=d.axes)==null?void 0:u.length)>0){o[l]=!0;break}}if(o[l]){const c=`length(data("${this.facet.name}"))`,f=l==="row"?n?{signal:`ceil(${c} / ${n})`}:1:n?{signal:`min(${c}, ${n})`}:{signal:c};i.push({name:`${this.facet.name}_${l}`,transform:[{type:"sequence",start:0,stop:f}]})}}const{row:s,column:a}=o;return(s||a)&&i.unshift(this.assembleRowColumnHeaderData("facet",null,t)),i}assemble(){const t=[];let n=null;const r=this.getChildIndependentFieldsWithStep(),{column:i,row:o,facet:s}=this;if(i&&o&&(r.x||r.y)){n=`cross_${this.column.name}_${this.row.name}`;const a=[].concat(r.x??[],r.y??[]),u=a.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:a,ops:u}]})}for(const a of[ts,es])this[a]&&t.push(this.assembleRowColumnHeaderData(a,n,r));if(s){const a=this.assembleFacetHeaderData(r);a&&t.push(...a)}return t}}function ZD(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function e2e(e,t){const n=DA(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const r=ZD(t.slice(5,t.length));return`timeParse(${n},'${r}')`}else if(t.startsWith("utc:")){const r=ZD(t.slice(4,t.length));return`utcParse(${n},'${r}')`}else return U($me(t)),null}function t2e(e){const t={};return r0(e.filter,n=>{if(oj(n)){let r=null;XA(n)?r=pr(n.equal):KA(n)?r=pr(n.lte):QA(n)?r=pr(n.lt):JA(n)?r=pr(n.gt):ZA(n)?r=pr(n.gte):e3(n)?r=n.range[0]:t3(n)&&(r=(n.oneOf??n.in)[0]),r&&(Cl(r)?t[n.field]="date":ze(r)?t[n.field]="number":Q(r)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function n2e(e){const t={};function n(r){hf(r)?t[r.field]="date":r.type==="quantitative"&&ime(r.aggregate)?t[r.field]="number":sf(r.field)>1?r.field in t||(t[r.field]="flatten"):Al(r)&&io(r.sort)&&sf(r.sort.field)>1&&(r.sort.field in t||(t[r.sort.field]="flatten"))}if((dt(e)||Si(e))&&e.forEachFieldDef((r,i)=>{if(Dn(r))n(r);else{const o=kl(i),s=e.fieldDef(o);n({...r,type:s.type})}}),dt(e)){const{mark:r,markDef:i,encoding:o}=e;if(Va(r)&&!e.encoding.order){const s=i.orient==="horizontal"?"y":"x",a=o[s];W(a)&&a.type==="quantitative"&&!(a.field in t)&&(t[a.field]="number")}}return t}function r2e(e){const t={};if(dt(e)&&e.component.selection)for(const n of j(e.component.selection)){const r=e.component.selection[n];for(const i of r.project.items)!i.channel&&sf(i.field)>1&&(t[i.field]="flatten")}return t}class cn extends Ie{clone(){return new cn(null,ce(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${be(this._parse)}`}static makeExplicit(t,n,r){var s;let i={};const o=n.data;return!ca(o)&&((s=o==null?void 0:o.format)!=null&&s.parse)&&(i=o.format.parse),this.makeWithAncestors(t,i,{},r)}static makeWithAncestors(t,n,r,i){for(const a of j(r)){const u=i.getWithExplicit(a);u.value!==void 0&&(u.explicit||u.value===r[a]||u.value==="derived"||r[a]==="flatten"?delete r[a]:U(hD(a,r[a],u.value)))}for(const a of j(n)){const u=i.get(a);u!==void 0&&(u===n[a]?delete n[a]:U(hD(a,n[a],u)))}const o=new Ss(n,r);i.copyAll(o);const s={};for(const a of j(o.combine())){const u=o.get(a);u!==null&&(s[a]=u)}return j(s).length===0||i.parseNothing?null:new cn(t,s)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of j(this._parse)){const r=this._parse[n];sf(n)===1&&(t[n]=r)}return t}producedFields(){return new Set(j(this._parse))}dependentFields(){return new Set(j(this._parse))}assembleTransforms(t=!1){return j(this._parse).filter(n=>t?sf(n)>1:!0).map(n=>{const r=e2e(n,this._parse[n]);return r?{type:"formula",expr:r,as:RA(n)}:null}).filter(n=>n!==null)}}class Fa extends Ie{clone(){return new Fa(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([Fi])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:Fi}}}class yg extends Ie{clone(){return new yg(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${be(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class vg extends Ie{clone(){return new vg(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${be(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class fl extends Ie{constructor(t){super(null),t??(t={name:"source"});let n;if(ca(t)||(n=t.format?{...Jn(t.format,["parse"])}:{}),yp(t))this._data={values:t.values};else if(pf(t)){if(this._data={url:t.url},!n.type){let r=/(?:\.([^.]+))?$/.exec(t.url)[1];we(["json","csv","tsv","dsv","topojson"],r)||(r="json"),n.type=r}}else bU(t)?this._data={values:[{type:"Sphere"}]}:(vU(t)||ca(t))&&(this._data={});this._generator=ca(t),t.name&&(this._name=t.name),n&&!Be(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var e5=globalThis&&globalThis.__classPrivateFieldSet||function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},i2e=globalThis&&globalThis.__classPrivateFieldGet||function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},th;function j3(e){return e instanceof fl||e instanceof yg||e instanceof vg}class U3{constructor(){th.set(this,void 0),e5(this,th,!1,"f")}setModified(){e5(this,th,!0,"f")}get modifiedFlag(){return i2e(this,th,"f")}}th=new WeakMap;class Fl extends U3{getNodeDepths(t,n,r){r.set(t,n);for(const i of t.children)this.getNodeDepths(i,n+1,r);return r}optimize(t){const r=[...this.getNodeDepths(t,0,new Map).entries()].sort((i,o)=>o[1]-i[1]);for(const i of r)this.run(i[0]);return this.modifiedFlag}}class W3 extends U3{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class o2e extends W3{mergeNodes(t,n){const r=n.shift();for(const i of n)t.removeChild(i),i.parent=r,i.remove()}run(t){const n=t.children.map(i=>i.hash()),r={};for(let i=0;i<n.length;i++)r[n[i]]===void 0?r[n[i]]=[t.children[i]]:r[n[i]].push(t.children[i]);for(const i of j(r))r[i].length>1&&(this.setModified(),this.mergeNodes(t,r[i]))}}class s2e extends W3{constructor(t){super(),this.requiresSelectionId=t&&R3(t)}run(t){t instanceof Fa&&(this.requiresSelectionId&&(j3(t.parent)||t.parent instanceof Ei||t.parent instanceof cn)||(this.setModified(),t.remove()))}}class a2e extends U3{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let r=new Set;t instanceof oo&&(r=t.producedFields(),NA(r,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const i of t.children)this.run(i,new Set([...n,...r]))}}class u2e extends W3{constructor(){super()}run(t){t instanceof Mn&&!t.isRequired()&&(this.setModified(),t.remove())}}class l2e extends Fl{run(t){if(!j3(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof cn)if(t instanceof cn)this.setModified(),t.merge(n);else{if(OA(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class c2e extends Fl{run(t){const n=[...t.children],r=t.children.filter(i=>i instanceof cn);if(t.numChildren()>1&&r.length>=1){const i={},o=new Set;for(const s of r){const a=s.parse;for(const u of j(a))u in i?i[u]!==a[u]&&o.add(u):i[u]=a[u]}for(const s of o)delete i[s];if(!Be(i)){this.setModified();const s=new cn(t,i);for(const a of n){if(a instanceof cn)for(const u of j(i))delete a.parse[u];t.removeChild(a),a.parent=s,a instanceof cn&&j(a.parse).length===0&&a.remove()}}}}}class f2e extends Fl{run(t){t instanceof Mn||t.numChildren()>0||t instanceof Hf||t instanceof fl||(this.setModified(),t.remove())}}class d2e extends Fl{run(t){const n=t.children.filter(i=>i instanceof oo),r=n.pop();for(const i of n)this.setModified(),r.merge(i)}}class h2e extends Fl{run(t){const n=t.children.filter(i=>i instanceof Ei),r={};for(const i of n){const o=be(i.groupBy);o in r||(r[o]=[]),r[o].push(i)}for(const i of j(r)){const o=r[i];if(o.length>1){const s=o.pop();for(const a of o)s.merge(a)&&(t.removeChild(a),a.parent=s,a.remove(),this.setModified())}}}}class p2e extends Fl{constructor(t){super(),this.model=t}run(t){const n=!(j3(t)||t instanceof qf||t instanceof cn||t instanceof Fa),r=[],i=[];for(const o of t.children)o instanceof so&&(n&&!OA(t.producedFields(),o.dependentFields())?r.push(o):i.push(o));if(r.length>0){const o=r.pop();for(const s of r)o.merge(s,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof so?t.merge(o,this.model.renameSignal.bind(this.model)):o.swapWithParent()}if(i.length>1){const o=i.pop();for(const s of i)o.merge(s,this.model.renameSignal.bind(this.model));this.setModified()}}}class g2e extends Fl{run(t){const n=[...t.children];if(!tl(n,s=>s instanceof Mn)||t.numChildren()<=1)return;const i=[];let o;for(const s of n)if(s instanceof Mn){let a=s;for(;a.numChildren()===1;){const[u]=a.children;if(u instanceof Mn)a=u;else break}i.push(...a.children),o?(t.removeChild(s),s.parent=o.parent,o.parent.removeChild(o),o.parent=a,this.setModified()):o=a}else i.push(s);if(i.length){this.setModified();for(const s of i)s.parent.removeChild(s),s.parent=o}}}class Tl extends Ie{clone(){return new Tl(null,ce(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Ji(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??Y(t)}hash(){return`JoinAggregateTransform ${be(this.transform)}`}assemble(){const t=[],n=[],r=[];for(const o of this.transform.joinaggregate)n.push(o.op),r.push(this.getDefaultName(o)),t.push(o.field===void 0?null:o.field);const i=this.transform.groupby;return{type:"joinaggregate",as:r,ops:n,fields:t,...i!==void 0?{groupby:i}:{}}}}function m2e(e){return e.stack.stackBy.reduce((t,n)=>{const r=n.fieldDef,i=Y(r);return i&&t.push(i),t},[])}function y2e(e){return I(e)&&e.every(t=>Q(t))&&e.length>1}class is extends Ie{clone(){return new is(null,ce(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:r,groupby:i,as:o,offset:s="zero"}=n,a=[],u=[];if(n.sort!==void 0)for(const f of n.sort)a.push(f.field),u.push(ht(f.order,"ascending"));const l={field:a,order:u};let c;return y2e(o)?c=o:Q(o)?c=[o,`${o}_end`]:c=[`${n.stack}_start`,`${n.stack}_end`],new is(t,{dimensionFieldDefs:[],stackField:r,groupby:i,offset:s,sort:l,facetby:[],as:c})}static makeFromEncoding(t,n){const r=n.stack,{encoding:i}=n;if(!r)return null;const{groupbyChannels:o,fieldChannel:s,offset:a,impute:u}=r,l=o.map(h=>{const p=i[h];return go(p)}).filter(h=>!!h),c=m2e(n),f=n.encoding.order;let d;if(I(f)||W(f))d=UB(f);else{const h=Tj(f)?f.sort:s==="y"?"descending":"ascending";d=c.reduce((p,g)=>(p.field.push(g),p.order.push(h),p),{field:[],order:[]})}return new is(t,{dimensionFieldDefs:l,stackField:n.vgField(s),facetby:[],stackby:c,sort:d,offset:a,impute:u,as:[n.vgField(s,{suffix:"start",forAs:!0}),n.vgField(s,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${be(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:r}=this._stack;return t.length>0?t.map(i=>i.bin?n?[Y(i,{binSuffix:"mid"})]:[Y(i,{}),Y(i,{binSuffix:"end"})]:[Y(i)]).flat():r??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:r,stackField:i,stackby:o,sort:s,offset:a,impute:u,as:l}=this._stack;if(u)for(const c of r){const{bandPosition:f=.5,bin:d}=c;if(d){const h=Y(c,{expr:"datum"}),p=Y(c,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${f}*${h}+${1-f}*${p}`,as:Y(c,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:i,groupby:[...o,...n],key:Y(c,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:s,as:l,offset:a}),t}}class Gf extends Ie{clone(){return new Gf(null,ce(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Ji(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??Y(t)}hash(){return`WindowTransform ${be(this.transform)}`}assemble(){const t=[],n=[],r=[],i=[];for(const f of this.transform.window)n.push(f.op),r.push(this.getDefaultName(f)),i.push(f.param===void 0?null:f.param),t.push(f.field===void 0?null:f.field);const o=this.transform.frame,s=this.transform.groupby;if(o&&o[0]===null&&o[1]===null&&n.every(f=>WA(f)))return{type:"joinaggregate",as:r,ops:n,fields:t,...s!==void 0?{groupby:s}:{}};const a=[],u=[];if(this.transform.sort!==void 0)for(const f of this.transform.sort)a.push(f.field),u.push(f.order??"ascending");const l={field:a,order:u},c=this.transform.ignorePeers;return{type:"window",params:i,as:r,ops:n,fields:t,sort:l,...c!==void 0?{ignorePeers:c}:{},...s!==void 0?{groupby:s}:{},...o!==void 0?{frame:o}:{}}}}function v2e(e){function t(n){if(!(n instanceof Hf)){const r=n.clone();if(r instanceof Mn){const i=FS+r.getSource();r.setSource(i),e.model.component.data.outputNodes[i]=r}else(r instanceof Ei||r instanceof is||r instanceof Gf||r instanceof Tl)&&r.addDimensions(e.fields);for(const i of n.children.flatMap(t))i.parent=r;return[r]}return n.children.flatMap(t)}return t}function AS(e){if(e instanceof Hf)if(e.numChildren()===1&&!(e.children[0]instanceof Mn)){const t=e.children[0];(t instanceof Ei||t instanceof is||t instanceof Gf||t instanceof Tl)&&t.addDimensions(e.fields),t.swapWithParent(),AS(e)}else{const t=e.model.component.data.main;dW(t);const n=v2e(e),r=e.children.map(n).flat();for(const i of r)i.parent=t}else e.children.map(AS)}function dW(e){if(e instanceof Mn&&e.type===We.Main&&e.numChildren()===1){const t=e.children[0];t instanceof Hf||(t.swapWithParent(),dW(e))}}const FS="scale_",pm=5;function TS(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!TS(t.children))return!1}return!0}function Zr(e,t){let n=!1;for(const r of t)n=e.optimize(r)||n;return n}function t5(e,t,n){let r=e.sources,i=!1;return i=Zr(new u2e,r)||i,i=Zr(new s2e(t),r)||i,r=r.filter(o=>o.numChildren()>0),i=Zr(new f2e,r)||i,r=r.filter(o=>o.numChildren()>0),n||(i=Zr(new l2e,r)||i,i=Zr(new p2e(t),r)||i,i=Zr(new a2e,r)||i,i=Zr(new c2e,r)||i,i=Zr(new h2e,r)||i,i=Zr(new d2e,r)||i,i=Zr(new o2e,r)||i,i=Zr(new g2e,r)||i),e.sources=r,i}function x2e(e,t){TS(e.sources);let n=0,r=0;for(let i=0;i<pm&&t5(e,t,!0);i++)n++;e.sources.map(AS);for(let i=0;i<pm&&t5(e,t,!1);i++)r++;TS(e.sources),Math.max(n,r)===pm&&U(`Maximum optimization runs(${pm}) reached.`)}class er{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new er(()=>t(n))}}function hW(e){dt(e)?b2e(e):w2e(e)}function b2e(e){const t=e.component.scales;for(const n of j(t)){const r=S2e(e,n);if(t[n].setWithExplicit("domains",r),k2e(e,n),e.component.data.isFaceted){let o=e;for(;!Si(o)&&o.parent;)o=o.parent;if(o.component.resolve.scale[n]==="shared")for(const a of r.value)Yo(a)&&(a.data=FS+a.data.replace(FS,""))}}}function w2e(e){for(const n of e.children)hW(n);const t=e.component.scales;for(const n of j(t)){let r,i=null;for(const o of e.children){const s=o.component.scales[n];if(s){r===void 0?r=s.getWithExplicit("domains"):r=$a(r,s.getWithExplicit("domains"),"domains","scale",MS);const a=s.get("selectionExtent");i&&a&&i.param!==a.param&&U(Eme),i=a}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}function E2e(e,t,n,r){if(e==="unaggregated"){const{valid:i,reason:o}=n5(t,n);if(!i){U(o);return}}else if(e===void 0&&r.useUnaggregatedDomain){const{valid:i}=n5(t,n);if(i)return"unaggregated"}return e}function S2e(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=E2e(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:i}),t==="x"&&wt(r.x2)?wt(r.x)?$a(As(n,i,e,"x"),As(n,i,e,"x2"),"domain","scale",MS):As(n,i,e,"x2"):t==="y"&&wt(r.y2)?wt(r.y)?$a(As(n,i,e,"y"),As(n,i,e,"y2"),"domain","scale",MS):As(n,i,e,"y2"):As(n,i,e,t)}function _2e(e,t,n){return e.map(r=>({signal:`{data: ${ax(r,{timeUnit:n,type:t})}}`}))}function gb(e,t,n){var i;const r=(i=Xt(n))==null?void 0:i.unit;return t==="temporal"||r?_2e(e,t,r):[e]}function As(e,t,n,r){const{encoding:i}=n,o=wt(i[r]),{type:s}=o,a=o.timeUnit;if(G0e(t)){const f=As(e,void 0,n,r),d=gb(t.unionWith,s,a);return Hi([...d,...f.value])}else{if(re(t))return Hi([t]);if(t&&t!=="unaggregated"&&!dj(t))return Hi(gb(t,s,a))}const u=n.stack;if(u&&r===u.fieldChannel){if(u.offset==="normalize")return cr([[0,1]]);const f=n.requestDataName(We.Main);return cr([{data:f,field:n.vgField(r,{suffix:"start"})},{data:f,field:n.vgField(r,{suffix:"end"})}])}const l=ws(r)&&W(o)?$2e(n,r,e):void 0;if(Ao(o)){const f=gb([o.datum],s,a);return cr(f)}const c=o;if(t==="unaggregated"){const f=n.requestDataName(We.Main),{field:d}=o;return cr([{data:f,field:Y({field:d,aggregate:"min"})},{data:f,field:Y({field:d,aggregate:"max"})}])}else if(Ge(c.bin)){if(Pt(e))return cr(e==="bin-ordinal"?[]:[{data:gp(l)?n.requestDataName(We.Main):n.requestDataName(We.Raw),field:n.vgField(r,pg(c,r)?{binSuffix:"range"}:{}),sort:l===!0||!J(l)?{field:n.vgField(r,{}),op:"min"}:l}]);{const{bin:f}=c;if(Ge(f)){const d=B3(n,c.field,f);return cr([new er(()=>{const h=n.getSignalName(d);return`[${h}.start, ${h}.stop]`})])}else return cr([{data:n.requestDataName(We.Main),field:n.vgField(r,{})}])}}else if(c.timeUnit&&we(["time","utc"],e)&&Fj(c,dt(n)?n.encoding[$o(r)]:void 0,n.markDef,n.config)){const f=n.requestDataName(We.Main);return cr([{data:f,field:n.vgField(r)},{data:f,field:n.vgField(r,{suffix:"end"})}])}else return cr(l?[{data:gp(l)?n.requestDataName(We.Main):n.requestDataName(We.Raw),field:n.vgField(r),sort:l}]:[{data:n.requestDataName(We.Main),field:n.vgField(r)}])}function mb(e,t){const{op:n,field:r,order:i}=e;return{op:n??(t?"sum":nx),...r?{field:Gr(r)}:{},...i?{order:i}:{}}}function k2e(e,t){var a;const n=e.component.scales[t],r=e.specifiedScales[t].domain,i=(a=e.fieldDef(t))==null?void 0:a.bin,o=dj(r)&&r,s=$l(i)&&Xv(i.extent)&&i.extent;(o||s)&&n.set("selectionExtent",o??s,!0)}function $2e(e,t,n){if(!Pt(n))return;const r=e.fieldDef(t),i=r.sort;if($j(i))return{op:"min",field:yf(r,t),order:"ascending"};const{stack:o}=e,s=o?new Set([...o.groupbyFields,...o.stackBy.map(a=>a.fieldDef.field)]):void 0;if(io(i)){const a=o&&!s.has(i.field);return mb(i,a)}else if(kj(i)){const{encoding:a,order:u}=i,l=e.fieldDef(a),{aggregate:c,field:f}=l,d=o&&!s.has(f);if(ds(c)||Ha(c))return mb({field:Y(l),order:u},d);if(WA(c)||!c)return mb({op:c,field:f,order:u},d)}else{if(i==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(we(["ascending",void 0],i))return!0}}function n5(e,t){const{aggregate:n,type:r}=e;return n?Q(n)&&!sme.has(n)?{valid:!1,reason:Qme(n)}:r==="quantitative"&&t==="log"?{valid:!1,reason:Kme(e)}:{valid:!0}:{valid:!1,reason:Xme(e)}}function MS(e,t,n,r){return e.explicit&&t.explicit&&U(n0e(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function C2e(e){const t=Ji(e.map(s=>{if(Yo(s)){const{sort:a,...u}=s;return u}return s}),be),n=Ji(e.map(s=>{if(Yo(s)){const a=s.sort;return a!==void 0&&!gp(a)&&("op"in a&&a.op==="count"&&delete a.field,a.order==="ascending"&&delete a.order),a}}).filter(s=>s!==void 0),be);if(t.length===0)return;if(t.length===1){const s=e[0];if(Yo(s)&&n.length>0){let a=n[0];if(n.length>1){U(gD);const u=n.filter(l=>J(l)&&"op"in l&&l.op!=="min");n.every(l=>J(l)&&"op"in l)&&u.length===1?a=u[0]:a=!0}else if(J(a)&&"field"in a){const u=a.field;s.field===u&&(a=a.order?{order:a.order}:!0)}return{...s,sort:a}}return s}const r=Ji(n.map(s=>gp(s)||!("op"in s)||Q(s.op)&&s.op in nme?s:(U(i0e(s)),!0)),be);let i;r.length===1?i=r[0]:r.length>1&&(U(gD),i=!0);const o=Ji(e.map(s=>Yo(s)?s.data:null),s=>s);return o.length===1&&o[0]!==null?{data:o[0],fields:t.map(a=>a.field),...i?{sort:i}:{}}:{fields:t,...i?{sort:i}:{}}}function q3(e){if(Yo(e)&&Q(e.field))return e.field;if(ame(e)){let t;for(const n of e.fields)if(Yo(n)&&Q(n.field)){if(!t)t=n.field;else if(t!==n.field)return U(o0e),t}return U(s0e),t}else if(ume(e)){U(a0e);const t=e.fields[0];return Q(t)?t:void 0}}function yx(e,t){const r=e.component.scales[t].get("domains").map(i=>(Yo(i)&&(i.data=e.lookupDataSource(i.data)),i));return C2e(r)}function pW(e){return Vf(e)||H3(e)?e.children.reduce((t,n)=>t.concat(pW(n)),r5(e)):r5(e)}function r5(e){return j(e.component.scales).reduce((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:o,type:s,selectionExtent:a,domains:u,range:l,reverse:c,...f}=i,d=A2e(i.range,o,n,e),h=yx(e,n),p=a?Eve(e,a,r,h):null;return t.push({name:o,type:s,...h?{domain:h}:{},...p?{domainRaw:p}:{},range:d,...c!==void 0?{reverse:c}:{},...f}),t},[])}function A2e(e,t,n,r){if(Rt(n)){if(Ga(e))return{step:{signal:`${t}_step`}}}else if(J(e)&&Yo(e))return{...e,data:r.lookupDataSource(e.data)};return e}class gW extends Ss{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainDefinitelyIncludesZero(){return this.get("zero")!==!1?!0:tl(this.get("domains"),t=>I(t)&&t.length===2&&t[0]<=0&&t[1]>=0)}}const F2e=["range","scheme"];function T2e(e){const t=e.component.scales;for(const n of Yv){const r=t[n];if(!r)continue;const i=M2e(n,e);r.setWithExplicit("range",i)}}function i5(e,t){const n=e.fieldDef(t);if(n!=null&&n.bin){const{bin:r,field:i}=n,o=ar(t),s=e.getName(o);if(J(r)&&r.binned&&r.step!==void 0)return new er(()=>{const a=e.scaleName(t),u=`(domain("${a}")[1] - domain("${a}")[0]) / ${r.step}`;return`${e.getSignalName(s)} / (${u})`});if(Ge(r)){const a=B3(e,i,r);return new er(()=>{const u=e.getSignalName(a),l=`(${u}.stop - ${u}.start) / ${u}.step`;return`${e.getSignalName(s)} / (${l})`})}}}function M2e(e,t){const n=t.specifiedScales[e],{size:r}=t,o=t.getScaleComponent(e).get("type");for(const f of F2e)if(n[f]!==void 0){const d=pS(o,f),h=hj(e,f);if(!d)U(XB(o,f,e));else if(h)U(h);else switch(f){case"range":{const p=n.range;if(I(p)){if(Rt(e))return Hi(p.map(g=>{if(g==="width"||g==="height"){const m=t.getName(g),y=t.getSignalName.bind(t);return er.fromName(y,m)}return g}))}else if(J(p))return Hi({data:t.requestDataName(We.Main),field:p.field,sort:{op:"min",field:t.vgField(e)}});return Hi(p)}case"scheme":return Hi(N2e(n[f]))}}const s=e===et||e==="xOffset"?"width":"height",a=r[s];if(mo(a)){if(Rt(e))if(Pt(o)){const f=mW(a,t,e);if(f)return Hi({step:f})}else U(QB(s));else if(Bf(e)){const f=e===Ba?"x":"y";if(t.getScaleComponent(f).get("type")==="band"){const p=yW(a,o);if(p)return Hi(p)}}}const{rangeMin:u,rangeMax:l}=n,c=O2e(e,t);return(u!==void 0||l!==void 0)&&pS(o,"rangeMin")&&I(c)&&c.length===2?Hi([u??c[0],l??c[1]]):cr(c)}function N2e(e){return H0e(e)?{scheme:e.name,...Jn(e,["name"])}:{scheme:e}}function O2e(e,t){const{size:n,config:r,mark:i,encoding:o}=t,s=t.getSignalName.bind(t),{type:a}=wt(o[e]),l=t.getScaleComponent(e).get("type"),{domain:c,domainMid:f}=t.specifiedScales[e];switch(e){case et:case Dt:{if(we(["point","band"],l)){const p=vW(e,n,r.view);if(mo(p))return{step:mW(p,t,e)}}const d=ar(e),h=t.getName(d);return e===Dt&&kr(l)?[er.fromName(s,h),0]:[0,er.fromName(s,h)]}case Ba:case If:return D2e(e,t,l);case xs:{const d=t.component.scales[e].get("zero"),h=xW(i,d,r),p=L2e(i,n,t,r);return cf(l)?P2e(h,p,R2e(l,r,c,e)):[h,p]}case Xr:return[0,Math.PI*2];case _l:return[0,360];case Di:return[0,new er(()=>{const d=t.getSignalName("width"),h=t.getSignalName("height");return`min(${d},${h})/2`})];case Wa:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case qa:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case sr:return"symbol";case or:case _o:case ko:return l==="ordinal"?a==="nominal"?"category":"ordinal":f!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case bs:case ja:case Ua:return[r.scale.minOpacity,r.scale.maxOpacity]}}function mW(e,t,n){const{encoding:r}=t,i=t.getScaleComponent(n),o=IA(n),s=r[o];if(oU({step:e,offsetIsDiscrete:fe(s)&&aj(s.type)})==="offset"&&jj(r,o)){const u=t.getScaleComponent(o);let c=`domain('${t.scaleName(o)}').length`;if(u.get("type")==="band"){const d=u.get("paddingInner")??u.get("padding")??0,h=u.get("paddingOuter")??u.get("padding")??0;c=`bandspace(${c}, ${d}, ${h})`}const f=i.get("paddingInner")??i.get("padding");return{signal:`${e.step} * ${c} / (1-${dme(f)})`}}else return e.step}function yW(e,t){if(oU({step:e,offsetIsDiscrete:Pt(t)})==="offset")return{step:e.step}}function D2e(e,t,n){const r=e===Ba?"x":"y",o=t.getScaleComponent(r).get("type"),s=t.scaleName(r);if(o==="band"){const a=vW(r,t.size,t.config.view);if(mo(a)){const u=yW(a,n);if(u)return u}return[0,{signal:`bandwidth('${s}')`}]}else{const a=t.encoding[r];if(W(a)&&a.timeUnit){const u=ij(a.timeUnit,c=>`scale('${s}', ${c})`),l=t.config.scale.bandWithNestedOffsetPaddingInner;if(l){const c=re(l)?`${l.signal}/2`:`${l/2}`,f=re(l)?`(1 - ${l.signal}/2)`:`${1-l/2}`;return[{signal:`${c} * (${u})`},{signal:`${f} * (${u})`}]}return[0,{signal:u}]}return gB(`Cannot use ${e} scale if ${r} scale is not discrete.`)}}function vW(e,t,n){const r=e===et?"width":"height",i=t[r];return i||ry(n,r)}function R2e(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&I(n)?n.length+1:(U(m0e(r)),3)}}function P2e(e,t,n){const r=()=>{const i=ns(t),o=ns(e),s=`(${i} - ${o}) / (${n} - 1)`;return`sequence(${o}, ${i} + ${s}, ${s})`};return re(t)?new er(r):{signal:r()}}function xW(e,t,n){if(t)return re(t)?{signal:`${t.signal} ? 0 : ${xW(e,!1,n)}`}:0;switch(e){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error(Qv("size",e))}const o5=.95;function L2e(e,t,n,r){const i={x:i5(n,"x"),y:i5(n,"y")};switch(e){case"bar":case"tick":{if(r.scale.maxBandSize!==void 0)return r.scale.maxBandSize;const o=s5(t,i,r.view);return ze(o)?o-1:new er(()=>`${o.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const o=s5(t,i,r.view);return ze(o)?Math.pow(o5*o,2):new er(()=>`pow(${o5} * ${o.signal}, 2)`)}}throw new Error(Qv("size",e))}function s5(e,t,n){const r=mo(e.width)?e.width.step:ny(n,"width"),i=mo(e.height)?e.height.step:ny(n,"height");return t.x||t.y?new er(()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`):Math.min(r,i)}function bW(e,t){dt(e)?z2e(e,t):EW(e,t)}function z2e(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:o,specifiedScales:s}=e;for(const a of j(n)){const u=s[a],l=n[a],c=e.getScaleComponent(a),f=wt(i[a]),d=u[t],h=c.get("type"),p=c.get("padding"),g=c.get("paddingInner"),m=pS(h,t),y=hj(a,t);if(d!==void 0&&(m?y&&U(y):U(XB(h,t,a))),m&&y===void 0)if(d!==void 0){const v=f.timeUnit,x=f.type;switch(t){case"domainMax":case"domainMin":Cl(u[t])||x==="temporal"||v?l.set(t,{signal:ax(u[t],{type:x,timeUnit:v})},!0):l.set(t,u[t],!0);break;default:l.copyKeyFromObject(t,u)}}else{const v=t in a5?a5[t]({model:e,channel:a,fieldOrDatumDef:f,scaleType:h,scalePadding:p,scalePaddingInner:g,domain:u.domain,domainMin:u.domainMin,domainMax:u.domainMax,markDef:o,config:r,hasNestedOffsetScale:mS(i,a),hasSecondaryRangeChannel:!!i[$o(a)]}):r.scale[t];v!==void 0&&l.set(t,v,!1)}}}const a5={bins:({model:e,fieldOrDatumDef:t})=>W(t)?I2e(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>B2e(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:r,domainMax:i,fieldOrDatumDef:o})=>j2e(e,t,n,r,i,o),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>U2e(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:r,config:i,hasNestedOffsetScale:o})=>W2e(e,t,n.type,r,i.scale,o),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:r,config:i,hasNestedOffsetScale:o})=>q2e(e,t,n,r,i.scale,o),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>{const i=W(e)?e.sort:void 0;return H2e(t,i,n,r.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i,config:o,hasSecondaryRangeChannel:s})=>G2e(e,t,n,r,i,o.scale,s)};function wW(e){dt(e)?T2e(e):EW(e,"range")}function EW(e,t){const n=e.component.scales;for(const r of e.children)t==="range"?wW(r):bW(r,t);for(const r of j(n)){let i;for(const o of e.children){const s=o.component.scales[r];if(s){const a=s.getWithExplicit(t);i=$a(i,a,t,"scale",yU((u,l)=>{switch(t){case"range":return u.step&&l.step?u.step-l.step:0}return 0}))}}n[r].setWithExplicit(t,i)}}function I2e(e,t){const n=t.bin;if(Ge(n)){const r=B3(e,t.field,n);return new er(()=>e.getSignalName(r))}else if(jt(n)&&$l(n)&&n.step!==void 0)return{step:n.step}}function B2e(e,t){if(we([or,_o,ko],e)&&t!=="nominal")return"hcl"}function j2e(e,t,n,r,i,o){var s;if(!((s=go(o))!=null&&s.bin||I(n)||i!=null||r!=null||we([Zn.TIME,Zn.UTC],e)))return Rt(t)?!0:void 0}function U2e(e,t,n,r,i,o){if(Rt(e)){if(mi(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:s,orient:a}=i;if(s==="bar"&&!(W(r)&&(r.bin||r.timeUnit))&&(a==="vertical"&&e==="x"||a==="horizontal"&&e==="y"))return o.continuousBandSize}if(t===Zn.POINT)return n.pointPadding}}function W2e(e,t,n,r,i,o=!1){if(e===void 0){if(Rt(t)){const{bandPaddingInner:s,barBandPaddingInner:a,rectBandPaddingInner:u,bandWithNestedOffsetPaddingInner:l}=i;return o?l:ht(s,n==="bar"?a:u)}else if(Bf(t)&&r===Zn.BAND)return i.offsetBandPaddingInner}}function q2e(e,t,n,r,i,o=!1){if(e===void 0){if(Rt(t)){const{bandPaddingOuter:s,bandWithNestedOffsetPaddingOuter:a}=i;if(o)return a;if(n===Zn.BAND)return ht(s,re(r)?{signal:`${r.signal}/2`}:r/2)}else if(Bf(t)){if(n===Zn.POINT)return .5;if(n===Zn.BAND)return i.offsetBandPaddingOuter}}}function H2e(e,t,n,r){if(n==="x"&&r.xReverse!==void 0)return kr(e)&&t==="descending"?re(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(kr(e)&&t==="descending")return!0}function G2e(e,t,n,r,i,o,s){if(!!n&&n!=="unaggregated"&&kr(i)){if(I(n)){const u=n[0],l=n[n.length-1];if(u<=0&&l>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!cf(i))return!0;if(!(W(t)&&t.bin)&&we([...Co,...Yge],e)){const{orient:u,type:l}=r;return we(["bar","area","line","trail"],l)&&(u==="horizontal"&&e==="y"||u==="vertical"&&e==="x")?!1:we(["bar","area"],l)&&!s?!0:o==null?void 0:o.zero}return!1}function V2e(e,t,n,r,i=!1){const o=Y2e(t,n,r,i),{type:s}=e;return ws(t)?s!==void 0?J0e(t,s)?W(n)&&!K0e(s,n.type)?(U(e0e(s,o)),o):s:(U(Zme(t,s,o)),o):o:null}function Y2e(e,t,n,r){var i;switch(t.type){case"nominal":case"ordinal":{if(kc(e)||ub(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&U(lb(e,"ordinal")),"ordinal";if(Rt(e)||Bf(e)){if(we(["rect","bar","image","rule"],n.type)||r)return"band"}else if(n.type==="arc"&&e in UA)return"band";const o=n[ar(e)];return al(o)||df(t)&&((i=t.axis)!=null&&i.tickBand)?"band":"point"}case"temporal":return kc(e)?"time":ub(e)==="discrete"?(U(lb(e,"temporal")),"ordinal"):W(t)&&t.timeUnit&&Xt(t.timeUnit).utc?"utc":"time";case"quantitative":return kc(e)?W(t)&&Ge(t.bin)?"bin-ordinal":"linear":ub(e)==="discrete"?(U(lb(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(VB(t.type))}function X2e(e,{ignoreRange:t}={}){SW(e),hW(e);for(const n of Q0e)bW(e,n);t||wW(e)}function SW(e){dt(e)?e.component.scales=Q2e(e):e.component.scales=J2e(e)}function Q2e(e){const{encoding:t,mark:n,markDef:r}=e,i={};for(const o of Yv){const s=wt(t[o]);if(s&&n===mj&&o===sr&&s.type===Uf)continue;let a=s&&s.scale;if(Bf(o)){const u=MB(o);if(!mS(t,u)){a&&U(Ime(o));continue}}if(s&&a!==null&&a!==!1){a??(a={});const u=mS(t,o),l=V2e(a,o,s,r,u);i[o]=new gW(e.scaleName(`${o}`,!0),{value:l,explicit:a.type===l})}}return i}const K2e=yU((e,t)=>yD(e)-yD(t));function J2e(e){var t;const n=e.component.scales={},r={},i=e.component.resolve;for(const o of e.children){SW(o);for(const s of j(o.component.scales))if((t=i.scale)[s]??(t[s]=eW(s,e)),i.scale[s]==="shared"){const a=r[s],u=o.component.scales[s].getWithExplicit("type");a?B0e(a.value,u.value)?r[s]=$a(a,u,"type","scale",K2e):(i.scale[s]="independent",delete r[s]):r[s]=u}}for(const o of j(r)){const s=e.scaleName(o,!0),a=r[o];n[o]=new gW(s,a);for(const u of e.children){const l=u.component.scales[o];l&&(u.renameScale(l.get("name"),s),l.merged=!0)}}return n}class yb{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function dt(e){return(e==null?void 0:e.type)==="unit"}function Si(e){return(e==null?void 0:e.type)==="facet"}function H3(e){return(e==null?void 0:e.type)==="concat"}function Vf(e){return(e==null?void 0:e.type)==="layer"}class G3{constructor(t,n,r,i,o,s,a){this.type=n,this.parent=r,this.config=o,this.correctDataNames=u=>{var l,c,f;return(l=u.from)!=null&&l.data&&(u.from.data=this.lookupDataSource(u.from.data)),(f=(c=u.from)==null?void 0:c.facet)!=null&&f.data&&(u.from.facet.data=this.lookupDataSource(u.from.facet.data)),u},this.parent=r,this.config=o,this.view=Wn(a),this.name=t.name??i,this.title=Rs(t.title)?{text:t.title}:t.title?Wn(t.title):void 0,this.scaleNameMap=r?r.scaleNameMap:new yb,this.projectionNameMap=r?r.projectionNameMap:new yb,this.signalNameMap=r?r.signalNameMap:new yb,this.data=t.data,this.description=t.description,this.transforms=ove(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:hye(t,n,o),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:rx(t)||(r==null?void 0:r.component.data.isFaceted)&&t.data===void 0},layoutSize:new Ss,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...s?ce(s):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){X2e(this)}parseProjection(){cW(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){oW(this)}assembleEncodeFromView(t){const{style:n,...r}=t,i={};for(const o of j(r)){const s=r[o];s!==void 0&&(i[o]=Xe(s))}return i}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=Xe(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n??{}}:Be(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:r,config:i}=this,o=xxe(r.layoutHeaders,i);return{padding:t,...this.assembleDefaultLayout(),...n,...o?{titleBand:o}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const r of Pr)t[r].title&&n.push(hxe(this,r));for(const r of P3)n=n.concat(pxe(this,r));return n}assembleAxes(){return exe(this.component.axes,this.config)}assembleLegends(){return aW(this)}assembleProjections(){return Uxe(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},r={...zB(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(r.text)return we(["unit","layer"],this.type)?we(["middle",void 0],r.anchor)&&(r.frame??(r.frame="group")):r.anchor??(r.anchor="start"),Be(r)?void 0:r}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const i=!this.parent||Si(this.parent)?pW(this):[];i.length>0&&(n.scales=i);const o=this.assembleAxes();o.length>0&&(n.axes=o);const s=this.assembleLegends();return s.length>0&&(n.legends=s),n}getName(t){return Ze((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(We[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),r=this.component.data.outputNodeRefCounts;return r[n]=(r[n]||0)+1,n}getSizeSignalRef(t){if(Si(this.parent)){const n=JU(t),r=Vv(n),i=this.component.scales[r];if(i&&!i.merged){const o=i.get("type"),s=i.get("range");if(Pt(o)&&Ga(s)){const a=i.get("name"),u=yx(this,r),l=q3(u);if(l){const c=Y({aggregate:"distinct",field:l},{expr:"datum"});return{signal:KU(a,i,c)}}else return U(HA(r)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(AB(t)&&ws(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getSelectionComponent(t,n){let r=this.component.selection[t];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(t,n)),!r)throw new Error(yme(n));return r}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)==null?void 0:t.some(r=>r.hasOrientSignalRef()))||((n=this.component.axes.y)==null?void 0:n.some(r=>r.hasOrientSignalRef()))}}class _W extends G3{vgField(t,n={}){const r=this.fieldDef(t);if(r)return Y(r,n)}reduceFieldDef(t,n){return U1e(this.getMapping(),(r,i,o)=>{const s=go(i);return s?t(r,s,o):r},n)}forEachFieldDef(t,n){v3(this.getMapping(),(r,i)=>{const o=go(r);o&&t(o,i)},n)}}class vx extends Ie{clone(){return new vx(null,ce(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=ce(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"value",r[1]??"density"],n.groupby&&n.minsteps==null&&n.maxsteps==null&&n.steps==null&&(this.transform.steps=200)}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${be(this.transform)}`}assemble(){const{density:t,...n}=this.transform;return{type:"kde",field:t,...n}}}class xx extends Ie{clone(){return new xx(null,ce(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=ce(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${be(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class vp extends Ie{clone(){return new vp(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n){const{config:r,mark:i,markDef:o}=n;if(Re("invalid",o,r)!=="filter")return null;const a=n.reduceFieldDef((u,l,c)=>{const f=ws(c)&&n.getScaleComponent(c);if(f){const d=f.get("type");kr(d)&&l.aggregate!=="count"&&!Va(i)&&(u[l.field]=l)}return u},{});return j(a).length?new vp(t,a):null}dependentFields(){return new Set(j(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${be(this.filter)}`}assemble(){const t=j(this.filter).reduce((n,r)=>{const i=this.filter[r],o=Y(i,{expr:"datum"});return i!==null&&(i.type==="temporal"?n.push(`(isDate(${o}) || (isValid(${o}) && isFinite(+${o})))`):i.type==="quantitative"&&(n.push(`isValid(${o})`),n.push(`isFinite(+${o})`))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}class bx extends Ie{clone(){return new bx(this.parent,ce(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=ce(n);const{flatten:r,as:i=[]}=this.transform;this.transform.as=r.map((o,s)=>i[s]??o)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${be(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class wx extends Ie{clone(){return new wx(null,ce(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=ce(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"key",r[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${be(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class Ac extends Ie{clone(){return new Ac(null,ce(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let r=0;for(const i of[[Pi,Ri],[Vr,Li]]){const o=i.map(s=>{const a=wt(n.encoding[s]);return W(a)?a.field:Ao(a)?{expr:`${a.datum}`}:Ai(a)?{expr:`${a.value}`}:void 0});(o[0]||o[1])&&(t=new Ac(t,o,null,n.getName(`geojson_${r++}`)))}if(n.channelHasField(sr)){const i=n.typedFieldDef(sr);i.type===Uf&&(t=new Ac(t,null,i.field,n.getName(`geojson_${r++}`)))}return t}constructor(t,n,r,i){super(t),this.fields=n,this.geojson=r,this.signal=i}dependentFields(){const t=(this.fields??[]).filter(Q);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${be(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class xp extends Ie{clone(){return new xp(null,this.projection,ce(this.fields),ce(this.as))}constructor(t,n,r,i){super(t),this.projection=n,this.fields=r,this.as=i}static parseAll(t,n){if(!n.projectionName())return t;for(const r of[[Pi,Ri],[Vr,Li]]){const i=r.map(s=>{const a=wt(n.encoding[s]);return W(a)?a.field:Ao(a)?{expr:`${a.datum}`}:Ai(a)?{expr:`${a.value}`}:void 0}),o=r[0]===Vr?"2":"";(i[0]||i[1])&&(t=new xp(t,n.projectionName(),i,[n.getName(`x${o}`),n.getName(`y${o}`)]))}return t}dependentFields(){return new Set(this.fields.filter(Q))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${be(this.fields)} ${be(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class zu extends Ie{clone(){return new zu(null,ce(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:r,step:i}=t;return{signal:`sequence(${[n,r,...i?[i]:[]].join(",")})`}}static makeFromTransform(t,n){return new zu(t,n)}static makeFromEncoding(t,n){const r=n.encoding,i=r.x,o=r.y;if(W(i)&&W(o)){const s=i.impute?i:o.impute?o:void 0;if(s===void 0)return;const a=i.impute?o:o.impute?i:void 0,{method:u,value:l,frame:c,keyvals:f}=s.impute,d=Wj(n.mark,r);return new zu(t,{impute:s.field,key:a.field,...u?{method:u}:{},...l!==void 0?{value:l}:{},...c?{frame:c}:{},...f!==void 0?{keyvals:f}:{},...d.length?{groupby:d}:{}})}return null}hash(){return`Impute ${be(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:r,method:i,groupby:o,value:s,frame:a=[null,null]}=this.transform,u={type:"impute",field:t,key:n,...r?{keyvals:Bye(r)?this.processSequence(r):r}:{},method:"value",...o?{groupby:o}:{},value:!i||i==="value"?s:null};if(i&&i!=="value"){const l={type:"window",as:[`imputed_${t}_value`],ops:[i],fields:[t],frame:a,ignorePeers:!1,...o?{groupby:o}:{}},c={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[u,l,c]}else return[u]}}class Ex extends Ie{clone(){return new Ex(null,ce(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=ce(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${be(this.transform)}`}assemble(){const{loess:t,on:n,...r}=this.transform;return{type:"loess",x:n,y:t,...r}}}class bp extends Ie{clone(){return new bp(null,ce(this.transform),this.secondary)}constructor(t,n,r){super(t),this.transform=n,this.secondary=r}static make(t,n,r,i){const o=n.component.data.sources,{from:s}=r;let a=null;if(jye(s)){let u=CW(s.data,o);u||(u=new fl(s.data),o.push(u));const l=n.getName(`lookup_${i}`);a=new Mn(u,l,We.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[l]=a}else if(Uye(s)){const u=s.param;r={as:u,...r};let l;try{l=n.getSelectionComponent(Ze(u),u)}catch{throw new Error(bme(u))}if(a=l.materialized,!a)throw new Error(wme(u))}return new bp(t,r,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?K(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${be({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:K(this.transform.as)}:{}};else{let n=this.transform.as;Q(n)||(U(Fme),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class Sx extends Ie{clone(){return new Sx(null,ce(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=ce(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"prob",r[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${be(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class _x extends Ie{clone(){return new _x(null,ce(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=ce(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${be(this.transform)}`}assemble(){const{regression:t,on:n,...r}=this.transform;return{type:"regression",x:n,y:t,...r}}}class kx extends Ie{clone(){return new kx(null,ce(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Ji((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${be(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:r,limit:i,op:o}=this.transform;return{type:"pivot",field:t,value:n,...i!==void 0?{limit:i}:{},...o!==void 0?{op:o}:{},...r!==void 0?{groupby:r}:{}}}}class $x extends Ie{clone(){return new $x(null,ce(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${be(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function kW(e){let t=0;function n(r,i){if(r instanceof fl&&!r.isGenerator&&!pf(r.data)&&(e.push(i),i={name:null,source:i.name,transform:[]}),r instanceof cn&&(r.parent instanceof fl&&!i.source?(i.format={...i.format??{},parse:r.assembleFormatParse()},i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof Hf){i.name||(i.name=`data_${t++}`),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,e.push(...r.assemble());return}switch((r instanceof yg||r instanceof vg||r instanceof vp||r instanceof qf||r instanceof mf||r instanceof xp||r instanceof Ei||r instanceof bp||r instanceof Gf||r instanceof Tl||r instanceof wx||r instanceof bx||r instanceof vx||r instanceof Ex||r instanceof Sx||r instanceof _x||r instanceof Fa||r instanceof $x||r instanceof kx||r instanceof xx)&&i.transform.push(r.assemble()),(r instanceof so||r instanceof oo||r instanceof zu||r instanceof is||r instanceof Ac)&&i.transform.push(...r.assemble()),r instanceof Mn&&(i.source&&i.transform.length===0?r.setSource(i.source):r.parent instanceof Mn?r.setSource(i.name):(i.name||(i.name=`data_${t++}`),r.setSource(i.name),r.numChildren()===1&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof Mn&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name=`data_${t++}`);let o=i.name;!i.source||i.transform.length>0?e.push(i):o=i.source;for(const s of r.children)n(s,{name:null,source:o,transform:[]});break}}}return n}function Z2e(e){const t=[],n=kW(t);for(const r of e.children)n(r,{source:e.name,name:null,transform:[]});return t}function ebe(e,t){const n=[],r=kW(n);let i=0;for(const s of e.sources){s.hasName()||(s.dataName=`source_${i++}`);const a=s.assemble();r(s,a)}for(const s of n)s.transform.length===0&&delete s.transform;let o=0;for(const[s,a]of n.entries())(a.transform??[]).length===0&&!a.source&&n.splice(o++,0,n.splice(s,1)[0]);for(const s of n)for(const a of s.transform??[])a.type==="lookup"&&(a.from=e.outputNodes[a.from].getSource());for(const s of n)s.name in t&&(s.values=t[s.name]);return n}function tbe(e){return e==="top"||e==="left"||re(e)?"header":"footer"}function nbe(e){for(const t of Pr)rbe(e,t);u5(e,"x"),u5(e,"y")}function rbe(e,t){var s;const{facet:n,config:r,child:i,component:o}=e;if(e.channelHasField(t)){const a=n[t],u=vf("title",null,r,t);let l=$c(a,r,{allowDisabling:!0,includeDefault:u===void 0||!!u});i.component.layoutHeaders[t].title&&(l=I(l)?l.join(", "):l,l+=` / ${i.component.layoutHeaders[t].title}`,i.component.layoutHeaders[t].title=null);const c=vf("labelOrient",a.header,r,t),f=a.header!==null?ht((s=a.header)==null?void 0:s.labels,r.header.labels,!0):!1,d=we(["bottom","right"],c)?"footer":"header";o.layoutHeaders[t]={title:a.header!==null?l:null,facetFieldDef:a,[d]:t==="facet"?[]:[$W(e,t,f)]}}}function $W(e,t,n){const r=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function u5(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:r,resolve:i}=e.component;if(i.axis[t]=I3(i,t),i.axis[t]==="shared"){const o=t==="x"?"column":"row",s=r[o];for(const a of n.component.axes[t]){const u=tbe(a.get("orient"));s[u]??(s[u]=[$W(e,o,!1)]);const l=eh(a,"main",e.config,{header:!0});l&&s[u][0].axes.push(l),a.mainExtracted=!0}}}}function ibe(e){V3(e),ay(e,"width"),ay(e,"height")}function obe(e){V3(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";ay(e,t),ay(e,n)}function V3(e){for(const t of e.children)t.parseLayoutSize()}function ay(e,t){const n=JU(t),r=Vv(n),i=e.component.resolve,o=e.component.layoutSize;let s;for(const a of e.children){const u=a.component.layoutSize.getWithExplicit(n),l=i.scale[r]??eW(r,e);if(l==="independent"&&u.value==="step"){s=void 0;break}if(s){if(l==="independent"&&s.value!==u.value){s=void 0;break}s=$a(s,u,n,"")}else s=u}if(s){for(const a of e.children)e.renameSignal(a.getName(n),e.getName(t)),a.component.layoutSize.set(n,"merged",!1);o.setWithExplicit(t,s)}else o.setWithExplicit(t,{explicit:!1,value:void 0})}function sbe(e){const{size:t,component:n}=e;for(const r of Co){const i=ar(r);if(t[i]){const o=t[i];n.layoutSize.set(i,mo(o)?"step":o,!0)}else{const o=abe(e,i);n.layoutSize.set(i,o,!1)}}}function abe(e,t){const n=t==="width"?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const o=i.get("type"),s=i.get("range");if(Pt(o)){const a=ry(r.view,t);return Ga(s)||mo(a)?"step":a}else return vS(r.view,t)}else{if(e.hasProjection||e.mark==="arc")return vS(r.view,t);{const o=ry(r.view,t);return mo(o)?o.step:o}}}function NS(e,t,n){return Y(t,{suffix:`by_${Y(e)}`,...n??{}})}class $h extends _W{constructor(t,n,r,i){super(t,"facet",n,r,i,t.resolve),this.child=J3(t.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!dg(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=j(t),r={};for(const i of n){if(![es,ts].includes(i)){U(Qv(i,"facet"));break}const o=t[i];if(o.field===void 0){U(dS(o,i));break}r[i]=this.initFacetFieldDef(o,i)}return r}initFacetFieldDef(t,n){const r=m3(t,n);return r.header?r.header=Wn(r.header):r.header===null&&(r.header=null),r}channelHasField(t){return!!this.facet[t]}fieldDef(t){return this.facet[t]}parseData(){this.component.data=Cx(this),this.child.parseData()}parseLayoutSize(){V3(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),nbe(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of Pr)for(const r of L3){const i=this.component.layoutHeaders[n],o=i[r],{facetFieldDef:s}=i;if(s){const a=vf("titleOrient",s.header,this.config,n);if(["right","bottom"].includes(a)){const u=gx(n,a);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[u]="end"}}if(o!=null&&o[0]){const a=n==="row"?"height":"width",u=r==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(a)&&(t[u]??(t[u]={}),t[u][n]=.5),i.title&&(t.offset??(t.offset={}),t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,r=t?this.columnDistinctSignal():n?1:void 0;let i="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(i="none"),{...this.getHeaderLayoutMixins(),...r?{columns:r}:{},bounds:"full",align:i}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof $h))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof $h?{...this.channelHasField("column")?{encode:{update:{columns:{field:Y(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],r=[];if(this.child instanceof $h){if(this.child.channelHasField("column")){const i=Y(this.child.facet.column);t.push(i),n.push("distinct"),r.push(`distinct_${i}`)}}else for(const i of Co){const o=this.child.component.scales[i];if(o&&!o.merged){const s=o.get("type"),a=o.get("range");if(Pt(s)&&Ga(a)){const u=yx(this.child,i),l=q3(u);l?(t.push(l),n.push("distinct"),r.push(`distinct_${l}`)):U(HA(i))}}}return{fields:t,ops:n,as:r}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:r,column:i}=this.facet,{fields:o,ops:s,as:a}=this.getCardinalityAggregateForChild(),u=[];for(const c of Pr){const f=this.facet[c];if(f){u.push(Y(f));const{bin:d,sort:h}=f;if(Ge(d)&&u.push(Y(f,{binSuffix:"end"})),io(h)){const{field:p,op:g=nx}=h,m=NS(f,h);r&&i?(o.push(m),s.push("max"),a.push(m)):(o.push(p),s.push(g),a.push(m))}else if(I(h)){const p=yf(f,c);o.push(p),s.push("max"),a.push(p)}}}const l=!!r&&!!i;return{name:t,data:n,groupby:u,...l||o.length>0?{aggregate:{...l?{cross:l}:{},...o.length?{fields:o,ops:s,as:a}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,r=n[t];return r?io(r.sort)?[NS(r,r.sort,{expr:"datum"})]:I(r.sort)?[yf(r,t,{expr:"datum"})]:[Y(r,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,r=n[t];if(r){const{sort:i}=r;return[(io(i)?i.order:!I(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){var i;const{facet:t,config:n}=this;if(t.facet)return $S(t.facet,"facet",n);const r={row:["top","bottom"],column:["left","right"]};for(const o of P3)if(t[o]){const s=vf("labelOrient",(i=t[o])==null?void 0:i.header,n,o);if(r[o].includes(s))return $S(t[o],o,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,r=Z2e(n),i=t.assembleGroupEncodeEntry(!1),o=this.assembleLabelTitle()||t.assembleTitle(),s=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...o?{title:o}:{},...s?{style:s}:{},from:{facet:this.assembleFacet()},sort:{field:Pr.map(u=>this.facetSortFields(u)).flat(),order:Pr.map(u=>this.facetSortOrder(u)).flat()},...r.length>0?{data:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup(vve(this,[]))}]}getMapping(){return this.facet}}function ube(e,t){const{row:n,column:r}=t;if(n&&r){let i=null;for(const o of[n,r])if(io(o.sort)){const{field:s,op:a=nx}=o.sort;e=i=new Tl(e,{joinaggregate:[{op:a,field:s,as:NS(o,o.sort,{forAs:!0})}],groupby:[Y(o)]})}return i}return null}function CW(e,t){var n,r,i,o;for(const s of t){const a=s.data;if(e.name&&s.hasName()&&e.name!==s.dataName)continue;const u=(n=e.format)==null?void 0:n.mesh,l=(r=a.format)==null?void 0:r.feature;if(u&&l)continue;const c=(i=e.format)==null?void 0:i.feature;if((c||l)&&c!==l)continue;const f=(o=a.format)==null?void 0:o.mesh;if(!((u||f)&&u!==f)){if(yp(e)&&yp(a)){if(Ki(e.values,a.values))return s}else if(pf(e)&&pf(a)){if(e.url===a.url)return s}else if(vU(e)&&e.name===s.dataName)return s}}return null}function lbe(e,t){if(e.data||!e.parent){if(e.data===null){const r=new fl({values:[]});return t.push(r),r}const n=CW(e.data,t);if(n)return ca(e.data)||(n.data.format=mB({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const r=new fl(e.data);return t.push(r),r}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function cbe(e,t,n){let r=0;for(const i of t.transforms){let o,s;if(Jye(i))s=e=new mf(e,i),o="derived";else if(F3(i)){const a=t2e(i);s=e=cn.makeWithAncestors(e,{},a,n)??e,e=new qf(e,t,i.filter)}else if(hU(i))s=e=so.makeFromTransform(e,i,t),o="number";else if(eve(i))o="date",n.getWithExplicit(i.field).value===void 0&&(e=new cn(e,{[i.field]:o}),n.set(i.field,o,!1)),s=e=oo.makeFromTransform(e,i);else if(tve(i))s=e=Ei.makeFromTransform(e,i),o="number",R3(t)&&(e=new Fa(e));else if(dU(i))s=e=bp.make(e,t,i,r++),o="derived";else if(Xye(i))s=e=new Gf(e,i),o="number";else if(Qye(i))s=e=new Tl(e,i),o="number";else if(nve(i))s=e=is.makeFromTransform(e,i),o="derived";else if(rve(i))s=e=new wx(e,i),o="derived";else if(ive(i))s=e=new xx(e,i),o="derived";else if(Kye(i))s=e=new bx(e,i),o="derived";else if(Wye(i))s=e=new kx(e,i),o="derived";else if(Yye(i))e=new $x(e,i);else if(Zye(i))s=e=zu.makeFromTransform(e,i),o="derived";else if(qye(i))s=e=new vx(e,i),o="derived";else if(Hye(i))s=e=new Sx(e,i),o="derived";else if(Gye(i))s=e=new _x(e,i),o="derived";else if(Vye(i))s=e=new Ex(e,i),o="derived";else{U(Ame(i));continue}if(s&&o!==void 0)for(const a of s.producedFields()??[])n.set(a,o,!1)}return e}function Cx(e){var g;let t=lbe(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:r}=e.component.data,i=e.data,s=!(i&&(ca(i)||pf(i)||yp(i)))&&e.parent?e.parent.component.data.ancestorParse.clone():new mve;ca(i)?(xU(i)?t=new vg(t,i.sequence):T3(i)&&(t=new yg(t,i.graticule)),s.parseNothing=!0):((g=i==null?void 0:i.format)==null?void 0:g.parse)===null&&(s.parseNothing=!0),t=cn.makeExplicit(t,e,s)??t,t=new Fa(t);const a=e.parent&&Vf(e.parent);(dt(e)||Si(e))&&a&&(t=so.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=cbe(t,e,s));const u=r2e(e),l=n2e(e);t=cn.makeWithAncestors(t,{},{...u,...l},s)??t,dt(e)&&(t=Ac.parseAll(t,e),t=xp.parseAll(t,e)),(dt(e)||Si(e))&&(a||(t=so.makeFromEncoding(t,e)??t),t=oo.makeFromEncoding(t,e)??t,t=mf.parseAllForSortIndex(t,e));const c=e.getDataName(We.Raw),f=new Mn(t,c,We.Raw,r);if(n[c]=f,t=f,dt(e)){const m=Ei.makeFromEncoding(t,e);m&&(t=m,R3(e)&&(t=new Fa(t))),t=zu.makeFromEncoding(t,e)??t,t=is.makeFromEncoding(t,e)??t}dt(e)&&(t=vp.make(t,e)??t);const d=e.getDataName(We.Main),h=new Mn(t,d,We.Main,r);n[d]=h,t=h,dt(e)&&Jve(e,h);let p=null;if(Si(e)){const m=e.getName("facet");t=ube(t,e.facet)??t,p=new Hf(t,e,m,h.getSource()),n[m]=p}return{...e.component.data,outputNodes:n,outputNodeRefCounts:r,raw:f,main:h,facetRoot:p,ancestorParse:s}}class fbe extends G3{constructor(t,n,r,i){var o,s,a,u;super(t,"concat",n,r,i,t.resolve),(((s=(o=t.resolve)==null?void 0:o.axis)==null?void 0:s.x)==="shared"||((u=(a=t.resolve)==null?void 0:a.axis)==null?void 0:u.y)==="shared")&&U(kme),this.children=this.getChildren(t).map((l,c)=>J3(l,this,this.getName(`concat_${c}`),void 0,i))}parseData(){this.component.data=Cx(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of j(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return cx(t)?t.vconcat:C3(t)?t.hconcat:t.concat}parseLayoutSize(){obe(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=z3(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),r=t.assembleGroupStyle(),i=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...r?{style:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function dbe(e){return e===!1||e===null}const hbe={disable:1,gridScale:1,scale:1,...Ij,labelExpr:1,encode:1},AW=j(hbe);class Y3 extends Ss{constructor(t={},n={},r=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=r}clone(){return new Y3(ce(this.explicit),ce(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!dbe(this.get(t))}hasOrientSignalRef(){return re(this.explicit.orient)}}function pbe(e,t,n){const{encoding:r,config:i}=e,o=wt(r[t])??wt(r[$o(t)]),s=e.axis(t)||{},{format:a,formatType:u}=s;if(ul(u))return{text:yi({fieldOrDatumDef:o,field:"datum.value",format:a,formatType:u,config:i}),...n};if(a===void 0&&u===void 0&&i.customFormatTypes){if(ff(o)==="quantitative"){if(df(o)&&o.stack==="normalize"&&i.normalizedNumberFormatType)return{text:yi({fieldOrDatumDef:o,field:"datum.value",format:i.normalizedNumberFormat,formatType:i.normalizedNumberFormatType,config:i}),...n};if(i.numberFormatType)return{text:yi({fieldOrDatumDef:o,field:"datum.value",format:i.numberFormat,formatType:i.numberFormatType,config:i}),...n}}if(ff(o)==="temporal"&&i.timeFormatType&&W(o)&&!o.timeUnit)return{text:yi({fieldOrDatumDef:o,field:"datum.value",format:i.timeFormat,formatType:i.timeFormatType,config:i}),...n}}return n}function gbe(e){return Co.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[Ebe(n,e)]),t),{})}const mbe={bottom:"top",top:"bottom",left:"right",right:"left"};function ybe(e){const{axes:t,resolve:n}=e.component,r={top:0,bottom:0,right:0,left:0};for(const i of e.children){i.parseAxesAndHeaders();for(const o of j(i.component.axes))n.axis[o]=I3(e.component.resolve,o),n.axis[o]==="shared"&&(t[o]=vbe(t[o],i.component.axes[o]),t[o]||(n.axis[o]="independent",delete t[o]))}for(const i of Co){for(const o of e.children)if(o.component.axes[i]){if(n.axis[i]==="independent"){t[i]=(t[i]??[]).concat(o.component.axes[i]);for(const s of o.component.axes[i]){const{value:a,explicit:u}=s.getWithExplicit("orient");if(!re(a)){if(r[a]>0&&!u){const l=mbe[a];r[a]>r[l]&&s.set("orient",l,!1)}r[a]++}}}delete o.component.axes[i]}if(n.axis[i]==="independent"&&t[i]&&t[i].length>1)for(const o of t[i])o.get("grid")&&!o.explicit.grid&&(o.implicit.grid=!1)}}function vbe(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const i=e[r],o=t[r];if(!!i!=!!o)return;if(i&&o){const s=i.getWithExplicit("orient"),a=o.getWithExplicit("orient");if(s.explicit&&a.explicit&&s.value!==a.value)return;e[r]=xbe(i,o)}}}else return t.map(n=>n.clone());return e}function xbe(e,t){for(const n of AW){const r=$a(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(i,o)=>{switch(n){case"title":return HB(i,o);case"gridScale":return{explicit:i.explicit,value:ht(i.value,o.value)}}return dx(i,o,n,"axis")});e.setWithExplicit(n,r)}return e}function bbe(e,t,n,r,i){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(re(n.labelAngle)?n.labelAngle:mp(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===VU(r,i))return!0}return e===n[t]}const wbe=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function Ebe(e,t){var y,v;let n=t.axis(e);const r=new Y3,i=wt(t.encoding[e]),{mark:o,config:s}=t,a=(n==null?void 0:n.orient)||((y=s[e==="x"?"axisX":"axisY"])==null?void 0:y.orient)||((v=s.axis)==null?void 0:v.orient)||uxe(e),u=t.getScaleComponent(e).get("type"),l=txe(e,u,a,t.config),c=n!==void 0?!n:_S("disable",s.style,n==null?void 0:n.style,l).configValue;if(r.set("disable",c,n!==void 0),c)return r;n=n||{};const f=oxe(i,n,e,s.style,l),d=Sj(n.formatType,i,u),h=Ej(i,i.type,n.format,n.formatType,s,!0),p={fieldOrDatumDef:i,axis:n,channel:e,model:t,scaleType:u,orient:a,labelAngle:f,format:h,formatType:d,mark:o,config:s};for(const x of AW){const b=x in VD?VD[x](p):_D(x)?n[x]:void 0,w=b!==void 0,S=bbe(b,x,n,t,e);if(w&&S)r.set(x,b,S);else{const{configValue:E=void 0,configFrom:_=void 0}=_D(x)&&x!=="values"?_S(x,s.style,n.style,l):{},$=E!==void 0;w&&!$?r.set(x,b,S):(_!=="vgAxisConfig"||wbe.has(x)&&$||gg(E)||re(E))&&r.set(x,E,!1)}}const g=n.encoding??{},m=zj.reduce((x,b)=>{if(!r.hasAxisPart(b))return x;const w=ZU(g[b]??{},t),S=b==="labels"?pbe(t,e,w):w;return S!==void 0&&!Be(S)&&(x[b]={update:S}),x},{});return Be(m)||r.set("encode",m,!!n.encoding||n.labelAngle!==void 0),r}function Sbe({encoding:e,size:t}){for(const n of Co){const r=ar(n);mo(t[r])&&Qs(e[n])&&(delete t[r],U(QB(r)))}return t}function _be(e,t,n){const r=Wn(e),i=Re("orient",r,n);if(r.orient=Abe(r.type,t,i),i!==void 0&&i!==r.orient&&U(Gme(r.orient,i)),r.type==="bar"&&r.orient){const a=Re("cornerRadiusEnd",r,n);if(a!==void 0){const u=r.orient==="horizontal"&&t.x2||r.orient==="vertical"&&t.y2?["cornerRadius"]:c1e[r.orient];for(const l of u)r[l]=a;r.cornerRadiusEnd!==void 0&&delete r.cornerRadiusEnd}}return Re("opacity",r,n)===void 0&&(r.opacity=$be(r.type,t)),Re("cursor",r,n)===void 0&&(r.cursor=kbe(r,t,n)),r}function kbe(e,t,n){return t.href||e.href||Re("href",e,n)?"pointer":e.cursor}function $be(e,t){if(we([tx,o3,s3,a3],e)&&!y3(t))return .7}function Cbe(e,t,{graticule:n}){if(n)return!1;const r=il("filled",e,t),i=e.type;return ht(r,i!==tx&&i!==ex&&i!==X1)}function Abe(e,t,n){switch(e){case tx:case s3:case a3:case gj:case e1e:case Z0e:return}const{x:r,y:i,x2:o,y2:s}=t;switch(e){case Zv:if(W(r)&&(jt(r.bin)||W(i)&&i.aggregate&&!r.aggregate))return"vertical";if(W(i)&&(jt(i.bin)||W(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(s||o){if(n)return n;if(!o)return(W(r)&&r.type===sl&&!Ge(r.bin)||K1(r))&&W(i)&&jt(i.bin)?"horizontal":"vertical";if(!s)return(W(i)&&i.type===sl&&!Ge(i.bin)||K1(i))&&W(r)&&jt(r.bin)?"vertical":"horizontal"}case X1:if(o&&!(W(r)&&jt(r.bin))&&s&&!(W(i)&&jt(i.bin)))return;case Jv:if(s)return W(i)&&jt(i.bin)?"horizontal":"vertical";if(o)return W(r)&&jt(r.bin)?"vertical":"horizontal";if(e===X1){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case ex:case o3:{const a=ED(r),u=ED(i);if(n)return n;if(a&&!u)return e!=="tick"?"horizontal":"vertical";if(!a&&u)return e!=="tick"?"vertical":"horizontal";if(a&&u)return"vertical";{const l=Dn(r)&&r.type===lf,c=Dn(i)&&i.type===lf;if(l&&!c)return"vertical";if(!l&&c)return"horizontal"}return}}return"vertical"}const Fbe={vgMark:"arc",encodeEntry:e=>({...Qr(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...ln("x",e,{defaultPos:"mid"}),...ln("y",e,{defaultPos:"mid"}),...Ca(e,"radius"),...Ca(e,"theta")})},Tbe={vgMark:"area",encodeEntry:e=>({...Qr(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...iy("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...iy("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...D3(e)})},Mbe={vgMark:"rect",encodeEntry:e=>({...Qr(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Ca(e,"x"),...Ca(e,"y")})},Nbe={vgMark:"shape",encodeEntry:e=>({...Qr(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&W(n)&&n.type===Uf?{field:Y(n,{expr:"datum"})}:{}}]}},Obe={vgMark:"image",encodeEntry:e=>({...Qr(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...Ca(e,"x"),...Ca(e,"y"),...N3(e,"url")})},Dbe={vgMark:"line",encodeEntry:e=>({...Qr(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...ln("x",e,{defaultPos:"mid"}),...ln("y",e,{defaultPos:"mid"}),...Ct("size",e,{vgChannel:"strokeWidth"}),...D3(e)})},Rbe={vgMark:"trail",encodeEntry:e=>({...Qr(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...ln("x",e,{defaultPos:"mid"}),...ln("y",e,{defaultPos:"mid"}),...Ct("size",e),...D3(e)})};function X3(e,t){const{config:n}=e;return{...Qr(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...ln("x",e,{defaultPos:"mid"}),...ln("y",e,{defaultPos:"mid"}),...Ct("size",e),...Ct("angle",e),...Pbe(e,n,t)}}function Pbe(e,t,n){return n?{shape:{value:n}}:Ct("shape",e)}const Lbe={vgMark:"symbol",encodeEntry:e=>X3(e)},zbe={vgMark:"symbol",encodeEntry:e=>X3(e,"circle")},Ibe={vgMark:"symbol",encodeEntry:e=>X3(e,"square")},Bbe={vgMark:"rect",encodeEntry:e=>({...Qr(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Ca(e,"x"),...Ca(e,"y")})},jbe={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...Qr(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...iy("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...iy("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...Ct("size",e,{vgChannel:"strokeWidth"})}}},Ube={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...Qr(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...ln("x",e,{defaultPos:"mid"}),...ln("y",e,{defaultPos:"mid"}),...N3(e),...Ct("size",e,{vgChannel:"fontSize"}),...Ct("angle",e),...WD("align",Wbe(e.markDef,n,t)),...WD("baseline",qbe(e.markDef,n,t)),...ln("radius",e,{defaultPos:null}),...ln("theta",e,{defaultPos:null})}}};function Wbe(e,t,n){if(Re("align",e,n)===void 0)return"center"}function qbe(e,t,n){if(Re("baseline",e,n)===void 0)return"middle"}const Hbe={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i=r==="horizontal"?"width":"height",o=r==="horizontal"?"height":"width";return{...Qr(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...ln("x",e,{defaultPos:"mid",vgChannel:"xc"}),...ln("y",e,{defaultPos:"mid",vgChannel:"yc"}),...Ct("size",e,{defaultValue:Gbe(e),vgChannel:i}),[o]:Xe(Re("thickness",n,t))}}};function Gbe(e){const{config:t,markDef:n}=e,{orient:r}=n,i=r==="horizontal"?"width":"height",o=e.getScaleComponent(r==="horizontal"?"x":"y"),s=Re("size",n,t,{vgChannel:i})??t.tick.bandSize;if(s!==void 0)return s;{const a=o?o.get("range"):void 0;return a&&Ga(a)&&ze(a.step)?a.step*3/4:ny(t.view,i)*3/4}}const gm={arc:Fbe,area:Tbe,bar:Mbe,circle:zbe,geoshape:Nbe,image:Obe,line:Dbe,point:Lbe,rect:Bbe,rule:jbe,square:Ibe,text:Ube,tick:Hbe,trail:Rbe};function Vbe(e){if(we([ex,Jv,t1e],e.mark)){const t=Wj(e.mark,e.encoding);if(t.length>0)return Ybe(e,t)}else if(e.mark===Zv){const t=fS.some(n=>Re(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return Xbe(e)}return Q3(e)}const l5="faceted_path_";function Ybe(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:l5+e.requestDataName(We.Main),data:e.requestDataName(We.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:Q3(e,{fromPrefix:l5})}]}const c5="stack_group_";function Xbe(e){var l;const[t]=Q3(e,{fromPrefix:c5}),n=e.scaleName(e.stack.fieldChannel),r=(c={})=>e.vgField(e.stack.fieldChannel,c),i=(c,f)=>{const d=[r({prefix:"min",suffix:"start",expr:f}),r({prefix:"max",suffix:"start",expr:f}),r({prefix:"min",suffix:"end",expr:f}),r({prefix:"max",suffix:"end",expr:f})];return`${c}(${d.map(h=>`scale('${n}',${h})`).join(",")})`};let o,s;e.stack.fieldChannel==="x"?(o={...of(t.encode.update,["y","yc","y2","height",...fS]),x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}},s={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...Jn(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(o={...of(t.encode.update,["x","xc","x2","width"]),y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}},s={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...Jn(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const c of fS){const f=il(c,e.markDef,e.config);t.encode.update[c]?(o[c]=t.encode.update[c],delete t.encode.update[c]):f&&(o[c]=Xe(f)),f&&(t.encode.update[c]={value:0})}const a=[];if(((l=e.stack.groupbyChannels)==null?void 0:l.length)>0)for(const c of e.stack.groupbyChannels){const f=e.fieldDef(c),d=Y(f);d&&a.push(d),(f!=null&&f.bin||f!=null&&f.timeUnit)&&a.push(Y(f,{binSuffix:"end"}))}return o=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((c,f)=>{if(t.encode.update[f])return{...c,[f]:t.encode.update[f]};{const d=il(f,e.markDef,e.config);return d!==void 0?{...c,[f]:Xe(d)}:c}},o),o.stroke&&(o.strokeForeground={value:!0},o.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(We.Main),name:c5+e.requestDataName(We.Main),groupby:a,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:o},marks:[{type:"group",encode:{update:s},marks:[t]}]}]}function Qbe(e){var a;const{encoding:t,stack:n,mark:r,markDef:i,config:o}=e,s=t.order;if(!(!I(s)&&Ai(s)&&lS(s.value)||!s&&lS(Re("order",i,o)))){if((I(s)||W(s))&&!n)return UB(s,{expr:"datum"});if(Va(r)){const u=i.orient==="horizontal"?"y":"x",l=t[u];if(W(l)){const c=l.sort;if(I(c))return{field:Y(l,{prefix:u,suffix:"sort_index",expr:"datum"})};if(io(c))return{field:Y({aggregate:y3(e.encoding)?c.op:void 0,field:c.field},{expr:"datum"})};if(kj(c)){const f=e.fieldDef(c.encoding);return{field:Y(f,{expr:"datum"}),order:c.order}}else return c===null?void 0:{field:Y(l,{binSuffix:(a=e.stack)!=null&&a.impute?"mid":void 0,expr:"datum"})}}return}}}function Q3(e,t={fromPrefix:""}){const{mark:n,markDef:r,encoding:i,config:o}=e,s=ht(r.clip,Kbe(e),Jbe(e)),a=BB(r),u=i.key,l=Qbe(e),c=Zbe(e),f=Re("aria",r,o),d=gm[n].postEncodingTransform?gm[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:gm[n].vgMark,...s?{clip:!0}:{},...a?{style:a}:{},...u?{key:u.field}:{},...l?{sort:l}:{},...c||{},...f===!1?{aria:f}:{},from:{data:t.fromPrefix+e.requestDataName(We.Main)},encode:{update:gm[n].encodeEntry(e)},...d?{transform:d}:{}}]}function Kbe(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t!=null&&t.get("selectionExtent")||n!=null&&n.get("selectionExtent")?!0:void 0}function Jbe(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function Zbe(e){if(!e.component.selection)return null;const t=j(e.component.selection).length;let n=t,r=e.parent;for(;r&&n===0;)n=j(r.component.selection).length,r=r.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip}:null}class FW extends _W{constructor(t,n,r,i={},o){super(t,"unit",n,r,o,void 0,$D(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];const s=po(t.mark)?{...t.mark}:{type:t.mark},a=s.type;s.filled===void 0&&(s.filled=Cbe(s,o,{graticule:t.data&&T3(t.data)}));const u=this.encoding=B1e(t.encoding||{},a,s.filled,o);this.markDef=_be(s,u,o),this.size=Sbe({encoding:u,size:$D(t)?{...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:i}),this.stack=lU(this.markDef,u),this.specifiedScales=this.initScales(a,u),this.specifiedAxes=this.initAxes(u),this.specifiedLegends=this.initLegends(u),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(l=>k3(l))}get hasProjection(){const{encoding:t}=this,n=this.mark===mj,r=t&&Bge.some(i=>fe(t[i]));return n||r}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return Yv.reduce((r,i)=>{const o=wt(n[i]);return o&&(r[i]=this.initScale(o.scale??{})),r},{})}initScale(t){const{domain:n,range:r}=t,i=Wn(t);return I(n)&&(i.domain=n.map(pr)),I(r)&&(i.range=r.map(pr)),i}initAxes(t){return Co.reduce((n,r)=>{const i=t[r];if(fe(i)||r===et&&fe(t.x2)||r===Dt&&fe(t.y2)){const o=fe(i)?i.axis:void 0;n[r]=o&&this.initAxis({...o})}return n},{})}initAxis(t){const n=j(t),r={};for(const i of n){const o=t[i];r[i]=gg(o)?IB(o):pr(o)}return r}initLegends(t){return Xge.reduce((n,r)=>{const i=wt(t[r]);if(i&&Kge(r)){const o=i.legend;n[r]=o&&Wn(o)}return n},{})}parseData(){this.component.data=Cx(this)}parseLayoutSize(){sbe(this)}parseSelections(){this.component.selection=Kve(this,this.selection)}parseMarkGroup(){this.component.mark=Vbe(this)}parseAxesAndHeaders(){this.component.axes=gbe(this)}assembleSelectionTopLevelSignals(t){return xve(this,t)}assembleSignals(){return[...qU(this),...yve(this,[])]}assembleSelectionData(t){return bve(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return z3(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!Vf(this.parent))&&(t=EU(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return Pu(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return go(n)}typedFieldDef(t){const n=this.fieldDef(t);return Dn(n)?n:null}}class K3 extends G3{constructor(t,n,r,i,o){super(t,"layer",n,r,o,t.resolve,t.view);const s={...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((a,u)=>{if(fx(a))return new K3(a,this,this.getName(`layer_${u}`),s,o);if(Es(a))return new FW(a,this,this.getName(`layer_${u}`),s,o);throw new Error(qA(a))})}parseData(){this.component.data=Cx(this);for(const t of this.children)t.parseData()}parseLayoutSize(){ibe(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of j(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){ybe(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),qU(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),z3(this))}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const r of this.children)for(const i of K(r.assembleGroupStyle()))t.add(i);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return wve(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),aW(this))}}function J3(e,t,n,r,i){if(rx(e))return new $h(e,t,n,i);if(fx(e))return new K3(e,t,n,r,i);if(Es(e))return new FW(e,t,n,r,i);if(cye(e))return new fbe(e,t,n,i);throw new Error(qA(e))}function ewe(e,t={}){t.logger&&y0e(t.logger),t.fieldTitle&&Rj(t.fieldTitle);try{const n=uU(_f(t.config,e.config)),r=mU(e,n),i=J3(r,null,"",void 0,n);return i.parse(),x2e(i.component.data,i),{spec:nwe(i,twe(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&v0e(),t.fieldTitle&&M1e()}}function twe(e,t,n,r){const i=r.component.layoutSize.get("width"),o=r.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):Q(t)&&(t={type:t}),i&&o&&hve(t.type)){if(i==="step"&&o==="step")U(cD()),t.type="pad";else if(i==="step"||o==="step"){const s=i==="step"?"width":"height";U(cD(Vv(s)));const a=s==="width"?"height":"width";t.type=pve(a)}}return{...j(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...zD(n,!1),...zD(e,!0)}}function nwe(e,t,n={},r){const i=e.config?_ye(e.config):void 0,o=[].concat(e.assembleSelectionData([]),ebe(e.component.data,n)),s=e.assembleProjections(),a=e.assembleTitle(),u=e.assembleGroupStyle(),l=e.assembleGroupEncodeEntry(!0);let c=e.assembleLayoutSignals();c=c.filter(h=>(h.name==="width"||h.name==="height")&&h.value!==void 0?(t[h.name]=+h.value,!1):!0);const{params:f,...d}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...d,...a?{title:a}:{},...u?{style:u}:{},...l?{encode:{update:l}}:{},data:o,...s.length>0?{projections:s}:{},...e.assembleGroup([...c,...e.assembleSelectionTopLevelSignals([]),...iU(f)]),...i?{config:i}:{},...r?{usermeta:r}:{}}}const rwe=Tge.version,iwe=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:sf,accessPathWithDatum:DA,compile:ewe,contains:we,deepEqual:Ki,deleteNestedProperty:G1,duplicate:ce,entries:_a,every:MA,fieldIntersection:OA,flatAccessWithDatum:vB,getFirstDefined:ht,hasIntersection:NA,hash:be,internalField:wB,isBoolean:gp,isEmpty:Be,isEqual:Pge,isInternalField:EB,isNullOrFalse:lS,isNumeric:jv,keys:j,logicalExpr:_h,mergeDeep:mB,never:gB,normalize:mU,normalizeAngle:mp,omit:Jn,pick:of,prefixGenerator:cS,removePathFromField:RA,replaceAll:nl,replacePathInField:Gr,resetIdCounter:zge,setEqual:yB,some:tl,stringify:He,titleCase:ag,unique:Ji,uniqueId:bB,vals:Gt,varName:Ze,version:rwe},Symbol.toStringTag,{value:"Module"}));function TW(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var owe="vega-themes",swe="2.13.0",awe="Themes for stylized Vega and Vega-Lite visualizations.",uwe=["vega","vega-lite","themes","style"],lwe="BSD-3-Clause",cwe={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},fwe=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],dwe="build/vega-themes.js",Z3="build/vega-themes.module.js",hwe="build/vega-themes.min.js",pwe="build/vega-themes.min.js",gwe="build/vega-themes.module.d.ts",mwe={type:"git",url:"https://github.com/vega/vega-themes.git"},ywe=["src","build"],vwe={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",format:"eslint . --fix",lint:"eslint .",release:"release-it"},xwe={"@babel/core":"^7.21.4","@babel/plugin-transform-runtime":"^7.21.4","@babel/preset-env":"^7.21.4","@babel/preset-typescript":"^7.21.4","@release-it/conventional-changelog":"^5.1.1","@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.0.2","@rollup/plugin-terser":"^0.4.1","@typescript-eslint/eslint-plugin":"^5.59.0","@typescript-eslint/parser":"^5.59.0","browser-sync":"^2.29.1",concurrently:"^8.0.1",eslint:"^8.38.0","eslint-config-prettier":"^8.8.0","eslint-plugin-prettier":"^4.2.1","gh-pages":"^5.0.0",prettier:"^2.8.7","release-it":"^15.10.1",rollup:"^3.20.6","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.2.0",typescript:"^5.0.4",vega:"^5.24.0","vega-lite":"^5.7.1"},bwe={vega:"*","vega-lite":"*"},wwe={},Ewe={name:owe,version:swe,description:awe,keywords:uwe,license:lwe,author:cwe,contributors:fwe,main:dwe,module:Z3,unpkg:hwe,jsdelivr:pwe,types:gwe,repository:mwe,files:ywe,scripts:vwe,devDependencies:xwe,peerDependencies:bwe,dependencies:wwe};const Wl="#fff",f5="#888",Swe={background:"#333",view:{stroke:f5},title:{color:Wl,subtitleColor:Wl},style:{"guide-label":{fill:Wl},"guide-title":{fill:Wl}},axis:{domainColor:Wl,gridColor:f5,tickColor:Wl}},eu="#4572a7",_we={background:"#fff",arc:{fill:eu},area:{fill:eu},line:{stroke:eu,strokeWidth:2},path:{stroke:eu},rect:{fill:eu},shape:{stroke:eu},symbol:{fill:eu,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},tu="#30a2da",vb="#cbcbcb",kwe="#999",$we="#333",d5="#f0f0f0",h5="#333",Cwe={arc:{fill:tu},area:{fill:tu},axis:{domainColor:vb,grid:!0,gridColor:vb,gridWidth:1,labelColor:kwe,labelFontSize:10,titleColor:$we,tickColor:vb,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:d5,group:{fill:d5},legend:{labelColor:h5,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:h5,titleFontSize:14,titlePadding:10},line:{stroke:tu,strokeWidth:2},path:{stroke:tu,strokeWidth:.5},rect:{fill:tu},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:tu},bar:{binSpacing:2,fill:tu,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},nu="#000",Awe={group:{fill:"#e5e5e5"},arc:{fill:nu},area:{fill:nu},line:{stroke:nu},path:{stroke:nu},rect:{fill:nu},shape:{stroke:nu},symbol:{fill:nu,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},Fwe=22,Twe="normal",p5="Benton Gothic, sans-serif",g5=11.5,Mwe="normal",ru="#82c6df",xb="Benton Gothic Bold, sans-serif",m5="normal",y5=13,kd={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},Nwe={background:"#ffffff",title:{anchor:"start",color:"#000000",font:xb,fontSize:Fwe,fontWeight:Twe},arc:{fill:ru},area:{fill:ru},line:{stroke:ru,strokeWidth:2},path:{stroke:ru},rect:{fill:ru},shape:{stroke:ru},symbol:{fill:ru,size:30},axis:{labelFont:p5,labelFontSize:g5,labelFontWeight:Mwe,titleFont:xb,titleFontSize:y5,titleFontWeight:m5},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:p5,labelFontSize:g5,symbolType:"square",titleFont:xb,titleFontSize:y5,titleFontWeight:m5},range:{category:kd["category-6"],diverging:kd["fireandice-6"],heatmap:kd["fire-7"],ordinal:kd["fire-7"],ramp:kd["fire-7"]}},iu="#ab5787",mm="#979797",Owe={background:"#f9f9f9",arc:{fill:iu},area:{fill:iu},line:{stroke:iu},path:{stroke:iu},rect:{fill:iu},shape:{stroke:iu},symbol:{fill:iu,size:30},axis:{domainColor:mm,domainWidth:.5,gridWidth:.2,labelColor:mm,tickColor:mm,tickWidth:.2,titleColor:mm},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},ou="#3e5c69",Dwe={background:"#fff",arc:{fill:ou},area:{fill:ou},line:{stroke:ou},path:{stroke:ou},rect:{fill:ou},shape:{stroke:ou},symbol:{fill:ou},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},Fr="#1696d2",v5="#000000",Rwe="#FFFFFF",ym="Lato",bb="Lato",Pwe="Lato",Lwe="#DEDDDD",zwe=18,$d={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},Iwe={background:Rwe,title:{anchor:"start",fontSize:zwe,font:ym},axisX:{domain:!0,domainColor:v5,domainWidth:1,grid:!1,labelFontSize:12,labelFont:bb,labelAngle:0,tickColor:v5,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:ym},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:Lwe,gridWidth:1,labelFontSize:12,labelFont:bb,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:ym,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:bb,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:ym,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:$d["six-groups-cat-1"],diverging:$d["diverging-colors"],heatmap:$d["diverging-colors"],ordinal:$d["six-groups-seq"],ramp:$d["shades-blue"]},area:{fill:Fr},rect:{fill:Fr},line:{color:Fr,stroke:Fr,strokeWidth:5},trail:{color:Fr,stroke:Fr,strokeWidth:0,size:1},path:{stroke:Fr,strokeWidth:.5},point:{filled:!0},text:{font:Pwe,color:Fr,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:Fr,stroke:null}},arc:{fill:Fr},shape:{stroke:Fr},symbol:{fill:Fr,size:30}},su="#3366CC",x5="#ccc",vm="Arial, sans-serif",Bwe={arc:{fill:su},area:{fill:su},path:{stroke:su},rect:{fill:su},shape:{stroke:su},symbol:{stroke:su},circle:{fill:su},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:vm,fontSize:12},"guide-title":{font:vm,fontSize:12},"group-title":{font:vm,fontSize:12}},title:{font:vm,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:x5,tickColor:x5,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},eF=e=>e*(1/3+1),b5=eF(9),w5=eF(10),E5=eF(12),Cd="Segoe UI",S5="wf_standard-font, helvetica, arial, sans-serif",_5="#252423",Ad="#605E5C",k5="transparent",jwe="#C8C6C4",ti="#118DFF",Uwe="#12239E",Wwe="#E66C37",qwe="#6B007B",Hwe="#E044A7",Gwe="#744EC2",Vwe="#D9B300",Ywe="#D64550",MW=ti,NW="#DEEFFF",$5=[NW,MW],Xwe=[NW,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",MW],Qwe={view:{stroke:k5},background:k5,font:Cd,header:{titleFont:S5,titleFontSize:E5,titleColor:_5,labelFont:Cd,labelFontSize:w5,labelColor:Ad},axis:{ticks:!1,grid:!1,domain:!1,labelColor:Ad,labelFontSize:b5,titleFont:S5,titleColor:_5,titleFontSize:E5,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:jwe,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:ti},line:{stroke:ti,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:Cd,fontSize:b5,fill:Ad},arc:{fill:ti},area:{fill:ti,line:!0,opacity:.6},path:{stroke:ti},rect:{fill:ti},point:{fill:ti,filled:!0,size:75},shape:{stroke:ti},symbol:{fill:ti,strokeWidth:1.5,size:50},legend:{titleFont:Cd,titleFontWeight:"bold",titleColor:Ad,labelFont:Cd,labelFontSize:w5,labelColor:Ad,symbolType:"circle",symbolSize:75},range:{category:[ti,Uwe,Wwe,qwe,Hwe,Gwe,Vwe,Ywe],diverging:$5,heatmap:$5,ordinal:Xwe}},Kwe=Ewe.version,Jwe=Object.freeze(Object.defineProperty({__proto__:null,dark:Swe,excel:_we,fivethirtyeight:Cwe,ggplot2:Awe,googlecharts:Bwe,latimes:Nwe,powerbi:Qwe,quartz:Owe,urbaninstitute:Iwe,version:Kwe,vox:Dwe},Symbol.toStringTag,{value:"Module"}));function wp(e){"@babel/helpers - typeof";return wp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wp(e)}function Zwe(e,t){if(wp(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(wp(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function eEe(e){var t=Zwe(e,"string");return wp(t)==="symbol"?t:String(t)}function tEe(e,t,n){return t=eEe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nEe(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function rEe(e,t){if(e==null)return{};var n=nEe(e,t),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}const iEe=["title","image"];function oEe(e,t,n){if(I(e))return`[${e.map(r=>t(Q(r)?r:C5(r,n))).join(", ")}]`;if(J(e)){let r="";const i=e,{title:o,image:s}=i,a=rEe(i,iEe);o&&(r+=`<h2>${t(o)}</h2>`),s&&(r+=`<img src="${t(s)}">`);const u=Object.keys(a);if(u.length>0){r+="<table>";for(const l of u){let c=a[l];c!==void 0&&(J(c)&&(c=C5(c,n)),r+=`<tr><td class="key">${t(l)}:</td><td class="value">${t(c)}</td></tr>`)}r+="</table>"}return r||"{}"}return t(e)}function sEe(e){const t=[];return function(n,r){if(typeof r!="object"||r===null)return r;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}function C5(e,t){return JSON.stringify(e,sEe(t))}var aEe=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const OW="vg-tooltip-element",uEe={offsetX:10,offsetY:10,id:OW,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:lEe,maxDepth:2,formatTooltip:oEe};function lEe(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function cEe(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return aEe.toString().replace(OW,e)}function fEe(e,t,n,r){let i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);let o=e.clientY+r;return o+t.height>window.innerHeight&&(o=+e.clientY-r-t.height),{x:i,y:o}}function A5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function F5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?A5(Object(n),!0).forEach(function(r){tEe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}class dEe{constructor(t){this.options=F5(F5({},uEe),t);const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=cEe(n);const i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}}tooltipHandler(t,n,r,i){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(i,this.options.sanitize,this.options.maxDepth),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:o,y:s}=fEe(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${s}px`,this.el.style.left=`${o}px`}}function Ep(e){"@babel/helpers - typeof";return Ep=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ep(e)}function hEe(e,t){if(Ep(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Ep(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pEe(e){var t=hEe(e,"string");return Ep(t)==="symbol"?t:String(t)}function gEe(e,t,n){return t=pEe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mEe(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var wb,T5;function yEe(){return T5||(T5=1,wb=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}),wb}var vEe=Te;Te.Node=dl;Te.create=Te;function Te(e){var t=this;if(t instanceof Te||(t=new Te),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(i){t.push(i)});else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)t.push(arguments[n]);return t}Te.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t};Te.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};Te.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};Te.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)bEe(this,arguments[e]);return this.length};Te.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)wEe(this,arguments[e]);return this.length};Te.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};Te.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};Te.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;n!==null;r++)e.call(t,n.value,r,this),n=n.next};Te.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;n!==null;r--)e.call(t,n.value,r,this),n=n.prev};Te.prototype.get=function(e){for(var t=0,n=this.head;n!==null&&t<e;t++)n=n.next;if(t===e&&n!==null)return n.value};Te.prototype.getReverse=function(e){for(var t=0,n=this.tail;n!==null&&t<e;t++)n=n.prev;if(t===e&&n!==null)return n.value};Te.prototype.map=function(e,t){t=t||this;for(var n=new Te,r=this.head;r!==null;)n.push(e.call(t,r.value,this)),r=r.next;return n};Te.prototype.mapReverse=function(e,t){t=t||this;for(var n=new Te,r=this.tail;r!==null;)n.push(e.call(t,r.value,this)),r=r.prev;return n};Te.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else if(this.head)r=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;r!==null;i++)n=e(n,r.value,i),r=r.next;return n};Te.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else if(this.tail)r=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;r!==null;i--)n=e(n,r.value,i),r=r.prev;return n};Te.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;n!==null;t++)e[t]=n.value,n=n.next;return e};Te.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;n!==null;t++)e[t]=n.value,n=n.prev;return e};Te.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new Te;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(;i!==null&&r<t;r++,i=i.next)n.push(i.value);return n};Te.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new Te;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=this.length,i=this.tail;i!==null&&r>t;r--)i=i.prev;for(;i!==null&&r>e;r--,i=i.prev)n.push(i.value);return n};Te.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(var o=[],r=0;i&&r<t;r++)o.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var r=0;r<n.length;r++)i=xEe(this,i,n[r]);return o};Te.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;n!==null;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};function xEe(e,t,n){var r=t===e.head?new dl(n,null,t,e):new dl(n,t,t.next,e);return r.next===null&&(e.tail=r),r.prev===null&&(e.head=r),e.length++,r}function bEe(e,t){e.tail=new dl(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function wEe(e,t){e.head=new dl(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function dl(e,t,n,r){if(!(this instanceof dl))return new dl(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{yEe()(Te)}catch{}const EEe=vEe,yu=Symbol("max"),Io=Symbol("length"),ql=Symbol("lengthCalculator"),Ch=Symbol("allowStale"),$u=Symbol("maxAge"),Ro=Symbol("dispose"),M5=Symbol("noDisposeOnSet"),kt=Symbol("lruList"),ni=Symbol("cache"),DW=Symbol("updateAgeOnGet"),Eb=()=>1;class SEe{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");this[yu]=t.max||1/0;const n=t.length||Eb;if(this[ql]=typeof n!="function"?Eb:n,this[Ch]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[$u]=t.maxAge||0,this[Ro]=t.dispose,this[M5]=t.noDisposeOnSet||!1,this[DW]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[yu]=t||1/0,Fd(this)}get max(){return this[yu]}set allowStale(t){this[Ch]=!!t}get allowStale(){return this[Ch]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[$u]=t,Fd(this)}get maxAge(){return this[$u]}set lengthCalculator(t){typeof t!="function"&&(t=Eb),t!==this[ql]&&(this[ql]=t,this[Io]=0,this[kt].forEach(n=>{n.length=this[ql](n.value,n.key),this[Io]+=n.length})),Fd(this)}get lengthCalculator(){return this[ql]}get length(){return this[Io]}get itemCount(){return this[kt].length}rforEach(t,n){n=n||this;for(let r=this[kt].tail;r!==null;){const i=r.prev;N5(this,t,r,n),r=i}}forEach(t,n){n=n||this;for(let r=this[kt].head;r!==null;){const i=r.next;N5(this,t,r,n),r=i}}keys(){return this[kt].toArray().map(t=>t.key)}values(){return this[kt].toArray().map(t=>t.value)}reset(){this[Ro]&&this[kt]&&this[kt].length&&this[kt].forEach(t=>this[Ro](t.key,t.value)),this[ni]=new Map,this[kt]=new EEe,this[Io]=0}dump(){return this[kt].map(t=>uy(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[kt]}set(t,n,r){if(r=r||this[$u],r&&typeof r!="number")throw new TypeError("maxAge must be a number");const i=r?Date.now():0,o=this[ql](n,t);if(this[ni].has(t)){if(o>this[yu])return Fc(this,this[ni].get(t)),!1;const u=this[ni].get(t).value;return this[Ro]&&(this[M5]||this[Ro](t,u.value)),u.now=i,u.maxAge=r,u.value=n,this[Io]+=o-u.length,u.length=o,this.get(t),Fd(this),!0}const s=new _Ee(t,n,o,i,r);return s.length>this[yu]?(this[Ro]&&this[Ro](t,n),!1):(this[Io]+=s.length,this[kt].unshift(s),this[ni].set(t,this[kt].head),Fd(this),!0)}has(t){if(!this[ni].has(t))return!1;const n=this[ni].get(t).value;return!uy(this,n)}get(t){return Sb(this,t,!0)}peek(t){return Sb(this,t,!1)}pop(){const t=this[kt].tail;return t?(Fc(this,t),t.value):null}del(t){Fc(this,this[ni].get(t))}load(t){this.reset();const n=Date.now();for(let r=t.length-1;r>=0;r--){const i=t[r],o=i.e||0;if(o===0)this.set(i.k,i.v);else{const s=o-n;s>0&&this.set(i.k,i.v,s)}}}prune(){this[ni].forEach((t,n)=>Sb(this,n,!1))}}const Sb=(e,t,n)=>{const r=e[ni].get(t);if(r){const i=r.value;if(uy(e,i)){if(Fc(e,r),!e[Ch])return}else n&&(e[DW]&&(r.value.now=Date.now()),e[kt].unshiftNode(r));return i.value}},uy=(e,t)=>{if(!t||!t.maxAge&&!e[$u])return!1;const n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[$u]&&n>e[$u]},Fd=e=>{if(e[Io]>e[yu])for(let t=e[kt].tail;e[Io]>e[yu]&&t!==null;){const n=t.prev;Fc(e,t),t=n}},Fc=(e,t)=>{if(t){const n=t.value;e[Ro]&&e[Ro](n.key,n.value),e[Io]-=n.length,e[ni].delete(n.key),e[kt].removeNode(t)}};class _Ee{constructor(t,n,r,i,o){this.key=t,this.value=n,this.length=r,this.now=i,this.maxAge=o||0}}const N5=(e,t,n,r)=>{let i=n.value;uy(e,i)&&(Fc(e,n),e[Ch]||(i=void 0)),i&&t.call(r,i.value,i.key,e)};var kEe=SEe;const $Ee=Object.freeze({loose:!0}),CEe=Object.freeze({}),AEe=e=>e?typeof e!="object"?$Ee:e:CEe;var tF=AEe,OS={exports:{}};const FEe="2.0.0",TEe=256,MEe=Number.MAX_SAFE_INTEGER||9007199254740991,NEe=16,OEe=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var nF={MAX_LENGTH:TEe,MAX_SAFE_COMPONENT_LENGTH:NEe,MAX_SAFE_INTEGER:MEe,RELEASE_TYPES:OEe,SEMVER_SPEC_VERSION:FEe,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const DEe=typeof process=="object"&&process.env&&{}.NODE_DEBUG&&/\bsemver\b/i.test({}.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var Ax=DEe;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n}=nF,r=Ax;t=e.exports={};const i=t.re=[],o=t.src=[],s=t.t={};let a=0;const u=(l,c,f)=>{const d=a++;r(l,d,c),s[l]=d,o[d]=c,i[d]=new RegExp(c,f?"g":void 0)};u("NUMERICIDENTIFIER","0|[1-9]\\d*"),u("NUMERICIDENTIFIERLOOSE","[0-9]+"),u("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),u("MAINVERSION",`(${o[s.NUMERICIDENTIFIER]})\\.(${o[s.NUMERICIDENTIFIER]})\\.(${o[s.NUMERICIDENTIFIER]})`),u("MAINVERSIONLOOSE",`(${o[s.NUMERICIDENTIFIERLOOSE]})\\.(${o[s.NUMERICIDENTIFIERLOOSE]})\\.(${o[s.NUMERICIDENTIFIERLOOSE]})`),u("PRERELEASEIDENTIFIER",`(?:${o[s.NUMERICIDENTIFIER]}|${o[s.NONNUMERICIDENTIFIER]})`),u("PRERELEASEIDENTIFIERLOOSE",`(?:${o[s.NUMERICIDENTIFIERLOOSE]}|${o[s.NONNUMERICIDENTIFIER]})`),u("PRERELEASE",`(?:-(${o[s.PRERELEASEIDENTIFIER]}(?:\\.${o[s.PRERELEASEIDENTIFIER]})*))`),u("PRERELEASELOOSE",`(?:-?(${o[s.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${o[s.PRERELEASEIDENTIFIERLOOSE]})*))`),u("BUILDIDENTIFIER","[0-9A-Za-z-]+"),u("BUILD",`(?:\\+(${o[s.BUILDIDENTIFIER]}(?:\\.${o[s.BUILDIDENTIFIER]})*))`),u("FULLPLAIN",`v?${o[s.MAINVERSION]}${o[s.PRERELEASE]}?${o[s.BUILD]}?`),u("FULL",`^${o[s.FULLPLAIN]}$`),u("LOOSEPLAIN",`[v=\\s]*${o[s.MAINVERSIONLOOSE]}${o[s.PRERELEASELOOSE]}?${o[s.BUILD]}?`),u("LOOSE",`^${o[s.LOOSEPLAIN]}$`),u("GTLT","((?:<|>)?=?)"),u("XRANGEIDENTIFIERLOOSE",`${o[s.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),u("XRANGEIDENTIFIER",`${o[s.NUMERICIDENTIFIER]}|x|X|\\*`),u("XRANGEPLAIN",`[v=\\s]*(${o[s.XRANGEIDENTIFIER]})(?:\\.(${o[s.XRANGEIDENTIFIER]})(?:\\.(${o[s.XRANGEIDENTIFIER]})(?:${o[s.PRERELEASE]})?${o[s.BUILD]}?)?)?`),u("XRANGEPLAINLOOSE",`[v=\\s]*(${o[s.XRANGEIDENTIFIERLOOSE]})(?:\\.(${o[s.XRANGEIDENTIFIERLOOSE]})(?:\\.(${o[s.XRANGEIDENTIFIERLOOSE]})(?:${o[s.PRERELEASELOOSE]})?${o[s.BUILD]}?)?)?`),u("XRANGE",`^${o[s.GTLT]}\\s*${o[s.XRANGEPLAIN]}$`),u("XRANGELOOSE",`^${o[s.GTLT]}\\s*${o[s.XRANGEPLAINLOOSE]}$`),u("COERCE",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?(?:$|[^\\d])`),u("COERCERTL",o[s.COERCE],!0),u("LONETILDE","(?:~>?)"),u("TILDETRIM",`(\\s*)${o[s.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",u("TILDE",`^${o[s.LONETILDE]}${o[s.XRANGEPLAIN]}$`),u("TILDELOOSE",`^${o[s.LONETILDE]}${o[s.XRANGEPLAINLOOSE]}$`),u("LONECARET","(?:\\^)"),u("CARETTRIM",`(\\s*)${o[s.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",u("CARET",`^${o[s.LONECARET]}${o[s.XRANGEPLAIN]}$`),u("CARETLOOSE",`^${o[s.LONECARET]}${o[s.XRANGEPLAINLOOSE]}$`),u("COMPARATORLOOSE",`^${o[s.GTLT]}\\s*(${o[s.LOOSEPLAIN]})$|^$`),u("COMPARATOR",`^${o[s.GTLT]}\\s*(${o[s.FULLPLAIN]})$|^$`),u("COMPARATORTRIM",`(\\s*)${o[s.GTLT]}\\s*(${o[s.LOOSEPLAIN]}|${o[s.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",u("HYPHENRANGE",`^\\s*(${o[s.XRANGEPLAIN]})\\s+-\\s+(${o[s.XRANGEPLAIN]})\\s*$`),u("HYPHENRANGELOOSE",`^\\s*(${o[s.XRANGEPLAINLOOSE]})\\s+-\\s+(${o[s.XRANGEPLAINLOOSE]})\\s*$`),u("STAR","(<|>)?=?\\s*\\*"),u("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),u("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(OS,OS.exports);var rF=OS.exports;const O5=/^[0-9]+$/,RW=(e,t)=>{const n=O5.test(e),r=O5.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1},REe=(e,t)=>RW(t,e);var PEe={compareIdentifiers:RW,rcompareIdentifiers:REe};const xm=Ax,{MAX_LENGTH:D5,MAX_SAFE_INTEGER:bm}=nF,{re:R5,t:P5}=rF,LEe=tF,{compareIdentifiers:Hl}=PEe;let zEe=class Ui{constructor(t,n){if(n=LEe(n),t instanceof Ui){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid Version: ${t}`);if(t.length>D5)throw new TypeError(`version is longer than ${D5} characters`);xm("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const r=t.trim().match(n.loose?R5[P5.LOOSE]:R5[P5.FULL]);if(!r)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>bm||this.major<0)throw new TypeError("Invalid major version");if(this.minor>bm||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>bm||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const o=+i;if(o>=0&&o<bm)return o}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(xm("SemVer.compare",this.version,this.options,t),!(t instanceof Ui)){if(typeof t=="string"&&t===this.version)return 0;t=new Ui(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof Ui||(t=new Ui(t,this.options)),Hl(this.major,t.major)||Hl(this.minor,t.minor)||Hl(this.patch,t.patch)}comparePre(t){if(t instanceof Ui||(t=new Ui(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const r=this.prerelease[n],i=t.prerelease[n];if(xm("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return Hl(r,i)}while(++n)}compareBuild(t){t instanceof Ui||(t=new Ui(t,this.options));let n=0;do{const r=this.build[n],i=t.build[n];if(xm("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return Hl(r,i)}while(++n)}inc(t,n,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{let i=this.prerelease.length;for(;--i>=0;)typeof this.prerelease[i]=="number"&&(this.prerelease[i]++,i=-2);i===-1&&this.prerelease.push(0)}if(n){const i=Number(r)?1:0;Hl(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=[n,i]):this.prerelease=[n,i]}break;default:throw new Error(`invalid increment argument: ${t}`)}return this.format(),this.raw=this.version,this}};var iF=zEe;const L5=iF,IEe=(e,t,n)=>new L5(e,n).compare(new L5(t,n));var Yf=IEe;const BEe=Yf,jEe=(e,t,n)=>BEe(e,t,n)===0;var UEe=jEe;const WEe=Yf,qEe=(e,t,n)=>WEe(e,t,n)!==0;var HEe=qEe;const GEe=Yf,VEe=(e,t,n)=>GEe(e,t,n)>0;var YEe=VEe;const XEe=Yf,QEe=(e,t,n)=>XEe(e,t,n)>=0;var KEe=QEe;const JEe=Yf,ZEe=(e,t,n)=>JEe(e,t,n)<0;var eSe=ZEe;const tSe=Yf,nSe=(e,t,n)=>tSe(e,t,n)<=0;var rSe=nSe;const iSe=UEe,oSe=HEe,sSe=YEe,aSe=KEe,uSe=eSe,lSe=rSe,cSe=(e,t,n,r)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return iSe(e,n,r);case"!=":return oSe(e,n,r);case">":return sSe(e,n,r);case">=":return aSe(e,n,r);case"<":return uSe(e,n,r);case"<=":return lSe(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}};var fSe=cSe,_b,z5;function dSe(){if(z5)return _b;z5=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(c,f){if(f=n(f),c instanceof t){if(c.loose===!!f.loose)return c;c=c.value}s("comparator",c,f),this.options=f,this.loose=!!f.loose,this.parse(c),this.semver===e?this.value="":this.value=this.operator+this.semver.version,s("comp",this)}parse(c){const f=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],d=c.match(f);if(!d)throw new TypeError(`Invalid comparator: ${c}`);this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new a(d[2],this.options.loose):this.semver=e}toString(){return this.value}test(c){if(s("Comparator.test",c,this.options.loose),this.semver===e||c===e)return!0;if(typeof c=="string")try{c=new a(c,this.options)}catch{return!1}return o(c,this.operator,this.semver,this.options)}intersects(c,f){if(!(c instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new u(c.value,f).test(this.value):c.operator===""?c.value===""?!0:new u(this.value,f).test(c.semver):(f=n(f),f.includePrerelease&&(this.value==="<0.0.0-0"||c.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||c.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&c.operator.startsWith(">")||this.operator.startsWith("<")&&c.operator.startsWith("<")||this.semver.version===c.semver.version&&this.operator.includes("=")&&c.operator.includes("=")||o(this.semver,"<",c.semver,f)&&this.operator.startsWith(">")&&c.operator.startsWith("<")||o(this.semver,">",c.semver,f)&&this.operator.startsWith("<")&&c.operator.startsWith(">")))}}_b=t;const n=tF,{re:r,t:i}=rF,o=fSe,s=Ax,a=iF,u=PW();return _b}var kb,I5;function PW(){if(I5)return kb;I5=1;class e{constructor(T,F){if(F=r(F),T instanceof e)return T.loose===!!F.loose&&T.includePrerelease===!!F.includePrerelease?T:new e(T.raw,F);if(T instanceof i)return this.raw=T.value,this.set=[[T]],this.format(),this;if(this.options=F,this.loose=!!F.loose,this.includePrerelease=!!F.includePrerelease,this.raw=T,this.set=T.split("||").map(N=>this.parseRange(N.trim())).filter(N=>N.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${T}`);if(this.set.length>1){const N=this.set[0];if(this.set=this.set.filter(D=>!p(D[0])),this.set.length===0)this.set=[N];else if(this.set.length>1){for(const D of this.set)if(D.length===1&&g(D[0])){this.set=[D];break}}}this.format()}format(){return this.range=this.set.map(T=>T.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(T){T=T.trim();const N=((this.options.includePrerelease&&d)|(this.options.loose&&h))+":"+T,D=n.get(N);if(D)return D;const M=this.options.loose,O=M?a[u.HYPHENRANGELOOSE]:a[u.HYPHENRANGE];T=T.replace(O,A(this.options.includePrerelease)),o("hyphen replace",T),T=T.replace(a[u.COMPARATORTRIM],l),o("comparator trim",T),T=T.replace(a[u.TILDETRIM],c),T=T.replace(a[u.CARETTRIM],f),T=T.split(/\s+/).join(" ");let B=T.split(" ").map(de=>y(de,this.options)).join(" ").split(/\s+/).map(de=>k(de,this.options));M&&(B=B.filter(de=>(o("loose invalid filter",de,this.options),!!de.match(a[u.COMPARATORLOOSE])))),o("range list",B);const X=new Map,te=B.map(de=>new i(de,this.options));for(const de of te){if(p(de))return[de];X.set(de.value,de)}X.size>1&&X.has("")&&X.delete("");const xe=[...X.values()];return n.set(N,xe),xe}intersects(T,F){if(!(T instanceof e))throw new TypeError("a Range is required");return this.set.some(N=>m(N,F)&&T.set.some(D=>m(D,F)&&N.every(M=>D.every(O=>M.intersects(O,F)))))}test(T){if(!T)return!1;if(typeof T=="string")try{T=new s(T,this.options)}catch{return!1}for(let F=0;F<this.set.length;F++)if(R(this.set[F],T,this.options))return!0;return!1}}kb=e;const t=kEe,n=new t({max:1e3}),r=tF,i=dSe(),o=Ax,s=iF,{re:a,t:u,comparatorTrimReplace:l,tildeTrimReplace:c,caretTrimReplace:f}=rF,{FLAG_INCLUDE_PRERELEASE:d,FLAG_LOOSE:h}=nF,p=C=>C.value==="<0.0.0-0",g=C=>C.value==="",m=(C,T)=>{let F=!0;const N=C.slice();let D=N.pop();for(;F&&N.length;)F=N.every(M=>D.intersects(M,T)),D=N.pop();return F},y=(C,T)=>(o("comp",C,T),C=w(C,T),o("caret",C),C=x(C,T),o("tildes",C),C=E(C,T),o("xrange",C),C=$(C,T),o("stars",C),C),v=C=>!C||C.toLowerCase()==="x"||C==="*",x=(C,T)=>C.trim().split(/\s+/).map(F=>b(F,T)).join(" "),b=(C,T)=>{const F=T.loose?a[u.TILDELOOSE]:a[u.TILDE];return C.replace(F,(N,D,M,O,B)=>{o("tilde",C,N,D,M,O,B);let X;return v(D)?X="":v(M)?X=`>=${D}.0.0 <${+D+1}.0.0-0`:v(O)?X=`>=${D}.${M}.0 <${D}.${+M+1}.0-0`:B?(o("replaceTilde pr",B),X=`>=${D}.${M}.${O}-${B} <${D}.${+M+1}.0-0`):X=`>=${D}.${M}.${O} <${D}.${+M+1}.0-0`,o("tilde return",X),X})},w=(C,T)=>C.trim().split(/\s+/).map(F=>S(F,T)).join(" "),S=(C,T)=>{o("caret",C,T);const F=T.loose?a[u.CARETLOOSE]:a[u.CARET],N=T.includePrerelease?"-0":"";return C.replace(F,(D,M,O,B,X)=>{o("caret",C,D,M,O,B,X);let te;return v(M)?te="":v(O)?te=`>=${M}.0.0${N} <${+M+1}.0.0-0`:v(B)?M==="0"?te=`>=${M}.${O}.0${N} <${M}.${+O+1}.0-0`:te=`>=${M}.${O}.0${N} <${+M+1}.0.0-0`:X?(o("replaceCaret pr",X),M==="0"?O==="0"?te=`>=${M}.${O}.${B}-${X} <${M}.${O}.${+B+1}-0`:te=`>=${M}.${O}.${B}-${X} <${M}.${+O+1}.0-0`:te=`>=${M}.${O}.${B}-${X} <${+M+1}.0.0-0`):(o("no pr"),M==="0"?O==="0"?te=`>=${M}.${O}.${B}${N} <${M}.${O}.${+B+1}-0`:te=`>=${M}.${O}.${B}${N} <${M}.${+O+1}.0-0`:te=`>=${M}.${O}.${B} <${+M+1}.0.0-0`),o("caret return",te),te})},E=(C,T)=>(o("replaceXRanges",C,T),C.split(/\s+/).map(F=>_(F,T)).join(" ")),_=(C,T)=>{C=C.trim();const F=T.loose?a[u.XRANGELOOSE]:a[u.XRANGE];return C.replace(F,(N,D,M,O,B,X)=>{o("xRange",C,N,D,M,O,B,X);const te=v(M),xe=te||v(O),de=xe||v(B),Oe=de;return D==="="&&Oe&&(D=""),X=T.includePrerelease?"-0":"",te?D===">"||D==="<"?N="<0.0.0-0":N="*":D&&Oe?(xe&&(O=0),B=0,D===">"?(D=">=",xe?(M=+M+1,O=0,B=0):(O=+O+1,B=0)):D==="<="&&(D="<",xe?M=+M+1:O=+O+1),D==="<"&&(X="-0"),N=`${D+M}.${O}.${B}${X}`):xe?N=`>=${M}.0.0${X} <${+M+1}.0.0-0`:de&&(N=`>=${M}.${O}.0${X} <${M}.${+O+1}.0-0`),o("xRange return",N),N})},$=(C,T)=>(o("replaceStars",C,T),C.trim().replace(a[u.STAR],"")),k=(C,T)=>(o("replaceGTE0",C,T),C.trim().replace(a[T.includePrerelease?u.GTE0PRE:u.GTE0],"")),A=C=>(T,F,N,D,M,O,B,X,te,xe,de,Oe,zt)=>(v(N)?F="":v(D)?F=`>=${N}.0.0${C?"-0":""}`:v(M)?F=`>=${N}.${D}.0${C?"-0":""}`:O?F=`>=${F}`:F=`>=${F}${C?"-0":""}`,v(te)?X="":v(xe)?X=`<${+te+1}.0.0-0`:v(de)?X=`<${te}.${+xe+1}.0-0`:Oe?X=`<=${te}.${xe}.${de}-${Oe}`:C?X=`<${te}.${xe}.${+de+1}-0`:X=`<=${X}`,`${F} ${X}`.trim()),R=(C,T,F)=>{for(let N=0;N<C.length;N++)if(!C[N].test(T))return!1;if(T.prerelease.length&&!F.includePrerelease){for(let N=0;N<C.length;N++)if(o(C[N].semver),C[N].semver!==i.ANY&&C[N].semver.prerelease.length>0){const D=C[N].semver;if(D.major===T.major&&D.minor===T.minor&&D.patch===T.patch)return!0}return!1}return!0};return kb}const hSe=PW(),pSe=(e,t,n)=>{try{t=new hSe(t,n)}catch{return!1}return t.test(e)};var gSe=pSe,LW=mEe(gSe);function mSe(e,t,n){const r=e.open(t),i=1e4,o=250,{origin:s}=new URL(t);let a=~~(i/o);function u(c){c.source===r&&(a=0,e.removeEventListener("message",u,!1))}e.addEventListener("message",u,!1);function l(){a<=0||(r.postMessage(n,s),setTimeout(l,o),a-=1)}setTimeout(l,o)}var ySe=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function zW(e,...t){for(const n of t)vSe(e,n);return e}function vSe(e,t){for(const n of Object.keys(t))kf(e,n,t[n],!0)}function B5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function fa(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?B5(Object(n),!0).forEach(function(r){gEe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}const ii=Kpe;let Sp=iwe;const wm=typeof window<"u"?window:void 0;var H5;Sp===void 0&&((H5=wm==null?void 0:wm.vl)!=null&&H5.compile)&&(Sp=wm.vl);const xSe={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},bSe={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},nh={vega:"Vega","vega-lite":"Vega-Lite"},ly={vega:ii.version,"vega-lite":Sp?Sp.version:"not available"},wSe={vega:e=>e,"vega-lite":(e,t)=>Sp.compile(e,{config:t}).spec},ESe=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,SSe="chart-wrapper";function _Se(e){return typeof e=="function"}function j5(e,t,n,r){const i=`<html><head>${t}</head><body><pre><code class="json">`,o=`</code></pre>${n}</body></html>`,s=window.open("");s.document.write(i+e+o),s.document.title=`${nh[r]} JSON Source`}function kSe(e,t){if(e.$schema){const n=TW(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${nh[n.library]}, but mode argument sets ${nh[t]??t}.`);const r=n.library;return LW(ly[r],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${nh[r]} ${n.version}, but the current version of ${nh[r]} is v${ly[r]}.`),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function $Se(e){return!!(e&&"load"in e)}function U5(e){return $Se(e)?e:ii.loader(e)}function CSe(e){var n;const t=((n=e.usermeta)==null?void 0:n.embedOptions)??{};return Q(t.defaultStyle)&&(t.defaultStyle=!1),t}async function ASe(e,t,n={}){let r,i;Q(t)?(i=U5(n.loader),r=JSON.parse(await i.load(t))):r=t;const o=CSe(r),s=o.loader;(!i||s)&&(i=U5(n.loader??s));const a=await W5(o,i),u=await W5(n,i),l=fa(fa({},zW(u,a)),{},{config:_f(u.config??{},a.config??{})});return await TSe(e,r,l,i)}async function W5(e,t){const n=Q(e.config)?JSON.parse(await t.load(e.config)):e.config??{},r=Q(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return fa(fa(fa({},e),r?{patch:r}:{}),n?{config:n}:{})}function FSe(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function TSe(e,t,n={},r){const i=n.theme?_f(Jwe[n.theme],n.config??{}):n.config,o=Oa(n.actions)?n.actions:zW({},xSe,n.actions??{}),s=fa(fa({},bSe),n.i18n),a=n.renderer??"canvas",u=n.logLevel??ii.Warn,l=n.downloadFileName??"visualization",c=typeof e=="string"?document.querySelector(e):e;if(!c)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const w="vega-embed-style",{root:S,rootContainer:E}=FSe(c);if(!S.getElementById(w)){const _=document.createElement("style");_.id=w,_.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?ySe.toString():n.defaultStyle,E.appendChild(_)}}const f=kSe(t,n.mode);let d=wSe[f](t,i);if(f==="vega-lite"&&d.$schema){const w=TW(d.$schema);LW(ly.vega,`^${w.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${w.version}, but current version is v${ly.vega}.`)}c.classList.add("vega-embed"),o&&c.classList.add("has-actions"),c.innerHTML="";let h=c;if(o){const w=document.createElement("div");w.classList.add(SSe),c.appendChild(w),h=w}const p=n.patch;if(p&&(d=p instanceof Function?p(d):$y(d,p,!0,!1).newDocument),n.formatLocale&&ii.formatLocale(n.formatLocale),n.timeFormatLocale&&ii.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const w in n.expressionFunctions){const S=n.expressionFunctions[w];"fn"in S?ii.expressionFunction(w,S.fn,S.visitor):S instanceof Function&&ii.expressionFunction(w,S)}const{ast:g}=n,m=ii.parse(d,f==="vega-lite"?{}:i,{ast:g}),y=new(n.viewClass||ii.View)(m,fa({loader:r,logLevel:u,renderer:a},g?{expr:ii.expressionInterpreter??n.expr??age}:{}));if(y.addSignalListener("autosize",(w,S)=>{const{type:E}=S;E=="fit-x"?(h.classList.add("fit-x"),h.classList.remove("fit-y")):E=="fit-y"?(h.classList.remove("fit-x"),h.classList.add("fit-y")):E=="fit"?h.classList.add("fit-x","fit-y"):h.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const w=_Se(n.tooltip)?n.tooltip:new dEe(n.tooltip===!0?{}:n.tooltip).call;y.tooltip(w)}let{hover:v}=n;if(v===void 0&&(v=f==="vega"),v){const{hoverSet:w,updateSet:S}=typeof v=="boolean"?{}:v;y.hover(w,S)}n&&(n.width!=null&&y.width(n.width),n.height!=null&&y.height(n.height),n.padding!=null&&y.padding(n.padding)),await y.initialize(h,n.bind).runAsync();let x;if(o!==!1){let w=c;if(n.defaultStyle!==!1){const E=document.createElement("details");E.title=s.CLICK_TO_VIEW_ACTIONS,c.append(E),w=E;const _=document.createElement("summary");_.innerHTML=ESe,E.append(_),x=$=>{E.contains($.target)||E.removeAttribute("open")},document.addEventListener("click",x)}const S=document.createElement("div");if(w.append(S),S.classList.add("vega-actions"),o===!0||o.export!==!1){for(const E of["svg","png"])if(o===!0||o.export===!0||o.export[E]){const _=s[`${E.toUpperCase()}_ACTION`],$=document.createElement("a"),k=J(n.scaleFactor)?n.scaleFactor[E]:n.scaleFactor;$.text=_,$.href="#",$.target="_blank",$.download=`${l}.${E}`,$.addEventListener("mousedown",async function(A){A.preventDefault();const R=await y.toImageURL(E,k);this.href=R}),S.append($)}}if(o===!0||o.source!==!1){const E=document.createElement("a");E.text=s.SOURCE_ACTION,E.href="#",E.addEventListener("click",function(_){j5(t2(t),n.sourceHeader??"",n.sourceFooter??"",f),_.preventDefault()}),S.append(E)}if(f==="vega-lite"&&(o===!0||o.compiled!==!1)){const E=document.createElement("a");E.text=s.COMPILED_ACTION,E.href="#",E.addEventListener("click",function(_){j5(t2(d),n.sourceHeader??"",n.sourceFooter??"","vega"),_.preventDefault()}),S.append(E)}if(o===!0||o.editor!==!1){const E=n.editorUrl??"https://vega.github.io/editor/",_=document.createElement("a");_.text=s.EDITOR_ACTION,_.href="#",_.addEventListener("click",function($){mSe(window,E,{config:i,mode:f,renderer:a,spec:t2(t)}),$.preventDefault()}),S.append(_)}}function b(){x&&document.removeEventListener("click",x),y.finalize()}return{view:y,spec:t,vgSpec:d,finalize:b,embedOptions:n}}function MSe(e){return!!e&&{}.toString.call(e)==="[object Function]"}function NSe(e,t,n){n&&(MSe(n)?n(e.data(t)):e.change(t,ii.changeset().remove(()=>!0).insert(n)))}function OSe(e,t){Object.keys(t).forEach(n=>{NSe(e,n,t[n])})}function IW(e){const t=new Set;return e.forEach(n=>{Object.keys(n).forEach(r=>{t.add(r)})}),t}const BW=()=>{};function $b(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.addSignalListener(r,t[r])}catch(i){console.warn("Cannot add invalid signal listener.",i)}}),n.length>0}function DSe(e,t){if(e===t)return!1;const n={width:!1,height:!1,isExpensive:!1},r=IW([e,t]);return r.has("width")&&(!("width"in e)||!("width"in t)||e.width!==t.width)&&("width"in e&&typeof e.width=="number"?n.width=e.width:n.isExpensive=!0),r.has("height")&&(!("height"in e)||!("height"in t)||e.height!==t.height)&&("height"in e&&typeof e.height=="number"?n.height=e.height:n.isExpensive=!0),r.delete("width"),r.delete("height"),[...r].some(i=>!(i in e)||!(i in t)||!pB(e[i],t[i]))&&(n.isExpensive=!0),n.width!==!1||n.height!==!1||n.isExpensive?n:!1}function q5(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.removeSignalListener(r,t[r])}catch(i){console.warn("Cannot remove invalid signal listener.",i)}}),n.length>0}function Cb(e){const{spec:t,width:n,height:r}=e;return typeof n<"u"&&typeof r<"u"?{...t,width:n,height:r}:typeof n<"u"?{...t,width:n}:typeof r<"u"?{...t,height:r}:t}function rh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class jW extends Xo.PureComponent{constructor(){super(...arguments),rh(this,"containerRef",Xo.createRef()),rh(this,"resultPromise",void 0),rh(this,"handleError",t=>{const{onError:n=BW}=this.props;n(t,this.containerRef.current),console.warn(t)}),rh(this,"modifyView",t=>{this.resultPromise&&this.resultPromise.then(n=>(n&&t(n.view),!0)).catch(this.handleError)})}componentDidMount(){this.createView()}componentDidUpdate(t){const n=IW([this.props,t]);if(n.delete("className"),n.delete("signalListeners"),n.delete("spec"),n.delete("style"),n.delete("width"),n.delete("height"),Array.from(n).some(r=>this.props[r]!==t[r]))this.clearView(),this.createView();else{const r=DSe(Cb(this.props),Cb(t)),{signalListeners:i}=this.props,{signalListeners:o}=t;if(r)if(r.isExpensive)this.clearView(),this.createView();else{const s=!ww(i,o);this.modifyView(a=>{r.width!==!1&&a.width(r.width),r.height!==!1&&a.height(r.height),s&&(o&&q5(a,o),i&&$b(a,i)),a.run()})}else ww(i,o)||this.modifyView(s=>{o&&q5(s,o),i&&$b(s,i),s.run()})}}componentWillUnmount(){this.clearView()}createView(){const{spec:t,onNewView:n,signalListeners:r={},width:i,height:o,...s}=this.props;if(this.containerRef.current){const a=Cb(this.props);this.resultPromise=ASe(this.containerRef.current,a,s).then(u=>{if(u){const{view:l}=u;$b(l,r)&&l.run()}return u}).catch(this.handleError),n&&this.modifyView(n)}}clearView(){return this.resultPromise&&this.resultPromise.then(t=>{t&&t.finalize()}).catch(this.handleError),this.resultPromise=void 0,this}render(){const{className:t,style:n}=this.props;return Xo.createElement("div",{ref:this.containerRef,className:t,style:n})}}rh(jW,"propTypes",{className:mT.string,onError:mT.func});function DS(){return DS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},DS.apply(this,arguments)}function RS(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const RSe={};class oF extends Xo.PureComponent{constructor(){super(...arguments),RS(this,"vegaEmbed",Xo.createRef()),RS(this,"handleNewView",t=>{this.update();const{onNewView:n=BW}=this.props;n(t)})}componentDidMount(){this.update()}componentDidUpdate(t){ww(this.props.data,t.data)||this.update()}update(){const{data:t}=this.props;this.vegaEmbed.current&&t&&Object.keys(t).length>0&&this.vegaEmbed.current.modifyView(n=>{OSe(n,t),n.resize().run()})}render(){const{data:t,...n}=this.props;return Xo.createElement(jW,DS({ref:this.vegaEmbed},n,{onNewView:this.handleNewView}))}}RS(oF,"defaultProps",{data:RSe});function PS(){return PS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},PS.apply(this,arguments)}function PSe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function LSe(e){let{mode:t,spec:n}=e;class r extends Xo.PureComponent{render(){return Xo.createElement(oF,PS({mode:t,spec:n},this.props))}}return PSe(r,"getSpec",function(){return n}),r}const zSe={$schema:"https://vega.github.io/schema/vega/v5.json",width:500,height:200,padding:{left:5,right:5,top:5,bottom:5},signals:[{name:"tooltip",value:{},on:[{events:"rect:mouseover",update:"datum"},{events:"rect:mouseout",update:"{}"}]}],scales:[{name:"xscale",type:"band",domain:{data:"table",field:"category"},range:"width"},{name:"yscale",domain:{data:"table",field:"amount"},nice:!0,range:"height"}],axes:[{orient:"bottom",scale:"xscale"},{orient:"left",scale:"yscale"}],marks:[{type:"rect",from:{data:"table"},encode:{enter:{x:{scale:"xscale",field:"category",offset:1},width:{scale:"xscale",band:1,offset:-1},y:{scale:"yscale",field:"amount"},y2:{scale:"yscale",value:0}},update:{fill:{value:"steelblue"}},hover:{fill:{value:"red"}}}},{type:"text",encode:{enter:{align:{value:"center"},baseline:{value:"bottom"},fill:{value:"#333"}},update:{x:{scale:"xscale",signal:"tooltip.category",band:.5},y:{scale:"yscale",signal:"tooltip.amount",offset:-2},text:{signal:"tooltip.amount"},fillOpacity:[{test:"datum === tooltip",value:0},{value:1}]}}}]},ISe=[{category:"A",amount:28},{category:"B",amount:55},{category:"C",amount:43},{category:"D",amount:91},{category:"E",amount:81},{category:"F",amount:53},{category:"G",amount:19},{category:"H",amount:87}],BSe=LSe({mode:"vega",spec:{...zSe,data:[{name:"table",values:ISe}]}}),jSe={$schema:"https://vega.github.io/schema/vega/v5.json",description:"A basic line chart example.",width:500,height:200,padding:5,signals:[{name:"interpolate",value:"linear",bind:{input:"select",options:["basis","cardinal","catmull-rom","linear","monotone","natural","step","step-after","step-before"]}}],data:[{name:"table"}],scales:[{name:"x",type:"point",range:"width",domain:{data:"table",field:"x"}},{name:"y",type:"linear",range:"height",nice:!0,zero:!0,domain:{data:"table",field:"y"}},{name:"color",type:"ordinal",range:"category",domain:{data:"table",field:"c"}}],axes:[{orient:"bottom",scale:"x"},{orient:"left",scale:"y"}],marks:[{type:"group",from:{facet:{name:"series",data:"table",groupby:"c"}},marks:[{type:"line",from:{data:"series"},encode:{enter:{x:{scale:"x",field:"x"},y:{scale:"y",field:"y"},stroke:{scale:"color",field:"c"},strokeWidth:{value:2}},update:{interpolate:{signal:"interpolate"},strokeOpacity:{value:1}},hover:{strokeOpacity:{value:.5}}}}]}]},USe=[{x:0,y:28,c:0},{x:0,y:20,c:1},{x:1,y:43,c:0},{x:1,y:35,c:1},{x:2,y:81,c:0},{x:2,y:10,c:1},{x:3,y:19,c:0},{x:3,y:15,c:1},{x:4,y:52,c:0},{x:4,y:48,c:1},{x:5,y:24,c:0},{x:5,y:28,c:1},{x:6,y:87,c:0},{x:6,y:66,c:1},{x:7,y:17,c:0},{x:7,y:27,c:1},{x:8,y:68,c:0},{x:8,y:16,c:1},{x:9,y:49,c:0},{x:9,y:25,c:1}];function WSe(){return vu.jsx(oF,{spec:jSe,data:{table:USe},signalListeners:{hover:()=>{console.log("hover")}}})}function qSe(){return vu.jsxs(vu.Fragment,{children:[vu.jsx(BSe,{}),vu.jsx(WSe,{})]})}Ab.createRoot(document.getElementById("root")).render(vu.jsx(Xo.StrictMode,{children:vu.jsx(qSe,{})}))});export default HSe();
